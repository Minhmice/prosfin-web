(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,1810,e=>{"use strict";let t,n;var i=e.i(22065),r=e.i(68244),l=e.i(894),s=e.i(74769);e.i(16233);var o=e.i(21079),a=e.i(33992),u=e.i(14877),d=e.i(23490),c=e.i(87352),h=e.i(23823),f=e.i(82362),g=e.i(35893),p=e.i(90535),m=e.i(191);let _=(0,m.default)("git-compare",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]]);var y=e.i(82329),x=e.i(85511);function v(e){let t,n,r=(0,s.c)(5),{events:l}=e;if(0===l.length){let e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:"text-center text-muted-foreground text-sm py-8",children:"No activity yet"}),r[0]=e):e=r[0],e}return r[1]!==l?(t=l.map(S),r[1]=l,r[2]=t):t=r[2],r[3]!==t?(n=(0,i.jsx)("div",{className:"space-y-4",children:t}),r[3]=t,r[4]=n):n=r[4],n}function S(e){return(0,i.jsx)("div",{className:"flex items-start gap-3 border-b pb-4 last:border-0",children:(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("p",{className:"font-medium text-sm",children:e.title}),e.description&&(0,i.jsx)("p",{className:"text-muted-foreground text-xs mt-1",children:e.description}),(0,i.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[e.actor&&(0,i.jsx)("span",{className:"text-muted-foreground text-xs",children:e.actor}),(0,i.jsx)("span",{className:"text-muted-foreground text-xs",children:"•"}),(0,i.jsx)("span",{className:"text-muted-foreground text-xs",children:(0,x.format)(new Date(e.timestamp),"MMM dd, yyyy HH:mm")})]})]})},e.id)}var b=e.i(16772);function C(e){let t,n,l,o,a,u,d,c,h,m,x,S,C,N,w,k,T,E=(0,s.c)(34),{post:O,formData:M,onRestorePublished:D}=e;E[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],E[0]=t):t=E[0];let[A,P]=r.useState(t),[j,F]=r.useState(!1);E[1]!==O?(n=()=>{O?.id&&(F(!0),(0,b.getPostActivity)(O.id).then(e=>{P(e),F(!1)}))},E[1]=O,E[2]=n):n=E[2];let L=O?.id;E[3]!==L?(l=[L],E[3]=L,E[4]=l):l=E[4],r.useEffect(n,l);let I=O?.status==="published"?"Published":"Draft",z=M?.updatedAt||O?.updatedAt,R=O?.publishedAt;return E[5]===Symbol.for("react.memo_cache_sentinel")?(o=(0,i.jsx)("h3",{className:"font-semibold text-sm",children:"Version Info"}),E[5]=o):o=E[5],E[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsx)("span",{className:"text-muted-foreground",children:"Viewing: "}),E[6]=a):a=E[6],E[7]!==I?(u=(0,i.jsxs)("div",{children:[a,(0,i.jsx)("span",{className:"font-medium",children:I})]}),E[7]=I,E[8]=u):u=E[8],E[9]!==z?(d=z&&(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-muted-foreground",children:"Last saved: "}),(0,i.jsx)("span",{className:"font-medium",children:(0,f.formatDistanceToNow)(new Date(z),{addSuffix:!0})})]}),E[9]=z,E[10]=d):d=E[10],E[11]!==R?(c=R&&(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-muted-foreground",children:"Last published: "}),(0,i.jsx)("span",{className:"font-medium",children:(0,f.formatDistanceToNow)(new Date(R),{addSuffix:!0})})]}),E[11]=R,E[12]=c):c=E[12],E[13]!==u||E[14]!==d||E[15]!==c?(h=(0,i.jsxs)("div",{className:"space-y-3",children:[o,(0,i.jsxs)("div",{className:"space-y-2 text-sm",children:[u,d,c]})]}),E[13]=u,E[14]=d,E[15]=c,E[16]=h):h=E[16],E[17]===Symbol.for("react.memo_cache_sentinel")?(m=(0,i.jsx)("h3",{className:"font-semibold text-sm",children:"Actions"}),E[17]=m):m=E[17],E[18]===Symbol.for("react.memo_cache_sentinel")?(x=(0,i.jsxs)(g.Button,{variant:"outline",size:"sm",className:"w-full justify-start",disabled:!0,title:"Coming in Phase 3",children:[(0,i.jsx)(_,{className:"mr-2 size-4"}),"Compare changes"]}),E[18]=x):x=E[18],E[19]!==D||E[20]!==O?.publishedAt||E[21]!==O?.status?(S=O?.status==="draft"&&O?.publishedAt&&(0,i.jsxs)(g.Button,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:D,children:[(0,i.jsx)(p.RotateCcw,{className:"mr-2 size-4"}),"Restore published → draft"]}),E[19]=D,E[20]=O?.publishedAt,E[21]=O?.status,E[22]=S):S=E[22],E[23]===Symbol.for("react.memo_cache_sentinel")?(C=(0,i.jsxs)(g.Button,{variant:"outline",size:"sm",className:"w-full justify-start",disabled:!0,title:"Coming in Phase 3",children:[(0,i.jsx)(y.Save,{className:"mr-2 size-4"}),"Save as new revision"]}),E[23]=C):C=E[23],E[24]!==S?(N=(0,i.jsxs)("div",{className:"space-y-2",children:[m,(0,i.jsxs)("div",{className:"space-y-2",children:[x,S,C]})]}),E[24]=S,E[25]=N):N=E[25],E[26]===Symbol.for("react.memo_cache_sentinel")?(w=(0,i.jsx)("h3",{className:"font-semibold text-sm",children:"Activity Log"}),E[26]=w):w=E[26],E[27]!==A||E[28]!==j?(k=(0,i.jsxs)("div",{className:"space-y-3",children:[w,j?(0,i.jsx)("div",{className:"text-center text-muted-foreground text-sm py-4",children:"Loading..."}):(0,i.jsx)(v,{events:A})]}),E[27]=A,E[28]=j,E[29]=k):k=E[29],E[30]!==h||E[31]!==N||E[32]!==k?(T=(0,i.jsxs)("div",{className:"space-y-6 p-4",children:[h,N,k]}),E[30]=h,E[31]=N,E[32]=k,E[33]=T):T=E[33],T}var N=e.i(83398);let w=(0,m.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var k=e.i(96075);function T(e,t){let n,i,l,o,a,u,d,c=(0,s.c)(47),[h,f]=r.useState(null),[g,p]=r.useState(!1);c[0]!==e||c[1]!==t?(n=()=>{e?.slug&&e?.bucket?(p(!0),(0,b.isSlugUnique)(e.slug,e.bucket,t).then(e=>{f(e),p(!1)}).catch(()=>{f(null),p(!1)})):f(null)},c[0]=e,c[1]=t,c[2]=n):n=c[2];let m=e?.slug,_=e?.bucket;if(c[3]!==t||c[4]!==m||c[5]!==_?(i=[m,_,t],c[3]=t,c[4]=m,c[5]=_,c[6]=i):i=c[6],r.useEffect(n,i),!e){let e;return c[7]===Symbol.for("react.memo_cache_sentinel")?(e={items:[],passCount:0,warningCount:0,failCount:0,canPublish:!1,hasWarnings:!1},c[7]=e):e=c[7],e}if(c[8]!==e.cover||c[9]!==e.excerpt||c[10]!==e.seoDescription?.length||c[11]!==e.seoTitle?.length||c[12]!==e.slug||c[13]!==e.title||c[14]!==g||c[15]!==h){let t,n,i,r,s,a;l=[];let u=e.title?.trim()?"pass":"fail",d=e.title?.trim()?void 0:"Title is required";c[18]!==u||c[19]!==d?(t={id:"title",label:"Title present",status:u,message:d},c[18]=u,c[19]=d,c[20]=t):t=c[20],l.push(t);let f=e.slug?.trim()&&/^[a-z0-9-]+$/.test(e.slug),p=e.slug?.trim()&&f?!1===h?"fail":!0===h?"pass":g?"warning":"pass":"fail",m=e.slug?.trim()?f?!1===h?"Slug is not unique":g?"Checking...":void 0:"Slug must contain only lowercase letters, numbers, and hyphens":"Slug is required";c[21]!==p||c[22]!==m?(n={id:"slug",label:"Slug valid + unique",status:p,message:m},c[21]=p,c[22]=m,c[23]=n):n=c[23],l.push(n);let _=e.excerpt?.trim()?"pass":"warning",y=e.excerpt?.trim()?void 0:"Excerpt is recommended";c[24]!==_||c[25]!==y?(i={id:"excerpt",label:"Excerpt present",status:_,message:y},c[24]=_,c[25]=y,c[26]=i):i=c[26],l.push(i);let x=e.cover?.trim()?"pass":"warning",v=e.cover?.trim()?void 0:"Cover image is recommended";c[27]!==x||c[28]!==v?(r={id:"cover",label:"Cover present",status:x,message:v},c[27]=x,c[28]=v,c[29]=r):r=c[29],l.push(r);let S=e.seoTitle?.length||0,b=0===S||S>60?"warning":"pass",C=0===S?"SEO title is recommended":S>60?`SEO title is ${S} characters (recommended: ≤60)`:void 0;c[30]!==b||c[31]!==C?(s={id:"seoTitle",label:"SEO title length",status:b,message:C},c[30]=b,c[31]=C,c[32]=s):s=c[32],l.push(s);let N=e.seoDescription?.length||0,w=0===N||N>160?"warning":"pass",k=0===N?"SEO description is recommended":N>160?`SEO description is ${N} characters (recommended: ≤160)`:void 0;c[33]!==w||c[34]!==k?(a={id:"seoDescription",label:"SEO description length",status:w,message:k},c[33]=w,c[34]=k,c[35]=a):a=c[35],l.push(a),o=l.filter(M),c[8]=e.cover,c[9]=e.excerpt,c[10]=e.seoDescription?.length,c[11]=e.seoTitle?.length,c[12]=e.slug,c[13]=e.title,c[14]=g,c[15]=h,c[16]=l,c[17]=o}else l=c[16],o=c[17];let y=o.length;c[36]!==l?(a=l.filter(O),c[36]=l,c[37]=a):a=c[37];let x=a.length;c[38]!==l?(u=l.filter(E),c[38]=l,c[39]=u):u=c[39];let v=u.length,S=0===v,C=x>0;return c[40]!==v||c[41]!==l||c[42]!==y||c[43]!==S||c[44]!==C||c[45]!==x?(d={items:l,passCount:y,warningCount:x,failCount:v,canPublish:S,hasWarnings:C},c[40]=v,c[41]=l,c[42]=y,c[43]=S,c[44]=C,c[45]=x,c[46]=d):d=c[46],d}function E(e){return"fail"===e.status}function O(e){return"warning"===e.status}function M(e){return"pass"===e.status}function D(e){let t,n,r,l,o,a,u,c=(0,s.c)(19),{formData:h,postId:f}=e,g=T(h,f);if(!h)return null;if(c[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("h3",{className:"font-semibold text-sm",children:"Content Checklist"}),c[0]=t):t=c[0],c[1]!==g.items.length||c[2]!==g.passCount?(n=(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[t,(0,i.jsxs)(d.Badge,{variant:"secondary",className:"text-xs",children:[g.passCount,"/",g.items.length]})]}),c[1]=g.items.length,c[2]=g.passCount,c[3]=n):n=c[3],c[4]!==g.items){let e;c[6]===Symbol.for("react.memo_cache_sentinel")?(e=e=>(0,i.jsxs)("div",{className:"flex items-start gap-2 text-sm",children:[function(e){switch(e){case"pass":return(0,i.jsx)(N.CheckCircle2,{className:"size-4 text-green-600"});case"warning":return(0,i.jsx)(k.AlertCircle,{className:"size-4 text-yellow-600"});case"fail":return(0,i.jsx)(w,{className:"size-4 text-red-600"})}}(e.status),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("div",{className:"font-medium",children:e.label}),e.message&&(0,i.jsx)("div",{className:"text-muted-foreground text-xs mt-0.5",children:e.message})]})]},e.id),c[6]=e):e=c[6],r=g.items.map(e),c[4]=g.items,c[5]=r}else r=c[5];return c[7]!==r?(l=(0,i.jsx)("div",{className:"space-y-2",children:r}),c[7]=r,c[8]=l):l=c[8],c[9]!==g.failCount?(o=g.failCount>0&&(0,i.jsxs)("div",{className:"rounded-md border border-red-200 bg-red-50 p-2 text-red-800 text-xs",children:[g.failCount," issue",g.failCount>1?"s":""," must be fixed before publishing"]}),c[9]=g.failCount,c[10]=o):o=c[10],c[11]!==g.failCount||c[12]!==g.warningCount?(a=0===g.failCount&&g.warningCount>0&&(0,i.jsxs)("div",{className:"rounded-md border border-yellow-200 bg-yellow-50 p-2 text-yellow-800 text-xs",children:[g.warningCount," warning",g.warningCount>1?"s":""," - review before publishing"]}),c[11]=g.failCount,c[12]=g.warningCount,c[13]=a):a=c[13],c[14]!==n||c[15]!==l||c[16]!==o||c[17]!==a?(u=(0,i.jsxs)("div",{className:"space-y-3",children:[n,l,o,a]}),c[14]=n,c[15]=l,c[16]=o,c[17]=a,c[18]=u):u=c[18],u}let A=[{value:"insights",label:"Insights"},{value:"resources",label:"Resources"},{value:"knowledge",label:"Knowledge"}],P=[{value:"draft",label:"Draft"},{value:"published",label:"Published"},{value:"scheduled",label:"Scheduled"},{value:"archived",label:"Archived"}];function j(e){let t,n,l,f,g,p,m,_,y,x,v,S,b,N,w,k,T,E,O,M,j,z,R,B,K,W,U,J,$,V,H,q,Y,G,X,Z,Q,ee,et,en,ei,er,el,es,eo,ea,eu,ed,ec,eh,ef,eg,ep,em,e_,ey,ex,ev,eS,eb,eC,eN,ew,ek,eT,eE,eO,eM=(0,s.c)(152),{post:eD,formData:eA,onFormDataChange:eP}=e;eM[0]!==eD?(t=eD?{title:eD.title,slug:eD.slug,bucket:eD.bucket,excerpt:eD.excerpt,cover:eD.cover,tags:eD.tags,content:eD.content,seoTitle:eD.seoTitle,seoDescription:eD.seoDescription,canonical:eD.canonical,noindex:eD.noindex,status:eD.status,scheduledFor:eD.scheduledFor}:{title:"",slug:"",bucket:"insights",excerpt:"",cover:"",tags:[],content:{root:{children:[],direction:"ltr",format:"",indent:0,type:"root",version:1}},status:"draft"},eM[0]=eD,eM[1]=t):t=eM[1];let[ej,eF]=r.useState(t);eM[2]!==eA?(n=()=>{eA&&eF(eA)},l=[eA],eM[2]=eA,eM[3]=n,eM[4]=l):(n=eM[3],l=eM[4]),r.useEffect(n,l),eM[5]!==ej||eM[6]!==eP?(f=(e,t)=>{let n={...ej,[e]:t};eF(n),eP(n)},eM[5]=ej,eM[6]=eP,eM[7]=f):f=eM[7];let eL=f;eM[8]!==ej.slug||eM[9]!==eD||eM[10]!==eL?(g=e=>{eL("title",e),eD&&ej.slug||eL("slug",function(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}(e))},eM[8]=ej.slug,eM[9]=eD,eM[10]=eL,eM[11]=g):g=eM[11];let eI=g;eM[12]!==ej.tags||eM[13]!==eL?(p=e=>{e.trim()&&!ej.tags?.includes(e.trim())&&eL("tags",[...ej.tags||[],e.trim()])},eM[12]=ej.tags,eM[13]=eL,eM[14]=p):p=eM[14];let ez=p;eM[15]!==ej.tags||eM[16]!==eL?(m=e=>{eL("tags",ej.tags?.filter(t=>t!==e)||[])},eM[15]=ej.tags,eM[16]=eL,eM[17]=m):m=eM[17];let eR=m;eM[18]===Symbol.for("react.memo_cache_sentinel")?(_=(0,i.jsxs)(h.TabsList,{className:"mx-4 mt-4",children:[(0,i.jsx)(h.TabsTrigger,{value:"metadata",children:"Metadata"}),(0,i.jsx)(h.TabsTrigger,{value:"versions",children:"Versions"})]}),eM[18]=_):_=eM[18];let eB=eD?.id;eM[19]!==eA||eM[20]!==eB?(y=(0,i.jsx)("div",{className:"rounded-md border bg-background p-4",children:(0,i.jsx)(D,{formData:eA,postId:eB})}),eM[19]=eA,eM[20]=eB,eM[21]=y):y=eM[21],eM[22]===Symbol.for("react.memo_cache_sentinel")?(x=(0,i.jsx)(c.Separator,{}),eM[22]=x):x=eM[22],eM[23]===Symbol.for("react.memo_cache_sentinel")?(v=(0,i.jsx)("h3",{className:"font-semibold",children:"Basic Information"}),eM[23]=v):v=eM[23],eM[24]===Symbol.for("react.memo_cache_sentinel")?(S=(0,i.jsx)(a.Label,{htmlFor:"title",children:"Title *"}),eM[24]=S):S=eM[24];let eK=ej.title||"";eM[25]!==eI?(b=e=>eI(e.target.value),eM[25]=eI,eM[26]=b):b=eM[26],eM[27]!==eK||eM[28]!==b?(N=(0,i.jsxs)("div",{className:"space-y-2",children:[S,(0,i.jsx)(o.Input,{id:"title",value:eK,onChange:b,placeholder:"Enter post title"})]}),eM[27]=eK,eM[28]=b,eM[29]=N):N=eM[29],eM[30]===Symbol.for("react.memo_cache_sentinel")?(w=(0,i.jsx)(a.Label,{htmlFor:"slug",children:"Slug *"}),eM[30]=w):w=eM[30];let eW=ej.slug||"";eM[31]!==eL?(k=e=>eL("slug",e.target.value),eM[31]=eL,eM[32]=k):k=eM[32],eM[33]!==eW||eM[34]!==k?(T=(0,i.jsx)(o.Input,{id:"slug",value:eW,onChange:k,placeholder:"post-slug"}),eM[33]=eW,eM[34]=k,eM[35]=T):T=eM[35],eM[36]===Symbol.for("react.memo_cache_sentinel")?(E=(0,i.jsx)("p",{className:"text-xs text-muted-foreground",children:"URL-friendly version of the title"}),eM[36]=E):E=eM[36],eM[37]!==T?(O=(0,i.jsxs)("div",{className:"space-y-2",children:[w,T,E]}),eM[37]=T,eM[38]=O):O=eM[38],eM[39]===Symbol.for("react.memo_cache_sentinel")?(M=(0,i.jsx)(a.Label,{htmlFor:"bucket",children:"Content Bucket"}),eM[39]=M):M=eM[39];let eU=ej.bucket||"insights";eM[40]!==eL?(j=e=>eL("bucket",e.target.value),eM[40]=eL,eM[41]=j):j=eM[41],eM[42]===Symbol.for("react.memo_cache_sentinel")?(z=A.map(L),eM[42]=z):z=eM[42],eM[43]!==eU||eM[44]!==j?(R=(0,i.jsxs)("div",{className:"space-y-2",children:[M,(0,i.jsx)("select",{id:"bucket",value:eU,onChange:j,className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring",children:z})]}),eM[43]=eU,eM[44]=j,eM[45]=R):R=eM[45],eM[46]===Symbol.for("react.memo_cache_sentinel")?(B=(0,i.jsx)(a.Label,{htmlFor:"excerpt",children:"Excerpt"}),eM[46]=B):B=eM[46];let eJ=ej.excerpt||"";eM[47]!==eL?(K=e=>eL("excerpt",e.target.value),eM[47]=eL,eM[48]=K):K=eM[48],eM[49]!==eJ||eM[50]!==K?(W=(0,i.jsxs)("div",{className:"space-y-2",children:[B,(0,i.jsx)(u.Textarea,{id:"excerpt",value:eJ,onChange:K,placeholder:"Brief description of the post",rows:3})]}),eM[49]=eJ,eM[50]=K,eM[51]=W):W=eM[51],eM[52]===Symbol.for("react.memo_cache_sentinel")?(U=(0,i.jsx)(a.Label,{htmlFor:"cover",children:"Cover Image URL"}),eM[52]=U):U=eM[52];let e$=ej.cover||"";eM[53]!==eL?(J=e=>eL("cover",e.target.value),eM[53]=eL,eM[54]=J):J=eM[54],eM[55]!==e$||eM[56]!==J?($=(0,i.jsxs)("div",{className:"space-y-2",children:[U,(0,i.jsx)(o.Input,{id:"cover",value:e$,onChange:J,placeholder:"https://example.com/image.jpg"})]}),eM[55]=e$,eM[56]=J,eM[57]=$):$=eM[57],eM[58]!==N||eM[59]!==O||eM[60]!==R||eM[61]!==W||eM[62]!==$?(V=(0,i.jsxs)("div",{className:"space-y-4",children:[v,N,O,R,W,$]}),eM[58]=N,eM[59]=O,eM[60]=R,eM[61]=W,eM[62]=$,eM[63]=V):V=eM[63],eM[64]===Symbol.for("react.memo_cache_sentinel")?(H=(0,i.jsx)(c.Separator,{}),eM[64]=H):H=eM[64],eM[65]===Symbol.for("react.memo_cache_sentinel")?(q=(0,i.jsx)("h3",{className:"font-semibold",children:"Tags"}),eM[65]=q):q=eM[65],eM[66]!==ej.tags||eM[67]!==eR?(Y=ej.tags?.map(e=>(0,i.jsxs)(d.Badge,{variant:"secondary",className:"cursor-pointer",onClick:()=>eR(e),children:[e," ×"]},e)),eM[66]=ej.tags,eM[67]=eR,eM[68]=Y):Y=eM[68],eM[69]!==Y?(G=(0,i.jsx)("div",{className:"flex flex-wrap gap-2",children:Y}),eM[69]=Y,eM[70]=G):G=eM[70],eM[71]!==ez?(X=(0,i.jsx)("div",{className:"flex gap-2",children:(0,i.jsx)(o.Input,{placeholder:"Add tag",onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),ez(e.currentTarget.value),e.currentTarget.value="")}})}),eM[71]=ez,eM[72]=X):X=eM[72],eM[73]!==G||eM[74]!==X?(Z=(0,i.jsxs)("div",{className:"space-y-4",children:[q,G,X]}),eM[73]=G,eM[74]=X,eM[75]=Z):Z=eM[75],eM[76]===Symbol.for("react.memo_cache_sentinel")?(Q=(0,i.jsx)(c.Separator,{}),eM[76]=Q):Q=eM[76],eM[77]===Symbol.for("react.memo_cache_sentinel")?(ee=(0,i.jsx)("h3",{className:"font-semibold",children:"Status"}),eM[77]=ee):ee=eM[77];let eV=ej.status||"draft";eM[78]!==ej.status||eM[79]!==eD||eM[80]!==eL?(et=e=>{let t=e.target.value;"scheduled"===ej.status&&"draft"===t&&eD?(eL("status",t),eL("scheduledFor",void 0)):eL("status",t)},eM[78]=ej.status,eM[79]=eD,eM[80]=eL,eM[81]=et):et=eM[81],eM[82]===Symbol.for("react.memo_cache_sentinel")?(en=P.map(F),eM[82]=en):en=eM[82],eM[83]!==eV||eM[84]!==et?(ei=(0,i.jsx)("select",{value:eV,onChange:et,className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring",children:en}),eM[83]=eV,eM[84]=et,eM[85]=ei):ei=eM[85],eM[86]!==ej.scheduledFor||eM[87]!==ej.status||eM[88]!==eL?(er="scheduled"===ej.status&&ej.scheduledFor&&(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(a.Label,{htmlFor:"scheduledFor",children:"Schedule For"}),(0,i.jsx)(o.Input,{id:"scheduledFor",type:"datetime-local",value:ej.scheduledFor?new Date(ej.scheduledFor).toISOString().slice(0,16):"",onChange:e=>eL("scheduledFor",e.target.value?new Date(e.target.value).toISOString():void 0)}),(0,i.jsx)("p",{className:"text-muted-foreground text-xs",children:"Changes to slug/SEO will be applied when the post is published."})]}),eM[86]=ej.scheduledFor,eM[87]=ej.status,eM[88]=eL,eM[89]=er):er=eM[89],eM[90]!==ej.scheduledFor||eM[91]!==ej.status?(el="scheduled"===ej.status&&!ej.scheduledFor&&(0,i.jsx)("div",{className:"rounded-md border border-yellow-200 bg-yellow-50 p-2 text-yellow-800 text-xs",children:"Scheduled but no date set. Please reschedule."}),eM[90]=ej.scheduledFor,eM[91]=ej.status,eM[92]=el):el=eM[92],eM[93]!==ei||eM[94]!==er||eM[95]!==el?(es=(0,i.jsxs)("div",{className:"space-y-4",children:[ee,ei,er,el]}),eM[93]=ei,eM[94]=er,eM[95]=el,eM[96]=es):es=eM[96],eM[97]===Symbol.for("react.memo_cache_sentinel")?(eo=(0,i.jsx)(c.Separator,{}),eM[97]=eo):eo=eM[97],eM[98]===Symbol.for("react.memo_cache_sentinel")?(ea=(0,i.jsx)("h3",{className:"font-semibold",children:"SEO Settings"}),eM[98]=ea):ea=eM[98],eM[99]===Symbol.for("react.memo_cache_sentinel")?(eu=(0,i.jsx)(a.Label,{htmlFor:"seoTitle",children:"SEO Title"}),eM[99]=eu):eu=eM[99];let eH=ej.seoTitle||"";eM[100]!==eL?(ed=e=>eL("seoTitle",e.target.value),eM[100]=eL,eM[101]=ed):ed=eM[101],eM[102]!==eH||eM[103]!==ed?(ec=(0,i.jsx)(o.Input,{id:"seoTitle",value:eH,onChange:ed,placeholder:"Custom title for search engines"}),eM[102]=eH,eM[103]=ed,eM[104]=ec):ec=eM[104];let eq=ej.seoTitle?.length||0;eM[105]!==eq?(eh=(0,i.jsxs)("p",{className:"text-xs text-muted-foreground",children:[eq,"/60 characters"]}),eM[105]=eq,eM[106]=eh):eh=eM[106],eM[107]!==ec||eM[108]!==eh?(ef=(0,i.jsxs)("div",{className:"space-y-2",children:[eu,ec,eh]}),eM[107]=ec,eM[108]=eh,eM[109]=ef):ef=eM[109],eM[110]===Symbol.for("react.memo_cache_sentinel")?(eg=(0,i.jsx)(a.Label,{htmlFor:"seoDescription",children:"SEO Description"}),eM[110]=eg):eg=eM[110];let eY=ej.seoDescription||"";eM[111]!==eL?(ep=e=>eL("seoDescription",e.target.value),eM[111]=eL,eM[112]=ep):ep=eM[112],eM[113]!==eY||eM[114]!==ep?(em=(0,i.jsx)(u.Textarea,{id:"seoDescription",value:eY,onChange:ep,placeholder:"Meta description for search engines",rows:3}),eM[113]=eY,eM[114]=ep,eM[115]=em):em=eM[115];let eG=ej.seoDescription?.length||0;eM[116]!==eG?(e_=(0,i.jsxs)("p",{className:"text-xs text-muted-foreground",children:[eG,"/160 characters"]}),eM[116]=eG,eM[117]=e_):e_=eM[117],eM[118]!==em||eM[119]!==e_?(ey=(0,i.jsxs)("div",{className:"space-y-2",children:[eg,em,e_]}),eM[118]=em,eM[119]=e_,eM[120]=ey):ey=eM[120],eM[121]===Symbol.for("react.memo_cache_sentinel")?(ex=(0,i.jsx)(a.Label,{htmlFor:"canonical",children:"Canonical URL"}),eM[121]=ex):ex=eM[121];let eX=ej.canonical||"";eM[122]!==eL?(ev=e=>eL("canonical",e.target.value),eM[122]=eL,eM[123]=ev):ev=eM[123],eM[124]!==eX||eM[125]!==ev?(eS=(0,i.jsxs)("div",{className:"space-y-2",children:[ex,(0,i.jsx)(o.Input,{id:"canonical",value:eX,onChange:ev,placeholder:"https://example.com/canonical-url"})]}),eM[124]=eX,eM[125]=ev,eM[126]=eS):eS=eM[126];let eZ=ej.noindex||!1;return eM[127]!==eL?(eb=e=>eL("noindex",e.target.checked),eM[127]=eL,eM[128]=eb):eb=eM[128],eM[129]!==eZ||eM[130]!==eb?(eC=(0,i.jsx)("input",{type:"checkbox",id:"noindex",checked:eZ,onChange:eb,className:"size-4 rounded border-input"}),eM[129]=eZ,eM[130]=eb,eM[131]=eC):eC=eM[131],eM[132]===Symbol.for("react.memo_cache_sentinel")?(eN=(0,i.jsx)(a.Label,{htmlFor:"noindex",className:"cursor-pointer",children:"Noindex (prevent search engines from indexing)"}),eM[132]=eN):eN=eM[132],eM[133]!==eC?(ew=(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[eC,eN]}),eM[133]=eC,eM[134]=ew):ew=eM[134],eM[135]!==ef||eM[136]!==ey||eM[137]!==eS||eM[138]!==ew?(ek=(0,i.jsxs)("div",{className:"space-y-4",children:[ea,ef,ey,eS,ew]}),eM[135]=ef,eM[136]=ey,eM[137]=eS,eM[138]=ew,eM[139]=ek):ek=eM[139],eM[140]!==y||eM[141]!==V||eM[142]!==Z||eM[143]!==es||eM[144]!==ek?(eT=(0,i.jsx)(h.TabsContent,{value:"metadata",className:"flex-1 overflow-y-auto",children:(0,i.jsxs)("div",{className:"space-y-6 p-6",children:[y,x,V,H,Z,Q,es,eo,ek]})}),eM[140]=y,eM[141]=V,eM[142]=Z,eM[143]=es,eM[144]=ek,eM[145]=eT):eT=eM[145],eM[146]!==eA||eM[147]!==eD?(eE=(0,i.jsx)(h.TabsContent,{value:"versions",className:"flex-1 overflow-y-auto",children:(0,i.jsx)(C,{post:eD,formData:eA,onRestorePublished:I})}),eM[146]=eA,eM[147]=eD,eM[148]=eE):eE=eM[148],eM[149]!==eT||eM[150]!==eE?(eO=(0,i.jsx)("div",{className:"flex h-full flex-col overflow-hidden",children:(0,i.jsxs)(h.Tabs,{defaultValue:"metadata",className:"flex h-full flex-col",children:[_,eT,eE]})}),eM[149]=eT,eM[150]=eE,eM[151]=eO):eO=eM[151],eO}function F(e){return(0,i.jsx)("option",{value:e.value,children:e.label},e.value)}function L(e){return(0,i.jsx)("option",{value:e.value,children:e.label},e.value)}async function I(){console.log("Restore published to draft")}let z=(0,m.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var R=e.i(37200),B=e.i(24720),K=e.i(98586);let W=(0,m.default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var U=e.i(70144),J=e.i(2947);let $=(0,m.default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);var V=e.i(12126),H=e.i(55510);function q({post:e,formData:t,hasUnsavedChanges:n,isSaving:s,isSaved:o,lastSavedAt:a,onSave:u,onPublish:h,onSchedule:m,onUnpublish:_,onArchive:x,onRestore:v,onReschedule:S,onPublishNow:b,onCancelSchedule:C,onUpdatePublished:w,onUnsavedChangesChange:E,showChecklist:O=!1}){(0,l.useRouter)();let M=e?.status||t?.status||"draft",D=T(t,e?.id);r.useEffect(()=>{let e=e=>{n&&(e.preventDefault(),e.returnValue="")};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[n]);let A=async()=>{t&&(await u(),E?.(!1))},P=()=>{if(!t)return;let n=t.slug||e?.slug,i=t.bucket||e?.bucket;n&&i?window.open(`/api/draft?secret=your-secret-token&slug=${n}&bucket=${i}`,"_blank"):H.showToast.error("Slug and bucket are required for preview")},j=async()=>{t&&await h?.()},F=()=>{S?.()},L=async()=>{confirm("Are you sure you want to unpublish this post? It will be set to draft.")&&await _?.()},I=async()=>{confirm("Are you sure you want to archive this post? It will be hidden from public view.")&&await x?.()},q=async()=>{await v?.()},Y=r.useMemo(()=>{if(!a)return null;try{return(0,f.formatDistanceToNow)(new Date(a),{addSuffix:!0})}catch{return null}},[a]),G=r.useMemo(()=>{if("scheduled"!==M||!e?.scheduledFor)return null;try{let t=new Date(e.scheduledFor),n=new Date;if(t<=n)return"Ready to publish";return`Publishes ${(0,f.formatDistanceToNow)(t,{addSuffix:!0})}`}catch{return null}},[M,e?.scheduledFor]);return(0,i.jsx)("div",{className:"border-b bg-background",children:(0,i.jsxs)("div",{className:"flex h-14 items-center justify-between px-6",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)(V.default,{href:"/content",children:(0,i.jsx)(g.Button,{variant:"ghost",size:"icon",children:(0,i.jsx)(B.ArrowLeft,{className:"size-4"})})}),(0,i.jsx)(c.Separator,{orientation:"vertical",className:"h-6"}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[o&&(0,i.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,i.jsx)(N.CheckCircle2,{className:"size-4 text-green-600"}),(0,i.jsx)("span",{children:"Saved"})]}),n&&!o&&(0,i.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,i.jsx)(K.Clock,{className:"size-4"}),(0,i.jsx)("span",{children:"Unsaved changes"})]}),!n&&Y&&(0,i.jsx)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:(0,i.jsxs)("span",{children:["Last saved ",Y]})}),G&&(0,i.jsxs)("div",{className:"flex items-center gap-2 text-sm text-blue-600",children:[(0,i.jsx)(R.Calendar,{className:"size-4"}),(0,i.jsx)("span",{children:G})]})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[t&&(0,i.jsxs)("div",{className:"group relative mr-2",children:[D.failCount>0?(0,i.jsxs)(d.Badge,{variant:"destructive",className:"cursor-help",children:[(0,i.jsx)(k.AlertCircle,{className:"mr-1 size-3"}),D.failCount," issue",D.failCount>1?"s":""]}):D.warningCount>0?(0,i.jsxs)(d.Badge,{variant:"secondary",className:"cursor-help",children:[(0,i.jsx)(k.AlertCircle,{className:"mr-1 size-3"}),D.warningCount," warning",D.warningCount>1?"s":""]}):(0,i.jsxs)(d.Badge,{variant:"secondary",className:"cursor-help",children:[(0,i.jsx)(N.CheckCircle2,{className:"mr-1 size-3"}),"All checks pass"]}),O&&(0,i.jsx)("div",{className:"invisible absolute right-0 top-full z-10 mt-2 w-64 rounded-md border bg-popover p-3 text-sm shadow-lg group-hover:visible",children:(0,i.jsx)("div",{className:"space-y-1",children:D.items.map(e=>(0,i.jsxs)("div",{className:"flex items-center gap-2",children:["pass"===e.status&&(0,i.jsx)(N.CheckCircle2,{className:"size-3 text-green-600"}),"warning"===e.status&&(0,i.jsx)(k.AlertCircle,{className:"size-3 text-yellow-600"}),"fail"===e.status&&(0,i.jsx)(k.AlertCircle,{className:"size-3 text-red-600"}),(0,i.jsx)("span",{className:"fail"===e.status?"font-medium":"",children:e.label})]},e.id))})})]}),"draft"===M&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(g.Button,{variant:"outline",onClick:A,disabled:s||!n,children:[(0,i.jsx)(y.Save,{className:"mr-2 size-4"}),s?"Saving...":"Save Draft"]}),(0,i.jsxs)(g.Button,{variant:"outline",onClick:P,disabled:!t?.slug,children:[(0,i.jsx)(z,{className:"mr-2 size-4"}),"Preview Draft"]}),(0,i.jsxs)(g.Button,{variant:"outline",onClick:F,children:[(0,i.jsx)(R.Calendar,{className:"mr-2 size-4"}),"Schedule"]}),(0,i.jsxs)(g.Button,{onClick:j,disabled:s||!t||!D.canPublish,title:D.canPublish?void 0:"Fix required issues before publishing",children:[(0,i.jsx)(W,{className:"mr-2 size-4"}),"Publish"]})]}),"scheduled"===M&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(g.Button,{variant:"outline",onClick:A,disabled:s||!n,children:[(0,i.jsx)(y.Save,{className:"mr-2 size-4"}),s?"Saving...":"Save"]}),(0,i.jsxs)(g.Button,{variant:"outline",onClick:P,disabled:!t?.slug,children:[(0,i.jsx)(z,{className:"mr-2 size-4"}),"Preview Draft"]}),(0,i.jsxs)(g.Button,{variant:"outline",onClick:F,children:[(0,i.jsx)(R.Calendar,{className:"mr-2 size-4"}),"Reschedule"]}),(0,i.jsxs)(g.Button,{variant:"outline",onClick:b,children:[(0,i.jsx)($,{className:"mr-2 size-4"}),"Publish Now"]}),(0,i.jsxs)(g.Button,{variant:"outline",onClick:C,children:[(0,i.jsx)(J.X,{className:"mr-2 size-4"}),"Cancel Schedule"]})]}),"published"===M&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(g.Button,{variant:"outline",onClick:A,disabled:s||!n,children:[(0,i.jsx)(y.Save,{className:"mr-2 size-4"}),s?"Saving...":"Save"]}),(0,i.jsxs)(g.Button,{variant:"outline",onClick:()=>{if(!e||"published"!==e.status)return;let t=e.bucket,n=e.slug;window.open(`/${t}/${n}`,"_blank")},children:[(0,i.jsx)(z,{className:"mr-2 size-4"}),"Preview Published"]}),(0,i.jsxs)(g.Button,{variant:"outline",onClick:w,children:[(0,i.jsx)(W,{className:"mr-2 size-4"}),"Update Published"]}),(0,i.jsx)(g.Button,{variant:"outline",onClick:L,children:"Unpublish"}),(0,i.jsxs)(g.Button,{variant:"outline",onClick:I,children:[(0,i.jsx)(U.Archive,{className:"mr-2 size-4"}),"Archive"]})]}),"archived"===M&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(g.Button,{variant:"outline",onClick:P,disabled:!t?.slug,children:[(0,i.jsx)(z,{className:"mr-2 size-4"}),"Preview Draft"]}),(0,i.jsxs)(g.Button,{onClick:q,children:[(0,i.jsx)(p.RotateCcw,{className:"mr-2 size-4"}),"Restore"]})]})]})]})})}var Y=e.i(39779),G=e.i(19798);function X(e){let t,n,l,o,u,d,c,h,f,p,m,_,y,x,v,S,b,C=(0,s.c)(36),{open:N,onOpenChange:w,onConfirm:k}=e,[T,E]=r.useState("update");C[0]!==T||C[1]!==k||C[2]!==w?(t=()=>{k(T),w(!1)},C[0]=T,C[1]=k,C[2]=w,C[3]=t):t=C[3];let O=t;C[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsxs)(Y.DialogHeader,{children:[(0,i.jsx)(Y.DialogTitle,{children:"Edit Published Post"}),(0,i.jsx)(Y.DialogDescription,{children:"Choose how you want to handle changes to this published post."})]}),C[4]=n):n=C[4],C[5]===Symbol.for("react.memo_cache_sentinel")?(l=e=>E(e),C[5]=l):l=C[5];let M="update"===T;C[6]===Symbol.for("react.memo_cache_sentinel")?(o=()=>E("update"),C[6]=o):o=C[6],C[7]!==M?(u=(0,i.jsx)("input",{type:"radio",id:"update",value:"update",checked:M,onChange:o,className:"size-4"}),C[7]=M,C[8]=u):u=C[8],C[9]===Symbol.for("react.memo_cache_sentinel")?(d=(0,i.jsxs)(a.Label,{htmlFor:"update",className:"flex-1 cursor-pointer",children:[(0,i.jsx)("div",{className:"font-medium",children:"Update published immediately"}),(0,i.jsx)("div",{className:"text-muted-foreground text-sm",children:"Changes will be live on the published version right away."})]}),C[9]=d):d=C[9],C[10]!==u?(c=(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[u,d]}),C[10]=u,C[11]=c):c=C[11];let D="draft"===T;return C[12]===Symbol.for("react.memo_cache_sentinel")?(h=()=>E("draft"),C[12]=h):h=C[12],C[13]!==D?(f=(0,i.jsx)("input",{type:"radio",id:"draft",value:"draft",checked:D,onChange:h,className:"size-4"}),C[13]=D,C[14]=f):f=C[14],C[15]===Symbol.for("react.memo_cache_sentinel")?(p=(0,i.jsxs)(a.Label,{htmlFor:"draft",className:"flex-1 cursor-pointer",children:[(0,i.jsx)("div",{className:"font-medium",children:"Create draft revision"}),(0,i.jsx)("div",{className:"text-muted-foreground text-sm",children:"Create a new draft version. You can review and publish it later."})]}),C[15]=p):p=C[15],C[16]!==f?(m=(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[f,p]}),C[16]=f,C[17]=m):m=C[17],C[18]!==T||C[19]!==m||C[20]!==c?(_=(0,i.jsx)("div",{className:"grid gap-4 py-4",children:(0,i.jsxs)(G.RadioGroup,{value:T,onValueChange:l,children:[c,m]})}),C[18]=T,C[19]=m,C[20]=c,C[21]=_):_=C[21],C[22]!==w?(y=(0,i.jsx)(g.Button,{variant:"outline",onClick:()=>w(!1),children:"Cancel"}),C[22]=w,C[23]=y):y=C[23],C[24]!==O?(x=(0,i.jsx)(g.Button,{onClick:O,children:"Continue"}),C[24]=O,C[25]=x):x=C[25],C[26]!==y||C[27]!==x?(v=(0,i.jsxs)(Y.DialogFooter,{children:[y,x]}),C[26]=y,C[27]=x,C[28]=v):v=C[28],C[29]!==_||C[30]!==v?(S=(0,i.jsxs)(Y.DialogContent,{className:"sm:max-w-[425px]",children:[n,_,v]}),C[29]=_,C[30]=v,C[31]=S):S=C[31],C[32]!==w||C[33]!==N||C[34]!==S?(b=(0,i.jsx)(Y.Dialog,{open:N,onOpenChange:w,children:S}),C[32]=w,C[33]=N,C[34]=S,C[35]=b):b=C[35],b}var Z=e.i(25529),Q=e.i(43206);function ee(e){let t,n,l,o,u,d,c,h,f,p,m,_,y,v,S,b,C=(0,s.c)(41),{open:N,onOpenChange:w,onConfirm:k,currentScheduledFor:T}=e,[E,O]=r.useState(!T);C[0]!==T?(t=()=>T?(0,x.format)(new Date(T),"yyyy-MM-dd"):(0,x.format)((0,Z.addDays)(new Date,1),"yyyy-MM-dd"),C[0]=T,C[1]=t):t=C[1];let[M,D]=r.useState(t);C[2]!==T?(n=()=>T?(0,x.format)(new Date(T),"HH:mm"):"08:00",C[2]=T,C[3]=n):n=C[3];let[A,P]=r.useState(n);C[4]!==T||C[5]!==N?(l=()=>{if(N&&T){let e=new Date(T);D((0,x.format)(e,"yyyy-MM-dd")),P((0,x.format)(e,"HH:mm")),O(!1)}else N&&!T&&O(!0)},o=[N,T],C[4]=T,C[5]=N,C[6]=l,C[7]=o):(l=C[6],o=C[7]),r.useEffect(l,o),C[8]!==M||C[9]!==k||C[10]!==w||C[11]!==E||C[12]!==A?(u=()=>{if(E)k(null);else{let e=new Date(`${M}T${A}:00`);if(e<=new Date)return void alert("Cannot schedule in the past. Please select a future date and time.");k(e.toISOString())}w(!1)},C[8]=M,C[9]=k,C[10]=w,C[11]=E,C[12]=A,C[13]=u):u=C[13];let j=u;C[14]===Symbol.for("react.memo_cache_sentinel")?(d=Intl.DateTimeFormat().resolvedOptions(),C[14]=d):d=C[14];let F=d.timeZone;C[15]===Symbol.for("react.memo_cache_sentinel")?(c=(0,i.jsxs)(Y.DialogHeader,{children:[(0,i.jsx)(Y.DialogTitle,{children:"Schedule Publication"}),(0,i.jsx)(Y.DialogDescription,{children:"Choose when to publish this post. You can schedule it for later or publish immediately."})]}),C[15]=c):c=C[15],C[16]===Symbol.for("react.memo_cache_sentinel")?(h=(0,i.jsx)(a.Label,{htmlFor:"publish-immediately",className:"cursor-pointer",children:"Publish immediately"}),C[16]=h):h=C[16],C[17]!==E?(f=(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[h,(0,i.jsx)(Q.Switch,{id:"publish-immediately",checked:E,onCheckedChange:O})]}),C[17]=E,C[18]=f):f=C[18],C[19]!==M||C[20]!==E||C[21]!==A?(p=!E&&(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)(a.Label,{htmlFor:"schedule-date",className:"mb-2 flex items-center gap-2",children:[(0,i.jsx)(R.Calendar,{className:"size-4"}),"Date"]}),(0,i.jsx)("input",{id:"schedule-date",type:"date",value:M,onChange:e=>D(e.target.value),min:(0,x.format)(new Date,"yyyy-MM-dd"),className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm"})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)(a.Label,{htmlFor:"schedule-time",className:"mb-2 flex items-center gap-2",children:[(0,i.jsx)(K.Clock,{className:"size-4"}),"Time"]}),(0,i.jsx)("input",{id:"schedule-time",type:"time",value:A,onChange:e=>P(e.target.value),className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm"})]}),(0,i.jsxs)("div",{className:"text-muted-foreground text-xs",children:["Timezone: ",F]})]}),C[19]=M,C[20]=E,C[21]=A,C[22]=p):p=C[22],C[23]!==p||C[24]!==f?(m=(0,i.jsxs)("div",{className:"grid gap-4 py-4",children:[f,p]}),C[23]=p,C[24]=f,C[25]=m):m=C[25],C[26]!==w?(_=(0,i.jsx)(g.Button,{variant:"outline",onClick:()=>w(!1),children:"Cancel"}),C[26]=w,C[27]=_):_=C[27];let L=E?"Publish Now":"Schedule";return C[28]!==j||C[29]!==L?(y=(0,i.jsx)(g.Button,{onClick:j,children:L}),C[28]=j,C[29]=L,C[30]=y):y=C[30],C[31]!==_||C[32]!==y?(v=(0,i.jsxs)(Y.DialogFooter,{children:[_,y]}),C[31]=_,C[32]=y,C[33]=v):v=C[33],C[34]!==m||C[35]!==v?(S=(0,i.jsxs)(Y.DialogContent,{className:"sm:max-w-[425px]",children:[c,m,v]}),C[34]=m,C[35]=v,C[36]=S):S=C[36],C[37]!==w||C[38]!==N||C[39]!==S?(b=(0,i.jsx)(Y.Dialog,{open:N,onOpenChange:w,children:S}),C[37]=w,C[38]=N,C[39]=S,C[40]=b):b=C[40],b}function et({post:t,onSave:n,onPublish:s,onSchedule:o,formData:a,onFormDataChange:u,children:d}){let c=(0,l.useRouter)(),[h,f]=r.useState(!1),[g,p]=r.useState(!1),[m,_]=r.useState(!1),[y,x]=r.useState(),[v,S]=r.useState(null),[C,N]=r.useState(!1),[w,k]=r.useState(!1),T=a??v,E=u??S;r.useEffect(()=>{if(T&&m&&T.title){let e=setTimeout(async()=>{let e=t?`post-draft-${t.id}`:"post-draft-new";localStorage.setItem(e,JSON.stringify(T));try{await O()}catch(e){console.error("Auto-save failed:",e)}},3e3);return()=>clearTimeout(e)}},[T,m,t]);let O=async()=>{T&&t&&(await (0,b.saveDraft)(T,t.id),x(new Date().toISOString()),_(!1))},M=async()=>{if(T){f(!0);try{if(t){await (0,b.saveDraft)(T,t.id);let n=await e.A(32194).then(e=>e.getPostById(t.id));n&&E({...T,status:n.status,scheduledFor:n.scheduledFor})}else{let e=await (0,b.saveDraft)(T);c.push(`/content/${e.slug}`);return}p(!0),x(new Date().toISOString()),_(!1),setTimeout(()=>p(!1),2e3),H.showToast.success("Draft saved")}catch(e){console.error("Failed to save:",e),H.showToast.error("Failed to save draft")}finally{f(!1)}}},D=async()=>{if(T){f(!0);try{if(t)await (0,b.publish)(t.id);else{let e=await (0,b.saveDraft)(T);await (0,b.publish)(e.id)}H.showToast.success("Post published"),c.push("/content")}catch(e){console.error("Failed to publish:",e),H.showToast.error("Failed to publish post")}finally{f(!1)}}},A=async e=>{if(T){f(!0);try{if(null===e){if(t)await (0,b.publish)(t.id);else{let e=await (0,b.saveDraft)(T);await (0,b.publish)(e.id)}H.showToast.success("Post published")}else{if(t)await (0,b.reschedulePost)(t.id,e);else{let t=await (0,b.saveDraft)(T);await (0,b.reschedulePost)(t.id,e)}H.showToast.success("Post scheduled")}c.push("/content")}catch(e){console.error("Failed to schedule:",e),H.showToast.error("Failed to schedule post")}finally{f(!1)}}},P=async()=>{if(t){f(!0);try{await (0,b.unpublish)(t.id),H.showToast.success("Post unpublished"),c.push("/content")}catch(e){console.error("Failed to unpublish:",e),H.showToast.error("Failed to unpublish post")}finally{f(!1)}}},F=async()=>{if(t){f(!0);try{await (0,b.archivePost)(t.id),H.showToast.success("Post archived"),c.push("/content")}catch(e){console.error("Failed to archive:",e),H.showToast.error("Failed to archive post")}finally{f(!1)}}},L=async()=>{if(t){f(!0);try{await (0,b.restorePost)(t.id),H.showToast.success("Post restored"),c.push("/content")}catch(e){console.error("Failed to restore:",e),H.showToast.error("Failed to restore post")}finally{f(!1)}}},I=async()=>{if(t){f(!0);try{await (0,b.publishNow)(t.id),H.showToast.success("Post published"),c.push("/content")}catch(e){console.error("Failed to publish now:",e),H.showToast.error("Failed to publish post")}finally{f(!1)}}},z=async()=>{if(t){f(!0);try{await (0,b.cancelSchedule)(t.id),H.showToast.success("Schedule cancelled"),c.push("/content")}catch(e){console.error("Failed to cancel schedule:",e),H.showToast.error("Failed to cancel schedule")}finally{f(!1)}}},R=async e=>{if(T&&t){f(!0);try{if("update"===e)await (0,b.updatePublishedPost)(t.id,T),H.showToast.success("Published post updated");else{let e=await (0,b.createDraftRevision)(t.id,T);H.showToast.success("Draft revision created"),c.push(`/content/${e.slug}`);return}c.push("/content")}catch(e){console.error("Failed to update published:",e),H.showToast.error("Failed to update published post")}finally{f(!1)}}};return(0,i.jsxs)("div",{className:"flex h-screen flex-col",children:[(0,i.jsx)(q,{post:t,formData:T,hasUnsavedChanges:m,isSaving:h,isSaved:g,lastSavedAt:y,onSave:M,onPublish:D,onSchedule:A,onUnpublish:P,onArchive:F,onRestore:L,onReschedule:()=>k(!0),onPublishNow:I,onCancelSchedule:z,onUpdatePublished:()=>N(!0),onUnsavedChangesChange:_}),(0,i.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,i.jsx)("div",{className:"flex-1 overflow-y-auto bg-background",children:(0,i.jsx)("div",{className:"mx-auto max-w-4xl px-6 py-8",children:d})}),(0,i.jsx)("div",{className:"w-80 border-l bg-muted/30",children:(0,i.jsx)(j,{post:t,formData:T,onFormDataChange:e=>{t?.status==="scheduled"&&"draft"===e.status&&t.scheduledFor&&(0,b.cancelSchedule)(t.id).catch(console.error),E(e),_(!0)}})})]}),(0,i.jsx)(X,{open:C,onOpenChange:N,onConfirm:R}),(0,i.jsx)(ee,{open:w,onOpenChange:k,onConfirm:A,currentScheduledFor:t?.scheduledFor})]})}let en=(0,r.createContext)(null);function ei(){let e=(0,r.useContext)(en);return null==e&&function(e,...t){let n=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;for(let e of(i.append("code",8),t))i.append("v",e);throw n.search=i.toString(),Error(`Minified Lexical error #8; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(0),e}function er(e,...t){let n=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;for(let n of(i.append("code",e),t))i.append("v",n);throw n.search=i.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function el(e,...t){let n=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;for(let n of(i.append("code",e),t))i.append("v",n);n.search=i.toString(),console.warn(`Minified Lexical warning #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let es="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,eo=es&&"documentMode"in document?document.documentMode:null,ea=es&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),eu=es&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),ed=!(!es||!("InputEvent"in window)||eo)&&"getTargetRanges"in new window.InputEvent("input"),ec=es&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),eh=es&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,ef=es&&/Android/.test(navigator.userAgent),eg=es&&/^(?=.*Chrome).*/i.test(navigator.userAgent),ep=es&&ef&&eg,em=es&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&ea&&!eg;function e_(...e){let t=[];for(let n of e)if(n&&"string"==typeof n)for(let[e]of n.matchAll(/\S+/g))t.push(e);return t}let ey=ec||eh||em?" ":"​",ex=eu?" ":ey,ev="֑-߿יִ-﷽ﹰ-ﻼ",eS="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",eb=(RegExp("^[^"+eS+"]*["+ev+"]"),RegExp("^[^"+ev+"]*["+eS+"]"),{bold:1,capitalize:1024,code:16,highlight:128,italic:2,lowercase:256,strikethrough:4,subscript:32,superscript:64,underline:8,uppercase:512}),eC={directionless:1,unmergeable:2},eN={center:2,end:6,justify:4,left:1,right:3,start:5},ew={2:"center",6:"end",4:"justify",1:"left",3:"right",5:"start"},ek={normal:0,segmented:2,token:1},eT={0:"normal",2:"segmented",1:"token"},eE="$config",eO=!1,eM=0;function eD(e){eM=e.timeStamp}function eA(e,t,n){let i="BR"===e.nodeName,r=t.__lexicalLineBreak;return r&&(e===r||i&&e.previousSibling===r)||i&&void 0!==rj(e,n)}function eP(e,t,n){eO=!0;let i=performance.now()-eM>100;try{i0(e,()=>{let r=iN()||e.getEditorState().read(()=>{let e=iN();return null!==e?e.clone():null}),l=new Map,s=e.getRootElement(),o=e._editorState,a=e._blockCursorElement,u=!1,d="";for(let n=0;n<t.length;n++){let c=t[n],h=c.type,f=c.target,g=function(e,t,n,i){var r;for(let l=e;l&&(r=l,!0!==r.__lexicalUnmanaged);l=r8(l)){let e=rj(l,t);if(void 0!==e){let t=rA(e,n);if(t)return i9(t)||!ld(l)?void 0:[l,t]}else if(l===i)return[i,rR(n)]}}(f,e,o,s);if(!g)continue;let[p,m]=g;if("characterData"===h)i&&n6(m)&&rC(f)&&function(e,t,n){if(is(e)){let t=e.anchor.getNode();if(t.is(n)&&e.format!==t.getFormat())return!1}return rC(t)&&n.isAttached()}(r,f,m)&&function(e,t,n){let i=la(ln(n)),r=null,l=null;null!==i&&i.anchorNode===e&&(r=i.anchorOffset,l=i.focusOffset);let s=e.nodeValue;null!==s&&rH(t,s,r,l,!1)}(f,m,e);else if("childList"===h){u=!0;let t=c.addedNodes;for(let n=0;n<t.length;n++){let i=t[n],r=rP(i),l=i.parentNode;if(null!=l&&i!==a&&null===r&&!eA(i,l,e)){if(eu){let e=(ld(i)?i.innerText:null)||i.nodeValue;e&&(d+=e)}l.removeChild(i)}}let n=c.removedNodes,i=n.length;if(i>0){let t=0;for(let r=0;r<i;r++){let i=n[r];(eA(i,f,e)||a===i)&&(f.appendChild(i),t++)}i!==t&&l.set(p,m)}}}if(l.size>0)for(let[t,n]of l)n.reconcileObservedMutation(t,e);let c=n.takeRecords();if(c.length>0){for(let t=0;t<c.length;t++){let n=c[t],i=n.addedNodes,r=n.target;for(let t=0;t<i.length;t++){let n=i[t],l=n.parentNode;null==l||"BR"!==n.nodeName||eA(n,r,e)||l.removeChild(n)}}n.takeRecords()}null!==r&&(u&&rB(r),eu&&r4(e)&&r.insertRawText(d))})}finally{eO=!1}}function ej(e){let t=e._observer;null!==t&&eP(e,t.takeRecords(),t)}function eF(e){0===eM&&ln(e).addEventListener("textInput",eD,!0),e._observer=new MutationObserver((t,n)=>{eP(e,t,n)})}class eL{node;knownState;unknownState;sharedNodeState;size;constructor(e,t,n,i=new Map,r){this.node=e,this.sharedNodeState=t,this.unknownState=n,this.knownState=i;const{sharedConfigMap:l}=this.sharedNodeState,s=void 0!==r?r:function(e,t,n){let i=n.size;if(t)for(let r in t){let t=e.get(r);t&&n.has(t)||i++}return i}(l,n,i);this.size=s}getValue(e){let t=this.knownState.get(e);if(void 0!==t)return t;this.sharedNodeState.sharedConfigMap.set(e.key,e);let n=e.defaultValue;if(this.unknownState&&e.key in this.unknownState){let t=this.unknownState[e.key];void 0!==t&&(n=e.parse(t)),this.updateFromKnown(e,n)}return n}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){let e={...this.unknownState},t={};for(let[t,n]of this.knownState)t.isEqual(n,t.defaultValue)?delete e[t.key]:e[t.key]=t.unparse(n);for(let n of this.sharedNodeState.flatKeys)n in e&&(t[n]=e[n],delete e[n]);return ez(e)&&(t.$=e),t}getWritable(e){if(this.node===e)return this;let{sharedNodeState:t,unknownState:n}=this,i=new Map(this.knownState);return new eL(e,t,function(e,t,n){let i;if(n)for(let[r,l]of Object.entries(n)){let n=e.get(r);n?t.has(n)||t.set(n,n.parse(l)):(i=i||{})[r]=l}return i}(t.sharedConfigMap,i,n),i,this.size)}updateFromKnown(e,t){let n=e.key;this.sharedNodeState.sharedConfigMap.set(n,e);let{knownState:i,unknownState:r}=this;i.has(e)||r&&n in r||(r&&(delete r[n],this.unknownState=ez(r)),this.size++),i.set(e,t)}updateFromUnknown(e,t){let n=this.sharedNodeState.sharedConfigMap.get(e);n?this.updateFromKnown(n,n.parse(t)):(this.unknownState=this.unknownState||{},e in this.unknownState||this.size++,this.unknownState[e]=t)}updateFromJSON(e){let{knownState:t}=this;for(let e of t.keys())t.set(e,e.defaultValue);if(this.size=t.size,this.unknownState=void 0,e)for(let[t,n]of Object.entries(e))this.updateFromUnknown(t,n)}}function eI(e){return e.__state?e.__state.sharedNodeState:rf(iU(),e.getType()).sharedNodeState}function ez(e){if(e)for(let t in e)return e}function eR(e,t,n){for(let[i,r]of t.knownState){if(e.has(i.key))continue;e.add(i.key);let t=n?n.getValue(i):i.defaultValue;if(t!==r&&!i.isEqual(t,r))return!0}return!1}function eB(e,t,n){let{unknownState:i}=t,r=n?n.unknownState:void 0;if(i){for(let[t,n]of Object.entries(i))if(!e.has(t)&&(e.add(t),n!==(r?r[t]:void 0)))return!0}return!1}function eK(e,t){let n=e.__state;return n&&n.node===e?n.getWritable(t):n}function eW(e,t){let n=e.__mode,i=e.__format,r=e.__style,l=t.__mode,s=t.__format,o=t.__style,a=e.__state,u=t.__state;return(null===n||n===l)&&(null===i||i===s)&&(null===r||r===o)&&(null===e.__state||a===u||function(e,t){if(e===t)return!0;if(e&&t&&e.size!==t.size)return!1;let n=new Set;return!(e&&eR(n,e,t)||t&&eR(n,t,e)||e&&eB(n,e,t)||t&&eB(n,t,e))}(a,u))}function eU(e,t){let n=e.mergeWithSibling(t),i=iU()._normalizedNodes;return i.add(e.__key),i.add(t.__key),n}function eJ(e){let t,n,i=e;if(""!==i.__text||!i.isSimpleText()||i.isUnmergeable()){for(;null!==(t=i.getPreviousSibling())&&n6(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(""!==t.__text){eW(t,i)&&(i=eU(t,i));break}t.remove()}for(;null!==(n=i.getNextSibling())&&n6(n)&&n.isSimpleText()&&!n.isUnmergeable();){if(""!==n.__text){eW(i,n)&&(i=eU(i,n));break}n.remove()}}else i.remove()}function e$(e){return eV(e.anchor),eV(e.focus),e}function eV(e){for(;"element"===e.type;){let t,n,i=e.getNode(),r=e.offset;if(r===i.getChildrenSize()?(t=i.getChildAtIndex(r-1),n=!0):(t=i.getChildAtIndex(r),n=!1),n6(t)){e.set(t.__key,n?t.getTextContentSize():0,"text",!0);break}if(!i4(t))break;e.set(t.__key,n?t.getChildrenSize():0,"element",!0)}}let eH,eq,eY,eG,eX,eZ,eQ,e0,e1,e2,e3="",e4=null,e6=null,e5="",e9=!1,e8=!1;function e7(e,t){let n=eQ.get(e);if(null!==t){let n=th(e);n.parentNode===t&&t.removeChild(n)}if(e0.has(e)||eq._keyToDOMMap.delete(e),i4(n)){let e=tu(n,eQ);te(e,0,e.length-1,null)}void 0!==n&&r1(e2,eY,eG,n,"destroyed")}function te(e,t,n,i){let r=t;for(;r<=n;++r){let t=e[r];void 0!==t&&e7(t,i)}}function tt(e,t){e.setProperty("text-align",t)}function tn(e,t){let n=eH.theme.indent;if("string"==typeof n){let i=e.classList.contains(n);t>0&&!i?e.classList.add(n):t<1&&i&&e.classList.remove(n)}let i=getComputedStyle(e).getPropertyValue("--lexical-indent-base-value")||"40px";e.style.setProperty("padding-inline-start",0===t?"":`calc(${t} * ${i})`)}function ti(e,t){let n=e.style;0===t?tt(n,""):1===t?tt(n,"left"):2===t?tt(n,"center"):3===t?tt(n,"right"):4===t?tt(n,"justify"):5===t?tt(n,"start"):6===t&&tt(n,"end")}function tr(e,t){let n=function(e){let t=e.__dir;if(null!==t)return t;if(i7(e))return null;let n=e.getParentOrThrow();return i7(n)&&null===n.__dir?"auto":null}(t);null!==n?e.dir=n:e.removeAttribute("dir")}function tl(e,t){var n;let i,r=e0.get(e);void 0===r&&er(60);let l=r.createDOM(eH,eq);if(i=(n=eq)._keyToDOMMap,l[`__lexicalKey_${n._key}`]=e,i.set(e,l),n6(r)?l.setAttribute("data-lexical-text","true"):i9(r)&&l.setAttribute("data-lexical-decorator","true"),i4(r)){let e=r.__indent,t=r.__size;tr(l,r),0!==e&&tn(l,e),0!==t&&ts(tu(r,e0),r,0,t-1,r.getDOMSlot(l));let n=r.__format;0!==n&&ti(l,n),r.isInline()||ta(null,r,l),r5(r)&&(e3+="\n\n",e5+="\n\n")}else{let t=r.getTextContent();if(i9(r)){let t=r.decorate(eq,eH);null!==t&&td(e,t),l.contentEditable="false"}e3+=t,e5+=t}return null!==t&&t.insertChild(l),r1(e2,eY,eG,r,"created"),l}function ts(e,t,n,i,r){let l=e3;e3="";let s=n;for(;s<=i;++s){tl(e[s],r);let t=e0.get(e[s]);null!==t&&n6(t)&&null===e4&&(e4=t.getFormat(),e6=t.getStyle())}r5(t)&&(e3+="\n\n"),r.element.__lexicalTextContent=e3,e3=l+e3}function to(e,t){if(e){let n=e.__last;if(n){let e=t.get(n);if(e)return nW(e)?"line-break":i9(e)&&e.isInline()?"decorator":null}return"empty"}return null}function ta(e,t,n){let i=to(e,eQ),r=to(t,e0);i!==r&&t.getDOMSlot(n).setManagedLineBreak(r)}function tu(e,t){let n=[],i=e.__first;for(;null!==i;){let e=t.get(i);void 0===e&&er(101),n.push(i),i=e.__next}return n}function td(e,t){let n=eq._pendingDecorators,i=eq._decorators;if(null===n){if(i[e]===t)return;n=rL(eq)}n[e]=t}function tc(e){let t=e.nextSibling;return null!==t&&t===eq._blockCursorElement&&(t=t.nextSibling),t}function th(e){let t=e1.get(e);return void 0===t&&er(75,e),t}function tf(e){return{type:e}}let tg=tf("SELECTION_CHANGE_COMMAND"),tp=tf("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),tm=tf("CLICK_COMMAND"),t_=tf("BEFORE_INPUT_COMMAND"),ty=tf("INPUT_COMMAND"),tx=tf("COMPOSITION_START_COMMAND"),tv=tf("COMPOSITION_END_COMMAND"),tS=tf("DELETE_CHARACTER_COMMAND"),tb=tf("INSERT_LINE_BREAK_COMMAND"),tC=tf("INSERT_PARAGRAPH_COMMAND"),tN=tf("CONTROLLED_TEXT_INSERTION_COMMAND"),tw=tf("PASTE_COMMAND"),tk=tf("REMOVE_TEXT_COMMAND"),tT=tf("DELETE_WORD_COMMAND"),tE=tf("DELETE_LINE_COMMAND"),tO=tf("FORMAT_TEXT_COMMAND"),tM=tf("UNDO_COMMAND"),tD=tf("REDO_COMMAND"),tA=tf("KEYDOWN_COMMAND"),tP=tf("KEY_ARROW_RIGHT_COMMAND"),tj=tf("MOVE_TO_END"),tF=tf("KEY_ARROW_LEFT_COMMAND"),tL=tf("MOVE_TO_START"),tI=tf("KEY_ARROW_UP_COMMAND"),tz=tf("KEY_ARROW_DOWN_COMMAND"),tR=tf("KEY_ENTER_COMMAND"),tB=tf("KEY_SPACE_COMMAND"),tK=tf("KEY_BACKSPACE_COMMAND"),tW=tf("KEY_ESCAPE_COMMAND"),tU=tf("KEY_DELETE_COMMAND"),tJ=tf("KEY_TAB_COMMAND"),t$=tf("INSERT_TAB_COMMAND"),tV=tf("INDENT_CONTENT_COMMAND"),tH=tf("OUTDENT_CONTENT_COMMAND"),tq=tf("DROP_COMMAND"),tY=tf("FORMAT_ELEMENT_COMMAND"),tG=tf("DRAGSTART_COMMAND"),tX=tf("DRAGOVER_COMMAND"),tZ=tf("DRAGEND_COMMAND"),tQ=tf("COPY_COMMAND"),t0=tf("CUT_COMMAND"),t1=tf("SELECT_ALL_COMMAND"),t2=tf("CLEAR_EDITOR_COMMAND"),t3=tf("CLEAR_HISTORY_COMMAND"),t4=tf("CAN_REDO_COMMAND"),t6=tf("CAN_UNDO_COMMAND"),t5=tf("FOCUS_COMMAND"),t9=tf("BLUR_COMMAND"),t8=tf("KEY_MODIFIER_COMMAND"),t7=Object.freeze({}),ne=[["keydown",function(e,t){nt=e.timeStamp,nn=e.key,t.isComposing()||r6(t,tA,e)}],["pointerdown",function(e,t){let n=e.target,i=e.pointerType;lc(n)&&"touch"!==i&&"pen"!==i&&0===e.button&&i0(t,()=>{i9(rF(n))||(na=!0)})}],["compositionstart",function(e,t){r6(t,tx,e)}],["compositionend",function(e,t){eu?nd=!0:!eh&&(ec||em)?(nc=!0,nh=e.data):r6(t,tv,e)}],["input",function(e,t){e.stopPropagation(),i0(t,()=>{t.dispatchCommand(ty,e)},{event:e}),nr=null}],["click",function(e,t){i0(t,()=>{let n=iN(),i=la(ln(t)),r=iw();if(i){if(is(n)){let t=n.anchor,l=t.getNode();if("element"===t.type&&0===t.offset&&n.isCollapsed()&&!i7(l)&&1===rz().getChildrenSize()&&l.getTopLevelElementOrThrow().isEmpty()&&null!==r&&n.is(r))i.removeAllRanges(),n.dirty=!0;else if(3===e.detail&&!n.isCollapsed()&&l!==n.focus.getNode()){let e=lC(l,e=>i4(e)&&!e.isInline());i4(e)&&e.select(0)}}else if("touch"===e.pointerType||"pen"===e.pointerType){let n=i.anchorNode;(ld(n)||rC(n))&&rB(iC(r,i,t,e))}}r6(t,tm,e)})}],["cut",t7],["copy",t7],["dragstart",t7],["dragover",t7],["dragend",t7],["paste",t7],["focus",t7],["blur",t7],["drop",t7]];ed&&ne.push(["beforeinput",(e,t)=>{let n;"deleteCompositionText"===(n=e.inputType)||eu&&r4(t)||"insertCompositionText"!==n&&r6(t,t_,e)}]);let nt=0,nn=null,ni=0,nr=null,nl=new WeakMap,ns=new WeakMap,no=!1,na=!1,nu=!1,nd=!1,nc=!1,nh="",nf=null,ng=[0,"",0,"root",0];function np(e,t,n,i,r){let l=e.anchor,s=e.focus,o=l.getNode(),a=iU(),u=la(ln(a)),d=null!==u?u.anchorNode:null,c=l.key,h=a.getElementByKey(c),f=n.length;return c!==s.key||!n6(o)||(!r&&(!ed||ni<i+50)||o.isDirty()&&f<2||rW(n))&&l.offset!==s.offset&&!o.isComposing()||rb(o)||o.isDirty()&&f>1||(r||!ed)&&null!==h&&!o.isComposing()&&d!==rw(h)||null!==u&&null!==t&&(!t.collapsed||t.startContainer!==u.anchorNode||t.startOffset!==u.anchorOffset)||o.getFormat()!==e.format||o.getStyle()!==e.style||function(e,t){let n;if(t.isSegmented())return!0;if(!e.isCollapsed())return!1;let i=e.anchor.offset,r=t.getParentOrThrow(),l=rS(t);return 0===i?!t.canInsertTextBefore()||!r.canInsertTextBefore()&&!t.isComposing()||l||(n6(n=t.getPreviousSibling())||i4(n)&&n.isInline())&&!n.canInsertTextAfter():i===t.getTextContentSize()&&(!t.canInsertTextAfter()||!r.canInsertTextAfter()&&!t.isComposing()||l)}(e,o)}function nm(e,t){return rC(e)&&null!==e.nodeValue&&0!==t&&t!==e.nodeValue.length}function n_(e,t,n){let{anchorNode:i,anchorOffset:r,focusNode:l,focusOffset:s}=e;no&&(no=!1,nm(i,r)&&nm(l,s)&&!nf)||i0(t,()=>{if(!n)return void rB(null);if(!r_(t,i,l))return;let o=iN();if(nf&&is(o)&&o.isCollapsed()){let e=o.anchor,t=nf.anchor;(e.key===t.key&&e.offset===t.offset+1||1===e.offset&&t.getNode().is(e.getNode().getPreviousSibling()))&&rB(o=nf.clone())}if(nf=null,is(o)){let n=o.anchor,i=n.getNode();if(o.isCollapsed()){"Range"===e.type&&e.anchorNode===e.focusNode&&(o.dirty=!0);let r=ln(t).event,l=r?r.timeStamp:performance.now(),[s,a,u,d,c]=ng,h=rz(),f=!1===t.isComposing()&&""===h.getTextContent();if(l<c+200&&n.offset===u&&n.key===d)ny(o,s,a);else if("text"===n.type)n6(i)||er(141),nx(o,i);else if("element"===n.type&&!f){i4(i)||er(259);let e=n.getNode();e.isEmpty()?ny(o,e.getTextFormat(),e.getTextStyle()):ny(o,0,"")}}else{let e=n.key,t=o.focus.key,i=o.getNodes(),l=i.length,a=o.isBackward(),u=a?s:r,d=a?r:s,c=a?t:e,h=a?e:t,f=2047,g=!1;for(let e=0;e<l;e++){let t=i[e],n=t.getTextContentSize();if(n6(t)&&0!==n&&(0!==e||t.__key!==c||u!==n)&&(e!==l-1||t.__key!==h||0!==d)&&(g=!0,0==(f&=t.getFormat())))break}o.format=g?f:0}}r6(t,tg,void 0)})}function ny(e,t,n){e.format===t&&e.style===n||(e.format=t,e.style=n,e.dirty=!0)}function nx(e,t){ny(e,t.getFormat(),t.getStyle())}function nv(e){if(!e.getTargetRanges)return null;let t=e.getTargetRanges();return 0===t.length?null:t[0]}function nS(e){var t;let n=e.inputType,i=nv(e),r=iU(),l=iN();if("deleteContentBackward"===n){if(null===l){let e=iw();if(!is(e))return!0;rB(e.clone())}if(is(l)){let n=l.anchor.key===l.focus.key;if(t=e.timeStamp,"MediaLast"===nn&&t<nt+30&&r.isComposing()&&n){if(rM(null),nt=0,setTimeout(()=>{i0(r,()=>{rM(null)})},30),is(l)){let e=l.anchor.getNode();e.markDirty(),n6(e)||er(142),nx(l,e)}}else{rM(null),e.preventDefault();let t=l.anchor.getNode(),i=t.getTextContent(),s=t.canInsertTextAfter(),o=0===l.anchor.offset&&l.focus.offset===i.length,a=ep&&n&&!o&&s;if(a&&l.isCollapsed()&&(a=!i9(r3(l.anchor,!0))),!a){r6(r,tS,!0);let e=iN();ep&&is(e)&&e.isCollapsed()&&(nf=e,setTimeout(()=>nf=null))}}return!0}}if(!is(l))return!0;let s=e.data;null!==nr&&rV(!1,r,nr),l.dirty&&null===nr||!l.isCollapsed()||i7(l.anchor.getNode())||null===i||l.applyDOMRange(i),nr=null;let o=l.anchor,a=l.focus,u=o.getNode(),d=a.getNode();if("insertText"===n||"insertTranspose"===n){if("\n"===s)e.preventDefault(),r6(r,tb,!1);else if("\n\n"===s)e.preventDefault(),r6(r,tC,void 0);else if(null==s&&e.dataTransfer){let t=e.dataTransfer.getData("text/plain");e.preventDefault(),l.insertRawText(t)}else null!=s&&np(l,i,s,e.timeStamp,!0)?(e.preventDefault(),r6(r,tN,s)):nr=s;return ni=e.timeStamp,!0}switch(e.preventDefault(),n){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":r6(r,tN,e);break;case"insertFromComposition":rM(null),r6(r,tN,e);break;case"insertLineBreak":rM(null),r6(r,tb,!1);break;case"insertParagraph":rM(null),nu&&!eh?(nu=!1,r6(r,tb,!1)):r6(r,tC,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":r6(r,tw,e);break;case"deleteByComposition":(u!==d||i4(u)||i4(d)||!rS(u)||!rS(d))&&r6(r,tk,e);break;case"deleteByDrag":case"deleteByCut":r6(r,tk,e);break;case"deleteContent":r6(r,tS,!1);break;case"deleteWordBackward":r6(r,tT,!0);break;case"deleteWordForward":r6(r,tT,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":r6(r,tE,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":r6(r,tE,!1);break;case"formatStrikeThrough":r6(r,tO,"strikethrough");break;case"formatBold":r6(r,tO,"bold");break;case"formatItalic":r6(r,tO,"italic");break;case"formatUnderline":r6(r,tO,"underline");break;case"historyUndo":r6(r,tM,void 0);break;case"historyRedo":r6(r,tD,void 0)}return!0}function nb(e){if(ld(e.target)&&i9(rF(e.target)))return!0;let t=iU(),n=iN(),i=e.data,r=nv(e);if(null!=i&&is(n)&&np(n,r,i,e.timeStamp,!1)){nd&&(nw(t,i),nd=!1);let r=n.anchor.getNode(),l=la(ln(t));if(null===l)return!0;let s=n.isBackward(),o=s?n.anchor.offset:n.focus.offset,a=s?n.focus.offset:n.anchor.offset;ed&&!n.isCollapsed()&&n6(r)&&null!==l.anchorNode&&r.getTextContent().slice(0,o)+i+r.getTextContent().slice(o+a)===r$(l.anchorNode)||r6(t,tN,i);let u=i.length;eu&&u>1&&"insertCompositionText"===e.inputType&&!t.isComposing()&&(n.anchor.offset-=u),ec||eh||em||!t.isComposing()||(nt=0,rM(null))}else rV(!1,t,null!==i?i:void 0),nd&&(nw(t,i||void 0),nd=!1);return iB(),ej(iU()),!0}function nC(e){let t=iU(),n=iN();if(is(n)&&!t.isComposing()){let i=n.anchor,r=n.anchor.getNode();rM(i.key),(e.timeStamp<nt+30||"element"===i.type||!n.isCollapsed()||r.getFormat()!==n.format||n6(r)&&r.getStyle()!==n.style)&&r6(t,tN,ex)}return!0}function nN(e){return nw(iU(),e.data),!0}function nw(e,t){let n=e._compositionKey;if(rM(null),null!==n&&null!=t){if(""===t){let t=rA(n),i=rw(e.getElementByKey(n));return void(null!==i&&null!==i.nodeValue&&n6(t)&&rH(t,i.nodeValue,null,null,!0))}if("\n"===t[t.length-1]){let t=iN();if(is(t)){let n=t.focus;return t.anchor.set(n.key,n.offset,n.type),void r6(e,tR,null)}}}rV(!0,e,t)}function nk(e){let t=iU();if(null==e.key)return!0;if(nc&&rQ(e))return i0(t,()=>{nw(t,nh)}),nc=!1,nh="",!0;if(rG(e,"ArrowRight",{shiftKey:"any"}))r6(t,tP,e);else if(rG(e,"ArrowRight",rX))r6(t,tj,e);else if(rG(e,"ArrowLeft",{shiftKey:"any"}))r6(t,tF,e);else if(rG(e,"ArrowLeft",rX))r6(t,tL,e);else if(rG(e,"ArrowUp",{altKey:"any",shiftKey:"any"}))r6(t,tI,e);else if(rG(e,"ArrowDown",{altKey:"any",shiftKey:"any"}))r6(t,tz,e);else if(rG(e,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0}))nu=!0,r6(t,tR,e);else if(" "===e.key)r6(t,tB,e);else if(ea&&rG(e,"o",{ctrlKey:!0}))e.preventDefault(),nu=!0,r6(t,tb,!0);else if(rG(e,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"}))nu=!1,r6(t,tR,e);else if(rG(e,"Backspace",{shiftKey:"any"})||ea&&rG(e,"h",{ctrlKey:!0}))rQ(e)?r6(t,tK,e):(e.preventDefault(),r6(t,tS,!0));else if("Escape"===e.key)r6(t,tW,e);else if(rG(e,"Delete",{})||ea&&rG(e,"d",{ctrlKey:!0}))"Delete"!==e.key?(e.preventDefault(),r6(t,tS,!1)):r6(t,tU,e);else if(rG(e,"Backspace",rZ))e.preventDefault(),r6(t,tT,!0);else if(rG(e,"Delete",rZ))e.preventDefault(),r6(t,tT,!1);else if(ea&&rG(e,"Backspace",{metaKey:!0}))e.preventDefault(),r6(t,tE,!0);else if(ea&&(rG(e,"Delete",{metaKey:!0})||rG(e,"k",{ctrlKey:!0})))e.preventDefault(),r6(t,tE,!1);else if(rG(e,"b",rX))e.preventDefault(),r6(t,tO,"bold");else if(rG(e,"u",rX))e.preventDefault(),r6(t,tO,"underline");else if(rG(e,"i",rX))e.preventDefault(),r6(t,tO,"italic");else if(rG(e,"Tab",{shiftKey:"any"}))r6(t,tJ,e);else if(rG(e,"z",rX))e.preventDefault(),r6(t,tM,void 0);else if(ea?rG(e,"z",{metaKey:!0,shiftKey:!0}):rG(e,"y",{ctrlKey:!0})||rG(e,"z",{ctrlKey:!0,shiftKey:!0}))e.preventDefault(),r6(t,tD,void 0);else{let n=t._editorState._selection;null===n||is(n)?rG(e,"a",rX)&&(e.preventDefault(),r6(t,t1,e)):rG(e,"c",rX)?(e.preventDefault(),r6(t,tQ,e)):rG(e,"x",rX)?(e.preventDefault(),r6(t,t0,e)):rG(e,"a",rX)&&(e.preventDefault(),r6(t,t1,e))}return(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)&&t.dispatchCommand(t8,e),!0}function nT(e){let t=e.__lexicalEventHandles;return void 0===t&&(e.__lexicalEventHandles=t=[]),t}let nE=new Map;function nO(e){let t,n=(t=lt(e.target))?t.getSelection():null;if(null===n)return;let i=rx(n.anchorNode);if(null===i)return;na&&(na=!1,i0(i,()=>{let t=iw(),r=n.anchorNode;(ld(r)||rC(r))&&rB(iC(t,n,i,e))}));let r=rU(i),l=r[r.length-1],s=l._key,o=nE.get(s),a=o||l;a!==i&&n_(n,a,!1),n_(n,i,!0),i!==l?nE.set(s,i):o&&nE.delete(s)}function nM(e){e._lexicalHandled=!0}function nD(e){return!0===e._lexicalHandled}let nA=()=>{};function nP(e,t,n){iB();let i=e.__key,r=e.getParent();if(null===r)return;let l=function(e){let t=iN();if(!is(t)||!i4(e))return t;let{anchor:n,focus:i}=t,r=n.getNode(),l=i.getNode();return le(r,e)&&n.set(e.__key,0,"element"),le(l,e)&&i.set(e.__key,0,"element"),t}(e),s=!1;if(is(l)&&t){let t=l.anchor,n=l.focus;t.key===i&&(iE(t,e,r,e.getPreviousSibling(),e.getNextSibling()),s=!0),n.key===i&&(iE(n,e,r,e.getPreviousSibling(),e.getNextSibling()),s=!0)}else ia(l)&&t&&e.isSelected()&&e.selectPrevious();if(is(l)&&t&&!s){let t=e.getIndexWithinParent();rE(e),ik(l,r,t,-1)}else rE(e);n||li(r)||r.canBeEmpty()||!r.isEmpty()||nP(r,t),t&&l&&i7(r)&&r.isEmpty()&&r.selectEnd()}let nj=Symbol.for("ephemeral");function nF(e){return e[nj]||!1}class nL{__type;__key;__parent;__prev;__next;__state;static getType(){let{ownNodeType:e}=lb(this);return void 0===e&&er(64,this.name),e}static clone(e){er(65,this.name)}$config(){return{}}config(e,t){let n=t.extends||Object.getPrototypeOf(this.constructor);return Object.assign(t,{extends:n,type:e}),{[e]:t}}afterCloneFrom(e){this.__key===e.__key?(this.__parent=e.__parent,this.__next=e.__next,this.__prev=e.__prev,this.__state=e.__state):e.__state&&(this.__state=e.__state.getWritable(this))}static importDOM;constructor(e){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),function(e,t){let n,i=(n=rc,rc=null,n);if(null!=(t=t||i&&i.__key))return e.__key=t;iB(),iK();let r=iU(),l=iW(),s=""+rh++;l._nodeMap.set(s,e),i4(e)?r._dirtyElements.set(s,!0):r._dirtyLeaves.add(s),r._cloneNotNeeded.add(s),r._dirtyType=1,e.__key=s}(this,e)}getType(){return this.__type}isInline(){er(137,this.constructor.name)}isAttached(){let e=this.__key;for(;null!==e;){if("root"===e)return!0;let t=rA(e);if(null===t)break;e=t.__parent}return!1}isSelected(e){let t=e||iN();if(null==t)return!1;let n=t.getNodes().some(e=>e.__key===this.__key);if(n6(this))return n;if(is(t)&&"element"===t.anchor.type&&"element"===t.focus.type){if(t.isCollapsed())return!1;let e=this.getParent();if(i9(this)&&this.isInline()&&e){let n=t.isBackward()?t.focus:t.anchor;if(e.is(n.getNode())&&n.offset===e.getChildrenSize()&&this.is(e.getLastChild()))return!1}}return n}getKey(){return this.__key}getIndexWithinParent(){let e=this.getParent();if(null===e)return -1;let t=e.getFirstChild(),n=0;for(;null!==t;){if(this.is(t))return n;n++,t=t.getNextSibling()}return -1}getParent(){let e=this.getLatest().__parent;return null===e?null:rA(e)}getParentOrThrow(){let e=this.getParent();return null===e&&er(66,this.__key),e}getTopLevelElement(){let e=this;for(;null!==e;){let t=e.getParent();if(li(t))return i4(e)||e===this&&i9(e)||er(194),e;e=t}return null}getTopLevelElementOrThrow(){let e=this.getTopLevelElement();return null===e&&er(67,this.__key),e}getParents(){let e=[],t=this.getParent();for(;null!==t;)e.push(t),t=t.getParent();return e}getParentKeys(){let e=[],t=this.getParent();for(;null!==t;)e.push(t.__key),t=t.getParent();return e}getPreviousSibling(){let e=this.getLatest().__prev;return null===e?null:rA(e)}getPreviousSiblings(){let e=[],t=this.getParent();if(null===t)return e;let n=t.getFirstChild();for(;null!==n&&!n.is(this);)e.push(n),n=n.getNextSibling();return e}getNextSibling(){let e=this.getLatest().__next;return null===e?null:rA(e)}getNextSiblings(){let e=[],t=this.getNextSibling();for(;null!==t;)e.push(t),t=t.getNextSibling();return e}getCommonAncestor(e){let t=i4(this)?this:this.getParent(),n=i4(e)?e:e.getParent(),i=t&&n?lG(t,n):null;return i?i.commonAncestor:null}is(e){return null!=e&&this.__key===e.__key}isBefore(e){let t=lG(this,e);return null!==t&&("descendant"===t.type||("branch"===t.type?-1===lq(t):("same"!==t.type&&"ancestor"!==t.type&&er(279),!1)))}isParentOf(e){let t=lG(this,e);return null!==t&&"ancestor"===t.type}getNodesBetween(e){let t=this.isBefore(e),n=[],i=new Set,r=this;for(;null!==r;){let l=r.__key;if(i.has(l)||(i.add(l),n.push(r)),r===e)break;let s=i4(r)?t?r.getFirstChild():r.getLastChild():null;if(null!==s){r=s;continue}let o=t?r.getNextSibling():r.getPreviousSibling();if(null!==o){r=o;continue}let a=r.getParentOrThrow();if(i.has(a.__key)||n.push(a),a===e)break;let u=null,d=a;do{if(null===d&&er(68),u=t?d.getNextSibling():d.getPreviousSibling(),null===(d=d.getParent()))break;null!==u||i.has(d.__key)||n.push(d)}while(null===u)r=u}return t||n.reverse(),n}isDirty(){let e=iU()._dirtyLeaves;return null!==e&&e.has(this.__key)}getLatest(){if(nF(this))return this;let e=rA(this.__key);return null===e&&er(113),e}getWritable(){if(nF(this))return this;iB();let e=iW(),t=iU(),n=e._nodeMap,i=this.__key,r=this.getLatest(),l=t._cloneNotNeeded,s=iN();if(null!==s&&s.setCachedNodes(null),l.has(i))return rO(r),r;let o=lx(r);return l.add(i),rO(o),n.set(i,o),o}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(e,t){er(70)}updateDOM(e,t,n){er(71)}exportDOM(e){return{element:this.createDOM(e._config,e)}}exportJSON(){let e=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...e}}static importJSON(e){er(18,this.name)}updateFromJSON(e){return function(e,t){let n,i,r=e.getWritable(),l=t.$,s=l;for(let e of eI(r).flatKeys)e in t&&(void 0!==s&&s!==l||(s={...l}),s[e]=t[e]);return(r.__state||s)&&(i=(n=e.getWritable()).__state?n.__state.getWritable(n):new eL(n,eI(n)),n.__state=i,i).updateFromJSON(s),r}(this,e)}static transform(){return null}remove(e){nP(this,!0,e)}replace(e,t){iB();let n=iN();null!==n&&(n=n.clone()),ll(this,e);let i=this.getLatest(),r=this.__key,l=e.__key,s=e.getWritable(),o=this.getParentOrThrow().getWritable(),a=o.__size;rE(s);let u=i.getPreviousSibling(),d=i.getNextSibling(),c=i.__prev,h=i.__next,f=i.__parent;if((nP(i,!1,!0),null===u)?o.__first=l:u.getWritable().__next=l,(s.__prev=c,null===d)?o.__last=l:d.getWritable().__prev=l,s.__next=h,s.__parent=f,o.__size=a,t&&(i4(this)&&i4(s)||er(139),this.getChildren().forEach(e=>{s.append(e)})),is(n)){rB(n);let e=n.anchor,t=n.focus;e.key===r&&ir(e,s),t.key===r&&ir(t,s)}return rD()===r&&rM(l),s}insertAfter(e,t=!0){iB(),ll(this,e);let n=this.getWritable(),i=e.getWritable(),r=i.getParent(),l=iN(),s=!1,o=!1;if(null!==r){let t=e.getIndexWithinParent();if(rE(i),is(l)){let e=r.__key,n=l.anchor,i=l.focus;s="element"===n.type&&n.key===e&&n.offset===t+1,o="element"===i.type&&i.key===e&&i.offset===t+1}}let a=this.getNextSibling(),u=this.getParentOrThrow().getWritable(),d=i.__key,c=n.__next;if(null===a?u.__last=d:a.getWritable().__prev=d,u.__size++,n.__next=d,i.__next=c,i.__prev=n.__key,i.__parent=n.__parent,t&&is(l)){let e=this.getIndexWithinParent();ik(l,u,e+1);let t=u.__key;s&&l.anchor.set(t,e+2,"element"),o&&l.focus.set(t,e+2,"element")}return e}insertBefore(e,t=!0){iB(),ll(this,e);let n=this.getWritable(),i=e.getWritable(),r=i.__key;rE(i);let l=this.getPreviousSibling(),s=this.getParentOrThrow().getWritable(),o=n.__prev,a=this.getIndexWithinParent();null===l?s.__first=r:l.getWritable().__next=r,s.__size++,n.__prev=r,i.__prev=o,i.__next=n.__key,i.__parent=n.__parent;let u=iN();return t&&is(u)&&ik(u,this.getParentOrThrow(),a),e}isParentRequired(){return!1}createParentElementNode(){return rs()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(e,t){iB();let n=this.getPreviousSibling(),i=this.getParentOrThrow();if(null===n)return i.select(0,0);if(i4(n))return n.select();if(!n6(n)){let e=n.getIndexWithinParent()+1;return i.select(e,e)}return n.select(e,t)}selectNext(e,t){iB();let n=this.getNextSibling(),i=this.getParentOrThrow();if(null===n)return i.select();if(i4(n))return n.select(0,0);if(!n6(n)){let e=n.getIndexWithinParent();return i.select(e,e)}return n.select(e,t)}markDirty(){this.getWritable()}reconcileObservedMutation(e,t){this.markDirty()}}let nI="historic",nz="history-merge";class nR extends nL{static getType(){return"linebreak"}static clone(e){return new nR(e.__key)}constructor(e){super(e)}getTextContent(){return"\n"}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:e=>(function(e){let t=e.parentElement;if(null!==t&&lg(t)){let n=t.firstChild;if(n===e||n.nextSibling===e&&nU(n)){let n=t.lastChild;if(n===e||n.previousSibling===e&&nU(n))return!0}}return!1})(e)||function(e){let t=e.parentElement;if(null!==t&&lg(t)){let n=t.firstChild;if(n===e||n.nextSibling===e&&nU(n))return!1;let i=t.lastChild;if(i===e||i.previousSibling===e&&nU(i))return!0}return!1}(e)?null:{conversion:nB,priority:0}}}static importJSON(e){return nK().updateFromJSON(e)}}function nB(e){return{node:nK()}}function nK(){return lr(new nR)}function nW(e){return e instanceof nR}function nU(e){return rC(e)&&/^( |\t|\r?\n)+$/.test(e.textContent||"")}function nJ(e,t){return 16&t?"code":128&t?"mark":32&t?"sub":64&t?"sup":null}function n$(e,t){return 1&t?"strong":2&t?"em":"span"}function nV(e,t,n,i,r){let l=i.classList,s=r0(r,"base");void 0!==s&&l.add(...s);let o=!1,a=8&t&&4&t;for(let e in void 0!==(s=r0(r,"underlineStrikethrough"))&&(8&n&&4&n?(o=!0,a||l.add(...s)):a&&l.remove(...s)),eb){let i=eb[e];if(void 0!==(s=r0(r,e)))if(n&i){if(o&&("underline"===e||"strikethrough"===e)){t&i&&l.remove(...s);continue}(0==(t&i)||a&&"underline"===e||"strikethrough"===e)&&l.add(...s)}else t&i&&l.remove(...s)}}function nH(e,t,n){let i=t.firstChild,r=n.isComposing(),l=e+(r?ey:"");if(null==i)t.textContent=l;else{let e=i.nodeValue;if(e!==l)if(r||eu){let[t,n,r]=function(e,t){let n=e.length,i=t.length,r=0,l=0;for(;r<n&&r<i&&e[r]===t[r];)r++;for(;l+r<n&&l+r<i&&e[n-l-1]===t[i-l-1];)l++;return[r,n-r-l,t.slice(r,i-l)]}(e,l);0!==n&&i.deleteData(t,n),i.insertData(t,r)}else i.nodeValue=l}}function nq(e,t,n,i,r,l){nH(r,e,t);let s=l.theme.text;void 0!==s&&nV(0,0,i,e,s)}function nY(e,t){let n=document.createElement(t);return n.appendChild(e),n}class nG extends nL{__text;__format;__style;__mode;__detail;static getType(){return"text"}static clone(e){return new nG(e.__text,e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__text=e.__text,this.__format=e.__format,this.__style=e.__style,this.__mode=e.__mode,this.__detail=e.__detail}constructor(e="",t){super(t),this.__text=e,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){return eT[this.getLatest().__mode]}getStyle(){return this.getLatest().__style}isToken(){return 1===this.getLatest().__mode}isComposing(){return this.__key===rD()}isSegmented(){return 2===this.getLatest().__mode}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(e){let t=eb[e];return 0!=(this.getFormat()&t)}isSimpleText(){return"text"===this.__type&&0===this.__mode}getTextContent(){return this.getLatest().__text}getFormatFlags(e,t){return rk(this.getLatest().__format,e,t)}canHaveFormat(){return!0}isInline(){return!0}createDOM(e,t){let n=this.__format,i=nJ(0,n),r=n$(0,n),l=null===i?r:i,s=document.createElement(l),o=s;this.hasFormat("code")&&s.setAttribute("spellcheck","false"),null!==i&&(o=document.createElement(r),s.appendChild(o)),nq(o,this,0,n,this.__text,e);let a=this.__style;return""!==a&&(s.style.cssText=a),s}updateDOM(e,t,n){let i=this.__text,r=e.__format,l=this.__format,s=nJ(0,r),o=nJ(0,l),a=n$(0,r),u=n$(0,l);if((null===s?a:s)!==(null===o?u:o))return!0;if(s===o&&a!==u){let e=t.firstChild;null==e&&er(48);let r=document.createElement(u);return nq(r,this,0,l,i,n),t.replaceChild(r,e),!1}let d=t;null!==o&&null!==s&&null==(d=t.firstChild)&&er(49),nH(i,d,this);let c=n.theme.text;void 0!==c&&r!==l&&nV(0,r,l,d,c);let h=e.__style,f=this.__style;return h!==f&&(t.style.cssText=f),!1}static importDOM(){return{"#text":()=>({conversion:n0,priority:0}),b:()=>({conversion:nZ,priority:0}),code:()=>({conversion:n3,priority:0}),em:()=>({conversion:n3,priority:0}),i:()=>({conversion:n3,priority:0}),mark:()=>({conversion:n3,priority:0}),s:()=>({conversion:n3,priority:0}),span:()=>({conversion:nX,priority:0}),strong:()=>({conversion:n3,priority:0}),sub:()=>({conversion:n3,priority:0}),sup:()=>({conversion:n3,priority:0}),u:()=>({conversion:n3,priority:0})}}static importJSON(e){return n4().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setTextContent(e.text).setFormat(e.format).setDetail(e.detail).setMode(e.mode).setStyle(e.style)}exportDOM(e){let{element:t}=super.exportDOM(e);return ld(t)||er(132),t.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?t.style.textTransform="lowercase":this.hasFormat("uppercase")?t.style.textTransform="uppercase":this.hasFormat("capitalize")&&(t.style.textTransform="capitalize"),this.hasFormat("bold")&&(t=nY(t,"b")),this.hasFormat("italic")&&(t=nY(t,"i")),this.hasFormat("strikethrough")&&(t=nY(t,"s")),this.hasFormat("underline")&&(t=nY(t,"u")),{element:t}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(e,t){}setFormat(e){let t=this.getWritable();return t.__format="string"==typeof e?eb[e]:e,t}setDetail(e){let t=this.getWritable();return t.__detail="string"==typeof e?eC[e]:e,t}setStyle(e){let t=this.getWritable();return t.__style=e,t}toggleFormat(e){let t=rk(this.getFormat(),e,null);return this.setFormat(t)}toggleDirectionless(){let e=this.getWritable();return e.__detail^=1,e}toggleUnmergeable(){let e=this.getWritable();return e.__detail^=2,e}setMode(e){let t=ek[e];if(this.__mode===t)return this;let n=this.getWritable();return n.__mode=t,n}setTextContent(e){if(this.__text===e)return this;let t=this.getWritable();return t.__text=e,t}select(e,t){iB();let n=e,i=t,r=iN(),l=this.getTextContent(),s=this.__key;if("string"==typeof l){let e=l.length;void 0===n&&(n=e),void 0===i&&(i=e)}else n=0,i=0;if(!is(r))return iv(s,n,s,i,"text","text");{let e=rD();e!==r.anchor.key&&e!==r.focus.key||rM(s),r.setTextNodeRange(this,n,this,i)}return r}selectStart(){return this.select(0,0)}selectEnd(){let e=this.getTextContentSize();return this.select(e,e)}spliceText(e,t,n,i){let r=this.getWritable(),l=r.__text,s=n.length,o=e;o<0&&(o=s+o)<0&&(o=0);let a=iN();if(i&&is(a)){let t=e+s;a.setTextNodeRange(r,t,r,t)}return r.__text=l.slice(0,o)+n+l.slice(o+t),r}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...e){let t;iB();let n=this.getLatest(),i=n.getTextContent();if(""===i)return[];let r=n.__key,l=rD(),s=i.length;e.sort((e,t)=>e-t),e.push(s);let o=[],a=e.length;for(let t=0,n=0;t<s&&n<=a;n++){let r=e[n];r>t&&(o.push(i.slice(t,r)),t=r)}let u=o.length;if(1===u)return[n];let d=o[0],c=n.getParent(),h=n.getFormat(),f=n.getStyle(),g=n.__detail,p=!1,m=null,_=null,y=iN();if(is(y)){let[e,t]=y.isBackward()?[y.focus,y.anchor]:[y.anchor,y.focus];"text"===e.type&&e.key===r&&(m=e),"text"===t.type&&t.key===r&&(_=t)}n.isSegmented()?((t=n4(d)).__format=h,t.__style=f,t.__detail=g,t.__state=eK(n,t),p=!0):t=n.setTextContent(d);let x=[t];for(let e=1;e<u;e++){let t=n4(o[e]);t.__format=h,t.__style=f,t.__detail=g,t.__state=eK(n,t);let i=t.__key;l===r&&rM(i),x.push(t)}let v=m?m.offset:null,S=_?_.offset:null,b=0;for(let e of x){if(!m&&!_)break;let t=b+e.getTextContentSize();if(null!==m&&null!==v&&v<=t&&v>=b&&(m.set(e.getKey(),v-b,"text"),v<t&&(m=null)),null!==_&&null!==S&&S<=t&&S>=b){_.set(e.getKey(),S-b,"text");break}b=t}if(null!==c){let e,t;e=this.getPreviousSibling(),t=this.getNextSibling(),null!==e&&rO(e),null!==t&&rO(t);let n=c.getWritable(),i=this.getIndexWithinParent();p?(n.splice(i,0,x),this.remove()):n.splice(i,1,x),is(y)&&ik(y,c,i,u-1)}return x}mergeWithSibling(e){let t=e===this.getPreviousSibling();t||e===this.getNextSibling()||er(50);let n=this.__key,i=e.__key,r=this.__text,l=r.length;rD()===i&&rM(n);let s=iN();if(is(s)){let r=s.anchor,o=s.focus;null!==r&&r.key===i&&iO(r,t,n,e,l),null!==o&&o.key===i&&iO(o,t,n,e,l)}let o=e.__text,a=t?o+r:r+o;this.setTextContent(a);let u=this.getWritable();return e.remove(),u}isTextEntity(){return!1}}function nX(e){return{forChild:n5(e.style),node:null}}function nZ(e){let t="normal"===e.style.fontWeight;return{forChild:n5(e.style,t?void 0:"bold"),node:null}}let nQ=new WeakMap;function n0(e){null===e.parentElement&&er(129);let t=e.textContent||"";if(null!==function(e){let t,n=e.parentNode,i=[e];for(;null!==n&&void 0===(t=nQ.get(n))&&!function(e){if(!ld(e))return!1;if("PRE"===e.nodeName)return!0;let t=e.style.whiteSpace;return"string"==typeof t&&t.startsWith("pre")}(n);)i.push(n),n=n.parentNode;let r=void 0===t?n:t;for(let e=0;e<i.length;e++)nQ.set(i[e],r);return r}(e)){let e=t.split(/(\r?\n|\t)/),n=[],i=e.length;for(let t=0;t<i;t++){let i=e[t];"\n"===i||"\r\n"===i?n.push(nK()):"	"===i?n.push(n8()):""!==i&&n.push(n4(i))}return{node:n}}if(""===(t=t.replace(/\r/g,"").replace(/[ \t\n]+/g," ")))return{node:null};if(" "===t[0]){let n=e,i=!0;for(;null!==n&&null!==(n=n1(n,!1));){let e=n.textContent||"";if(e.length>0){/[ \t\n]$/.test(e)&&(t=t.slice(1)),i=!1;break}}i&&(t=t.slice(1))}if(" "===t[t.length-1]){let n=e,i=!0;for(;null!==n&&null!==(n=n1(n,!0));)if((n.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){i=!1;break}i&&(t=t.slice(0,t.length-1))}return""===t?{node:null}:{node:n4(t)}}function n1(e,t){let n=e;for(;;){let e;for(;null===(e=t?n.nextSibling:n.previousSibling);){let e=n.parentElement;if(null===e)return null;n=e}if(ld(n=e)){let e=n.style.display;if(""===e&&!lf(n)||""!==e&&!e.startsWith("inline"))return null}let i=n;for(;null!==(i=t?n.firstChild:n.lastChild);)n=i;if(rC(n))return n;if("BR"===n.nodeName)return null}}let n2={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function n3(e){let t=n2[e.nodeName.toLowerCase()];return void 0===t?{node:null}:{forChild:n5(e.style,t),node:null}}function n4(e=""){return lr(new nG(e))}function n6(e){return e instanceof nG}function n5(e,t){let n=e.fontWeight,i=e.textDecoration.split(" "),r="700"===n||"bold"===n,l=i.includes("line-through"),s="italic"===e.fontStyle,o=i.includes("underline"),a=e.verticalAlign;return e=>(n6(e)&&(r&&!e.hasFormat("bold")&&e.toggleFormat("bold"),l&&!e.hasFormat("strikethrough")&&e.toggleFormat("strikethrough"),s&&!e.hasFormat("italic")&&e.toggleFormat("italic"),o&&!e.hasFormat("underline")&&e.toggleFormat("underline"),"sub"!==a||e.hasFormat("subscript")||e.toggleFormat("subscript"),"super"!==a||e.hasFormat("superscript")||e.toggleFormat("superscript"),t&&!e.hasFormat(t)&&e.toggleFormat(t)),e)}class n9 extends nG{static getType(){return"tab"}static clone(e){return new n9(e.__key)}constructor(e){super("	",e),this.__detail=2}static importDOM(){return null}createDOM(e){let t=super.createDOM(e),n=r0(e.theme,"tab");return void 0!==n&&t.classList.add(...n),t}static importJSON(e){return n8().updateFromJSON(e)}setTextContent(e){return"	"!==e&&""!==e&&el(126),super.setTextContent("	")}spliceText(e,t,n,i){return""===n&&0===t||"	"===n&&1===t||er(286),this}setDetail(e){return 2!==e&&er(127),this}setMode(e){return"normal"!==e&&er(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function n8(){return lr(new n9)}function n7(e){return e instanceof n9}class ie{key;offset;type;_selection;constructor(e,t,n){this._selection=null,this.key=e,this.offset=t,this.type=n}is(e){return this.key===e.key&&this.offset===e.offset&&this.type===e.type}isBefore(e){return this.key===e.key?this.offset<e.offset:0>lH(l4(lX(this,"next")),l4(lX(e,"next")))}getNode(){let e=rA(this.key);return null===e&&er(20),e}set(e,t,n,i){let r=this._selection,l=this.key;i&&this.key===e&&this.offset===t&&this.type===n||(this.key=e,this.offset=t,this.type=n,iR()||(rD()===l&&rM(e),null!==r&&(r.setCachedNodes(null),r.dirty=!0)))}}function it(e,t,n){return new ie(e,t,n)}function ii(e,t){let n=t.__key,i=e.offset,r="element";if(n6(t)){r="text";let e=t.getTextContentSize();i>e&&(i=e)}else if(!i4(t)){let e=t.getNextSibling();if(n6(e))n=e.__key,i=0,r="text";else{let e=t.getParent();e&&(n=e.__key,i=t.getIndexWithinParent()+1)}}e.set(n,i,r)}function ir(e,t){if(i4(t)){let n=t.getLastDescendant();i4(n)||n6(n)?ii(e,n):ii(e,t)}else ii(e,t)}class il{_nodes;_cachedNodes;dirty;constructor(e){this._cachedNodes=null,this._nodes=e,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){if(!ia(e))return!1;let t=this._nodes,n=e._nodes;return t.size===n.size&&Array.from(t).every(e=>n.has(e))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(e){this.dirty=!0,this._nodes.add(e),this._cachedNodes=null}delete(e){this.dirty=!0,this._nodes.delete(e),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(e){return this._nodes.has(e)}clone(){return new il(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(e){}insertText(){}insertNodes(e){let t,n=this.getNodes(),i=n.length,r=n[i-1];if(n6(r))t=r.select();else{let e=r.getIndexWithinParent()+1;t=r.getParentOrThrow().select(e,e)}t.insertNodes(e);for(let e=0;e<i;e++)n[e].remove()}getNodes(){let e=this._cachedNodes;if(null!==e)return e;let t=this._nodes,n=[];for(let e of t){let t=rA(e);null!==t&&n.push(t)}return iR()||(this._cachedNodes=n),n}getTextContent(){let e=this.getNodes(),t="";for(let n=0;n<e.length;n++)t+=e[n].getTextContent();return t}deleteNodes(){let e=this.getNodes();if((iN()||iw())===this&&e[0]){var t;let n,i,r=lI(e[0],"next");t=l$(r,r),lQ(i=is(n=iN())?n:iS(),t),rB(i)}for(let t of e)t.remove()}}function is(e){return e instanceof io}class io{format;style;anchor;focus;_cachedNodes;dirty;constructor(e,t,n,i){this.anchor=e,this.focus=t,e._selection=this,t._selection=this,this._cachedNodes=null,this.format=n,this.style=i,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){return!!is(e)&&this.anchor.is(e.anchor)&&this.focus.is(e.focus)&&this.format===e.format&&this.style===e.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){let e=this._cachedNodes;if(null!==e)return e;let t=function(e){let t=[],[n,i]=e.getTextSlices();n&&t.push(n.caret.origin);let r=new Set,l=new Set;for(let n of e)if(lP(n)){let{origin:e}=n;0===t.length?r.add(e):(l.add(e),t.push(e))}else{let{origin:e}=n;i4(e)&&l.has(e)||t.push(e)}if(i&&t.push(i.caret.origin),lA(e.focus)&&i4(e.focus.origin)&&null===e.focus.getNodeAtCaret())for(let n=lB(e.focus.origin,"previous");lP(n)&&r.has(n.origin)&&!n.origin.isEmpty()&&n.origin.is(t[t.length-1]);n=lK(n))r.delete(n.origin),t.pop();for(;t.length>1;){let e=t[t.length-1];if(!i4(e)||l.has(e)||e.isEmpty()||r.has(e))break;t.pop()}if(0===t.length&&e.isCollapsed()){let n=l4(e.anchor),i=l4(e.anchor.getFlipped()),r=e=>lD(e)?e.origin:e.getNodeAtCaret(),l=r(n)||r(i)||(e.anchor.getNodeAtCaret()?n.origin:i.origin);t.push(l)}return t}(l9(l0(this),"next"));return iR()||(this._cachedNodes=t),t}setTextNodeRange(e,t,n,i){this.anchor.set(e.__key,t,"text"),this.focus.set(n.__key,i,"text")}getTextContent(){let e=this.getNodes();if(0===e.length)return"";let t=e[0],n=e[e.length-1],i=this.anchor,r=this.focus,l=i.isBefore(r),[s,o]=id(this),a="",u=!0;for(let d=0;d<e.length;d++){let c=e[d];if(i4(c)&&!c.isInline())u||(a+="\n"),u=!c.isEmpty();else if(u=!1,n6(c)){let e=c.getTextContent();c===t?c===n?"element"===i.type&&"element"===r.type&&r.offset!==i.offset||(e=s<o?e.slice(s,o):e.slice(o,s)):e=l?e.slice(s):e.slice(o):c===n&&(e=l?e.slice(0,o):e.slice(0,s)),a+=e}else!i9(c)&&!nW(c)||c===n&&this.isCollapsed()||(a+=c.getTextContent())}return a}applyDOMRange(e){let t=iU(),n=t.getEditorState()._selection,i=iy(e.startContainer,e.startOffset,e.endContainer,e.endOffset,t,n);if(null===i)return;let[r,l]=i;this.anchor.set(r.key,r.offset,r.type,!0),this.focus.set(l.key,l.offset,l.type,!0),e$(this)}clone(){let e=this.anchor,t=this.focus;return new io(it(e.key,e.offset,e.type),it(t.key,t.offset,t.type),this.format,this.style)}toggleFormat(e){this.format=rk(this.format,e,null),this.dirty=!0}setFormat(e){this.format=e,this.dirty=!0}setStyle(e){this.style=e,this.dirty=!0}hasFormat(e){let t=eb[e];return 0!=(this.format&t)}insertRawText(e){let t=e.split(/(\r?\n|\t)/),n=[],i=t.length;for(let e=0;e<i;e++){let i=t[e];"\n"===i||"\r\n"===i?n.push(nK()):"	"===i?n.push(n8()):n.push(n4(i))}this.insertNodes(n)}insertText(e){let t=this.anchor,n=this.focus,i=this.format,r=this.style,l=t,s=n;!this.isCollapsed()&&n.isBefore(t)&&(l=n,s=t),"element"===l.type&&function(e,t,n,i){let r=e.getNode(),l=r.getChildAtIndex(e.offset),s=n4();if(s.setFormat(n),s.setStyle(i),ro(l))l.splice(0,0,[s]);else{let e=i7(r)?rs().append(s):s;null===l?r.append(e):l.insertBefore(e)}e.is(t)&&t.set(s.__key,0,"text"),e.set(s.__key,0,"text")}(l,s,i,r),"element"===s.type&&lZ(s,l4(lX(s,"next")));let o=l.offset,a=s.offset,u=this.getNodes(),d=u.length,c=u[0];n6(c)||er(26);let h=c.getTextContent().length,f=c.getParentOrThrow(),g=u[d-1];if(1===d&&"element"===s.type&&(a=h,s.set(l.key,a,"text")),this.isCollapsed()&&o===h&&(rb(c)||!c.canInsertTextAfter()||!f.canInsertTextAfter()&&null===c.getNextSibling())){let t=c.getNextSibling();if(n6(t)&&t.canInsertTextBefore()&&!rb(t)||((t=n4()).setFormat(i),t.setStyle(r),f.canInsertTextAfter()?c.insertAfter(t):f.insertAfter(t)),t.select(0,0),c=t,""!==e)return void this.insertText(e)}else if(this.isCollapsed()&&0===o&&(rb(c)||!c.canInsertTextBefore()||!f.canInsertTextBefore()&&null===c.getPreviousSibling())){let t=c.getPreviousSibling();if(n6(t)&&!rb(t)||((t=n4()).setFormat(i),f.canInsertTextBefore()?c.insertBefore(t):f.insertBefore(t)),t.select(),c=t,""!==e)return void this.insertText(e)}else if(c.isSegmented()&&o!==h){let e=n4(c.getTextContent());e.setFormat(i),c.replace(e),c=e}else if(!this.isCollapsed()&&""!==e){let t=g.getParent();if(!f.canInsertTextBefore()||!f.canInsertTextAfter()||i4(t)&&(!t.canInsertTextBefore()||!t.canInsertTextAfter()))return this.insertText(""),i_(this.anchor,this.focus,null),void this.insertText(e)}if(1===d){if(rS(c)){let t=n4(e);return t.select(),void c.replace(t)}let t=c.getFormat(),n=c.getStyle();if(o!==a||t===i&&n===r){if(n7(c)){let t=n4(e);return t.setFormat(i),t.setStyle(r),t.select(),void c.replace(t)}}else{if(""!==c.getTextContent()){let t=n4(e);if(t.setFormat(i),t.setStyle(r),t.select(),0===o)c.insertBefore(t,!1);else{let[e]=c.splitText(o);e.insertAfter(t,!1)}return void(t.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=e.length))}c.setFormat(i),c.setStyle(r)}let l=a-o;""===(c=c.spliceText(o,l,e,!0)).getTextContent()?c.remove():"text"===this.anchor.type&&(c.isComposing()?this.anchor.offset-=e.length:(this.format=t,this.style=n))}else{let t=new Set([...c.getParentKeys(),...g.getParentKeys()]),n=i4(c)?c:c.getParentOrThrow(),i=i4(g)?g:g.getParentOrThrow(),r=g;if(!n.is(i)&&i.isInline())do r=i,i=i.getParentOrThrow();while(i.isInline())if("text"===s.type&&(0!==a||""===g.getTextContent())||"element"===s.type&&g.getIndexWithinParent()<a)if(n6(g)&&!rS(g)&&a!==g.getTextContentSize()){if(g.isSegmented()){let e=n4(g.getTextContent());g.replace(e),g=e}i7(s.getNode())||"text"!==s.type||(g=g.spliceText(0,a,"")),t.add(g.__key)}else{let e=g.getParentOrThrow();e.canBeEmpty()||1!==e.getChildrenSize()?g.remove():e.remove()}else t.add(g.__key);let l=i.getChildren(),f=new Set(u),p=n.is(i),m=n.isInline()&&null===c.getNextSibling()?n:c;for(let e=l.length-1;e>=0;e--){let t=l[e];if(t.is(c)||i4(t)&&t.isParentOf(c))break;t.isAttached()&&(!f.has(t)||t.is(r)?p||m.insertAfter(t,!1):t.remove())}if(!p){let e=i,n=null;for(;null!==e;){let i=e.getChildren(),r=i.length;(0===r||i[r-1].is(n))&&(t.delete(e.__key),n=e),e=e.getParent()}}if(rS(c))if(o===h)c.select();else{let t=n4(e);t.select(),c.replace(t)}else""===(c=c.spliceText(o,h-o,e,!0)).getTextContent()?c.remove():c.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=e.length);for(let e=1;e<d;e++){let n=u[e],i=n.__key;t.has(i)||n.remove()}}}removeText(){let e=iN()===this;lQ(this,function(e,t="removeEmptySlices"){let n,i;if(e.isCollapsed())return e;let r="root",l="next",s=t,o=l9(e,l),a=l2(o.anchor,r),u=l2(o.focus.getFlipped(),r),d=new Set,c=[];for(let e of o.iterNodeCarets(r))if(lP(e))d.add(e.origin.getKey());else if(lA(e)){let{origin:t}=e;i4(t)&&!d.has(t.getKey())||c.push(t)}for(let e of c)e.remove();for(let e of o.getTextSlices()){if(!e)continue;let{origin:t}=e.caret,n=t.getTextContentSize(),i=l1(lI(t,l)),r=t.getMode();if(Math.abs(e.distance)===n&&"removeEmptySlices"===s||"token"===r&&0!==e.distance)i.remove();else if(0!==e.distance){s="removeEmptySlices";let t=e.removeTextSlice(),n=e.caret.origin;if("segmented"===r){let e=t.origin,n=n4(e.getTextContent()).setStyle(e.getStyle()).setFormat(e.getFormat());i.replaceOrInsert(n),t=lz(n,l,t.offset)}n.is(a[0].origin)&&(a[0]=t),n.is(u[0].origin)&&(u[0]=t.getFlipped())}}for(let e of a)if(l3(e)){n=l4(e);break}for(let e of u)if(l3(e)){i=l4(e);break}let h=function(e,t,n){let i;if(!e||!t)return null;let r=e.getParentAtCaret(),l=t.getParentAtCaret();if(!r||!l)return null;let s=r.getParents().reverse();s.push(r);let o=l.getParents().reverse();o.push(l);let a=Math.min(s.length,o.length);for(i=0;i<a&&s[i]===o[i];i++);let u=(e,t)=>{let n;for(let r=i;r<e.length;r++){let i=e[r];if(li(i))return;!n&&t(i)&&(n=i)}return n},d=u(s,lp),c=d&&u(o,e=>n.has(e.getKey())&&lp(e));return d&&c?[d,c]:null}(n,i,d);if(h){let[e,t]=h;lB(e,"previous").splice(0,t.getChildren()),t.remove()}let f=[n,i,...a,...u].find(l3);if(f){var g;return l$(g=l5(l4(f),e.direction),g)}er(269,JSON.stringify(a.map(e=>e.origin.__key)))}(l0(this))),e&&iN()!==this&&rB(this)}formatText(e,t=null){if(this.isCollapsed())return this.toggleFormat(e),void rM(null);let n=this.getNodes(),i=[];for(let e of n)n6(e)&&i.push(e);let r=t=>{n.forEach(n=>{if(i4(n)){let i=n.getFormatFlags(e,t);n.setTextFormat(i)}})},l=i.length;if(0===l)return this.toggleFormat(e),rM(null),void r(t);let s=this.anchor,o=this.focus,a=this.isBackward(),u=a?o:s,d=a?s:o,c=0,h=i[0],f="element"===u.type?0:u.offset;if("text"===u.type&&f===h.getTextContentSize()&&(c=1,h=i[1],f=0),null==h)return;let g=h.getFormatFlags(e,t);r(g);let p=l-1,m=i[p],_="text"===d.type?d.offset:m.getTextContentSize();if(h.is(m)){if(f===_)return;if(rb(h)||0===f&&_===h.getTextContentSize())h.setFormat(g);else{let e=h.splitText(f,_),t=0===f?e[0]:e[1];t.setFormat(g),"text"===u.type&&u.set(t.__key,0,"text"),"text"===d.type&&d.set(t.__key,_-f,"text")}return void(this.format=g)}0===f||rb(h)||([,h]=h.splitText(f),f=0),h.setFormat(g);let y=m.getFormatFlags(e,g);_>0&&(_===m.getTextContentSize()||rb(m)||([m]=m.splitText(_)),m.setFormat(y));for(let t=c+1;t<p;t++){let n=i[t],r=n.getFormatFlags(e,y);n.setFormat(r)}"text"===u.type&&u.set(h.__key,f,"text"),"text"===d.type&&d.set(m.__key,_,"text"),this.format=g|y}insertNodes(e){var t;if(0===e.length)return;if(this.isCollapsed()||this.removeText(),"root"===this.anchor.key){this.insertParagraph();let t=iN();return is(t)||er(134),t.insertNodes(e)}let n=(this.isBackward()?this.focus:this.anchor).getNode(),i=lC(n,lp),r=e[e.length-1];if(i4(i)&&"__language"in i){if("__language"in e[0])this.insertText(e[0].getTextContent());else{let t=iD(this);i.splice(t,0,e),r.selectEnd()}return}if(!e.some(e=>(i4(e)||i9(e))&&!e.isInline())){i4(i)||er(211,n.constructor.name,n.getType());let t=iD(this);return i.splice(t,0,e),void r.selectEnd()}let l=function(e){let t=rs(),n=null;for(let i=0;i<e.length;i++){let r=e[i],l=nW(r);if(l||i9(r)&&r.isInline()||i4(r)&&r.isInline()||n6(r)||r.isParentRequired()){if(null===n&&(n=r.createParentElementNode(),t.append(n),l))continue;null!==n&&n.append(r)}else t.append(r),n=null}return t}(e),s=l.getLastDescendant(),o=l.getChildren(),a=i4(i)&&i.isEmpty()?null:this.insertParagraph(),u=o[o.length-1],d=o[0];i4(t=d)&&lp(t)&&!t.isEmpty()&&i4(i)&&(!i.isEmpty()||i.canMergeWhenEmpty())&&(i4(i)||er(211,n.constructor.name,n.getType()),i.append(...d.getChildren()),d=o[1]),d&&(null===i&&er(212,n.constructor.name,n.getType()),function(e,t){let n=t.getParentOrThrow().getLastChild(),i=t,r=[t];for(;i!==n;)i.getNextSibling()||er(140),r.push(i=i.getNextSibling());let l=e;for(let e of r)l=l.insertAfter(e)}(i,d));let c=lC(s,lp);a&&i4(c)&&(a.canMergeWhenEmpty()||lp(u))&&(c.append(...a.getChildren()),a.remove()),i4(i)&&i.isEmpty()&&i.remove(),s.selectEnd();let h=i4(i)?i.getLastChild():null;nW(h)&&c!==i&&h.remove()}insertParagraph(){if("root"===this.anchor.key){let e=rs();return rz().splice(this.anchor.offset,0,[e]),e.select(),e}let e=iD(this),t=lC(this.anchor.getNode(),lp);i4(t)||er(213);let n=t.getChildAtIndex(e),i=n?[n,...n.getNextSiblings()]:[],r=t.insertNewAfter(this,!1);return r?(r.append(...i),r.selectStart(),r):null}insertLineBreak(e){let t=nK();if(this.insertNodes([t]),e){let e=t.getParentOrThrow(),n=t.getIndexWithinParent();e.select(n,n)}}extract(){let e=[...this.getNodes()],t=e.length,n=e[0],i=e[t-1],[r,l]=id(this),s=this.isBackward(),[o,a]=s?[this.focus,this.anchor]:[this.anchor,this.focus],[u,d]=s?[l,r]:[r,l];if(0===t)return[];if(1===t){if(n6(n)&&!this.isCollapsed()){let e=n.splitText(u,d),t=0===u?e[0]:e[1];return t?(o.set(t.getKey(),0,"text"),a.set(t.getKey(),t.getTextContentSize(),"text"),[t]):[]}return[n]}if(n6(n)&&(u===n.getTextContentSize()?e.shift():0!==u&&([,n]=n.splitText(u),e[0]=n,o.set(n.getKey(),0,"text"))),n6(i)){let t=i.getTextContent().length;0===d?e.pop():d!==t&&([i]=i.splitText(d),e[e.length-1]=i,a.set(i.getKey(),i.getTextContentSize(),"text"))}return e}modify(e,t,n){var i;if(iA(this,e,t,n))return;let r="move"===e,l=iU(),s=la(ln(l));if(!s)return;let o=l._blockCursorElement,a=l._rootElement,u=this.focus.getNode();if(null===a||null===o||!i4(u)||u.isInline()||u.canBeEmpty()||lo(o,l,a),this.dirty){let e=r9(l,this.anchor.key),t=r9(l,this.focus.key);"text"===this.anchor.type&&(e=rw(e)),"text"===this.focus.type&&(t=rw(t)),e&&t&&iM(s,e,this.anchor.offset,t,this.focus.offset)}if(i=t?"backward":"forward",s.modify(e,i,n),s.rangeCount>0){let e=s.getRangeAt(0),n=this.anchor.getNode(),i=i7(n)?n:function(e){let t=e.getParentOrThrow();for(;null!==t&&!li(t);)t=t.getParentOrThrow();return t}(n);if(this.applyDOMRange(e),this.dirty=!0,!r){let n,r,l,o,a,u=this.getNodes(),d=[],c=!1;for(let e=0;e<u.length;e++){let t=u[e];le(t,i)?d.push(t):c=!0}if(c&&d.length>0)if(t){let e=d[0];i4(e)?e.selectStart():e.getParentOrThrow().selectStart()}else{let e=d[d.length-1];i4(e)?e.selectEnd():e.getParentOrThrow().selectEnd()}s.anchorNode===e.startContainer&&s.anchorOffset===e.startOffset||(n=this.focus,l=(r=this.anchor).key,o=r.offset,a=r.type,r.set(n.key,n.offset,n.type,!0),n.set(l,o,a,!0))}}"lineboundary"===n&&iA(this,e,t,n,"decorators")}forwardDeletion(e,t,n){if(!n&&("element"===e.type&&i4(t)&&e.offset===t.getChildrenSize()||"text"===e.type&&e.offset===t.getTextContentSize())){let e=t.getParent(),n=t.getNextSibling()||(null===e?null:e.getNextSibling());if(i4(n)&&n.isShadowRoot())return!0}return!1}deleteCharacter(e){let t=this.isCollapsed();if(this.isCollapsed()){let t=this.anchor,n=t.getNode();if(this.forwardDeletion(t,n,e))return;let i=lJ(lX(t,e?"previous":"next"));if(i.getTextSlices().every(e=>null===e||0===e.distance)){let e={type:"initial"};for(let t of i.iterNodeCarets("shadowRoot"))if(lP(t))if(t.origin.isInline());else{if(t.origin.isShadowRoot()){if("merge-block"===e.type)break;if(i4(i.anchor.origin)&&i.anchor.origin.isEmpty()){let e=l4(t);lQ(this,l$(e,e)),i.anchor.origin.remove()}return}"merge-next-block"!==e.type&&"merge-block"!==e.type||(e={block:e.block,caret:t,type:"merge-block"})}else{if("merge-block"===e.type)break;if(lA(t)){if(i4(t.origin)){if(t.origin.isInline()){if(!t.origin.isParentOf(i.anchor.origin))break}else e={block:t.origin,type:"merge-next-block"};continue}if(i9(t.origin)){if(t.origin.isIsolated());else if("merge-next-block"===e.type&&(t.origin.isKeyboardSelectable()||!t.origin.isInline())&&i4(i.anchor.origin)&&i.anchor.origin.isEmpty()){i.anchor.origin.remove();let e=ib();e.add(t.origin.getKey()),rB(e)}else t.origin.remove();return}break}}if("merge-block"===e.type){let{caret:t,block:n}=e;return lQ(this,l$(!t.origin.isEmpty()&&n.isEmpty()?l1(lI(n,t.direction)):i.anchor,t)),this.removeText()}}let r=this.focus;if(this.modify("extend",e,"character"),this.isCollapsed()){if(e&&0===t.offset&&ic(this,t.getNode()))return}else{let i="text"===r.type?r.getNode():null;if(n="text"===t.type?t.getNode():null,null!==i&&i.isSegmented()){let t=r.offset,l=i.getTextContentSize();if(i.is(n)||e&&t!==l||!e&&0!==t)return void ig(i,e,t)}else if(null!==n&&n.isSegmented()){let r=t.offset,l=n.getTextContentSize();if(n.is(i)||e&&0!==r||!e&&r!==l)return void ig(n,e,r)}!function(e,t){let n=e.anchor,i=e.focus,r=n.getNode();if(r===i.getNode()&&"text"===n.type&&"text"===i.type){var l;let e=n.offset,s=i.offset,o=e<s,a=o?e:s,u=o?s:e,d=u-1;a===d||rW(l=r.getTextContent().slice(a,u))||ih(l)||(t?i.set(i.key,d,i.type):n.set(n.key,d,n.type))}}(this,e)}}if(this.removeText(),e&&!t&&this.isCollapsed()&&"element"===this.anchor.type&&0===this.anchor.offset){let e=this.anchor.getNode();e.isEmpty()&&i7(e.getParent())&&null===e.getPreviousSibling()&&ic(this,e)}}deleteLine(e){this.isCollapsed()&&this.modify("extend",e,"lineboundary"),this.isCollapsed()?this.deleteCharacter(e):this.removeText()}deleteWord(e){if(this.isCollapsed()){let t=this.anchor,n=t.getNode();if(this.forwardDeletion(t,n,e))return;this.modify("extend",e,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function ia(e){return e instanceof il}function iu(e){let t=e.offset;if("text"===e.type)return t;let n=e.getNode();return t===n.getChildrenSize()?n.getTextContent().length:0}function id(e){let t=e.getStartEndPoints();if(null===t)return[0,0];let[n,i]=t;return"element"===n.type&&"element"===i.type&&n.key===i.key&&n.offset===i.offset?[0,0]:[iu(n),iu(i)]}function ic(e,t){for(let n=t;n;n=n.getParent()){if(i4(n)){if(n.collapseAtStart(e))return!0;if(li(n))break}if(n.getPreviousSibling())break}return!1}let ih=(()=>{try{let e=RegExp("\\p{Emoji}","u"),t=e.test.bind(e);if(t("❤️")&&t("#️⃣")&&t("👍"))return t}catch(e){}return()=>!1})();function ig(e,t,n){let i=e.getTextContent().split(/(?=\s)/g),r=i.length,l=0,s=0;for(let e=0;e<r;e++){let o=e===r-1;if(s=l,l+=i[e].length,t&&l===n||l>n||o){i.splice(e,1),o&&(s=void 0);break}}let o=i.join("").trim();""===o?e.remove():(e.setTextContent(o),e.select(s,s))}function ip(e,t,n,i){let r,l=t;if(ld(e)){let s=!1,o=e.childNodes,a=o.length,u=i._blockCursorElement;l===a&&(s=!0,l=a-1);let d=o[l],c=!1;if(d===u)d=o[l+1],c=!0;else if(null!==u){let n=u.parentNode;e===n&&t>Array.prototype.indexOf.call(n.children,u)&&l--}if(n6(r=rK(d)))l=lR(r,s?"next":"previous");else{let o=rK(e);if(null===o)return null;if(i4(o)){let a,u=i.getElementByKey(o.getKey());null===u&&er(214);let d=o.getDOMSlot(u);[o,l]=d.resolveChildIndex(o,u,e,t),i4(o)||er(215),s&&l>=o.getChildrenSize()&&(l=Math.max(0,o.getChildrenSize()-1));let h=o.getChildAtIndex(l);if(i4(h)&&(a=h.getParent(),null===n||null===a||!a.canBeEmpty()||a!==n.getNode())){let e=s?h.getLastDescendant():h.getFirstDescendant();o=null===e||i4(h=e)?h:h.getParentOrThrow(),l=0}n6(h)?(r=h,o=null,l=lR(h,s?"next":"previous")):h!==o&&s&&!c&&(i4(o)||er(216),l=Math.min(o.getChildrenSize(),l+1))}else{let n=o.getIndexWithinParent();l=0===t&&i9(o)&&rK(e)===o?n:n+1,o=o.getParentOrThrow()}if(i4(o))return it(o.__key,l,"element")}}else r=rK(e);return n6(r)?it(r.__key,lR(r,l,"clamp"),"text"):null}function im(e,t,n){let i=e.offset,r=e.getNode();if(0===i){let i=r.getPreviousSibling(),l=r.getParent();if(t){if((n||!t)&&null===i&&i4(l)&&l.isInline()){let t=l.getPreviousSibling();n6(t)&&e.set(t.__key,t.getTextContent().length,"text")}}else i4(i)&&!n&&i.isInline()?e.set(i.__key,i.getChildrenSize(),"element"):n6(i)&&e.set(i.__key,i.getTextContent().length,"text")}else if(i===r.getTextContent().length){let i=r.getNextSibling(),l=r.getParent();if(t&&i4(i)&&i.isInline())e.set(i.__key,0,"element");else if((n||t)&&null===i&&i4(l)&&l.isInline()&&!l.canInsertTextAfter()){let t=l.getNextSibling();n6(t)&&e.set(t.__key,0,"text")}}}function i_(e,t,n){if("text"===e.type&&"text"===t.type){let i=e.isBefore(t),r=e.is(t);im(e,i,r),im(t,!i,r),r&&t.set(e.key,e.offset,e.type);let l=iU();if(l.isComposing()&&l._compositionKey!==e.key&&is(n)){let i=n.anchor,r=n.focus;e.set(i.key,i.offset,i.type,!0),t.set(r.key,r.offset,r.type,!0)}}}function iy(e,t,n,i,r,l){if(null===e||null===n||!r_(r,e,n))return null;let s=ip(e,t,is(l)?l.anchor:null,r);if(null===s)return null;let o=ip(n,i,is(l)?l.focus:null,r);if(null===o)return null;if("element"===s.type&&"element"===o.type){let t=rK(e),i=rK(n);if(i9(t)&&i9(i))return null}return i_(s,o,l),[s,o]}function ix(e){return i4(e)&&!e.isInline()}function iv(e,t,n,i,r,l){let s=iW(),o=new io(it(e,t,r),it(n,i,l),0,"");return o.dirty=!0,s._selection=o,o}function iS(){return new io(it("root",0,"element"),it("root",0,"element"),0,"")}function ib(){return new il(new Set)}function iC(e,t,n,i){let r,l,s,o,a=n._window;if(null===a)return null;let u=i||a.event,d=u?u.type:void 0,c="selectionchange"===d,h=!eO&&(c||"beforeinput"===d||"compositionstart"===d||"compositionend"===d||"click"===d&&u&&3===u.detail||"drop"===d||void 0===d);if(is(e)&&!h)return e.clone();if(null===t)return null;if(r=t.anchorNode,l=t.focusNode,s=t.anchorOffset,o=t.focusOffset,(c||void 0===d)&&is(e)&&!r_(n,r,l))return e.clone();let f=iy(r,s,l,o,n,e);if(null===f)return null;let[g,p]=f;return new io(g,p,is(e)?e.format:0,is(e)?e.style:"")}function iN(){return iW()._selection}function iw(){return iU()._editorState._selection}function ik(e,t,n,i=1){let r=e.anchor,l=e.focus,s=r.getNode(),o=l.getNode();if(!t.is(s)&&!t.is(o))return;let a=t.__key;if(e.isCollapsed()){let t=r.offset;if(n<=t&&i>0||n<t&&i<0){let n=Math.max(0,t+i);r.set(a,n,"element"),l.set(a,n,"element"),iT(e)}}else{let s=e.isBackward(),o=s?l:r,u=o.getNode(),d=s?r:l,c=d.getNode();if(t.is(u)){let e=o.offset;(n<=e&&i>0||n<e&&i<0)&&o.set(a,Math.max(0,e+i),"element")}if(t.is(c)){let e=d.offset;(n<=e&&i>0||n<e&&i<0)&&d.set(a,Math.max(0,e+i),"element")}}iT(e)}function iT(e){let t=e.anchor,n=t.offset,i=e.focus,r=i.offset,l=t.getNode(),s=i.getNode();if(e.isCollapsed()){if(!i4(l))return;let e=l.getChildrenSize(),r=n>=e,s=r?l.getChildAtIndex(e-1):l.getChildAtIndex(n);if(n6(s)){let e=0;r&&(e=s.getTextContentSize()),t.set(s.__key,e,"text"),i.set(s.__key,e,"text")}return}if(i4(l)){let e=l.getChildrenSize(),i=n>=e,r=i?l.getChildAtIndex(e-1):l.getChildAtIndex(n);if(n6(r)){let e=0;i&&(e=r.getTextContentSize()),t.set(r.__key,e,"text")}}if(i4(s)){let e=s.getChildrenSize(),t=r>=e,n=t?s.getChildAtIndex(e-1):s.getChildAtIndex(r);if(n6(n)){let e=0;t&&(e=n.getTextContentSize()),i.set(n.__key,e,"text")}}}function iE(e,t,n,i,r){let l=null,s=0,o=null;null!==i?(l=i.__key,n6(i)?(s=i.getTextContentSize(),o="text"):i4(i)&&(s=i.getChildrenSize(),o="element")):null!==r&&(l=r.__key,n6(r)?o="text":i4(r)&&(o="element")),null!==l&&null!==o?e.set(l,s,o):(-1===(s=t.getIndexWithinParent())&&(s=n.getChildrenSize()),e.set(n.__key,s,"element"))}function iO(e,t,n,i,r){"text"===e.type?e.set(n,e.offset+(t?0:r),"text"):e.offset>i.getIndexWithinParent()&&e.set(e.key,e.offset-1,"element")}function iM(e,t,n,i,r){try{e.setBaseAndExtent(t,n,i,r)}catch(e){}}function iD(e){let t=e;e.isCollapsed()||t.removeText();let n=iN();is(n)&&(t=n),is(t)||er(161);let i=t.anchor,r=i.getNode(),l=i.offset;for(;!lp(r);){let e=r;if([r,l]=function(e,t){let n=e.getParent();if(!n){let e=rs();return rz().append(e),e.select(),[rz(),0]}if(n6(e)){let i=e.splitText(t);if(0===i.length)return[n,e.getIndexWithinParent()];let r=+(0!==t);return[n,i[0].getIndexWithinParent()+r]}if(!i4(e)||0===t)return[n,e.getIndexWithinParent()];let i=e.getChildAtIndex(t);if(i){let n=new io(it(e.__key,t,"element"),it(e.__key,t,"element"),0,""),r=e.insertNewAfter(n);r&&r.append(i,...i.getNextSiblings())}return[n,e.getIndexWithinParent()+1]}(r,l),e.is(r))break}return l}function iA(e,t,n,i,r="decorators-and-blocks"){if("move"===t&&"character"===i&&!e.isCollapsed()){let[t,i]=n===e.isBackward()?[e.focus,e.anchor]:[e.anchor,e.focus];return i.set(t.key,t.offset,t.type),!0}let l=lX(e.focus,n?"previous":"next"),s="lineboundary"===i,o="move"===t,a=l,u="decorators-and-blocks"===r;if(!l6(a)){for(let e of a){u=!1;let{origin:t}=e;if(!i9(t)||t.isIsolated()||(a=e,!s||!t.isInline()))break}if(u)for(let e of lJ(l).iterNodeCarets("extend"===t?"shadowRoot":"root")){if(lP(e))e.origin.isInline()||(a=e);else{if(i4(e.origin))continue;i9(e.origin)&&!e.origin.isInline()&&(a=e)}break}}if(a===l)return!1;if(o&&!s&&i9(a.origin)&&a.origin.isKeyboardSelectable()){let e=ib();return e.add(a.origin.getKey()),rB(e),!0}return a=l4(a),o&&lZ(e.anchor,a),lZ(e.focus,a),u||!s}let iP=null,ij=null,iF=!1,iL=!1,iI=0,iz={characterData:!0,childList:!0,subtree:!0};function iR(){return iF||null!==iP&&iP._readOnly}function iB(){iF&&er(13)}function iK(){iI>99&&er(14)}function iW(){return null===iP&&er(195,iJ()),iP}function iU(){return null===ij&&er(196,iJ()),ij}function iJ(){let e=0,t=new Set,n=rd.version;if("undefined"!=typeof window)for(let i of document.querySelectorAll("[contenteditable]")){let r=rv(i);if(ry(r))e++;else if(r){let e=String(r.constructor.version||"<0.17.1");e===n&&(e+=" (separately built, likely a bundler configuration issue)"),t.add(e)}}let i=` Detected on the page: ${e} compatible editor(s) with version ${n}`;return t.size&&(i+=` and incompatible editors with versions ${Array.from(t).join(", ")}`),i}function i$(e,t,n){let i=t.__type,r=rf(e,i),l=n.get(i);void 0===l&&(l=Array.from(r.transforms),n.set(i,l));let s=l.length;for(let e=0;e<s&&(l[e](t),t.isAttached());e++);}function iV(e,t){return void 0!==e&&e.__key!==t&&e.isAttached()}function iH(e,t){if(!t)return;let n=e._updateTags,i=t;for(let e of(Array.isArray(t)||(i=[t]),i))n.add(e)}function iq(e,t){let n=e.type,i=t.get(n);void 0===i&&er(17,n);let r=i.klass;e.type!==r.getType()&&er(18,r.name);let l=r.importJSON(e),s=e.children;if(i4(l)&&Array.isArray(s))for(let e=0;e<s.length;e++){let n=iq(s[e],t);l.append(n)}return l}function iY(e,t,n){let i=iP,r=iF,l=ij;iP=t,iF=!0,ij=e;try{return n()}finally{iP=i,iF=r,ij=l}}function iG(e,t){let n,i,r=e._pendingEditorState,l=e._rootElement,s=e._headless||null===l;if(null===r)return;let o=e._editorState,a=o._selection,u=r._selection,d=0!==e._dirtyType,c=iP,h=iF,f=ij,g=e._updating,p=e._observer,m=null;if(e._pendingEditorState=null,e._editorState=r,!s&&d&&null!==p){ij=e,iP=r,iF=!1,e._updating=!0;try{let t,n=e._dirtyType,i=e._dirtyElements,l=e._dirtyLeaves;p.disconnect(),e3="",e5="",e9=2===n,eq=e,eH=e._config,eY=e._nodes,eG=eq._listeners.mutation,eX=i,eZ=l,eQ=o._nodeMap,e0=r._nodeMap,e8=r._readOnly,e1=new Map(e._keyToDOMMap),e2=t=new Map,function e(t,n){let i=eQ.get(t),r=e0.get(t);void 0!==i&&void 0!==r||er(61);let l=e9||eZ.has(t)||eX.has(t),s=r9(eq,t);if(i===r&&!l){if(i4(i)){let e=s.__lexicalTextContent;void 0!==e&&(e3+=e,e5+=e)}else{let e=i.getTextContent();e5+=e,e3+=e}return s}if(i!==r&&l&&r1(e2,eY,eG,r,"updated"),r.updateDOM(i,s,eH)){let e=tl(t,null);return null===n&&er(62),n.replaceChild(e,s),e7(t,null),e}if(i4(i)&&i4(r)){let t=r.__indent;(e9||t!==i.__indent)&&tn(s,t);let n=r.__format;if((e9||n!==i.__format)&&ti(s,n),l&&(function(t,n,i){e4=null,e6=null,function(t,n,i){let r=e3,l=t.__size,s=n.__size;e3="";let o=i.element;if(1===l&&1===s){let i=t.__first,r=n.__first;if(i===r)e(i,o);else{let e=th(i),t=tl(r,null);try{o.replaceChild(t,e)}catch(n){if("object"==typeof n&&null!=n)throw Error(`${n.toString()} Parent: ${o.tagName}, new child: {tag: ${t.tagName} key: ${r}}, old child: {tag: ${e.tagName}, key: ${i}}.`);throw n}e7(i,null)}let l=e0.get(r);n6(l)&&null===e4&&(e4=l.getFormat(),e6=l.getStyle())}else{let r=tu(t,eQ),a=tu(n,e0);if(r.length!==l&&er(227),a.length!==s&&er(228),0===l)0!==s&&ts(a,n,0,s-1,i);else if(0===s){if(0!==l){let e=null==i.after&&null==i.before&&null==i.element.__lexicalLineBreak;te(r,0,l-1,e?null:o),e&&(o.textContent="")}}else!function(t,n,i,r,l,s){let o=r-1,a=l-1,u,d,c=s.getFirstChild(),h=0,f=0;for(;h<=o&&f<=a;){let t=n[h],r=i[f];if(t===r)c=tc(e(r,s.element)),h++,f++;else{void 0===u&&(u=new Set(n)),void 0===d&&(d=new Set(i));let l=d.has(t),o=u.has(r);if(l)if(o){let t=r9(eq,r);t===c?c=tc(e(r,s.element)):(s.withBefore(c).insertChild(t),e(r,s.element)),h++,f++}else tl(r,s.withBefore(c)),f++;else c=tc(th(t)),e7(t,s.element),h++}let l=e0.get(r);null!==l&&n6(l)&&null===e4&&(e4=l.getFormat(),e6=l.getStyle())}let g=h>o,p=f>a;if(g&&!p){let e=i[a+1],n=void 0===e?null:eq.getElementByKey(e);ts(i,t,f,a,s.withBefore(n))}else p&&!g&&te(n,h,o,s.element)}(n,r,a,l,s,i)}r5(n)&&(e3+="\n\n"),o.__lexicalTextContent=e3,e3=r+e3}(t,n,n.getDOMSlot(i)),null==e4||e4===n.__textFormat||e8||n.setTextFormat(e4),null==e6||e6===n.__textStyle||e8||n.setTextStyle(e6)}(i,r,s),i7(r)||r.isInline()||ta(i,r,s)),r5(r)&&(e3+="\n\n",e5+="\n\n"),(e9||r.__dir!==i.__dir)&&(tr(s,r),i7(r)&&!e9))for(let e of r.getChildren())i4(e)&&tr(r9(eq,e.getKey()),e)}else{let e=r.getTextContent();if(i9(r)){let e=r.decorate(eq,eH);null!==e&&td(t,e)}e3+=e,e5+=e}if(!e8&&i7(r)&&r.__cachedText!==e5){let e=r.getWritable();e.__cachedText=e5,r=e}return s}("root",null),eq=void 0,eY=void 0,eX=void 0,eZ=void 0,eQ=void 0,e0=void 0,eH=void 0,e1=void 0,e2=void 0,m=t}catch(t){if(t instanceof Error&&e._onError(t),iL)throw t;return ra(e,null,l,r),eF(e),e._dirtyType=2,iL=!0,iG(e,o),void(iL=!1)}finally{p.observe(l,iz),e._updating=g,iP=c,iF=h,ij=f}}r._readOnly||(r._readOnly=!0);let _=e._dirtyLeaves,y=e._dirtyElements,x=e._normalizedNodes,v=e._updateTags,S=e._deferred;d&&(e._dirtyType=0,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set),function(e,t){let n,i=e._decorators,r=e._pendingDecorators||i,l=t._nodeMap;for(n in r)l.has(n)||(r===i&&(r=rL(e)),delete r[n])}(e,r);let b=s?null:la(ln(e));if(e._editable&&null!==b&&(d||null===u||u.dirty||!u.is(a))&&null!==l&&!v.has("skip-dom-selection")){ij=e,iP=r;try{if(null!==p&&p.disconnect(),d||null===u||u.dirty){let t=e._blockCursorElement;null!==t&&lo(t,e,l),function(e,t,n,i,r,l,s){let o=i.anchorNode,a=i.focusNode,u=i.anchorOffset,d=i.focusOffset,c=document.activeElement;if(r.has("collaboration")&&c!==l||null!==c&&rm(c))return;if(!is(t))return null!==e&&r_(n,o,a)&&i.removeAllRanges();let h=t.anchor,f=t.focus,g=h.key,p=f.key,m=r9(n,g),_=r9(n,p),y=h.offset,x=f.offset,v=t.format,S=t.style,b=t.isCollapsed(),C=m,N=_,w=!1;if("text"===h.type){C=rw(m);let e=h.getNode();w=e.getFormat()!==v||e.getStyle()!==S}else is(e)&&"text"===e.anchor.type&&(w=!0);if("text"===f.type&&(N=rw(_)),null!==C&&null!==N&&(b&&(null===e||w||is(e)&&(e.format!==v||e.style!==S))&&(ng=[v,S,y,g,performance.now()]),u!==y||d!==x||o!==C||a!==N||"Range"===i.type&&b||(null!==c&&l.contains(c)||r.has("skip-selection-focus")||l.focus({preventScroll:!0}),"element"===h.type))){if(iM(i,C,y,N,x),!r.has("skip-scroll-into-view")&&t.isCollapsed()&&null!==l&&l===document.activeElement){let e=is(t)&&"element"===t.anchor.type?C.childNodes[y]||null:i.rangeCount>0?i.getRangeAt(0):null;if(null!==e){let t;if(e instanceof Text){let n=document.createRange();n.selectNode(e),t=n.getBoundingClientRect()}else t=e.getBoundingClientRect();!function(e,t,n){let i=r7(n),r=lt(i);if(null===i||null===r)return;let{top:l,bottom:s}=t,o=0,a=0,u=n;for(;null!==u;){let t=u===i.body;if(t)o=0,a=ln(e).innerHeight;else{let e=u.getBoundingClientRect();o=e.top,a=e.bottom}let n=0;if(l<o?n=-(o-l):s>a&&(n=s-a),0!==n)if(t)r.scrollBy(0,n);else{let e=u.scrollTop;u.scrollTop+=n;let t=u.scrollTop-e;l-=t,s-=t}if(t)break;u=r8(u)}}(n,t,l)}}no=!0}}(a,u,e,b,v,l)}!function(e,t,n){let i=e._blockCursorElement;if(is(n)&&n.isCollapsed()&&"element"===n.anchor.type&&t.contains(document.activeElement)){let r=n.anchor,l=r.getNode(),s=r.offset,o=!1,a=null;if(s===l.getChildrenSize())ls(l.getChildAtIndex(s-1))&&(o=!0);else{let t=l.getChildAtIndex(s);if(null!==t&&ls(t)){let n=t.getPreviousSibling();(null===n||ls(n))&&(o=!0,a=e.getElementByKey(t.__key))}}if(o){let n,r,s,o=e.getElementByKey(l.__key);return null===i&&(n=e._config.theme,(r=document.createElement("div")).contentEditable="false",r.setAttribute("data-lexical-cursor","true"),s=n.blockCursor,void 0!==s&&("string"==typeof s&&(s=n.blockCursor=e_(s)),void 0!==s&&r.classList.add(...s)),e._blockCursorElement=i=r),t.style.caretColor="transparent",null===a?o.appendChild(i):o.insertBefore(i,a)}}null!==i&&lo(i,e,t)}(e,l,u)}finally{null!==p&&p.observe(l,iz),ij=f,iP=c}}null!==m&&function(e,t,n,i,r){let l=Array.from(e._listeners.mutation),s=l.length;for(let e=0;e<s;e++){let[s,o]=l[e];for(let e of o){let l=t.get(e);void 0!==l&&s(l,{dirtyLeaves:i,prevEditorState:r,updateTags:n})}}}(e,m,v,_,o),is(u)||null===u||null!==a&&a.is(u)||e.dispatchCommand(tg,void 0);let C=e._pendingDecorators;null!==C&&(e._decorators=C,e._pendingDecorators=null,iX("decorator",e,!0,C)),n=rI(t||o),n!==(i=rI(r))&&iX("textcontent",e,!0,i),iX("update",e,!0,{dirtyElements:y,dirtyLeaves:_,editorState:r,mutatedNodes:m,normalizedNodes:x,prevEditorState:t||o,tags:v}),function(e,t){if(e._deferred=[],0!==t.length){let n=e._updating;e._updating=!0;try{for(let e=0;e<t.length;e++)t[e]()}finally{e._updating=n}}}(e,S),function(e){let t=e._updates;if(0!==t.length){let n=t.shift();if(n){let[t,i]=n;iQ(e,t,i)}}}(e)}function iX(e,t,n,...i){let r=t._updating;t._updating=n;try{let n=Array.from(t._listeners[e]);for(let e=0;e<n.length;e++)n[e].apply(null,i)}finally{t._updating=r}}function iZ(e,t){let n=e._updates,i=t||!1;for(;0!==n.length;){let t=n.shift();if(t){let n,[r,l]=t,s=e._pendingEditorState;void 0!==l&&(n=l.onUpdate,l.skipTransforms&&(i=!0),l.discrete&&(null===s&&er(191),s._flushSync=!0),n&&e._deferred.push(n),iH(e,l.tag)),null==s?iQ(e,r,l):r()}}return i}function iQ(e,t,n){let i=e._updateTags,r,l=!1,s=!1;void 0!==n&&(r=n.onUpdate,iH(e,n.tag),l=n.skipTransforms||!1,s=n.discrete||!1),r&&e._deferred.push(r);let o=e._editorState,a=e._pendingEditorState,u=!1;(null===a||a._readOnly)&&(a=e._pendingEditorState=re(a||o),u=!0),a._flushSync=s;let d=iP,c=iF,h=ij,f=e._updating;iP=a,iF=!1,e._updating=!0,ij=e;let g=e._headless||null===e.getRootElement();rc=null;try{var p;let i,r;u&&(g?null!==o._selection&&(a._selection=o._selection.clone()):a._selection=(p=n&&n.event||null,i=e.getEditorState()._selection,r=la(ln(e)),is(i)||null==i?iC(i,r,e,p):i.clone()));let s=e._compositionKey;t(),l=iZ(e,l),function(e,t){let n=t.getEditorState()._selection,i=e._selection;if(is(i)){let e,t=i.anchor,r=i.focus;if("text"===t.type&&(e=t.getNode()).selectionTransform(n,i),"text"===r.type){let t=r.getNode();e!==t&&t.selectionTransform(n,i)}}}(a,e),0!==e._dirtyType&&(l?function(e,t){let n=t._dirtyLeaves,i=e._nodeMap;for(let e of n){let t=i.get(e);n6(t)&&t.isAttached()&&t.isSimpleText()&&!t.isUnmergeable()&&eJ(t)}}(a,e):function(e,t){let n=t._dirtyLeaves,i=t._dirtyElements,r=e._nodeMap,l=rD(),s=new Map,o=n,a=o.size,u=i,d=u.size;for(;a>0||d>0;){if(a>0){for(let e of(t._dirtyLeaves=new Set,o)){let i=r.get(e);n6(i)&&i.isAttached()&&i.isSimpleText()&&!i.isUnmergeable()&&eJ(i),void 0!==i&&iV(i,l)&&i$(t,i,s),n.add(e)}if((a=(o=t._dirtyLeaves).size)>0){iI++;continue}}for(let e of(t._dirtyLeaves=new Set,t._dirtyElements=new Map,u.delete("root")&&u.set("root",!0),u)){let n=e[0],o=e[1];if(i.set(n,o),!o)continue;let a=r.get(n);void 0!==a&&iV(a,l)&&i$(t,a,s)}a=(o=t._dirtyLeaves).size,d=(u=t._dirtyElements).size,iI++}t._dirtyLeaves=n,t._dirtyElements=i}(a,e),iZ(e),function(e,t,n,i){let r=e._nodeMap,l=t._nodeMap,s=[];for(let[e]of i){let t=l.get(e);void 0!==t&&(t.isAttached()||(i4(t)&&function e(t,n,i,r,l,s){let o=t.getFirstChild();for(;null!==o;){let t=o.__key;o.__parent===n&&(i4(o)&&e(o,t,i,r,l,s),i.has(t)||s.delete(t),l.push(t)),o=o.getNextSibling()}}(t,e,r,l,s,i),r.has(e)||i.delete(e),s.push(e)))}for(let e of s)l.delete(e);for(let e of n){let t=l.get(e);void 0===t||t.isAttached()||(r.has(e)||n.delete(e),l.delete(e))}}(o,a,e._dirtyLeaves,e._dirtyElements)),s!==e._compositionKey&&(a._flushSync=!0);let d=a._selection;if(is(d)){let e=a._nodeMap,t=d.anchor.key,n=d.focus.key;void 0!==e.get(t)&&void 0!==e.get(n)||er(19)}else ia(d)&&0===d._nodes.size&&(a._selection=null)}catch(t){return t instanceof Error&&e._onError(t),e._pendingEditorState=o,e._dirtyType=2,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),void iG(e)}finally{iP=d,iF=c,ij=h,e._updating=f,iI=0}0!==e._dirtyType||e._deferred.length>0||function(e,t){let n=t.getEditorState()._selection,i=e._selection;if(null!==i){if(i.dirty||!i.is(n))return!0}else if(null!==n)return!0;return!1}(a,e)?a._flushSync?(a._flushSync=!1,iG(e)):u&&rp(()=>{iG(e)}):(a._flushSync=!1,u&&(i.clear(),e._deferred=[],e._pendingEditorState=null))}function i0(e,t,n){ij===e&&void 0===n?t():iQ(e,t,n)}class i1{element;before;after;constructor(e,t,n){this.element=e,this.before=t||null,this.after=n||null}withBefore(e){return new i1(this.element,e,this.after)}withAfter(e){return new i1(this.element,this.before,e)}withElement(e){return this.element===e?this:new i1(e,this.before,this.after)}insertChild(e){let t=this.before||this.getManagedLineBreak();return null!==t&&t.parentElement!==this.element&&er(222),this.element.insertBefore(e,t),this}removeChild(e){return e.parentElement!==this.element&&er(223),this.element.removeChild(e),this}replaceChild(e,t){return t.parentElement!==this.element&&er(224),this.element.replaceChild(e,t),this}getFirstChild(){let e=this.after?this.after.nextSibling:this.element.firstChild;return e===this.before||e===this.getManagedLineBreak()?null:e}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(e){null===e?this.removeManagedLineBreak():this.insertManagedLineBreak("decorator"===e&&(em||eh||ec))}removeManagedLineBreak(){let e=this.getManagedLineBreak();if(e){let t=this.element,n="IMG"===e.nodeName?e.nextSibling:null;n&&t.removeChild(n),t.removeChild(e),t.__lexicalLineBreak=void 0}}insertManagedLineBreak(e){let t=this.getManagedLineBreak();if(t){if(e===("IMG"===t.nodeName))return;this.removeManagedLineBreak()}let n=this.element,i=this.before,r=document.createElement("br");if(n.insertBefore(r,i),e){let e=document.createElement("img");e.setAttribute("data-lexical-linebreak","true"),e.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",e.alt="",n.insertBefore(e,r),n.__lexicalLineBreak=e}else n.__lexicalLineBreak=r}getFirstChildOffset(){let e=0;for(let t=this.after;null!==t;t=t.previousSibling)e++;return e}resolveChildIndex(e,t,n,i){if(n===this.element){let t=this.getFirstChildOffset();return[e,Math.min(t+e.getChildrenSize(),Math.max(t,i))]}let r=i2(t,n);r.push(i);let l=i2(t,this.element),s=e.getIndexWithinParent();for(let e=0;e<l.length;e++){let t=r[e],n=l[e];if(void 0===t||t<n)break;if(t>n){s+=1;break}}return[e.getParentOrThrow(),s]}}function i2(e,t){let n=[],i=t;for(;i!==e&&null!==i;i=i.parentNode){let e=0;for(let t=i.previousSibling;null!==t;t=t.previousSibling)e++;n.push(e)}return i!==e&&er(225),n.reverse()}class i3 extends nL{__first;__last;__size;__format;__style;__indent;__dir;__textFormat;__textStyle;constructor(e){super(e),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(e){super.afterCloneFrom(e),this.__key===e.__key&&(this.__first=e.__first,this.__last=e.__last,this.__size=e.__size),this.__indent=e.__indent,this.__format=e.__format,this.__style=e.__style,this.__dir=e.__dir,this.__textFormat=e.__textFormat,this.__textStyle=e.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){return ew[this.getFormat()]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){let e=[],t=this.getFirstChild();for(;null!==t;)e.push(t),t=t.getNextSibling();return e}getChildrenKeys(){let e=[],t=this.getFirstChild();for(;null!==t;)e.push(t.__key),t=t.getNextSibling();return e}getChildrenSize(){return this.getLatest().__size}isEmpty(){return 0===this.getChildrenSize()}isDirty(){let e=iU()._dirtyElements;return null!==e&&e.has(this.__key)}isLastChild(){let e=this.getLatest(),t=this.getParentOrThrow().getLastChild();return null!==t&&t.is(e)}getAllTextNodes(){let e=[],t=this.getFirstChild();for(;null!==t;){if(n6(t)&&e.push(t),i4(t)){let n=t.getAllTextNodes();e.push(...n)}t=t.getNextSibling()}return e}getFirstDescendant(){let e=this.getFirstChild();for(;i4(e);){let t=e.getFirstChild();if(null===t)break;e=t}return e}getLastDescendant(){let e=this.getLastChild();for(;i4(e);){let t=e.getLastChild();if(null===t)break;e=t}return e}getDescendantByIndex(e){let t=this.getChildren(),n=t.length;if(e>=n){let e=t[n-1];return i4(e)&&e.getLastDescendant()||e||null}let i=t[e];return i4(i)&&i.getFirstDescendant()||i||null}getFirstChild(){let e=this.getLatest().__first;return null===e?null:rA(e)}getFirstChildOrThrow(){let e=this.getFirstChild();return null===e&&er(45,this.__key),e}getLastChild(){let e=this.getLatest().__last;return null===e?null:rA(e)}getLastChildOrThrow(){let e=this.getLastChild();return null===e&&er(96,this.__key),e}getChildAtIndex(e){let t,n,i=this.getChildrenSize();if(e<i/2){for(t=this.getFirstChild(),n=0;null!==t&&n<=e;){if(n===e)return t;t=t.getNextSibling(),n++}return null}for(t=this.getLastChild(),n=i-1;null!==t&&n>=e;){if(n===e)return t;t=t.getPreviousSibling(),n--}return null}getTextContent(){let e="",t=this.getChildren(),n=t.length;for(let i=0;i<n;i++){let r=t[i];e+=r.getTextContent(),i4(r)&&i!==n-1&&!r.isInline()&&(e+="\n\n")}return e}getTextContentSize(){let e=0,t=this.getChildren(),n=t.length;for(let i=0;i<n;i++){let r=t[i];e+=r.getTextContentSize(),i4(r)&&i!==n-1&&!r.isInline()&&(e+=2)}return e}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(e){if(""!==e){let t=eN[e];return 0!=(this.getFormat()&t)}return!1}hasTextFormat(e){let t=eb[e];return 0!=(this.getTextFormat()&t)}getFormatFlags(e,t){return rk(this.getLatest().__textFormat,e,t)}getTextStyle(){return this.getLatest().__textStyle}select(e,t){iB();let n=iN(),i=e,r=t,l=this.getChildrenSize();if(!this.canBeEmpty()){if(0===e&&0===t){let e=this.getFirstChild();if(n6(e)||i4(e))return e.select(0,0)}else if((void 0===e||e===l)&&(void 0===t||t===l)){let e=this.getLastChild();if(n6(e)||i4(e))return e.select()}}void 0===i&&(i=l),void 0===r&&(r=l);let s=this.__key;return is(n)?(n.anchor.set(s,i,"element"),n.focus.set(s,r,"element"),n.dirty=!0,n):iv(s,i,s,r,"element","element")}selectStart(){let e=this.getFirstDescendant();return e?e.selectStart():this.select()}selectEnd(){let e=this.getLastDescendant();return e?e.selectEnd():this.select()}clear(){let e=this.getWritable();return this.getChildren().forEach(e=>e.remove()),e}append(...e){return this.splice(this.getChildrenSize(),0,e)}setDirection(e){let t=this.getWritable();return t.__dir=e,t}setFormat(e){return this.getWritable().__format=""!==e?eN[e]:0,this}setStyle(e){return this.getWritable().__style=e||"",this}setTextFormat(e){let t=this.getWritable();return t.__textFormat=e,t}setTextStyle(e){let t=this.getWritable();return t.__textStyle=e,t}setIndent(e){return this.getWritable().__indent=e,this}splice(e,t,n){nF(this)&&er(324,this.__key,this.__type);let i=this.getChildrenSize(),r=this.getWritable();e+t<=i||er(226,String(e),String(t),String(i));let l=r.__key,s=[],o=[],a=this.getChildAtIndex(e+t),u=null,d=i-t+n.length;if(0!==e)if(e===i)u=this.getLastChild();else{let t=this.getChildAtIndex(e);null!==t&&(u=t.getPreviousSibling())}if(t>0){let e=null===u?this.getFirstChild():u.getNextSibling();for(let n=0;n<t;n++){null===e&&er(100);let t=e.getNextSibling(),n=e.__key;rE(e.getWritable()),o.push(n),e=t}}let c=u;for(let e of n){null!==c&&e.is(c)&&(u=c=c.getPreviousSibling());let t=e.getWritable();t.__parent===l&&d--,rE(t);let n=e.__key;if(null===c)r.__first=n,t.__prev=null;else{let e=c.getWritable();e.__next=n,t.__prev=e.__key}e.__key===l&&er(76),t.__parent=l,s.push(n),c=e}if(e+t===i)null!==c&&(c.getWritable().__next=null,r.__last=c.__key);else if(null!==a){let e=a.getWritable();if(null!==c){let t=c.getWritable();e.__prev=c.__key,t.__next=a.__key}else e.__prev=null}if(r.__size=d,o.length){let e=iN();if(is(e)){let t=new Set(o),n=new Set(s),{anchor:i,focus:r}=e;i6(i,t,n)&&iE(i,i.getNode(),this,u,a),i6(r,t,n)&&iE(r,r.getNode(),this,u,a),0!==d||this.canBeEmpty()||li(this)||this.remove()}}return r}getDOMSlot(e){return new i1(e)}exportDOM(e){let{element:t}=super.exportDOM(e);if(ld(t)){let e=this.getIndent();e>0&&(t.style.paddingInlineStart=40*e+"px");let n=this.getDirection();n&&(t.dir=n)}return{element:t}}exportJSON(){let e={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},t=this.getTextFormat(),n=this.getTextStyle();return 0===t&&""===n||li(this)||this.getChildren().some(n6)||(0!==t&&(e.textFormat=t),""!==n&&(e.textStyle=n)),e}updateFromJSON(e){return super.updateFromJSON(e).setFormat(e.format).setIndent(e.indent).setDirection(e.direction).setTextFormat(e.textFormat||0).setTextStyle(e.textStyle||"")}insertNewAfter(e,t){return null}canIndent(){return!0}collapseAtStart(e){return!1}excludeFromCopy(e){return!1}canReplaceWith(e){return!0}canInsertAfter(e){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(e){return!1}extractWithChild(e,t,n){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(e,t){let n=this.getDOMSlot(e),i=n.getFirstChild();for(let e=this.getFirstChild();e;e=e.getNextSibling()){let r=t.getElementByKey(e.getKey());null!==r&&(null==i?(n.insertChild(r),i=r):i!==r&&n.replaceChild(r,i),i=i.nextSibling)}}}function i4(e){return e instanceof i3}function i6(e,t,n){let i=e.getNode();for(;i;){let e=i.__key;if(t.has(e)&&!n.has(e))return!0;i=i.getParent()}return!1}class i5 extends nL{decorate(e,t){return null}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function i9(e){return e instanceof i5}class i8 extends i3{__cachedText;static getType(){return"root"}static clone(){return new i8}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){er(51)}getTextContent(){let e=this.__cachedText;return(iR()||0===iU()._dirtyType)&&null!==e?e:super.getTextContent()}remove(){er(52)}replace(e){er(53)}insertBefore(e){er(54)}insertAfter(e){er(55)}updateDOM(e,t){return!1}splice(e,t,n){for(let e of n)i4(e)||i9(e)||er(282);return super.splice(e,t,n)}static importJSON(e){return rz().updateFromJSON(e)}collapseAtStart(){return!0}}function i7(e){return e instanceof i8}function re(e){return new rn(new Map(e._nodeMap))}function rt(){return new rn(new Map([["root",new i8]]))}class rn{_nodeMap;_selection;_flushSync;_readOnly;constructor(e,t){this._nodeMap=e,this._selection=t||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return 1===this._nodeMap.size&&null===this._selection}read(e,t){return iY(t&&t.editor||null,this,e)}clone(e){let t=new rn(this._nodeMap,void 0===e?this._selection:e);return t._readOnly=!0,t}toJSON(){return iY(null,this,()=>({root:function e(t){let n=t.exportJSON(),i=t.constructor;if(n.type!==i.getType()&&er(130,i.name),i4(t)){let r=n.children;Array.isArray(r)||er(59,i.name);let l=t.getChildren();for(let t=0;t<l.length;t++){let n=e(l[t]);r.push(n)}}return n}(rz())}))}}class ri extends i3{static getType(){return"artificial"}createDOM(e){return document.createElement("div")}}class rr extends i3{static getType(){return"paragraph"}static clone(e){return new rr(e.__key)}createDOM(e){let t=document.createElement("p"),n=r0(e.theme,"paragraph");return void 0!==n&&t.classList.add(...n),t}updateDOM(e,t,n){return!1}static importDOM(){return{p:e=>({conversion:rl,priority:0})}}exportDOM(e){let{element:t}=super.exportDOM(e);if(ld(t)){this.isEmpty()&&t.append(document.createElement("br"));let e=this.getFormatType();e&&(t.style.textAlign=e)}return{element:t}}static importJSON(e){return rs().updateFromJSON(e)}exportJSON(){let e=super.exportJSON();if(void 0===e.textFormat||void 0===e.textStyle){let t=this.getChildren().find(n6);t?(e.textFormat=t.getFormat(),e.textStyle=t.getStyle()):(e.textFormat=this.getTextFormat(),e.textStyle=this.getTextStyle())}return e}insertNewAfter(e,t){let n=rs();n.setTextFormat(e.format),n.setTextStyle(e.style);let i=this.getDirection();return n.setDirection(i),n.setFormat(this.getFormatType()),n.setStyle(this.getStyle()),this.insertAfter(n,t),n}collapseAtStart(){let e=this.getChildren();if(0===e.length||n6(e[0])&&""===e[0].getTextContent().trim()){if(null!==this.getNextSibling())return this.selectNext(),this.remove(),!0;if(null!==this.getPreviousSibling())return this.selectPrevious(),this.remove(),!0}return!1}}function rl(e){let t=rs();return e.style&&(t.setFormat(e.style.textAlign),lv(e,t)),{node:t}}function rs(){return lr(new rr)}function ro(e){return e instanceof rr}function ra(e,t,n,i){let r=e._keyToDOMMap;r.clear(),e._editorState=rt(),e._pendingEditorState=i,e._compositionKey=null,e._dirtyType=0,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],e._blockCursorElement=null;let l=e._observer;null!==l&&(l.disconnect(),e._observer=null),null!==t&&(t.textContent=""),null!==n&&(n.textContent="",r.set("root",n))}function ru(e){var t,n;let i,r,l,s,o=e||{},a=ij,u=o.theme||{},d=void 0===e?a:o.parentEditor||null,c=o.disableEvents||!1,h=rt(),f=o.namespace||(null!==d?d._config.namespace:rJ()),g=o.editorState,p=[i8,nG,nR,n9,rr,ri,...o.nodes||[]],{onError:m,html:_}=o,y=void 0===o.editable||o.editable;if(void 0===e&&null!==a)i=a._nodes;else{i=new Map;for(let e=0;e<p.length;e++){let t=p[e],n=null,r=null;if("function"!=typeof t){let e=t;t=e.replace,n=e.with,r=e.withKlass||null}lb(t);let l=t.getType(),s=function(e){let t=new Set,n=new Set,i=e;for(;i;){let{ownNodeConfig:e}=lb(i),r=i.transform;if(!n.has(r)){n.add(r);let e=i.transform();e&&t.add(e)}if(e){let n=e.$transform;n&&t.add(n),i=e.extends}else{let e=Object.getPrototypeOf(i);i=e.prototype instanceof nL&&e!==nL?e:void 0}}return t}(t);i.set(l,{exportDOM:_&&_.export?_.export.get(t):void 0,klass:t,replace:n,replaceWithKlass:r,sharedNodeState:function(e){let t=new Map,n=new Set;for(let i="function"==typeof e?e:e.replace;i.prototype&&void 0!==i.prototype.getType;i=Object.getPrototypeOf(i)){let{ownNodeConfig:e}=lb(i);if(e&&e.stateConfigs)for(let i of e.stateConfigs){let e;"stateConfig"in i?(e=i.stateConfig,i.flat&&n.add(e.key)):e=i,t.set(e.key,e)}}return{flatKeys:n,sharedConfigMap:t}}(p[e]),transforms:s})}}let x=new rd(h,d,i,{disableEvents:c,namespace:f,theme:u},m||console.error,(t=i,n=_?_.import:void 0,r=new Map,l=new Set,s=e=>{Object.keys(e).forEach(t=>{let n=r.get(t);void 0===n&&(n=[],r.set(t,n)),n.push(e[t])})},t.forEach(e=>{let t=e.klass.importDOM;if(null==t||l.has(t))return;l.add(t);let n=t.call(e.klass);null!==n&&s(n)}),n&&s(n),r),y,e);return void 0!==g&&(x._pendingEditorState=g,x._dirtyType=2),x.registerCommand(t_,nS,0),x.registerCommand(ty,nb,0),x.registerCommand(tx,nC,0),x.registerCommand(tv,nN,0),x.registerCommand(tA,nk,0),x}class rd{static version;_headless;_parentEditor;_rootElement;_editorState;_pendingEditorState;_compositionKey;_deferred;_keyToDOMMap;_updates;_updating;_listeners;_commands;_nodes;_decorators;_pendingDecorators;_config;_dirtyType;_cloneNotNeeded;_dirtyLeaves;_dirtyElements;_normalizedNodes;_updateTags;_observer;_key;_onError;_htmlConversions;_window;_editable;_blockCursorElement;_createEditorArgs;constructor(e,t,n,i,r,l,s,o){this._createEditorArgs=o,this._parentEditor=t,this._rootElement=null,this._editorState=e,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=i,this._nodes=n,this._decorators={},this._pendingDecorators=null,this._dirtyType=0,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=rJ(),this._onError=r,this._htmlConversions=l,this._editable=s,this._headless=null!==t&&t._headless,this._window=null,this._blockCursorElement=null}isComposing(){return null!=this._compositionKey}registerUpdateListener(e){let t=this._listeners.update;return t.add(e),()=>{t.delete(e)}}registerEditableListener(e){let t=this._listeners.editable;return t.add(e),()=>{t.delete(e)}}registerDecoratorListener(e){let t=this._listeners.decorator;return t.add(e),()=>{t.delete(e)}}registerTextContentListener(e){let t=this._listeners.textcontent;return t.add(e),()=>{t.delete(e)}}registerRootListener(e){let t=this._listeners.root;return e(this._rootElement,null),t.add(e),()=>{e(null,this._rootElement),t.delete(e)}}registerCommand(e,t,n){void 0===n&&er(35);let i=this._commands;i.has(e)||i.set(e,[new Set,new Set,new Set,new Set,new Set]);let r=i.get(e);void 0===r&&er(36,String(e));let l=r[n];return l.add(t),()=>{l.delete(t),r.every(e=>0===e.size)&&i.delete(e)}}registerMutationListener(e,t,n){let i=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(e)).klass,r=this._listeners.mutation,l=r.get(t);void 0===l&&(l=new Set,r.set(t,l)),l.add(i);let s=n&&n.skipInitialization;return void 0!==s&&s||this.initializeMutationListener(t,i),()=>{l.delete(i),0===l.size&&r.delete(t)}}getRegisteredNode(e){let t=this._nodes.get(e.getType());return void 0===t&&er(37,e.name),t}resolveRegisteredNodeAfterReplacements(e){for(;e.replaceWithKlass;)e=this.getRegisteredNode(e.replaceWithKlass);return e}initializeMutationListener(e,t){let n=this._editorState,i=ly(n).get(t.getType());if(!i)return;let r=new Map;for(let e of i.keys())r.set(e,"created");r.size>0&&e(r,{dirtyLeaves:new Set,prevEditorState:n,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(e,t){let n=this.getRegisteredNode(e);return n.transforms.add(t),n}registerNodeTransform(e,t){let n=this.registerNodeTransformToKlass(e,t),i=[n],r=n.replaceWithKlass;if(null!=r){let e=this.registerNodeTransformToKlass(r,t);i.push(e)}return function(e,t){let n=ly(e.getEditorState()),i=[];for(let e of t){let t=n.get(e);t&&i.push(t)}0!==i.length&&e.update(()=>{for(let e of i)for(let t of e.keys()){let e=rA(t);e&&e.markDirty()}},null===e._pendingEditorState?{tag:nz}:void 0)}(this,i.map(e=>e.klass.getType())),()=>{i.forEach(e=>e.transforms.delete(t))}}hasNode(e){return this._nodes.has(e.getType())}hasNodes(e){return e.every(this.hasNode.bind(this))}dispatchCommand(e,t){return r6(this,e,t)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(e){let t=this._rootElement;if(e!==t){let n=r0(this._config.theme,"root"),i=this._pendingEditorState||this._editorState;if(this._rootElement=e,ra(this,t,e,i),null!==t&&(this._config.disableEvents||function(e){let t=nl.get(e);if(void 0===t)return nA();let n=ns.get(t);if(void 0===n)return nA();let i=n-1;i>=0||er(164),nl.delete(e),ns.set(t,i),0===i&&t.removeEventListener("selectionchange",nO);let r=rv(e);ry(r)?(!function(e){if(null!==e._parentEditor){let t=rU(e),n=t[t.length-1]._key;nE.get(n)===e&&nE.delete(n)}else nE.delete(e._key)}(r),e.__lexicalEditor=null):r&&er(198);let l=nT(e);for(let e=0;e<l.length;e++)l[e]();e.__lexicalEventHandles=[]}(t),null!=n&&t.classList.remove(...n)),null!==e){let t=lt(e),i=e.style;i.userSelect="text",i.whiteSpace="pre-wrap",i.wordBreak="break-word",e.setAttribute("data-lexical-editor","true"),this._window=t,this._dirtyType=2,eF(this),this._updateTags.add(nz),iG(this),this._config.disableEvents||function(e,t){let n=e.ownerDocument;nl.set(e,n);let i=ns.get(n)??0;i<1&&n.addEventListener("selectionchange",nO),ns.set(n,i+1),e.__lexicalEditor=t;let r=nT(e);for(let n=0;n<ne.length;n++){let[i,l]=ne[n],s="function"==typeof l?e=>{nD(e)||(nM(e),(t.isEditable()||"click"===i)&&l(e,t))}:e=>{if(nD(e))return;nM(e);let n=t.isEditable();switch(i){case"cut":return n&&r6(t,t0,e);case"copy":return r6(t,tQ,e);case"paste":return n&&r6(t,tw,e);case"dragstart":return n&&r6(t,tG,e);case"dragover":return n&&r6(t,tX,e);case"dragend":return n&&r6(t,tZ,e);case"focus":return n&&r6(t,t5,e);case"blur":return n&&r6(t,t9,e);case"drop":return n&&r6(t,tq,e)}};e.addEventListener(i,s),r.push(()=>{e.removeEventListener(i,s)})}}(e,this),null!=n&&e.classList.add(...n)}else this._window=null,this._updateTags.add(nz),iG(this);iX("root",this,!1,e,t)}}getElementByKey(e){return this._keyToDOMMap.get(e)||null}getEditorState(){return this._editorState}setEditorState(e,t){e.isEmpty()&&er(38);let n=e;n._readOnly&&((n=re(e))._selection=e._selection?e._selection.clone():null),ej(this);let i=this._pendingEditorState,r=this._updateTags,l=void 0!==t?t.tag:null;null===i||i.isEmpty()||(null!=l&&r.add(l),iG(this)),this._pendingEditorState=n,this._dirtyType=2,this._dirtyElements.set("root",!1),this._compositionKey=null,null!=l&&r.add(l),this._updating||iG(this)}parseEditorState(e,t){return function(e,t,n){let i=rt(),r=iP,l=iF,s=ij,o=t._dirtyElements,a=t._dirtyLeaves,u=t._cloneNotNeeded,d=t._dirtyType;t._dirtyElements=new Map,t._dirtyLeaves=new Set,t._cloneNotNeeded=new Set,t._dirtyType=0,iP=i,iF=!1,ij=t,rc=null;try{let r=t._nodes;iq(e.root,r),n&&n(),i._readOnly=!0}catch(e){e instanceof Error&&t._onError(e)}finally{t._dirtyElements=o,t._dirtyLeaves=a,t._cloneNotNeeded=u,t._dirtyType=d,iP=r,iF=l,ij=s}return i}("string"==typeof e?JSON.parse(e):e,this,t)}read(e){return iG(this),this.getEditorState().read(e,{editor:this})}update(e,t){this._updating?this._updates.push([e,t]):iQ(this,e,t)}focus(e,t={}){let n=this._rootElement;null!==n&&(n.setAttribute("autocapitalize","off"),i0(this,()=>{var i,r;let l=iN(),s=rz();null!==l?l.dirty||rB(l.clone()):0!==s.getChildrenSize()&&("rootStart"===t.defaultSelection?s.selectStart():s.selectEnd()),i="focus",iB(),iU()._updateTags.add(i),r=()=>{n.removeAttribute("autocapitalize"),e&&e()},iB(),iU()._deferred.push(r)}),null===this._pendingEditorState&&n.removeAttribute("autocapitalize"))}blur(){let e=this._rootElement;null!==e&&e.blur();let t=la(this._window);null!==t&&t.removeAllRanges()}isEditable(){return this._editable}setEditable(e){this._editable!==e&&(this._editable=e,iX("editable",this,!0,e))}toJSON(){return{editorState:this._editorState.toJSON()}}}rd.version="0.39.0+prod.esm";let rc=null,rh=1;function rf(e,t){let n=rg(e,t);return void 0===n&&er(30,t),n}function rg(e,t){return e._nodes.get(t)}let rp="function"==typeof queueMicrotask?queueMicrotask:e=>{Promise.resolve().then(e)};function rm(e){let t=document.activeElement;if(!ld(t))return!1;let n=t.nodeName;return i9(rF(e))&&("INPUT"===n||"TEXTAREA"===n||"true"===t.contentEditable&&null==rv(t))}function r_(e,t,n){let i=e.getRootElement();try{return null!==i&&i.contains(t)&&i.contains(n)&&null!==t&&!rm(t)&&rx(t)===e}catch(e){return!1}}function ry(e){return e instanceof rd}function rx(e){let t=e;for(;null!=t;){let e=rv(t);if(ry(e))return e;t=r8(t)}return null}function rv(e){return e?e.__lexicalEditor:null}function rS(e){return n7(e)||e.isToken()}function rb(e){return rS(e)||e.isSegmented()}function rC(e){return lc(e)&&3===e.nodeType}function rN(e){return lc(e)&&9===e.nodeType}function rw(e){let t=e;for(;null!=t;){if(rC(t))return t;t=t.firstChild}return null}function rk(e,t,n){let i=eb[t];if(null!==n&&(e&i)==(n&i))return e;let r=e^i;return"subscript"===t?r&=~eb.superscript:"superscript"===t?r&=~eb.subscript:"lowercase"===t?(r&=~eb.uppercase,r&=~eb.capitalize):"uppercase"===t?(r&=~eb.lowercase,r&=~eb.capitalize):"capitalize"===t&&(r&=~eb.lowercase,r&=~eb.uppercase),r}function rT(e){return n6(e)||nW(e)||i9(e)}function rE(e){let t=e.getParent();if(null!==t){let n=e.getWritable(),i=t.getWritable(),r=e.getPreviousSibling(),l=e.getNextSibling(),s=null!==l?l.__key:null,o=null!==r?r.__key:null,a=null!==r?r.getWritable():null,u=null!==l?l.getWritable():null;null===r&&(i.__first=s),null===l&&(i.__last=o),null!==a&&(a.__next=s),null!==u&&(u.__prev=o),n.__prev=null,n.__next=null,n.__parent=null,i.__size--}}function rO(e){iK(),nF(e)&&er(323,e.__key,e.__type);let t=e.getLatest(),n=t.__parent,i=iW(),r=iU(),l=i._nodeMap,s=r._dirtyElements;null!==n&&function(e,t,n){let i=e;for(;null!==i;){if(n.has(i))return;let e=t.get(i);if(void 0===e)break;n.set(i,!1),i=e.__parent}}(n,l,s);let o=t.__key;r._dirtyType=1,i4(e)?s.set(o,!0):r._dirtyLeaves.add(o)}function rM(e){iB();let t=iU(),n=t._compositionKey;if(e!==n){if(t._compositionKey=e,null!==n){let e=rA(n);null!==e&&e.getWritable()}if(null!==e){let t=rA(e);null!==t&&t.getWritable()}}}function rD(){return iR()?null:iU()._compositionKey}function rA(e,t){let n=(t||iW())._nodeMap.get(e);return void 0===n?null:n}function rP(e,t){let n=rj(e,iU());return void 0!==n?rA(n,t):null}function rj(e,t){return e[`__lexicalKey_${t._key}`]}function rF(e,t){let n=e;for(;null!=n;){let e=rP(n,t);if(null!==e)return e;n=r8(n)}return null}function rL(e){let t=Object.assign({},e._decorators);return e._pendingDecorators=t,t}function rI(e){return e.read(()=>rz().getTextContent())}function rz(){return rR(iW())}function rR(e){return e._nodeMap.get("root")}function rB(e){iB();let t=iW();null!==e&&(e.dirty=!0,e.setCachedNodes(null)),t._selection=e}function rK(e){let t=iU(),n=function(e,t){let n=e;for(;null!=n;){let e=rj(n,t);if(void 0!==e)return e;n=r8(n)}return null}(e,t);return null===n?e===t.getRootElement()?rA("root"):null:rA(n)}function rW(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e)}function rU(e){let t=[],n=e;for(;null!==n;)t.push(n),n=n._parentEditor;return t}function rJ(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function r$(e){return rC(e)?e.nodeValue:null}function rV(e,t,n){let i=la(ln(t));if(null===i)return;let r=i.anchorNode,{anchorOffset:l,focusOffset:s}=i;if(null!==r){let t=r$(r),i=rF(r);if(null!==t&&n6(i)){if(t===ey&&n){let e=n.length;t=n,l=e,s=e}null!==t&&rH(i,t,l,s,e)}}}function rH(e,t,n,i,r){let l=e;if(l.isAttached()&&(r||!l.isDirty())){let s=l.isComposing(),o=t;(s||r)&&t[t.length-1]===ey&&(o=t.slice(0,-1));let a=l.getTextContent();if(r||o!==a){if(""===o){if(rM(null),ec||eh||em)l.remove();else{let e=iU();setTimeout(()=>{e.update(()=>{l.isAttached()&&l.remove()})},20)}return}let t=l.getParent(),r=iw(),a=l.getTextContentSize(),u=rD(),d=l.getKey();if(l.isToken()||null!==u&&d===u&&!s||is(r)&&(null!==t&&!t.canInsertTextBefore()&&0===r.anchor.offset||r.anchor.key===e.__key&&0===r.anchor.offset&&!l.canInsertTextBefore()&&!s||r.focus.key===e.__key&&r.focus.offset===a&&!l.canInsertTextAfter()&&!s))return void l.markDirty();let c=iN();if(!is(c)||null===n||null===i)return void rq(l,o,c);if(c.setTextNodeRange(l,n,l,i),l.isSegmented()){let e=n4(l.getTextContent());l.replace(e),l=e}rq(l,o,c)}}}function rq(e,t,n){if(e.setTextContent(t),is(n)){let t=e.getKey();for(let i of["anchor","focus"]){let r=n[i];"text"===r.type&&r.key===t&&(r.offset=lR(e,r.offset,"clamp"))}}}function rY(e,t,n){let i=t[n]||!1;return"any"===i||i===e[n]}function rG(e,t,n){return rY(e,n,"altKey")&&rY(e,n,"ctrlKey")&&rY(e,n,"shiftKey")&&rY(e,n,"metaKey")&&e.key.toLowerCase()===t.toLowerCase()}let rX={ctrlKey:!ea,metaKey:ea},rZ={altKey:ea,ctrlKey:!ea};function rQ(e){return"Backspace"===e.key}function r0(e,t){void 0===e.__lexicalClassNameCache&&(e.__lexicalClassNameCache={});let n=e.__lexicalClassNameCache,i=n[t];if(void 0!==i)return i;let r=e[t];if("string"==typeof r){let e=e_(r);return n[t]=e,e}return r}function r1(e,t,n,i,r){if(0===n.size)return;let l=i.__type,s=i.__key,o=t.get(l);void 0===o&&er(33,l);let a=o.klass,u=e.get(a);void 0===u&&(u=new Map,e.set(a,u));let d=u.get(s),c="destroyed"===d&&"created"===r;(void 0===d||c)&&u.set(s,c?"updated":r)}function r2(e,t,n){let i=e.getParent(),r=n,l=e;return null!==i&&(t&&0===n?(r=l.getIndexWithinParent(),l=i):t||n!==l.getChildrenSize()||(r=l.getIndexWithinParent()+1,l=i)),l.getChildAtIndex(t?r-1:r)}function r3(e,t){let n=e.offset;if("element"===e.type)return r2(e.getNode(),t,n);{let i=e.getNode();if(t&&0===n||!t&&n===i.getTextContentSize()){let e=t?i.getPreviousSibling():i.getNextSibling();return null===e?r2(i.getParentOrThrow(),t,i.getIndexWithinParent()+ +!t):e}}return null}function r4(e){let t=ln(e).event,n=t&&t.inputType;return"insertFromPaste"===n||"insertFromPasteAsQuotation"===n}function r6(e,t,n){return function(e,t,n){let i=rU(e);for(let r=4;r>=0;r--)for(let l=0;l<i.length;l++){let s=i[l],o=s._commands.get(t);if(void 0!==o){let t=o[r];if(void 0!==t){let i=Array.from(t),r=i.length,l=!1;if(i0(s,()=>{for(let t=0;t<r;t++)if(i[t](n,e))return void(l=!0)}),l)return l}}}return!1}(e,t,n)}function r5(e){return!i7(e)&&!e.isLastChild()&&!e.isInline()}function r9(e,t){let n=e._keyToDOMMap.get(t);return void 0===n&&er(75,t),n}function r8(e){let t=e.assignedSlot||e.parentElement;return lh(t)?t.host:t}function r7(e){return rN(e)?e:ld(e)?e.ownerDocument:null}function le(e,t){let n=e.getParent();for(;null!==n;){if(n.is(t))return!0;n=n.getParent()}return!1}function lt(e){let t=r7(e);return t?t.defaultView:null}function ln(e){let t=e._window;return null===t&&er(78),t}function li(e){return i7(e)||i4(e)&&e.isShadowRoot()}function lr(e){let t=iU(),n=e.getType(),i=rg(t,n);void 0===i&&er(200,e.constructor.name,n);let{replace:r,replaceWithKlass:l}=i;if(null!==r){let t=r(e),i=t.constructor;return null!==l?t instanceof l||er(201,l.name,l.getType(),i.name,i.getType(),e.constructor.name,n):t instanceof e.constructor&&i!==e.constructor||er(202,i.name,i.getType(),e.constructor.name,n),t.__key===e.__key&&er(203,e.constructor.name,n,i.name,i.getType()),t}return e}function ll(e,t){!i7(e.getParent())||i4(t)||i9(t)||er(99)}function ls(e){return(i9(e)||i4(e)&&!e.canBeEmpty())&&!e.isInline()}function lo(e,t,n){n.style.removeProperty("caret-color"),t._blockCursorElement=null;let i=e.parentElement;null!==i&&i.removeChild(e)}function la(e){return es?(e||window).getSelection():null}function lu(e){return ld(e)&&"A"===e.tagName}function ld(e){return lc(e)&&1===e.nodeType}function lc(e){return"object"==typeof e&&null!==e&&"nodeType"in e&&"number"==typeof e.nodeType}function lh(e){return lc(e)&&11===e.nodeType}function lf(e){let t=RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return null!==e.nodeName.match(t)}function lg(e){let t=RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return null!==e.nodeName.match(t)}function lp(e){if(i9(e)&&!e.isInline())return!0;if(!i4(e)||li(e))return!1;let t=e.getFirstChild(),n=null===t||nW(t)||n6(t)||t.isInline();return!e.isInline()&&!1!==e.canBeEmpty()&&n}let lm=new WeakMap,l_=new Map;function ly(e){if(!e._readOnly&&e.isEmpty())return l_;e._readOnly||er(192);let t=lm.get(e);return t||(t=function(e){let t=new Map;for(let[n,i]of e._nodeMap){let e=i.__type,r=t.get(e);r||(r=new Map,t.set(e,r)),r.set(n,i)}return t}(e),lm.set(e,t)),t}function lx(e){let t=e.constructor.clone(e);return t.afterCloneFrom(e),t}function lv(e,t){let n=Math.round((parseInt(e.style.paddingInlineStart,10)||0)/40);t.setIndent(n)}function lS(e,t){return Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==nL[t]}function lb(e){let t=eE in e.prototype?e.prototype[eE]():void 0,n=function(e){if(!(e===nL||e.prototype instanceof nL)){let t="<unknown>",n="<unknown>";try{t=e.getType()}catch(e){}try{rd.version&&(n=JSON.parse(rd.version))}catch(e){}er(290,e.name,t,n)}return e===i5||e===i3||e===nL}(e),i=!n&&lS(e,"getType")?e.getType():void 0,r,l=i;if(t)if(i)r=t[i];else for(let[e,n]of Object.entries(t))l=e,r=n;if(!n&&l&&(lS(e,"getType")||(e.getType=()=>l),lS(e,"clone")||(e.clone=t=>(rc=t,new e)),lS(e,"importJSON")||(e.importJSON=r&&r.$importJSON||(t=>(new e).updateFromJSON(t))),!lS(e,"importDOM")&&r)){let{importDOM:t}=r;t&&(e.importDOM=()=>t)}return{ownNodeConfig:r,ownNodeType:l}}let lC=(e,t)=>{let n=e;for(;null!=n&&!i7(n);){if(t(n))return n;n=n.getParent()}return null},lN={next:"previous",previous:"next"};class lw{origin;constructor(e){this.origin=e}[Symbol.iterator](){return lV({hasNext:lA,initial:this.getAdjacentCaret(),map:e=>e,step:e=>e.getAdjacentCaret()})}getAdjacentCaret(){return lI(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return lI(this.origin,this.direction)}remove(){let e=this.getNodeAtCaret();return e&&e.remove(),this}replaceOrInsert(e,t){let n=this.getNodeAtCaret();return e.is(this.origin)||e.is(n)||(null===n?this.insert(e):n.replace(e,t)),this}splice(e,t,n="next"){let i=n===this.direction?t:Array.from(t).reverse(),r=this,l=this.getParentAtCaret(),s=new Map;for(let t=r.getAdjacentCaret();null!==t&&s.size<e;t=t.getAdjacentCaret()){let e=t.origin.getWritable();s.set(e.getKey(),e)}for(let e of i){if(s.size>0){let t=r.getNodeAtCaret();if(t)if(s.delete(t.getKey()),s.delete(e.getKey()),t.is(e)||r.origin.is(e));else{let n=e.getParent();n&&n.is(l)&&e.remove(),t.replace(e)}else null===t&&er(263,Array.from(s).join(" "))}else r.insert(e);r=lI(e,this.direction)}for(let e of s.values())e.remove();return this}}class lk extends lw{type="child";getLatest(){let e=this.origin.getLatest();return e===this.origin?this:lB(e,this.direction)}getParentCaret(e="root"){return lI(lE(this.getParentAtCaret(),e),this.direction)}getFlipped(){let e=lN[this.direction];return lI(this.getNodeAtCaret(),e)||lB(this.origin,e)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(e){return e instanceof lk&&this.direction===e.direction&&this.origin.is(e.origin)}isSamePointCaret(e){return this.isSameNodeCaret(e)}}let lT={root:i7,shadowRoot:li};function lE(e,t="root"){return lT[t](e)?null:e}class lO extends lw{type="sibling";getLatest(){let e=this.origin.getLatest();return e===this.origin?this:lI(e,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return i4(this.origin)?lB(this.origin,this.direction):null}getParentCaret(e="root"){return lI(lE(this.getParentAtCaret(),e),this.direction)}getFlipped(){let e=lN[this.direction];return lI(this.getNodeAtCaret(),e)||lB(this.origin.getParentOrThrow(),e)}isSamePointCaret(e){return e instanceof lO&&this.direction===e.direction&&this.origin.is(e.origin)}isSameNodeCaret(e){return(e instanceof lO||e instanceof lM)&&this.direction===e.direction&&this.origin.is(e.origin)}}class lM extends lw{type="text";offset;constructor(e,t){super(e),this.offset=t}getLatest(){let e=this.origin.getLatest();return e===this.origin?this:lz(e,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(e="root"){return lI(lE(this.getParentAtCaret(),e),this.direction)}getFlipped(){return lz(this.origin,lN[this.direction],this.offset)}isSamePointCaret(e){return e instanceof lM&&this.direction===e.direction&&this.origin.is(e.origin)&&this.offset===e.offset}isSameNodeCaret(e){return(e instanceof lO||e instanceof lM)&&this.direction===e.direction&&this.origin.is(e.origin)}getSiblingCaret(){return lI(this.origin,this.direction)}}function lD(e){return e instanceof lM}function lA(e){return e instanceof lO}function lP(e){return e instanceof lk}let lj={next:class extends lM{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends lM{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},lF={next:class extends lO{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends lO{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},lL={next:class extends lk{direction="next";getNodeAtCaret(){return this.origin.getFirstChild()}insert(e){return this.origin.splice(0,0,[e]),this}},previous:class extends lk{direction="previous";getNodeAtCaret(){return this.origin.getLastChild()}insert(e){return this.origin.splice(this.origin.getChildrenSize(),0,[e]),this}}};function lI(e,t){return e?new lF[t](e):null}function lz(e,t,n){return e?new lj[t](e,lR(e,n)):null}function lR(e,t,n="error"){let i=e.getTextContentSize(),r="next"===t?i:"previous"===t?0:t;return(r<0||r>i)&&("clamp"!==n&&el(284,String(t),String(i),e.getKey()),r=r<0?0:i),r}function lB(e,t){return i4(e)?new lL[t](e):null}function lK(e){var t;return e&&((t=e.getAdjacentCaret())&&t.getChildCaret()||t)}class lW{type="node-caret-range";direction;anchor;focus;constructor(e,t,n){this.anchor=e,this.focus=t,this.direction=n}getLatest(){let e=this.anchor.getLatest(),t=this.focus.getLatest();return e===this.anchor&&t===this.focus?this:new lW(e,t,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){let e=e=>{let t=this[e].getLatest();return lD(t)?function(e,t){let{direction:n,origin:i}=e;return new lU(e,lR(i,"focus"===t?lN[n]:n)-e.offset)}(t,e):null},t=e("anchor"),n=e("focus");if(t&&n){let{caret:e}=t,{caret:i}=n;if(e.isSameNodeCaret(i))return[new lU(e,i.offset-e.offset),null]}return[t,n]}iterNodeCarets(e="root"){let t=lD(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),n=this.focus.getLatest(),i=lD(n),r=t=>t.isSameNodeCaret(n)?null:lK(t)||t.getParentCaret(e);return lV({hasNext:e=>null!==e&&!(i&&n.isSameNodeCaret(e)),initial:t.isSameNodeCaret(n)?null:r(t),map:e=>e,step:r})}[Symbol.iterator](){return this.iterNodeCarets("root")}}class lU{type="slice";caret;distance;constructor(e,t){this.caret=e,this.distance=t}getSliceIndices(){let{distance:e,caret:{offset:t}}=this,n=t+e;return n<t?[n,t]:[t,n]}getTextContent(){let[e,t]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(e,t)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){let{caret:{origin:e,direction:t}}=this,[n,i]=this.getSliceIndices(),r=e.getTextContent();return lz(e.setTextContent(r.slice(0,n)+r.slice(i)),t,n)}}function lJ(e){return l$(e,lI(rz(),e.direction))}function l$(e,t){return e.direction!==t.direction&&er(265),new lW(e,t,e.direction)}function lV(e){let{initial:t,hasNext:n,step:i,map:r}=e,l=t;return{[Symbol.iterator](){return this},next(){if(!n(l))return{done:!0,value:void 0};let e={done:!1,value:r(l)};return l=i(l),e}}}function lH(e,t){let n=lG(e.origin,t.origin);switch(null===n&&er(275,e.origin.getKey(),t.origin.getKey()),n.type){case"same":{let n="text"===e.type,i="text"===t.type;return n&&i?Math.sign(e.offset-t.offset):e.type===t.type?0:n?-1:i?1:"child"===e.type?-1:1}case"ancestor":return"child"===e.type?-1:1;case"descendant":return"child"===t.type?1:-1;case"branch":return lq(n)}}function lq(e){let{a:t,b:n}=e,i=t.__key,r=n.__key,l=t,s=n;for(;l&&s;l=l.getNextSibling(),s=s.getNextSibling()){if(l.__key===r)return -1;if(s.__key===i)return 1}return null===l?1:-1}function lY(e){return i4(e)?[e.getLatest(),null]:[e.getParent(),e.getLatest()]}function lG(e,t){if(e.is(t))return{commonAncestor:e,type:"same"};let n=new Map;for(let[t,i]=lY(e);t;i=t,t=t.getParent())n.set(t,i);for(let[i,r]=lY(t);i;r=i,i=i.getParent()){let l=n.get(i);if(void 0!==l)return null===l?(i.is(e)||er(276),{commonAncestor:i,type:"ancestor"}):null===r?(i.is(t)||er(277),{commonAncestor:i,type:"descendant"}):((i4(l)||l.is(e))&&(i4(r)||r.is(t))&&i.is(l.getParent())&&i.is(r.getParent())||er(278),{a:l,b:r,commonAncestor:i,type:"branch"})}return null}function lX(e,t){var n;let i,{type:r,key:l,offset:s}=e,o=(null===(i=rA(n=e.key))&&er(63,n),i);return"text"===r?(n6(o)||er(266,o.getType(),l),lz(o,t,s)):(i4(o)||er(267,o.getType(),l),function(e,t,n){let i=lB(e,"next");for(let e=0;e<t;e++){let e=i.getAdjacentCaret();if(null===e)break;i=e}return l5(i,n)}(o,e.offset,t))}function lZ(e,t){let{origin:n,direction:i}=t,r="next"===i;lD(t)?e.set(n.getKey(),t.offset,"text"):lA(t)?n6(n)?e.set(n.getKey(),lR(n,i),"text"):e.set(n.getParentOrThrow().getKey(),n.getIndexWithinParent()+ +!!r,"element"):(lP(t)&&i4(n)||er(268),e.set(n.getKey(),r?0:n.getChildrenSize(),"element"))}function lQ(e,t){lZ(e.anchor,t.anchor),lZ(e.focus,t.focus)}function l0(e){let{anchor:t,focus:n}=e,i=lX(t,"next"),r=lX(n,"next"),l=0>=lH(i,r)?"next":"previous";return l$(l5(i,l),l5(r,l))}function l1(e){let{direction:t,origin:n}=e,i=lI(n,lN[t]).getNodeAtCaret();return i?lI(i,t):lB(n.getParentOrThrow(),t)}function l2(e,t="root"){let n=[e];for(let i=lP(e)?e.getParentCaret(t):e.getSiblingCaret();null!==i;i=i.getParentCaret(t))n.push(l1(i));return n}function l3(e){return!!e&&e.origin.isAttached()}function l4(e){let t=function(e){let t=e;for(;lP(t);){let e=lK(t);if(!lP(e))break;t=e}return t}(e.getLatest()),{direction:n}=t;if(n6(t.origin))return lD(t)?t:lz(t.origin,n,n);let i=t.getAdjacentCaret();return lA(i)&&n6(i.origin)?lz(i.origin,n,lN[n]):t}function l6(e){return lD(e)&&e.offset!==lR(e.origin,e.direction)}function l5(e,t){return e.direction===t?e:e.getFlipped()}function l9(e,t){return e.direction===t?e:l$(l5(e.focus,t),l5(e.anchor,t))}function l8(e,t){if(!t||e===t)return e;for(let n in t)if(e[n]!==t[n])return{...e,...t};return e}let l7="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,se=l7?r.useLayoutEffect:r.useEffect,st={tag:nz};function sn({initialConfig:e,children:t}){let n=(0,r.useMemo)(()=>{let{theme:t,namespace:n,nodes:i,onError:r,editorState:l,html:s}=e,o={getTheme:function(){return null!=t?t:null}},a=ru({editable:e.editable,html:s,namespace:n,nodes:i,onError:e=>r(e,a),theme:t});return function(e,t){if(null!==t){if(void 0===t)e.update(()=>{let t=rz();if(t.isEmpty()){let n=rs();t.append(n);let i=l7?document.activeElement:null;(null!==iN()||null!==i&&i===e.getRootElement())&&n.select()}},st);else if(null!==t)switch(typeof t){case"string":{let n=e.parseEditorState(t);e.setEditorState(n,st);break}case"object":e.setEditorState(t,st);break;case"function":e.update(()=>{rz().isEmpty()&&t(e)},st)}}}(a,l),[a,o]},[]);return se(()=>{let t=e.editable,[i]=n;i.setEditable(void 0===t||t)},[]),(0,i.jsx)(en.Provider,{value:n,children:t})}let si="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?r.useLayoutEffect:r.useEffect;function sr(e){return{initialValueFn:()=>e.isEditable(),subscribe:t=>e.registerEditableListener(t)}}let sl=new Map;function ss(e){let t={};if(!e)return t;for(let n of e.split(";"))if(""!==n){let[e,i]=n.split(/:([^]+)/);e&&i&&(t[e.trim()]=i.trim())}return t}function so(e){let t=sl.get(e);return void 0===t&&(t=ss(e),sl.set(e,t)),t}function sa(e){let t=iU().getElementByKey(e.getKey());if(null===t)return null;let n=t.ownerDocument.defaultView;return null===n?null:n.getComputedStyle(t)}function su(e){return sa(i7(e)?e:e.getParentOrThrow())}function sd(e){let t=su(e);return null!==t&&"rtl"===t.direction}function sc(e,t,n="self"){let i=e.getStartEndPoints();if(t.isSelected(e)&&!rb(t)&&null!==i){let[l,s]=i,o=e.isBackward(),a=l.getNode(),u=s.getNode(),d=t.is(a),c=t.is(u);if(d||c){var r;let[i,l]=id(e),s=a.is(u),d=t.is(o?u:a),c=t.is(o?a:u),h,f=0;s?(f=i>l?l:i,h=i>l?i:l):d?(f=o?l:i,h=void 0):c&&(f=0,h=o?i:l);let g=t.__text.slice(f,h);g!==t.__text&&("clone"===n&&((r=lx(t))[nj]=!0,t=r),t.__text=g)}}return t}function sh(e){let t=sf(e);return null!==t&&"vertical-rl"===t.writingMode}function sf(e){let t=e.anchor.getNode();return i4(t)?sa(t):su(t)}function sg(e,t){let n=sh(e)?!t:t;sp(e)&&(n=!n);let i=lX(e.focus,n?"previous":"next");if(l6(i))return!1;for(let e of lJ(i)){if(lP(e))return!e.origin.isInline();if(!i4(e.origin)){if(i9(e.origin))return!0;break}}return!1}function sp(e){let t=sf(e);return null!==t&&"rtl"===t.direction}function sm(e,t,n){let i,r=sp(e);i=sh(e)||r?!n:n,e.modify(t?"extend":"move",i,"character")}let s_="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,sy=s_&&"documentMode"in document?document.documentMode:null,sx=(s_&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),s_&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent));function sv(...e){let t=[];for(let n of e)if(n&&"string"==typeof n)for(let[e]of n.matchAll(/\S+/g))t.push(e);return t}function sS(...e){return()=>{for(let t=e.length-1;t>=0;t--)e[t]();e.length=0}}function sb(e,...t){let n=sv(...t);n.length>0&&e.classList.add(...n)}function sC(e,...t){let n=sv(...t);n.length>0&&e.classList.remove(...n)}s_&&"InputEvent"in window&&!sy&&new window.InputEvent("input"),s_&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),s_&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&window.MSStream,s_&&/Android/.test(navigator.userAgent),s_&&/^(?=.*Chrome).*/i.test(navigator.userAgent),s_&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent);function sN(e,t){return null!==e&&Object.getPrototypeOf(e).constructor.name===t.name}let sw=!(sx||!s_)&&void 0,sk=Symbol.for("preact-signals");function sT(){if(sO>1)return void sO--;let e,t=!1;for(;void 0!==n;){let i=n;for(n=void 0,sM++;void 0!==i;){let n=i.o;if(i.o=void 0,i.f&=-3,!(8&i.f)&&sj(i))try{i.c()}catch(n){t||(e=n,t=!0)}i=n}}if(sM=0,sO--,t)throw e}function sE(e){let n=t;t=void 0;try{return e()}finally{t=n}}let sO=0,sM=0,sD=0;function sA(e){if(void 0===t)return;let n=e.n;return void 0===n||n.t!==t?(n={i:0,S:e,p:t.s,n:void 0,t:t,e:void 0,x:void 0,r:n},void 0!==t.s&&(t.s.n=n),t.s=n,e.n=n,32&t.f&&e.S(n),n):-1===n.i?(n.i=0,void 0!==n.n&&(n.n.p=n.p,void 0!==n.p&&(n.p.n=n.n),n.p=t.s,n.n=void 0,t.s.n=n,t.s=n),n):void 0}function sP(e,t){this.v=e,this.i=0,this.n=void 0,this.t=void 0,this.W=null==t?void 0:t.watched,this.Z=null==t?void 0:t.unwatched,this.name=null==t?void 0:t.name}function sj(e){for(let t=e.s;void 0!==t;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function sF(e){for(let t=e.s;void 0!==t;t=t.n){let n=t.S.n;if(void 0!==n&&(t.r=n),t.S.n=t,t.i=-1,void 0===t.n){e.s=t;break}}}function sL(e){let t,n=e.s;for(;void 0!==n;){let e=n.p;-1===n.i?(n.S.U(n),void 0!==e&&(e.n=n.n),void 0!==n.n&&(n.n.p=e)):t=n,n.S.n=n.r,void 0!==n.r&&(n.r=void 0),n=e}e.s=t}function sI(e,t){sP.call(this,void 0),this.x=e,this.s=void 0,this.g=sD-1,this.f=4,this.W=null==t?void 0:t.watched,this.Z=null==t?void 0:t.unwatched,this.name=null==t?void 0:t.name}function sz(e){let n=e.u;if(e.u=void 0,"function"==typeof n){sO++;let i=t;t=void 0;try{n()}catch(t){throw e.f&=-2,e.f|=8,sR(e),t}finally{t=i,sT()}}}function sR(e){for(let t=e.s;void 0!==t;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,sz(e)}function sB(e){if(t!==this)throw Error("Out-of-order effect");sL(this),t=e,this.f&=-2,8&this.f&&sR(this),sT()}function sK(e,t){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=null==t?void 0:t.name}function sW(e,t){let n=new sK(e,t);try{n.c()}catch(e){throw n.d(),e}let i=n.d.bind(n);return i[Symbol.dispose]=i,i}function sU(e,t={}){let n={};for(let i in e){let r=t[i],l=new sP(void 0===r?e[i]:r,void 0);n[i]=l}return n}sP.prototype.brand=sk,sP.prototype.h=function(){return!0},sP.prototype.S=function(e){let t=this.t;t!==e&&void 0===e.e&&(e.x=t,this.t=e,void 0!==t?t.e=e:sE(()=>{var e;null==(e=this.W)||e.call(this)}))},sP.prototype.U=function(e){if(void 0!==this.t){let t=e.e,n=e.x;void 0!==t&&(t.x=n,e.e=void 0),void 0!==n&&(n.e=t,e.x=void 0),e===this.t&&(this.t=n,void 0===n&&sE(()=>{var e;null==(e=this.Z)||e.call(this)}))}},sP.prototype.subscribe=function(e){return sW(()=>{let n=this.value,i=t;t=void 0;try{e(n)}finally{t=i}},{name:"sub"})},sP.prototype.valueOf=function(){return this.value},sP.prototype.toString=function(){return this.value+""},sP.prototype.toJSON=function(){return this.value},sP.prototype.peek=function(){let e=t;t=void 0;try{return this.value}finally{t=e}},Object.defineProperty(sP.prototype,"value",{get(){let e=sA(this);return void 0!==e&&(e.i=this.i),this.v},set(e){if(e!==this.v){if(sM>100)throw Error("Cycle detected");this.v=e,this.i++,sD++,sO++;try{for(let e=this.t;void 0!==e;e=e.x)e.t.N()}finally{sT()}}}}),sI.prototype=new sP,sI.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if(32==(36&this.f)||(this.f&=-5,this.g===sD))return!0;if(this.g=sD,this.f|=1,this.i>0&&!sj(this))return this.f&=-2,!0;let e=t;try{sF(this),t=this;let e=this.x();(16&this.f||this.v!==e||0===this.i)&&(this.v=e,this.f&=-17,this.i++)}catch(e){this.v=e,this.f|=16,this.i++}return t=e,sL(this),this.f&=-2,!0},sI.prototype.S=function(e){if(void 0===this.t){this.f|=36;for(let e=this.s;void 0!==e;e=e.n)e.S.S(e)}sP.prototype.S.call(this,e)},sI.prototype.U=function(e){if(void 0!==this.t&&(sP.prototype.U.call(this,e),void 0===this.t)){this.f&=-33;for(let e=this.s;void 0!==e;e=e.n)e.S.U(e)}},sI.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(let e=this.t;void 0!==e;e=e.x)e.t.N()}},Object.defineProperty(sI.prototype,"value",{get(){if(1&this.f)throw Error("Cycle detected");let e=sA(this);if(this.h(),void 0!==e&&(e.i=this.i),16&this.f)throw this.v;return this.v}}),sK.prototype.c=function(){let e=this.S();try{if(8&this.f||void 0===this.x)return;let e=this.x();"function"==typeof e&&(this.u=e)}finally{e()}},sK.prototype.S=function(){if(1&this.f)throw Error("Cycle detected");this.f|=1,this.f&=-9,sz(this),sF(this),sO++;let e=t;return t=this,sB.bind(this,e)},sK.prototype.N=function(){2&this.f||(this.f|=2,this.o=n,n=this)},sK.prototype.d=function(){this.f|=8,1&this.f||sR(this)},sK.prototype.dispose=function(){this.d()},(e,t,n)=>sU(t);function sJ(e,...t){let n=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;for(let n of(i.append("code",e),t))i.append("v",n);throw n.search=i.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let s$=new Set;class sV{builder;configs;_dependency;_peerNameSet;extension;state;_signal;constructor(e,t){this.builder=e,this.extension=t,this.configs=new Set,this.state={id:0}}mergeConfigs(){let e=this.extension.config||{},t=this.extension.mergeConfig?this.extension.mergeConfig.bind(this.extension):l8;for(let n of this.configs)e=t(e,n);return e}init(e){let t,n=this.state;2===n.id||sJ(306,String(n.id));let i={getDependency:this.getInitDependency.bind(this),getDirectDependentNames:this.getDirectDependentNames.bind(this),getPeer:this.getInitPeer.bind(this),getPeerNameSet:this.getPeerNameSet.bind(this)},r={...i,getDependency:this.getDependency.bind(this),getInitResult:this.getInitResult.bind(this),getPeer:this.getPeer.bind(this)},l=Object.assign(n,{config:this.mergeConfigs(),id:3,registerState:i});this.state=l,this.extension.init&&(t=this.extension.init(e,l.config,i)),this.state=Object.assign(l,{id:4,initResult:t,registerState:r})}build(e){let t,n=this.state;4!==n.id&&sJ(307,String(n.id),String(5)),this.extension.build&&(t=this.extension.build(e,n.config,n.registerState));let i={...n.registerState,getOutput:()=>t,getSignal:this.getSignal.bind(this)};this.state=Object.assign(n,{id:5,output:t,registerState:i})}register(e,t){this._signal=t;let n=this.state;5!==n.id&&sJ(308,String(n.id),String(5));let i=this.extension.register&&this.extension.register(e,n.config,n.registerState);return this.state=Object.assign(n,{id:6}),()=>{let e=this.state;7!==e.id&&sJ(309,String(n.id),String(7)),this.state=Object.assign(e,{id:5}),i&&i()}}afterRegistration(e){let t,n=this.state;return 6!==n.id&&sJ(310,String(n.id),String(6)),this.extension.afterRegistration&&(t=this.extension.afterRegistration(e,n.config,n.registerState)),this.state=Object.assign(n,{id:7}),t}getSignal(){return void 0===this._signal&&sJ(311),this._signal}getInitResult(){void 0===this.extension.init&&sJ(312,this.extension.name);let e=this.state;return e.id>=4||sJ(313,String(e.id),String(4)),e.initResult}getInitPeer(e){let t=this.builder.extensionNameMap.get(e);return t?t.getExtensionInitDependency():void 0}getExtensionInitDependency(){let e=this.state;return e.id>=3||sJ(314,String(e.id),String(3)),{config:e.config}}getPeer(e){let t=this.builder.extensionNameMap.get(e);return t?t.getExtensionDependency():void 0}getInitDependency(e){let t=this.builder.getExtensionRep(e);return void 0===t&&sJ(315,this.extension.name,e.name),t.getExtensionInitDependency()}getDependency(e){let t=this.builder.getExtensionRep(e);return void 0===t&&sJ(315,this.extension.name,e.name),t.getExtensionDependency()}getState(){let e=this.state;return e.id>=7||sJ(316,String(e.id),String(7)),e}getDirectDependentNames(){return this.builder.incomingEdges.get(this.extension.name)||s$}getPeerNameSet(){let e=this._peerNameSet;return e||(e=new Set((this.extension.peerDependencies||[]).map(([e])=>e)),this._peerNameSet=e),e}getExtensionDependency(){if(!this._dependency){let e=this.state;e.id>=5||sJ(317,this.extension.name),this._dependency={config:e.config,init:e.initResult,output:e.output}}return this._dependency}}let sH={tag:nz};function sq(){let e=rz();e.isEmpty()&&e.append(rs())}let sY={config:{setOptions:sH,updateOptions:sH},init:({$initialEditorState:e=sq})=>({$initialEditorState:e,initialized:!1}),afterRegistration(e,{updateOptions:t,setOptions:n},i){let r=i.getInitResult();if(!r.initialized){r.initialized=!0;let{$initialEditorState:i}=r;if(i instanceof rn)e.setEditorState(i,n);else if("function"==typeof i)e.update(()=>{i(e)},t);else if(i&&("string"==typeof i||"object"==typeof i)){let t=e.parseEditorState(i);e.setEditorState(t,n)}}return()=>{}},name:"@lexical/extension/InitialState",nodes:[i8,nG,nR,n9,rr]},sG=Symbol.for("@lexical/extension/LexicalBuilder");function sX(){}function sZ(e){throw e}function sQ(e){return Array.isArray(e)?e:[e]}let s0="0.39.0+prod.esm";class s1{roots;extensionNameMap;outgoingConfigEdges;incomingEdges;conflicts;_sortedExtensionReps;PACKAGE_VERSION;constructor(e){for(const t of(this.outgoingConfigEdges=new Map,this.incomingEdges=new Map,this.extensionNameMap=new Map,this.conflicts=new Map,this.PACKAGE_VERSION=s0,this.roots=e,e))this.addExtension(t)}static fromExtensions(e){let t=[sQ(sY)];for(let n of e)t.push(sQ(n));return new s1(t)}static maybeFromEditor(e){let t=e[sG];return t&&(t.PACKAGE_VERSION!==s0&&sJ(292,t.PACKAGE_VERSION,s0),t instanceof s1||sJ(293)),t}static fromEditor(e){let t=s1.maybeFromEditor(e);return void 0===t&&sJ(294),t}constructEditor(){let{$initialEditorState:e,onError:t,...n}=this.buildCreateEditorArgs(),i=Object.assign(ru({...n,...t?{onError:e=>{t(e,i)}}:{}}),{[sG]:this});for(let e of this.sortedExtensionReps())e.build(i);return i}buildEditor(){let e=sX;function t(){try{e()}finally{e=sX}}let n=Object.assign(this.constructEditor(),{dispose:t,[Symbol.dispose]:t});return e=sS(this.registerEditor(n),()=>n.setRootElement(null)),n}hasExtensionByName(e){return this.extensionNameMap.has(e)}getExtensionRep(e){let t=this.extensionNameMap.get(e.name);if(t)return t.extension!==e&&sJ(295,e.name),t}addEdge(e,t,n){let i=this.outgoingConfigEdges.get(e);i?i.set(t,n):this.outgoingConfigEdges.set(e,new Map([[t,n]]));let r=this.incomingEdges.get(t);r?r.add(e):this.incomingEdges.set(t,new Set([e]))}addExtension(e){void 0!==this._sortedExtensionReps&&sJ(296);let[t]=sQ(e);"string"!=typeof t.name&&sJ(297,typeof t.name);let n=this.extensionNameMap.get(t.name);if(void 0!==n&&n.extension!==t&&sJ(298,t.name),!n){n=new sV(this,t),this.extensionNameMap.set(t.name,n);let e=this.conflicts.get(t.name);for(let n of("string"==typeof e&&sJ(299,t.name,e),t.conflictsWith||[]))this.extensionNameMap.has(n)&&sJ(299,t.name,n),this.conflicts.set(n,t.name);for(let e of t.dependencies||[]){let n=sQ(e);this.addEdge(t.name,n[0].name,n.slice(1)),this.addExtension(n)}for(let[e,n]of t.peerDependencies||[])this.addEdge(t.name,e,n?[n]:[])}}sortedExtensionReps(){if(this._sortedExtensionReps)return this._sortedExtensionReps;let e=[],t=(n,i)=>{var r,l;let s=n.state;if(2===s.id)return;let o=n.extension.name;0===s.id||sJ(300,o,i||"[unknown]"),0===(r=s).id||sJ(304,String(r.id),String(0)),n.state=s=Object.assign(r,{id:1});let a=this.outgoingConfigEdges.get(o);if(a)for(let e of a.keys()){let n=this.extensionNameMap.get(e);n&&t(n,o)}1===(l=s).id||sJ(305,String(l.id),String(1)),n.state=s=Object.assign(l,{id:2}),e.push(n)};for(let e of this.extensionNameMap.values())0===e.state.id&&t(e);for(let t of e)for(let[e,n]of this.outgoingConfigEdges.get(t.extension.name)||[])if(n.length>0){let t=this.extensionNameMap.get(e);if(t)for(let e of n)t.configs.add(e)}for(let[e,...t]of this.roots)if(t.length>0){let n=this.extensionNameMap.get(e.name);for(let i of(void 0===n&&sJ(301,e.name),t))n.configs.add(i)}return this._sortedExtensionReps=e,this._sortedExtensionReps}registerEditor(e){let t=this.sortedExtensionReps(),n=new AbortController,i=[()=>n.abort()],r=n.signal;for(let n of t){let t=n.register(e,r);t&&i.push(t)}for(let n of t){let t=n.afterRegistration(e);t&&i.push(t)}return sS(...i)}buildCreateEditorArgs(){let e={},t=new Set,n=new Map,i=new Map,r={},l={},s=this.sortedExtensionReps();for(let o of s){let{extension:s}=o;if(void 0!==s.onError&&(e.onError=s.onError),void 0!==s.disableEvents&&(e.disableEvents=s.disableEvents),void 0!==s.parentEditor&&(e.parentEditor=s.parentEditor),void 0!==s.editable&&(e.editable=s.editable),void 0!==s.namespace&&(e.namespace=s.namespace),void 0!==s.$initialEditorState&&(e.$initialEditorState=s.$initialEditorState),s.nodes){for(let e of("function"==typeof s.nodes?s.nodes():s.nodes)||[]){if("function"!=typeof e){let t=n.get(e.replace);t&&sJ(302,s.name,e.replace.name,t.extension.name),n.set(e.replace,o)}t.add(e)}}if(s.html){if(s.html.export)for(let[e,t]of s.html.export.entries())i.set(e,t);s.html.import&&Object.assign(r,s.html.import)}s.theme&&function e(t,n){if(t&&n&&!Array.isArray(n)&&"object"==typeof t&&"object"==typeof n){for(let i in n)t[i]=e(t[i],n[i]);return t}return n}(l,s.theme)}Object.keys(l).length>0&&(e.theme=l),t.size&&(e.nodes=[...t]);let o=Object.keys(r).length>0,a=i.size>0;for(let t of((o||a)&&(e.html={},o&&(e.html.import=r),a&&(e.html.export=i)),s))t.init(e);return e.onError||(e.onError=sZ),e}}tf("INSERT_HORIZONTAL_RULE_COMMAND");var s2=e.i(89002);function s3(e){return()=>(function(e){if(!function(e,t=!0){if(e)return!1;let n=rz().getTextContent();return t&&(n=n.trim()),""===n}(e,!1))return!1;let t=rz().getChildren(),n=t.length;if(n>1)return!1;for(let e=0;e<n;e++){let n=t[e];if(i9(n))return!1;if(i4(n)){if(!ro(n)||0!==n.__indent)return!1;let t=n.getChildren(),i=t.length;for(let n=0;n<i;n++)if(!n6(t[e]))return!1}}return!0})(e)}function s4(e){let t=window.location.origin,n=n=>{if(n.origin!==t)return;let i=e.getRootElement();if(document.activeElement!==i)return;let r=n.data;if("string"==typeof r){let t;try{t=JSON.parse(r)}catch(e){return}if(t&&"nuanria_messaging"===t.protocol&&"request"===t.type){let i=t.payload;if(i&&"makeChanges"===i.functionId){let t=i.args;if(t){let[i,r,l,s,o]=t;e.update(()=>{let e=iN();if(is(e)){let t=e.anchor,a=t.getNode(),u=0,d=0;if(n6(a)&&i>=0&&r>=0&&(u=i,d=i+r,e.setTextNodeRange(a,u,a,d)),u===d&&""===l||(e.insertRawText(l),a=t.getNode()),n6(a)){u=s,d=s+o;let t=a.getTextContentSize();u=u>t?t:u,d=d>t?t:d,e.setTextNodeRange(a,u,a,d)}n.stopImmediatePropagation()}})}}}}};return window.addEventListener("message",n,!0),()=>{window.removeEventListener("message",n,!0)}}(e,t,n)=>sU(t),(e,t,n)=>sW(()=>n.getOutput().disabled.value?void 0:s4(e));let s6=new Set(["STYLE","SCRIPT"]);function s5(e,...t){let n=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;for(let n of(i.append("code",e),t))i.append("v",n);throw n.search=i.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function s9(e,t,n){let i=e.getData("application/x-lexical-editor");if(i)try{let e=JSON.parse(i);if(e.namespace===n._config.namespace&&Array.isArray(e.nodes))return s8(n,function(e){let t=[];for(let n=0;n<e.length;n++){let i=iq(e[n],iU()._nodes);n6(i)&&function(e){let t=e.getStyle(),n=ss(t);sl.set(t,n)}(i),t.push(i)}return t}(e.nodes),t)}catch(e){console.error(e)}let r=e.getData("text/html"),l=e.getData("text/plain");if(r&&l!==r)try{let e=(new DOMParser).parseFromString(window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("lexical",{createHTML:e=>e}).createHTML(r):r,"text/html");return s8(n,function(e,t){let n=rN(t)?t.body.childNodes:t.childNodes,i=[],r=[];for(let t of n)if(!s6.has(t.nodeName)){let n=function e(t,n,i,r,l=new Map,s){let o=[];if(s6.has(t.nodeName))return o;let a=null,u=function(e,t){let{nodeName:n}=e,i=t._htmlConversions.get(n.toLowerCase()),r=null;if(void 0!==i)for(let t of i){let n=t(e);null!==n&&(null===r||(r.priority||0)<=(n.priority||0))&&(r=n)}return null!==r?r.conversion:null}(t,n),d=u?u(t):null,c=null;if(null!==d){c=d.after;let e=d.node;if(null!==(a=Array.isArray(e)?e[e.length-1]:e)){for(let[,e]of l)if(!(a=e(a,s)))break;a&&o.push(...Array.isArray(e)?e:[a])}null!=d.forChild&&l.set(t.nodeName,d.forChild)}let h=t.childNodes,f=[],g=(null==a||!li(a))&&(null!=a&&ix(a)||r);for(let t=0;t<h.length;t++)f.push(...e(h[t],n,i,g,new Map(l),a));return null!=c&&(f=c(f)),lg(t)&&(f=function(e,t,n){let i=e.style.textAlign,r=[],l=[];for(let e=0;e<t.length;e++){let s=t[e];if(ix(s))i&&!s.getFormat()&&s.setFormat(i),r.push(s);else if(l.push(s),e===t.length-1||e<t.length-1&&ix(t[e+1])){let e=n();e.setFormat(i),e.append(...l),r.push(e),l=[]}}return r}(t,f,g?()=>{let e=new ri;return i.push(e),e}:rs)),null==a?f.length>0?o=o.concat(f):lg(t)&&null!=t.nextSibling&&null!=t.previousSibling&&lf(t.nextSibling)&&lf(t.previousSibling)&&(o=o.concat(nK())):i4(a)&&a.append(...f),o}(t,e,r,!1);null!==n&&(i=i.concat(n))}return function(e){for(let t of e)t.getNextSibling()instanceof ri&&t.insertAfter(nK());for(let t of e){for(let e of t.getChildren())t.insertBefore(e);t.remove()}}(r),i}(n,e),t)}catch(e){console.error(e)}let s=l||e.getData("text/uri-list");if(null!=s)if(is(t)){let e=s.split(/(\r?\n|\t)/);""===e[e.length-1]&&e.pop();for(let t=0;t<e.length;t++){let n=iN();if(is(n)){let i=e[t];"\n"===i||"\r\n"===i?n.insertParagraph():"	"===i?n.insertNodes([n8()]):n.insertText(i)}}}else t.insertRawText(s)}function s8(e,t,n){e.dispatchCommand(tp,{nodes:t,selection:n})||(n.insertNodes(t),function(e){if(is(e)&&e.isCollapsed()){let t=e.anchor,n=null,i=lX(t,"previous");if(i)if(lD(i))n=i.origin;else for(let e of l$(i,lB(rz(),"next").getFlipped())){if(n6(e.origin)){n=e.origin;break}if(i4(e.origin)&&!e.origin.isInline())break}if(n&&n6(n)){let t=n.getFormat(),i=n.getStyle();e.format===t&&e.style===i||(e.format=t,e.style=i,e.dirty=!0)}}}(n))}let s7=null;async function oe(e,t,n){if(null!==s7)return!1;if(null!==t)return new Promise((i,r)=>{e.update(()=>{i(ot(e,t,n))})});let i=e.getRootElement(),r=e._window||window,l=r.document,s=la(r);if(null===i||null===s)return!1;let o=l.createElement("span");o.style.cssText="position: fixed; top: -1000px;",o.append(l.createTextNode("#")),i.append(o);let a=new Range;return a.setStart(o,0),a.setEnd(o,1),s.removeAllRanges(),s.addRange(a),new Promise((t,i)=>{let s=e.registerCommand(tQ,i=>(sN(i,ClipboardEvent)&&(s(),null!==s7&&(r.clearTimeout(s7),s7=null),t(ot(e,i,n))),!0),4);s7=r.setTimeout(()=>{s(),s7=null,t(!1)},50),l.execCommand("copy"),o.remove()})}function ot(e,t,n){if(void 0===n){let t=la(e._window),i=iN();if(!i||i.isCollapsed()||!t)return!1;let r=t.anchorNode,l=t.focusNode;if(null!==r&&null!==l&&!r_(e,r,l))return!1;n=function(e=iN()){let t={"text/plain":e?e.getTextContent():""};if(e){let n=iU();for(let[i,r]of on){let l=r(n,e);null!==l&&(t[i]=l)}}return t}(i)}t.preventDefault();let i=t.clipboardData;return null!==i&&(function(e,t){for(let[n]of on)void 0===t[n]&&e.setData(n,"");for(let n in t){let i=t[n];void 0!==i&&e.setData(n,i)}}(i,n),!0)}let on=[["text/html",function(t,n=iN()){return null==n&&s5(166),is(n)&&n.isCollapsed()||0===n.getNodes().length?"":function(t,n){if("undefined"==typeof document||"undefined"==typeof window&&void 0===e.g.window)throw Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");let i=document.createElement("div"),r=rz().getChildren();for(let e=0;e<r.length;e++)!function e(t,n,i,r=null){let l=null===r||n.isSelected(r),s=i4(n)&&n.excludeFromCopy("html"),o=n;null!==r&&n6(n)&&(o=sc(r,n,"clone"));let a=i4(o)?o.getChildren():[],u=rg(t,o.getType()),{element:d,after:c}=u&&void 0!==u.exportDOM?u.exportDOM(t,o):o.exportDOM(t);if(!d)return!1;let h=document.createDocumentFragment();for(let i=0;i<a.length;i++){let s=a[i],o=e(t,s,h,r);!l&&i4(n)&&o&&n.extractWithChild(s,r,"html")&&(l=!0)}if(l&&!s){if((ld(d)||lh(d))&&d.append(h),i.append(d),c){let e=c.call(o,d);e&&(lh(d)?d.replaceChildren(e):d.replaceWith(e))}}else i.append(h);return l}(t,r[e],i,n);return i.innerHTML}(t,n)}],["application/x-lexical-editor",function(e,t=iN()){return null==t&&s5(166),is(t)&&t.isCollapsed()||0===t.getNodes().length?null:JSON.stringify(function(e,t){let n=[],i=rz().getChildren();for(let r=0;r<i.length;r++)!function e(t,n,i,r=[]){var l;let s,o,a=null===n||i.isSelected(n),u=i4(i)&&i.excludeFromCopy("html"),d=i;null!==n&&n6(d)&&(d=sc(n,d,"clone"));let c=i4(d)?d.getChildren():[],h=(s=(l=d).exportJSON(),o=l.constructor,s.type!==o.getType()&&s5(58,o.name),i4(l)&&(Array.isArray(s.children)||s5(59,o.name)),s);n6(d)&&0===d.getTextContentSize()&&(a=!1);for(let r=0;r<c.length;r++){let l=c[r],s=e(t,n,l,h.children);!a&&i4(i)&&s&&i.extractWithChild(l,n,"clone")&&(a=!0)}if(a&&!u)r.push(h);else if(Array.isArray(h.children))for(let e=0;e<h.children.length;e++){let t=h.children[e];r.push(t)}return a}(e,t,i[r],n);return{namespace:e._config.namespace,nodes:n}}(e,t))}]];function oi(e,t){if(void 0!==document.caretRangeFromPoint){let n=document.caretRangeFromPoint(e,t);return null===n?null:{node:n.startContainer,offset:n.startOffset}}if("undefined"!==document.caretPositionFromPoint){let n=document.caretPositionFromPoint(e,t);return null===n?null:{node:n.offsetNode,offset:n.offset}}return null}let or="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,ol=or&&"documentMode"in document?document.documentMode:null,os=or&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),oo=!(!or||!("InputEvent"in window)||ol)&&"getTargetRanges"in new window.InputEvent("input"),oa=or&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),ou=or&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,od=or&&/^(?=.*Chrome).*/i.test(navigator.userAgent),oc=or&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&os&&!od,oh=tf("DRAG_DROP_PASTE_FILE");class of extends i3{static getType(){return"quote"}static clone(e){return new of(e.__key)}createDOM(e){let t=document.createElement("blockquote");return sb(t,e.theme.quote),t}updateDOM(e,t){return!1}static importDOM(){return{blockquote:e=>({conversion:oy,priority:0})}}exportDOM(e){let{element:t}=super.exportDOM(e);if(ld(t)){this.isEmpty()&&t.append(document.createElement("br"));let e=this.getFormatType();e&&(t.style.textAlign=e);let n=this.getDirection();n&&(t.dir=n)}return{element:t}}static importJSON(e){return og().updateFromJSON(e)}insertNewAfter(e,t){let n=rs(),i=this.getDirection();return n.setDirection(i),this.insertAfter(n,t),n}collapseAtStart(){let e=rs();return this.getChildren().forEach(t=>e.append(t)),this.replace(e),!0}canMergeWhenEmpty(){return!0}}function og(){return lr(new of)}class op extends i3{__tag;static getType(){return"heading"}static clone(e){return new op(e.__tag,e.__key)}constructor(e,t){super(t),this.__tag=e}getTag(){return this.__tag}setTag(e){let t=this.getWritable();return this.__tag=e,t}createDOM(e){let t=this.__tag,n=document.createElement(t),i=e.theme.heading;return void 0!==i&&sb(n,i[t]),n}updateDOM(e,t,n){return e.__tag!==this.__tag}static importDOM(){return{h1:e=>({conversion:o_,priority:0}),h2:e=>({conversion:o_,priority:0}),h3:e=>({conversion:o_,priority:0}),h4:e=>({conversion:o_,priority:0}),h5:e=>({conversion:o_,priority:0}),h6:e=>({conversion:o_,priority:0}),p:e=>{let t=e.firstChild;return null!==t&&om(t)?{conversion:()=>({node:null}),priority:3}:null},span:e=>om(e)?{conversion:e=>({node:ox("h1")}),priority:3}:null}}exportDOM(e){let{element:t}=super.exportDOM(e);if(ld(t)){this.isEmpty()&&t.append(document.createElement("br"));let e=this.getFormatType();e&&(t.style.textAlign=e);let n=this.getDirection();n&&(t.dir=n)}return{element:t}}static importJSON(e){return ox(e.tag).updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setTag(e.tag)}exportJSON(){return{...super.exportJSON(),tag:this.getTag()}}insertNewAfter(e,t=!0){let n=e?e.anchor.offset:0,i=this.getLastDescendant(),r=i&&(!e||e.anchor.key!==i.getKey()||n!==i.getTextContentSize())&&e?ox(this.getTag()):rs(),l=this.getDirection();if(r.setDirection(l),this.insertAfter(r,t),0===n&&!this.isEmpty()&&e){let e=rs();e.select(),this.replace(e,!0)}return r}collapseAtStart(){let e=this.isEmpty()?rs():ox(this.getTag());return this.getChildren().forEach(t=>e.append(t)),this.replace(e),!0}extractWithChild(){return!0}}function om(e){return"span"===e.nodeName.toLowerCase()&&"26pt"===e.style.fontSize}function o_(e){let t=e.nodeName.toLowerCase(),n=null;return"h1"!==t&&"h2"!==t&&"h3"!==t&&"h4"!==t&&"h5"!==t&&"h6"!==t||(n=ox(t),null!==e.style&&(lv(e,n),n.setFormat(e.style.textAlign))),{node:n}}function oy(e){let t=og();return null!==e.style&&(t.setFormat(e.style.textAlign),lv(e,t)),{node:t}}function ox(e="h1"){return lr(new op(e))}function ov(e){let t=null;if(sN(e,DragEvent)?t=e.dataTransfer:sN(e,ClipboardEvent)&&(t=e.clipboardData),null===t)return[!1,[],!1];let n=t.types,i=n.includes("Files"),r=n.includes("text/html")||n.includes("text/plain");return[i,Array.from(t.files),r]}function oS(e){let t=iN();if(!is(t))return!1;let n=new Set,i=t.getNodes();for(let t=0;t<i.length;t++){let r=i[t],l=r.getKey();if(n.has(l))continue;let s=lC(r,e=>i4(e)&&!e.isInline());if(null===s)continue;let o=s.getKey();s.canIndent()&&!n.has(o)&&(n.add(o),e(s))}return n.size>0}function ob(e){for(let t of["lowercase","uppercase","capitalize"])e.hasFormat(t)&&e.toggleFormat(t)}let oC="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?r.useLayoutEffect:r.useEffect;function oN({editor:e,ErrorBoundary:t}){return function(e,t){let[n,l]=(0,r.useState)(()=>e.getDecorators());return oC(()=>e.registerDecoratorListener(e=>{(0,s2.flushSync)(()=>{l(e)})}),[e]),(0,r.useEffect)(()=>{l(e.getDecorators())},[e]),(0,r.useMemo)(()=>{let l=[],s=Object.keys(n);for(let o=0;o<s.length;o++){let a=s[o],u=(0,i.jsx)(t,{onError:t=>e._onError(t),children:(0,i.jsx)(r.Suspense,{fallback:null,children:n[a]})}),d=e.getElementByKey(a);null!==d&&l.push((0,s2.createPortal)(u,d,a))}return l},[t,n,e])}(e,t)}function ow({editor:e,ErrorBoundary:t}){return!function(e){let t=s1.maybeFromEditor(e);if(t&&t.hasExtensionByName("@lexical/react/ReactProvider")){for(let e of["@lexical/plain-text","@lexical/rich-text"])t.hasExtensionByName(e)&&function(e,...t){let n=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;for(let e of(i.append("code",320),t))i.append("v",e);throw n.search=i.toString(),Error(`Minified Lexical error #320; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(0,e);return!0}return!1}(e)?(0,i.jsx)(oN,{editor:e,ErrorBoundary:t}):null}function ok(e){return e.getEditorState().read(s3(e.isComposing()))}function oT({contentEditable:e,placeholder:t=null,ErrorBoundary:n}){var r;let[l]=ei();return oC(()=>{var e;return sS(sS((e=r).registerCommand(tm,e=>{let t=iN();return!!ia(t)&&(t.clear(),!0)},0),e.registerCommand(tS,e=>{let t=iN();return is(t)?(t.deleteCharacter(e),!0):!!ia(t)&&(t.deleteNodes(),!0)},0),e.registerCommand(tT,e=>{let t=iN();return!!is(t)&&(t.deleteWord(e),!0)},0),e.registerCommand(tE,e=>{let t=iN();return!!is(t)&&(t.deleteLine(e),!0)},0),e.registerCommand(tN,t=>{let n=iN();if("string"==typeof t)null!==n&&n.insertText(t);else{if(null===n)return!1;let i=t.dataTransfer;if(null!=i)s9(i,n,e);else if(is(n)){let e=t.data;return e&&n.insertText(e),!0}}return!0},0),e.registerCommand(tk,()=>{let e=iN();return!!is(e)&&(e.removeText(),!0)},0),e.registerCommand(tO,e=>{let t=iN();return!!is(t)&&(t.formatText(e),!0)},0),e.registerCommand(tY,e=>{let t=iN();if(!is(t)&&!ia(t))return!1;for(let n of t.getNodes()){let t=lC(n,e=>i4(e)&&!e.isInline());null!==t&&t.setFormat(e)}return!0},0),e.registerCommand(tb,e=>{let t=iN();return!!is(t)&&(t.insertLineBreak(e),!0)},0),e.registerCommand(tC,()=>{let e=iN();return!!is(e)&&(e.insertParagraph(),!0)},0),e.registerCommand(t$,()=>{var e;let t;return e=[n8()],null===(t=iN()||iw())&&(t=rz().selectEnd()),t.insertNodes(e),!0},0),e.registerCommand(tV,()=>oS(e=>{let t=e.getIndent();e.setIndent(t+1)}),0),e.registerCommand(tH,()=>oS(e=>{let t=e.getIndent();t>0&&e.setIndent(Math.max(0,t-1))}),0),e.registerCommand(tI,e=>{let t=iN();if(ia(t)){let n=t.getNodes();if(n.length>0)return e.preventDefault(),n[0].selectPrevious(),!0}else if(is(t)){let n=r3(t.focus,!0);if(!e.shiftKey&&i9(n)&&!n.isIsolated()&&!n.isInline())return n.selectPrevious(),e.preventDefault(),!0}return!1},0),e.registerCommand(tz,e=>{let t=iN();if(ia(t)){let n=t.getNodes();if(n.length>0)return e.preventDefault(),n[0].selectNext(0,0),!0}else if(is(t)){let n;if("root"===(n=t.focus).key&&n.offset===rz().getChildrenSize())return e.preventDefault(),!0;let i=r3(t.focus,!1);if(!e.shiftKey&&i9(i)&&!i.isIsolated()&&!i.isInline())return i.selectNext(),e.preventDefault(),!0}return!1},0),e.registerCommand(tF,e=>{let t=iN();if(ia(t)){let n=t.getNodes();if(n.length>0)return e.preventDefault(),sd(n[0])?n[0].selectNext(0,0):n[0].selectPrevious(),!0}if(!is(t))return!1;if(sg(t,!0)){let n=e.shiftKey;return e.preventDefault(),sm(t,n,!0),!0}return!1},0),e.registerCommand(tP,e=>{let t=iN();if(ia(t)){let n=t.getNodes();if(n.length>0)return e.preventDefault(),sd(n[0])?n[0].selectPrevious():n[0].selectNext(0,0),!0}if(!is(t))return!1;let n=e.shiftKey;return!!sg(t,!1)&&(e.preventDefault(),sm(t,n,!1),!0)},0),e.registerCommand(tK,t=>{if(i9(rF(t.target)))return!1;let n=iN();if(is(n)){if(function(e){var t;let n;if(!e.isCollapsed())return!1;let{anchor:i}=e;if(0!==i.offset)return!1;let r=i.getNode();if(i7(r))return!1;let l=(n=lC(t=r,e=>i4(e)&&!e.isInline()),i4(n)||function(e,...t){let n=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;for(let e of(i.append("code",4),t))i.append("v",e);throw n.search=i.toString(),Error(`Minified Lexical error #4; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(0,t.__key),n);return l.getIndent()>0&&(l.is(r)||r.is(l.getFirstDescendant()))}(n))return t.preventDefault(),e.dispatchCommand(tH,void 0);if(ou&&"ko-KR"===navigator.language)return!1}else if(!ia(n))return!1;return t.preventDefault(),e.dispatchCommand(tS,!0)},0),e.registerCommand(tU,t=>{if(i9(rF(t.target)))return!1;let n=iN();return!(!is(n)&&!ia(n))&&(t.preventDefault(),e.dispatchCommand(tS,!1))},0),e.registerCommand(tR,t=>{let n=iN();if(!is(n))return!1;if(ob(n),null!==t){if((ou||oa||oc)&&oo)return!1;if(t.preventDefault(),t.shiftKey)return e.dispatchCommand(tb,!1)}return e.dispatchCommand(tC,void 0)},0),e.registerCommand(tW,()=>!!is(iN())&&(e.blur(),!0),0),e.registerCommand(tq,t=>{let[,n]=ov(t);if(n.length>0){let i=oi(t.clientX,t.clientY);if(null!==i){let{offset:t,node:r}=i,l=rF(r);if(null!==l){let e=iS();if(n6(l))e.anchor.set(l.getKey(),t,"text"),e.focus.set(l.getKey(),t,"text");else{let t=l.getParentOrThrow().getKey(),n=l.getIndexWithinParent()+1;e.anchor.set(t,n,"element"),e.focus.set(t,n,"element")}rB(e$(e))}e.dispatchCommand(oh,n)}return t.preventDefault(),!0}return!!is(iN())},0),e.registerCommand(tG,e=>{let[t]=ov(e),n=iN();return!(t&&!is(n))},0),e.registerCommand(tX,e=>{let[t]=ov(e),n=iN();if(t&&!is(n))return!1;let i=oi(e.clientX,e.clientY);return null!==i&&i9(rF(i.node))&&e.preventDefault(),!0},0),e.registerCommand(t1,()=>((function(e){let t=rz();if(is(void 0)){let e=(void 0).anchor,t=(void 0).focus,n=e.getNode().getTopLevelElementOrThrow().getParentOrThrow();return e.set(n.getKey(),0,"element"),t.set(n.getKey(),n.getChildrenSize(),"element"),e$(void 0)}rB(e$(t.select(0,t.getChildrenSize())))})(),!0),0),e.registerCommand(tQ,t=>(oe(e,sN(t,ClipboardEvent)?t:null),!0),0),e.registerCommand(t0,t=>((async function(e,t){await oe(t,sN(e,ClipboardEvent)?e:null),t.update(()=>{let e=iN();is(e)?e.removeText():ia(e)&&e.getNodes().forEach(e=>e.remove())})})(t,e),!0),0),e.registerCommand(tw,t=>{let[,n,i]=ov(t);return n.length>0&&!i?(e.dispatchCommand(oh,n),!0):!(lc(t.target)&&rm(t.target))&&null!==iN()&&(t.preventDefault(),e.update(()=>{let n=iN(),i=sN(t,InputEvent)||sN(t,KeyboardEvent)?null:t.clipboardData;null!=i&&null!==n&&s9(i,n,e)},{tag:"paste"}),!0)},0),e.registerCommand(tB,e=>{let t=iN();return is(t)&&ob(t),!1},0),e.registerCommand(tJ,e=>{let t=iN();return is(t)&&ob(t),!1},0)),s4(r))},[r=l]),(0,i.jsxs)(i.Fragment,{children:[e,(0,i.jsx)(oE,{content:t}),(0,i.jsx)(ow,{editor:l,ErrorBoundary:n})]})}function oE({content:e}){let[t]=ei(),n=function(e){let[t,n]=(0,r.useState)(()=>ok(e));return oC(()=>{function t(){n(ok(e))}return t(),sS(e.registerUpdateListener(()=>{t()}),e.registerEditableListener(()=>{t()}))},[e]),t}(t),i=function(e){let[t]=ei(),n=(0,r.useMemo)(()=>e(t),[t,e]),[i,l]=(0,r.useState)(()=>n.initialValueFn()),s=(0,r.useRef)(i);return si(()=>{let{initialValueFn:e,subscribe:t}=n,i=e();return s.current!==i&&(s.current=i,l(i)),t(e=>{s.current=e,l(e)})},[n,e]),i}(sr);return n?"function"==typeof e?e(i):e:null}let oO="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?r.useLayoutEffect:r.useEffect,oM=(0,r.forwardRef)(function({editor:e,ariaActiveDescendant:t,ariaAutoComplete:n,ariaControls:l,ariaDescribedBy:s,ariaErrorMessage:o,ariaExpanded:a,ariaInvalid:u,ariaLabel:d,ariaLabelledBy:c,ariaMultiline:h,ariaOwns:f,ariaRequired:g,autoCapitalize:p,className:m,id:_,role:y="textbox",spellCheck:x=!0,style:v,tabIndex:S,"data-testid":b,...C},N){let[w,k]=(0,r.useState)(e.isEditable()),T=(0,r.useCallback)(t=>{t&&t.ownerDocument&&t.ownerDocument.defaultView?e.setRootElement(t):e.setRootElement(null)},[e]),E=(0,r.useMemo)(()=>(function(...e){return t=>{for(let n of e)"function"==typeof n?n(t):null!=n&&(n.current=t)}})(N,T),[T,N]);return oO(()=>(k(e.isEditable()),e.registerEditableListener(e=>{k(e)})),[e]),(0,i.jsx)("div",{"aria-activedescendant":w?t:void 0,"aria-autocomplete":w?n:"none","aria-controls":w?l:void 0,"aria-describedby":s,...null!=o?{"aria-errormessage":o}:{},"aria-expanded":w&&"combobox"===y?!!a:void 0,...null!=u?{"aria-invalid":u}:{},"aria-label":d,"aria-labelledby":c,"aria-multiline":h,"aria-owns":w?f:void 0,"aria-readonly":!w||void 0,"aria-required":g,autoCapitalize:p,className:m,contentEditable:w,"data-testid":b,id:_,ref:E,role:y,spellCheck:x,style:v,tabIndex:S,...C})});function oD(e){return e.getEditorState().read(s3(e.isComposing()))}let oA=(0,r.forwardRef)(function(e,t){let{placeholder:n,...r}=e,[l]=ei();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(oM,{editor:l,...r,ref:t}),null!=n&&(0,i.jsx)(oP,{editor:l,content:n})]})});function oP({content:e,editor:t}){let n=function(e){let[t,n]=(0,r.useState)(()=>oD(e));return oO(()=>{function t(){n(oD(e))}return t(),sS(e.registerUpdateListener(()=>{t()}),e.registerEditableListener(()=>{t()}))},[e]),t}(t),[l,s]=(0,r.useState)(t.isEditable());if((0,r.useLayoutEffect)(()=>(s(t.isEditable()),t.registerEditableListener(e=>{s(e)})),[t]),!n)return null;let o=null;return"function"==typeof e?o=e(l):null!==e&&(o=e),null===o?null:(0,i.jsx)("div",{"aria-hidden":!0,children:o})}function oj(e){e.undoStack=[],e.redoStack=[],e.current=null}function oF(e,t,n){let i,r,l=(i=Date.now(),r=0,(t,l,s,o,a,u)=>{let d=Date.now();if(u.has(nI))return r=0,i=d,2;let c=function(e,t,n,i,r){if(null===e||0===n.size&&0===i.size&&!r)return 0;let l=t._selection,s=e._selection;if(r)return 1;if(!(is(l)&&is(s)&&s.isCollapsed()&&l.isCollapsed()))return 0;let o=function(e,t,n){let i=e._nodeMap,r=[];for(let e of t){let t=i.get(e);void 0!==t&&r.push(t)}for(let[e,t]of n){if(!t)continue;let n=i.get(e);void 0===n||i7(n)||r.push(n)}return r}(t,n,i);if(0===o.length)return 0;if(o.length>1){let n=t._nodeMap,i=n.get(l.anchor.key),r=n.get(s.anchor.key);return i&&r&&!e._nodeMap.has(i.__key)&&n6(i)&&1===i.__text.length&&1===l.anchor.offset?2:0}let a=o[0],u=e._nodeMap.get(a.__key);if(!n6(u)||!n6(a)||u.__mode!==a.__mode)return 0;let d=u.__text,c=a.__text;if(d===c)return 0;let h=l.anchor,f=s.anchor;if(h.key!==f.key||"text"!==h.type)return 0;let g=h.offset,p=f.offset,m=c.length-d.length;return 1===m&&p===g-1?2:-1===m&&p===g+1?3:4*(-1===m&&p===g)}(t,l,o,a,e.isComposing()),h=(()=>{var h;let f,g,p,m,_=null===s||s.editor===e,y=u.has("history-push");if(!y&&_&&u.has(nz))return 0;if(null===t)return 1;let x=l._selection;if(!(o.size>0||a.size>0))return 2*(null===x);let v="number"==typeof n?n:n.peek();return!1===y&&0!==c&&c===r&&d<i+v&&_?0:1!==o.size||(h=Array.from(o)[0],f=t._nodeMap.get(h),g=l._nodeMap.get(h),p=t._selection,m=l._selection,is(p)&&is(m)&&"element"===p.anchor.type&&"element"===p.focus.type&&"text"===m.anchor.type&&"text"===m.focus.type||!n6(f)||!n6(g)||f.__parent!==g.__parent||JSON.stringify(t.read(()=>f.exportJSON()))!==JSON.stringify(l.read(()=>g.exportJSON())))?1:0})();return i=d,r=c,h});return sS(e.registerCommand(tM,()=>((function(e,t){let n=t.redoStack,i=t.undoStack;if(0!==i.length){let r=t.current,l=i.pop();null!==r&&(n.push(r),e.dispatchCommand(t4,!0)),0===i.length&&e.dispatchCommand(t6,!1),t.current=l||null,l&&l.editor.setEditorState(l.editorState,{tag:nI})}})(e,t),!0),0),e.registerCommand(tD,()=>((function(e,t){let n=t.redoStack,i=t.undoStack;if(0!==n.length){let r=t.current;null!==r&&(i.push(r),e.dispatchCommand(t6,!0));let l=n.pop();0===n.length&&e.dispatchCommand(t4,!1),t.current=l||null,l&&l.editor.setEditorState(l.editorState,{tag:nI})}})(e,t),!0),0),e.registerCommand(t2,()=>(oj(t),!1),0),e.registerCommand(t3,()=>(oj(t),e.dispatchCommand(t4,!1),e.dispatchCommand(t6,!1),!0),0),e.registerUpdateListener(({editorState:n,prevEditorState:i,dirtyLeaves:r,dirtyElements:s,tags:o})=>{let a=t.current,u=t.redoStack,d=t.undoStack,c=null===a?null:a.editorState;if(null!==a&&n===c)return;let h=l(i,n,a,r,s,o);if(1===h)0!==u.length&&(t.redoStack=[],e.dispatchCommand(t4,!1)),null!==a&&(d.push({...a}),e.dispatchCommand(t6,!0));else if(2===h)return;t.current={editor:e,editorState:n}}))}function oL(){return{current:null,redoStack:[],undoStack:[]}}function oI({delay:e,externalHistoryState:t}){let[n]=ei();return function(e,t,n=1e3){let i=(0,r.useMemo)(()=>t||oL(),[t]);(0,r.useEffect)(()=>oF(e,i,n),[n,e,i])}(n,t,e),null}let oz=new Set(["http:","https:","mailto:","sms:","tel:"]);class oR extends i3{__url;__target;__rel;__title;static getType(){return"link"}static clone(e){return new oR(e.__url,{rel:e.__rel,target:e.__target,title:e.__title},e.__key)}constructor(e="",t={},n){super(n);const{target:i=null,rel:r=null,title:l=null}=t;this.__url=e,this.__target=i,this.__rel=r,this.__title=l}createDOM(e){let t=document.createElement("a");return this.updateLinkDOM(null,t,e),sb(t,e.theme.link),t}updateLinkDOM(e,t,n){if(lu(t))for(let n of(e&&e.__url===this.__url||(t.href=this.sanitizeUrl(this.__url)),["target","rel","title"])){let i=`__${n}`,r=this[i];e&&e[i]===r||(r?t[n]=r:t.removeAttribute(n))}}updateDOM(e,t,n){return this.updateLinkDOM(e,t,n),!1}static importDOM(){return{a:e=>({conversion:oB,priority:1})}}static importJSON(e){return oK().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setURL(e.url).setRel(e.rel||null).setTarget(e.target||null).setTitle(e.title||null)}sanitizeUrl(e){e=oG(e);try{let t=new URL(oG(e));if(!oz.has(t.protocol))return"about:blank"}catch(e){}return e}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()}}getURL(){return this.getLatest().__url}setURL(e){let t=this.getWritable();return t.__url=e,t}getTarget(){return this.getLatest().__target}setTarget(e){let t=this.getWritable();return t.__target=e,t}getRel(){return this.getLatest().__rel}setRel(e){let t=this.getWritable();return t.__rel=e,t}getTitle(){return this.getLatest().__title}setTitle(e){let t=this.getWritable();return t.__title=e,t}insertNewAfter(e,t=!0){let n=oK(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(n,t),n}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(e,t,n){if(!is(t))return!1;let i=t.anchor.getNode(),r=t.focus.getNode();return this.isParentOf(i)&&this.isParentOf(r)&&t.getTextContent().length>0}isEmailURI(){return this.__url.startsWith("mailto:")}isWebSiteURI(){return this.__url.startsWith("https://")||this.__url.startsWith("http://")}}function oB(e){let t=null;if(lu(e)){let n=e.textContent;(null!==n&&""!==n||e.children.length>0)&&(t=oK(e.getAttribute("href")||"",{rel:e.getAttribute("rel"),target:e.getAttribute("target"),title:e.getAttribute("title")}))}return{node:t}}function oK(e="",t){return lr(new oR(e,t))}function oW(e){return e instanceof oR}class oU extends oR{__isUnlinked;constructor(e="",t={},n){super(e,t,n),this.__isUnlinked=void 0!==t.isUnlinked&&null!==t.isUnlinked&&t.isUnlinked}static getType(){return"autolink"}static clone(e){return new oU(e.__url,{isUnlinked:e.__isUnlinked,rel:e.__rel,target:e.__target,title:e.__title},e.__key)}getIsUnlinked(){return this.__isUnlinked}setIsUnlinked(e){let t=this.getWritable();return t.__isUnlinked=e,t}createDOM(e){return this.__isUnlinked?document.createElement("span"):super.createDOM(e)}updateDOM(e,t,n){return super.updateDOM(e,t,n)||e.__isUnlinked!==this.__isUnlinked}static importJSON(e){return oJ().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setIsUnlinked(e.isUnlinked||!1)}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),isUnlinked:this.__isUnlinked}}insertNewAfter(e,t=!0){let n=this.getParentOrThrow().insertNewAfter(e,t);if(i4(n)){let e=oJ(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,target:this.__target,title:this.__title});return n.append(e),e}return null}}function oJ(e="",t){return lr(new oU(e,t))}function o$(e){return e instanceof oU}let oV=tf("TOGGLE_LINK_COMMAND");function oH(e,t){if("element"===e.type){let n=e.getNode();return i4(n)||function(e,...t){let n=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;for(let e of(i.append("code",252),t))i.append("v",e);throw n.search=i.toString(),Error(`Minified Lexical error #252; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(0),n.getChildren()[e.offset+t]||null}return null}function oq(e,t={}){let n;if(e&&"object"==typeof e){let{url:i,...r}=e;n=i,t={...r,...t}}else n=e;let{target:i,title:r}=t,l=void 0===t.rel?"noreferrer":t.rel,s=iN();if(null===s||!is(s)&&!ia(s))return;if(ia(s)){let e=s.getNodes();if(0===e.length)return;return void e.forEach(e=>{if(null===n){let t=lC(e,e=>!o$(e)&&oW(e));t&&(t.insertBefore(e),0===t.getChildren().length&&t.remove())}else{let t=lC(e,e=>!o$(e)&&oW(e));if(t)t.setURL(n),void 0!==i&&t.setTarget(i),void 0!==l&&t.setRel(l);else{let t=oK(n,{rel:l,target:i});e.insertBefore(t),t.append(e)}}})}let o=s.extract();if(null===n){let e=new Set;return void o.forEach(t=>{let n=t.getParent();if(oW(n)&&!o$(n)){let t=n.getKey();if(e.has(t))return;!function(e,t){let n=new Set(t.filter(t=>e.isParentOf(t)).map(e=>e.getKey())),i=e.getChildren(),r=i.filter(e=>n.has(e.getKey()));if(r.length===i.length)return i.forEach(t=>e.insertBefore(t)),e.remove();let l=i.findIndex(e=>n.has(e.getKey())),s=i.findLastIndex(e=>n.has(e.getKey())),o=s===i.length-1;if(0===l)r.forEach(t=>e.insertBefore(t));else if(o)for(let t=r.length-1;t>=0;t--)e.insertAfter(r[t]);else{for(let t=r.length-1;t>=0;t--)e.insertAfter(r[t]);let t=i.slice(s+1);if(t.length>0){let n=oK(e.getURL(),{rel:e.getRel(),target:e.getTarget(),title:e.getTitle()});r[r.length-1].insertAfter(n),t.forEach(e=>n.append(e))}}}(n,o),e.add(t)}})}let a=new Set,u=e=>{a.has(e.getKey())||(a.add(e.getKey()),e.setURL(n),void 0!==i&&e.setTarget(i),void 0!==l&&e.setRel(l),void 0!==r&&e.setTitle(r))};if(1===o.length){let e=lC(o[0],oW);if(null!==e)return u(e)}!function(e){let t=iN();if(!is(t))return e();let n=e$(t),i=n.isBackward(),r=oH(n.anchor,i?-1:0),l=oH(n.focus,i?0:-1);if(e(),r||l){let e=iN();if(is(e)){let t=e.clone();if(r){let e=r.getParent();e&&t.anchor.set(e.getKey(),r.getIndexWithinParent()+ +!!i,"element")}if(l){let e=l.getParent();e&&t.focus.set(e.getKey(),l.getIndexWithinParent()+ +!i,"element")}rB(e$(t))}}}(()=>{let e=null;for(let t of o){if(!t.isAttached())continue;let s=lC(t,oW);if(s){u(s);continue}if(i4(t)){if(!t.isInline())continue;if(oW(t)){if(!(o$(t)||null!==e&&e.getParentOrThrow().isParentOf(t))){u(t),e=t;continue}for(let e of t.getChildren())t.insertBefore(e);t.remove();continue}}let o=t.getPreviousSibling();oW(o)&&o.is(e)?o.append(t):(e=oK(n,{rel:l,target:i,title:r}),t.insertAfter(e),e.append(t))}})}let oY=/^\+?[0-9\s()-]{5,}$/;function oG(e){return e.match(/^[a-z][a-z0-9+.-]*:/i)||e.match(/^[/#.]/)?e:e.includes("@")?`mailto:${e}`:oY.test(e)?`tel:${e}`:`https://${e}`}function oX(e,t){return sS(sW(()=>e.registerCommand(oV,e=>{let n=t.validateUrl.peek(),i=t.attributes.peek();if(null===e)return oq(null),!0;if("string"==typeof e)return!(void 0!==n&&!n(e))&&(oq(e,i),!0);{let{url:t,target:n,rel:r,title:l}=e;return oq(t,{...i,rel:r,target:n,title:l}),!0}},1)),sW(()=>{let n=t.validateUrl.value;if(!n)return;let i=t.attributes.value;return e.registerCommand(tw,t=>{let r=iN();if(!is(r)||r.isCollapsed()||!sN(t,ClipboardEvent)||null===t.clipboardData)return!1;let l=t.clipboardData.getData("text");return!!n(l)&&!r.getNodes().some(e=>i4(e))&&(e.dispatchCommand(oV,{...i,url:l}),t.preventDefault(),!0)},1)}))}function oZ({validateUrl:e,attributes:t}){let[n]=ei();return(0,r.useEffect)(()=>{if(!n.hasNodes([oR]))throw Error("LinkPlugin: LinkNode not registered on editor")}),(0,r.useEffect)(()=>oX(n,sU({attributes:t,validateUrl:e})),[n,e,t]),null}function oQ(e,...t){let n=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;for(let n of(i.append("code",e),t))i.append("v",n);throw n.search=i.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function o0(e){let t=1,n=e.getParent();for(;null!=n;){if(al(n)){let e=n.getParent();if(ah(e)){t++,n=e.getParent();continue}oQ(40)}break}return t}function o1(e){let t=e.getParent();ah(t)||oQ(40);let n=t;for(;null!==n;)ah(n=n.getParent())&&(t=n);return t}function o2(e){return al(e)&&ah(e.getFirstChild())}function o3(e){return ar().append(e)}function o4(e,t){return al(e)&&(0===t.length||1===t.length&&e.is(t[0])&&0===e.getChildrenSize())}function o6(e){let t=iN();if(null!==t){let n=t.getNodes();if(is(t)){let i=t.getStartEndPoints();null===i&&oQ(143);let[r]=i,l=r.getNode(),s=l.getParent();if(li(l)){let e=l.getFirstChild();if(e)n=e.selectStart().getNodes();else{let e=rs();l.append(e),n=e.select().getNodes()}}else if(o4(l,n)){let t=ac(e);if(li(s)){l.replace(t);let e=ar();i4(l)&&(e.setFormat(l.getFormatType()),e.setIndent(l.getIndent())),t.append(e)}else if(al(l)){let e=l.getParentOrThrow();o5(t,e.getChildren()),e.replace(t)}return}}let i=new Set;for(let t=0;t<n.length;t++){let r=n[t];if(i4(r)&&r.isEmpty()&&!al(r)&&!i.has(r.getKey())){o9(r,e);continue}let l=rT(r)?r.getParent():al(r)&&r.isEmpty()?r:null;for(;null!=l;){let t=l.getKey();if(ah(l)){if(!i.has(t)){let n=ac(e);o5(n,l.getChildren()),l.replace(n),i.add(t)}break}{let n=l.getParent();if(li(n)&&!i.has(t)){i.add(t),o9(l,e);break}l=n}}}}}function o5(e,t){e.splice(e.getChildrenSize(),0,t)}function o9(e,t){let n;if(ah(e))return e;let i=e.getPreviousSibling(),r=e.getNextSibling(),l=ar();if(o5(l,e.getChildren()),ah(i)&&t===i.getListType())i.append(l),ah(r)&&t===r.getListType()&&(o5(i,r.getChildren()),r.remove()),n=i;else if(ah(r)&&t===r.getListType())r.getFirstChildOrThrow().insertBefore(l),n=r;else{let i=ac(t);i.append(l),e.replace(i),n=i}return l.setFormat(e.getFormatType()),l.setIndent(e.getIndent()),e.remove(),n}function o8(e,t){let n=e.getLastChild(),i=t.getFirstChild();n&&i&&o2(n)&&o2(i)&&(o8(n.getFirstChild(),i.getFirstChild()),i.remove());let r=t.getChildren();r.length>0&&e.append(...r),t.remove()}function o7(e){let t="check"!==e.getListType(),n=e.getStart();for(let i of e.getChildren())al(i)&&(i.getValue()!==n&&i.setValue(n),t&&null!=i.getLatest().__checked&&i.setChecked(void 0),ah(i.getFirstChild())||n++)}function ae(...e){let t=[];for(let n of e)if(n&&"string"==typeof n)for(let[e]of n.matchAll(/\S+/g))t.push(e);return t}class at extends i3{__value;__checked;$config(){return this.config("listitem",{$transform:e=>{if(null==e.__checked)return;let t=e.getParent();ah(t)&&"check"!==t.getListType()&&null!=e.getChecked()&&e.setChecked(void 0)},extends:i3,importDOM:{li:()=>({conversion:an,priority:0})}})}constructor(e=1,t,n){super(n),this.__value=void 0===e?1:e,this.__checked=t}afterCloneFrom(e){super.afterCloneFrom(e),this.__value=e.__value,this.__checked=e.__checked}createDOM(e){let t=document.createElement("li");return this.updateListItemDOM(null,t,e),t}updateListItemDOM(e,t,n){let i;!ah(i=this.getParent())||"check"!==i.getListType()||ah(this.getFirstChild())?(t.removeAttribute("role"),t.removeAttribute("tabIndex"),t.removeAttribute("aria-checked")):(t.setAttribute("role","checkbox"),t.setAttribute("tabIndex","-1"),e&&this.__checked===e.__checked||t.setAttribute("aria-checked",this.getChecked()?"true":"false")),t.value=this.__value,function(e,t,n){let i,r=[],l=[],s=t.list,o=s?s.listitem:void 0;if(s&&s.nested&&(i=s.nested.listitem),void 0!==o&&r.push(...ae(o)),s){let e=n.getParent(),t=ah(e)&&"check"===e.getListType(),i=n.getChecked();t&&!i||l.push(s.listitemUnchecked),t&&i||l.push(s.listitemChecked),t&&r.push(i?s.listitemChecked:s.listitemUnchecked)}if(void 0!==i){let e=ae(i);n.getChildren().some(e=>ah(e))?r.push(...e):l.push(...e)}l.length>0&&sC(e,...l),r.length>0&&sb(e,...r)}(t,n.theme,this);let r=e?e.__style:"",l=this.__style;r!==l&&(""===l?t.removeAttribute("style"):t.style.cssText=l),function(e,t,n){let i=so(t.__textStyle);for(let t in i)e.style.setProperty(`--listitem-marker-${t}`,i[t]);if(n)for(let t in so(n.__textStyle))t in i||e.style.removeProperty(`--listitem-marker-${t}`)}(t,this,e)}updateDOM(e,t,n){return this.updateListItemDOM(e,t,n),!1}updateFromJSON(e){return super.updateFromJSON(e).setValue(e.value).setChecked(e.checked)}exportDOM(e){let t=this.createDOM(e._config),n=this.getFormatType();n&&(t.style.textAlign=n);let i=this.getDirection();return i&&(t.dir=i),{element:t}}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),value:this.getValue()}}append(...e){for(let t=0;t<e.length;t++){let n=e[t];if(i4(n)&&this.canMergeWith(n)){let e=n.getChildren();this.append(...e),n.remove()}else super.append(n)}return this}replace(e,t){if(al(e))return super.replace(e);this.setIndent(0);let n=this.getParentOrThrow();if(!ah(n))return e;if(n.__first===this.getKey())n.insertBefore(e);else if(n.__last===this.getKey())n.insertAfter(e);else{let t=ac(n.getListType()),i=this.getNextSibling();for(;i;){let e=i;i=i.getNextSibling(),t.append(e)}n.insertAfter(e),e.insertAfter(t)}return t&&(i4(e)||oQ(139),this.getChildren().forEach(t=>{e.append(t)})),this.remove(),0===n.getChildrenSize()&&n.remove(),e}insertAfter(e,t=!0){let n=this.getParentOrThrow();if(ah(n)||oQ(39),al(e))return super.insertAfter(e,t);let i=this.getNextSiblings();if(n.insertAfter(e,t),0!==i.length){let r=ac(n.getListType());i.forEach(e=>r.append(e)),e.insertAfter(r,t)}return e}remove(e){let t=this.getPreviousSibling(),n=this.getNextSibling();super.remove(e),t&&n&&o2(t)&&o2(n)&&(o8(t.getFirstChild(),n.getFirstChild()),n.remove())}insertNewAfter(e,t=!0){let n=ar().updateFromJSON(this.exportJSON()).setChecked(!this.getChecked()&&void 0);return this.insertAfter(n,t),n}collapseAtStart(e){let t=rs();this.getChildren().forEach(e=>t.append(e));let n=this.getParentOrThrow(),i=n.getParentOrThrow(),r=al(i);if(1===n.getChildrenSize())if(r)n.remove(),i.select();else{n.insertBefore(t),n.remove();let i=e.anchor,r=e.focus,l=t.getKey();"element"===i.type&&i.getNode().is(this)&&i.set(l,i.offset,"element"),"element"===r.type&&r.getNode().is(this)&&r.set(l,r.offset,"element")}else n.insertBefore(t),this.remove();return!0}getValue(){return this.getLatest().__value}setValue(e){let t=this.getWritable();return t.__value=e,t}getChecked(){let e,t=this.getLatest(),n=this.getParent();return ah(n)&&(e=n.getListType()),"check"===e?!!t.__checked:void 0}setChecked(e){let t=this.getWritable();return t.__checked=e,t}toggleChecked(){let e=this.getWritable();return e.setChecked(!e.__checked)}getIndent(){let e=this.getParent();if(null===e||!this.isAttached())return this.getLatest().__indent;let t=e.getParentOrThrow(),n=0;for(;al(t);)t=t.getParentOrThrow().getParentOrThrow(),n++;return n}setIndent(e){"number"!=typeof e&&oQ(117),(e=Math.floor(e))>=0||oQ(199);let t=this.getIndent();for(;t!==e;)t<e?(function(e){let t=new Set;if(o2(e)||t.has(e.getKey()))return;let n=e.getParent(),i=e.getNextSibling(),r=e.getPreviousSibling();if(o2(i)&&o2(r)){let n=r.getFirstChild();if(ah(n)){n.append(e);let r=i.getFirstChild();ah(r)&&(o5(n,r.getChildren()),i.remove(),t.add(i.getKey()))}}else if(o2(i)){let t=i.getFirstChild();if(ah(t)){let n=t.getFirstChild();null!==n&&n.insertBefore(e)}}else if(o2(r)){let t=r.getFirstChild();ah(t)&&t.append(e)}else if(ah(n)){let t=ar().setTextFormat(e.getTextFormat()).setTextStyle(e.getTextStyle()),l=ac(n.getListType()).setTextFormat(n.getTextFormat()).setTextStyle(n.getTextStyle());t.append(l),l.append(e),r?r.insertAfter(t):i?i.insertBefore(t):n.append(t)}}(this),t++):(function(e){if(o2(e))return;let t=e.getParent(),n=t?t.getParent():void 0;if(ah(n?n.getParent():void 0)&&al(n)&&ah(t)){let i=t?t.getFirstChild():void 0,r=t?t.getLastChild():void 0;if(e.is(i))n.insertBefore(e),t.isEmpty()&&n.remove();else if(e.is(r))n.insertAfter(e),t.isEmpty()&&n.remove();else{let i=t.getListType(),r=ar(),l=ac(i);r.append(l),e.getPreviousSiblings().forEach(e=>l.append(e));let s=ar(),o=ac(i);s.append(o),o5(o,e.getNextSiblings()),n.insertBefore(r),n.insertAfter(s),n.replace(e)}}}(this),t--);return this}canInsertAfter(e){return al(e)}canReplaceWith(e){return al(e)}canMergeWith(e){return al(e)||ro(e)}extractWithChild(e,t){if(!is(t))return!1;let n=t.anchor.getNode(),i=t.focus.getNode();return this.isParentOf(n)&&this.isParentOf(i)&&this.getTextContent().length===t.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return ac("bullet")}canMergeWhenEmpty(){return!0}}function an(e){if(e.classList.contains("task-list-item")){for(let t of e.children)if("INPUT"===t.tagName)return ai(t)}if(e.classList.contains("joplin-checkbox")){for(let t of e.children)if(t.classList.contains("checkbox-wrapper")&&t.children.length>0&&"INPUT"===t.children[0].tagName)return ai(t.children[0])}let t=e.getAttribute("aria-checked");return{node:ar("true"===t||"false"!==t&&void 0)}}function ai(e){return"checkbox"!==e.getAttribute("type")?{node:null}:{node:ar(e.hasAttribute("checked"))}}function ar(e){return lr(new at(void 0,e))}function al(e){return e instanceof at}class as extends i3{__tag;__start;__listType;$config(){return this.config("list",{$transform:e=>{let t;ah(t=e.getNextSibling())&&e.getListType()===t.getListType()&&o8(e,t),o7(e)},extends:i3,importDOM:{ol:()=>({conversion:au,priority:0}),ul:()=>({conversion:au,priority:0})}})}constructor(e="number",t=1,n){super(n);const i=ad[e]||e;this.__listType=i,this.__tag="number"===i?"ol":"ul",this.__start=t}afterCloneFrom(e){super.afterCloneFrom(e),this.__listType=e.__listType,this.__tag=e.__tag,this.__start=e.__start}getTag(){return this.getLatest().__tag}setListType(e){let t=this.getWritable();return t.__listType=e,t.__tag="number"===e?"ol":"ul",t}getListType(){return this.getLatest().__listType}getStart(){return this.getLatest().__start}setStart(e){let t=this.getWritable();return t.__start=e,t}createDOM(e,t){let n=this.__tag,i=document.createElement(n);return 1!==this.__start&&i.setAttribute("start",String(this.__start)),i.__lexicalListType=this.__listType,ao(i,e.theme,this),i}updateDOM(e,t,n){return e.__tag!==this.__tag||e.__listType!==this.__listType||(ao(t,n.theme,this),!1)}updateFromJSON(e){return super.updateFromJSON(e).setListType(e.listType).setStart(e.start)}exportDOM(e){let t=this.createDOM(e._config,e);return ld(t)&&(1!==this.__start&&t.setAttribute("start",String(this.__start)),"check"===this.__listType&&t.setAttribute("__lexicalListType","check")),{element:t}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag()}}canBeEmpty(){return!1}canIndent(){return!1}splice(e,t,n){let i=n;for(let e=0;e<n.length;e++){let t=n[e];al(t)||(i===n&&(i=[...n]),i[e]=ar().append(!i4(t)||ah(t)||t.isInline()?t:n4(t.getTextContent())))}return super.splice(e,t,i)}extractWithChild(e){return al(e)}}function ao(e,t,n){let i=[],r=[],l=t.list;if(void 0!==l){let e,t=l[`${n.__tag}Depth`]||[],s=o0(n)-1,o=s%t.length,a=t[o],u=l[n.__tag],d=l.nested,c=l.checklist;if(void 0!==d&&d.list&&(e=d.list),void 0!==u&&i.push(u),void 0!==c&&"check"===n.__listType&&i.push(c),void 0!==a){i.push(...ae(a));for(let e=0;e<t.length;e++)e!==o&&r.push(n.__tag+e)}if(void 0!==e){let t=ae(e);s>1?i.push(...t):r.push(...t)}}r.length>0&&sC(e,...r),i.length>0&&sb(e,...i)}function aa(e){let t=[];for(let n=0;n<e.length;n++){let i=e[n];if(al(i)){t.push(i);let e=i.getChildren();e.length>1&&e.forEach(e=>{ah(e)&&t.push(o3(e))})}else t.push(o3(i))}return t}function au(e){let t=e.nodeName.toLowerCase(),n=null;return"ol"===t?n=ac("number",e.start):"ul"===t&&(n=!function(e){if("check"===e.getAttribute("__lexicallisttype")||e.classList.contains("contains-task-list")||"1"===e.getAttribute("data-is-checklist"))return!0;for(let t of e.childNodes)if(ld(t)&&t.hasAttribute("aria-checked"))return!0;return!1}(e)?ac("bullet"):ac("check")),{after:aa,node:n}}let ad={ol:"number",ul:"bullet"};function ac(e="number",t=1){return lr(new as(e,t))}function ah(e){return e instanceof as}tf("INSERT_CHECK_LIST_COMMAND");let af=tf("UPDATE_LIST_START_COMMAND"),ag=tf("INSERT_UNORDERED_LIST_COMMAND"),ap=tf("INSERT_ORDERED_LIST_COMMAND"),am=tf("REMOVE_LIST_COMMAND");function a_({hasStrictIndent:e=!1}){let[t]=ei();return(0,r.useEffect)(()=>{if(!t.hasNodes([as,at]))throw Error("ListPlugin: ListNode and/or ListItemNode not registered on editor")},[t]),(0,r.useEffect)(()=>{if(e){var n;let e;return n=t,e=e=>{let t=e.getParent();if(ah(e.getFirstChild())||!ah(t))return;let n=lC(e,e=>al(e)&&ah(e.getParent())&&al(e.getPreviousSibling()));if(null===n&&e.getIndent()>0)e.setIndent(0);else if(al(n)){let i=n.getPreviousSibling();if(al(i)){let n=(function(e){let t=e,n=t.getFirstChild();for(;ah(n);){let e=n.getLastChild();if(!al(e))break;n=(t=e).getFirstChild()}return t})(i).getParent();if(ah(n)){let i=o0(n);i+1<o0(t)&&e.setIndent(i)}}}},n.registerNodeTransform(as,t=>{let n=[t];for(;n.length>0;){let t=n.shift();if(ah(t)){for(let i of t.getChildren())if(al(i)){e(i);let t=i.getFirstChild();ah(t)&&n.push(t)}}}})}},[t,e]),(0,r.useEffect)(()=>{var e;return sS((e=t).registerCommand(ap,()=>(o6("number"),!0),1),e.registerCommand(af,e=>{let{listNodeKey:t,newStart:n}=e,i=rA(t);return!!ah(i)&&("number"===i.getListType()&&(i.setStart(n),o7(i)),!0)},1),e.registerCommand(ag,()=>(o6("bullet"),!0),1),e.registerCommand(am,()=>((function(){let e=iN();if(is(e)){let t=new Set,n=e.getNodes(),i=e.anchor.getNode();if(o4(i,n))t.add(o1(i));else for(let e=0;e<n.length;e++){let i=n[e];if(rT(i)){let e=function(e,t){let n=e;for(;null!=n;){if(n instanceof t)return n;n=n.getParent()}return null}(i,at);null!=e&&t.add(o1(e))}}for(let n of t){let t=n;for(let i of function e(t){let n=[],i=t.getChildren().filter(al);for(let t=0;t<i.length;t++){let r=i[t],l=r.getFirstChild();ah(l)?n=n.concat(e(l)):n.push(r)}return n}(n)){let n=rs().setTextStyle(e.style).setTextFormat(e.format);o5(n,i.getChildren()),t.insertAfter(n),t=n,i.__key===e.anchor.key&&lZ(e.anchor,l4(lB(n,"next"))),i.__key===e.focus.key&&lZ(e.focus,l4(lB(n,"next"))),i.remove()}n.remove()}}})(),!0),1),e.registerCommand(tC,()=>(function(){let e,t=iN();if(!is(t)||!t.isCollapsed())return!1;let n=t.anchor.getNode();if(!al(n)||0!==n.getChildrenSize())return!1;let i=o1(n),r=n.getParent();ah(r)||oQ(40);let l=r.getParent();if(li(l))e=rs(),i.insertAfter(e);else{if(!al(l))return!1;e=ar(),l.insertAfter(e)}e.setTextStyle(t.style).setTextFormat(t.format).select();let s=n.getNextSiblings();if(s.length>0){let t=ac(r.getListType());if(al(e)){let n=ar();n.append(t),e.insertAfter(n)}else e.insertAfter(t);t.append(...s)}return function(e){let t=e;for(;null==t.getNextSibling()&&null==t.getPreviousSibling();){let e=t.getParent();if(null==e||!al(e)&&!ah(e))break;t=e}t.remove()}(n),!0})(),1),e.registerNodeTransform(at,e=>{let t=e.getFirstChild();if(t){if(n6(t)){let n=t.getStyle(),i=t.getFormat();e.getTextStyle()!==n&&e.setTextStyle(n),e.getTextFormat()!==i&&e.setTextFormat(i)}}else{let t=iN();is(t)&&(t.style!==e.getTextStyle()||t.format!==e.getTextFormat())&&t.isCollapsed()&&e.is(t.anchor.getNode())&&e.setTextStyle(t.style).setTextFormat(t.format)}}),e.registerNodeTransform(nG,e=>{let t=e.getParent();if(al(t)&&e.is(t.getFirstChild())){let n=e.getStyle(),i=e.getFormat();n===t.getTextStyle()&&i===t.getTextFormat()||t.setTextStyle(n).setTextFormat(i)}}))},[t]),null}let ay=(0,m.default)("bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]),ax=(0,m.default)("italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]),av=(0,m.default)("underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]),aS=(0,m.default)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]),ab=(0,m.default)("list-ordered",[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]]),aC=(0,m.default)("quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]),aN=(0,m.default)("heading-1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]),aw=(0,m.default)("heading-2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]),ak=(0,m.default)("heading-3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);var aT=e.i(39558),aE=e.i(35346);function aO(){let e,t,n,l,u,d,c,h,f,p,m,_,y,x,v,S,b,C,N,w,k,T,E,O,M,D,A,P,j,F,L,I,z,R,B,K,W,U,J,$,V,H,q,G,X,Z,Q,ee,et,en,er=(0,s.c)(97),[el]=ei(),[es,eo]=r.useState(!1),[ea,eu]=r.useState(!1),[ed,ec]=r.useState(!1);er[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{let e=iN();is(e)&&(eo(e.hasFormat("bold")),eu(e.hasFormat("italic")),ec(e.hasFormat("underline")))},er[0]=e):e=er[0];let eh=e;er[1]!==el?(t=()=>el.registerUpdateListener(e=>{let{editorState:t}=e;t.read(()=>{eh()})}),n=[el,eh],er[1]=el,er[2]=t,er[3]=n):(t=er[2],n=er[3]),r.useEffect(t,n),er[4]!==el?(l=e=>{el.update(()=>{let t=iN();if(is(t)){let n=ox(e);t.insertNodes([n])}})},er[4]=el,er[5]=l):l=er[5];let ef=l;er[6]!==el?(u=()=>{el.update(aD)},er[6]=el,er[7]=u):u=er[7];let eg=u,[ep,em]=r.useState(!1),[e_,ey]=r.useState(""),[ex,ev]=r.useState("");er[8]!==el||er[9]!==ex||er[10]!==e_?(d=()=>{el.update(()=>{let e=iN();if(is(e))if(e.isCollapsed()){let t=oK(e_||"https://",{target:"_blank"});rs(),e.insertNodes([t])}else{let e=e_||"https://";el.dispatchCommand(oV,e)}em(!1),ey(""),ev("")})},er[8]=el,er[9]=ex,er[10]=e_,er[11]=d):d=er[11];let eS=d;er[12]!==el?(c=()=>el.dispatchCommand(tO,"bold"),er[12]=el,er[13]=c):c=er[13];let eb=es?"bg-muted":"";er[14]===Symbol.for("react.memo_cache_sentinel")?(h=(0,i.jsx)(ay,{className:"size-4"}),er[14]=h):h=er[14],er[15]!==c||er[16]!==eb?(f=(0,i.jsx)(g.Button,{variant:"ghost",size:"icon",onClick:c,className:eb,children:h}),er[15]=c,er[16]=eb,er[17]=f):f=er[17],er[18]!==el?(p=()=>el.dispatchCommand(tO,"italic"),er[18]=el,er[19]=p):p=er[19];let eC=ea?"bg-muted":"";er[20]===Symbol.for("react.memo_cache_sentinel")?(m=(0,i.jsx)(ax,{className:"size-4"}),er[20]=m):m=er[20],er[21]!==p||er[22]!==eC?(_=(0,i.jsx)(g.Button,{variant:"ghost",size:"icon",onClick:p,className:eC,children:m}),er[21]=p,er[22]=eC,er[23]=_):_=er[23],er[24]!==el?(y=()=>el.dispatchCommand(tO,"underline"),er[24]=el,er[25]=y):y=er[25];let eN=ed?"bg-muted":"";return er[26]===Symbol.for("react.memo_cache_sentinel")?(x=(0,i.jsx)(av,{className:"size-4"}),er[26]=x):x=er[26],er[27]!==y||er[28]!==eN?(v=(0,i.jsx)(g.Button,{variant:"ghost",size:"icon",onClick:y,className:eN,children:x}),er[27]=y,er[28]=eN,er[29]=v):v=er[29],er[30]===Symbol.for("react.memo_cache_sentinel")?(S=(0,i.jsx)("div",{className:"mx-1 h-6 w-px bg-border"}),er[30]=S):S=er[30],er[31]!==ef?(b=()=>ef("h1"),er[31]=ef,er[32]=b):b=er[32],er[33]===Symbol.for("react.memo_cache_sentinel")?(C=(0,i.jsx)(aN,{className:"size-4"}),er[33]=C):C=er[33],er[34]!==b?(N=(0,i.jsx)(g.Button,{variant:"ghost",size:"icon",onClick:b,title:"Heading 1",children:C}),er[34]=b,er[35]=N):N=er[35],er[36]!==ef?(w=()=>ef("h2"),er[36]=ef,er[37]=w):w=er[37],er[38]===Symbol.for("react.memo_cache_sentinel")?(k=(0,i.jsx)(aw,{className:"size-4"}),er[38]=k):k=er[38],er[39]!==w?(T=(0,i.jsx)(g.Button,{variant:"ghost",size:"icon",onClick:w,title:"Heading 2",children:k}),er[39]=w,er[40]=T):T=er[40],er[41]!==ef?(E=()=>ef("h3"),er[41]=ef,er[42]=E):E=er[42],er[43]===Symbol.for("react.memo_cache_sentinel")?(O=(0,i.jsx)(ak,{className:"size-4"}),er[43]=O):O=er[43],er[44]!==E?(M=(0,i.jsx)(g.Button,{variant:"ghost",size:"icon",onClick:E,title:"Heading 3",children:O}),er[44]=E,er[45]=M):M=er[45],er[46]===Symbol.for("react.memo_cache_sentinel")?(D=(0,i.jsx)("div",{className:"mx-1 h-6 w-px bg-border"}),er[46]=D):D=er[46],er[47]!==el?(A=()=>el.dispatchCommand(ag,void 0),er[47]=el,er[48]=A):A=er[48],er[49]===Symbol.for("react.memo_cache_sentinel")?(P=(0,i.jsx)(aS,{className:"size-4"}),er[49]=P):P=er[49],er[50]!==A?(j=(0,i.jsx)(g.Button,{variant:"ghost",size:"icon",onClick:A,title:"Bullet List",children:P}),er[50]=A,er[51]=j):j=er[51],er[52]!==el?(F=()=>el.dispatchCommand(ap,void 0),er[52]=el,er[53]=F):F=er[53],er[54]===Symbol.for("react.memo_cache_sentinel")?(L=(0,i.jsx)(ab,{className:"size-4"}),er[54]=L):L=er[54],er[55]!==F?(I=(0,i.jsx)(g.Button,{variant:"ghost",size:"icon",onClick:F,title:"Numbered List",children:L}),er[55]=F,er[56]=I):I=er[56],er[57]!==el?(z=()=>{el.update(aM)},er[57]=el,er[58]=z):z=er[58],er[59]===Symbol.for("react.memo_cache_sentinel")?(R=(0,i.jsx)(aC,{className:"size-4"}),er[59]=R):R=er[59],er[60]!==z?(B=(0,i.jsx)(g.Button,{variant:"ghost",size:"icon",onClick:z,title:"Quote",children:R}),er[60]=z,er[61]=B):B=er[61],er[62]===Symbol.for("react.memo_cache_sentinel")?(K=(0,i.jsx)("div",{className:"mx-1 h-6 w-px bg-border"}),er[62]=K):K=er[62],er[63]===Symbol.for("react.memo_cache_sentinel")?(W=(0,i.jsx)(Y.DialogTrigger,{asChild:!0,children:(0,i.jsx)(g.Button,{variant:"ghost",size:"icon",title:"Insert Link",children:(0,i.jsx)(aT.Link,{className:"size-4"})})}),er[63]=W):W=er[63],er[64]===Symbol.for("react.memo_cache_sentinel")?(U=(0,i.jsx)(Y.DialogHeader,{children:(0,i.jsx)(Y.DialogTitle,{children:"Insert Link"})}),er[64]=U):U=er[64],er[65]===Symbol.for("react.memo_cache_sentinel")?(J=(0,i.jsx)(a.Label,{htmlFor:"link-url",children:"URL"}),er[65]=J):J=er[65],er[66]===Symbol.for("react.memo_cache_sentinel")?($=e=>ey(e.target.value),er[66]=$):$=er[66],er[67]!==e_?(V=(0,i.jsxs)("div",{className:"space-y-2",children:[J,(0,i.jsx)(o.Input,{id:"link-url",type:"url",placeholder:"https://example.com",value:e_,onChange:$})]}),er[67]=e_,er[68]=V):V=er[68],er[69]===Symbol.for("react.memo_cache_sentinel")?(H=(0,i.jsx)(a.Label,{htmlFor:"link-text",children:"Link Text (optional)"}),er[69]=H):H=er[69],er[70]===Symbol.for("react.memo_cache_sentinel")?(q=e=>ev(e.target.value),er[70]=q):q=er[70],er[71]!==ex?(G=(0,i.jsxs)("div",{className:"space-y-2",children:[H,(0,i.jsx)(o.Input,{id:"link-text",placeholder:"Link text",value:ex,onChange:q})]}),er[71]=ex,er[72]=G):G=er[72],er[73]!==eS?(X=(0,i.jsx)(g.Button,{onClick:eS,className:"w-full",children:"Insert Link"}),er[73]=eS,er[74]=X):X=er[74],er[75]!==V||er[76]!==G||er[77]!==X?(Z=(0,i.jsxs)(Y.DialogContent,{children:[U,(0,i.jsxs)("div",{className:"space-y-4 py-4",children:[V,G,X]})]}),er[75]=V,er[76]=G,er[77]=X,er[78]=Z):Z=er[78],er[79]!==ep||er[80]!==Z?(Q=(0,i.jsxs)(Y.Dialog,{open:ep,onOpenChange:em,children:[W,Z]}),er[79]=ep,er[80]=Z,er[81]=Q):Q=er[81],er[82]===Symbol.for("react.memo_cache_sentinel")?(ee=(0,i.jsx)(aE.Minus,{className:"size-4"}),er[82]=ee):ee=er[82],er[83]!==eg?(et=(0,i.jsx)(g.Button,{variant:"ghost",size:"icon",onClick:eg,title:"Divider",children:ee}),er[83]=eg,er[84]=et):et=er[84],er[85]!==_||er[86]!==v||er[87]!==N||er[88]!==T||er[89]!==M||er[90]!==j||er[91]!==I||er[92]!==B||er[93]!==Q||er[94]!==et||er[95]!==f?(en=(0,i.jsxs)("div",{className:"flex items-center gap-1 border-b p-2",children:[f,_,v,S,N,T,M,D,j,I,B,K,Q,et]}),er[85]=_,er[86]=v,er[87]=N,er[88]=T,er[89]=M,er[90]=j,er[91]=I,er[92]=B,er[93]=Q,er[94]=et,er[95]=f,er[96]=en):en=er[96],en}function aM(){let e=iN();if(is(e)){let t=og();e.insertNodes([t])}}function aD(){let e=rz(),t=rs();e.append(t);let n=rs();n.setFormat("center"),e.append(n)}let aA={namespace:"ProsFinEditor",theme:{paragraph:"mb-2",heading:{h1:"text-4xl font-bold mb-4",h2:"text-3xl font-bold mb-3",h3:"text-2xl font-bold mb-2"},quote:"border-l-4 border-gray-300 pl-4 italic my-4",list:{nested:{listitem:"ml-4"},ol:"list-decimal ml-6 my-2",ul:"list-disc ml-6 my-2",listitem:"my-1"},link:"text-blue-600 underline hover:text-blue-800",text:{bold:"font-bold",italic:"italic",underline:"underline"}},nodes:[op,of,as,at,oR],onError:e=>{console.error("Lexical error:",e)}};function aP(e){let t,n,r=(0,s.c)(5),{placeholder:l}=e,o=l||"Start writing...";return r[0]!==o?(t=(0,i.jsx)("div",{className:"absolute top-0 left-0 text-muted-foreground pointer-events-none",children:o}),r[0]=o,r[1]=t):t=r[1],r[2]!==o||r[3]!==t?(n=(0,i.jsx)(oA,{className:"min-h-[600px] outline-none prose prose-lg max-w-none","aria-placeholder":o,placeholder:t}),r[2]=o,r[3]=t,r[4]=n):n=r[4],n}function aj(e){let t,n,i=(0,s.c)(4),{onChange:l}=e,[o]=ei();return i[0]!==o||i[1]!==l?(t=()=>o.registerUpdateListener(e=>{let{editorState:t}=e;t.read(()=>{let e=t.toJSON();l?.(e)})}),n=[o,l],i[0]=o,i[1]=l,i[2]=t,i[3]=n):(t=i[2],n=i[3]),r.useEffect(t,n),null}function aF(e){let t,n,i=(0,s.c)(5),{initialContent:l}=e,[o]=ei(),[a,u]=r.useState(!1);return i[0]!==o||i[1]!==a||i[2]!==l?(t=()=>{if(l&&!a&&o)try{let e=o.parseEditorState(l);o.setEditorState(e),u(!0)}catch(e){console.error("Failed to parse initial content:",e)}},n=[o,l,a],i[0]=o,i[1]=a,i[2]=l,i[3]=t,i[4]=n):(t=i[3],n=i[4]),r.useEffect(t,n),null}function aL(e){let t,n,r,l,o,a,u,d,c,h=(0,s.c)(17),{initialContent:f,onChange:g,placeholder:p,className:m}=e,_=void 0===p?"Start writing...":p,y=`flex flex-col border rounded-lg ${m}`;return h[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(aO,{}),h[0]=t):t=h[0],h[1]!==_?(n=(0,i.jsx)(oT,{contentEditable:(0,i.jsx)(aP,{placeholder:_}),placeholder:null,ErrorBoundary:aI}),h[1]=_,h[2]=n):n=h[2],h[3]===Symbol.for("react.memo_cache_sentinel")?(r=(0,i.jsx)(oI,{}),l=(0,i.jsx)(oZ,{}),o=(0,i.jsx)(a_,{}),h[3]=r,h[4]=l,h[5]=o):(r=h[3],l=h[4],o=h[5]),h[6]!==g?(a=(0,i.jsx)(aj,{onChange:g}),h[6]=g,h[7]=a):a=h[7],h[8]!==f?(u=f&&(0,i.jsx)(aF,{initialContent:f}),h[8]=f,h[9]=u):u=h[9],h[10]!==n||h[11]!==a||h[12]!==u?(d=(0,i.jsxs)("div",{className:"p-4",children:[n,r,l,o,a,u]}),h[10]=n,h[11]=a,h[12]=u,h[13]=d):d=h[13],h[14]!==d||h[15]!==y?(c=(0,i.jsx)(sn,{initialConfig:aA,children:(0,i.jsxs)("div",{className:y,children:[t,d]})}),h[14]=d,h[15]=y,h[16]=c):c=h[16],c}function aI(e){let{children:t}=e;return(0,i.jsx)(i.Fragment,{children:t})}function az(e){let t,n=(0,s.c)(3),{content:r,onChange:l}=e;return n[0]!==r||n[1]!==l?(t=(0,i.jsx)("div",{className:"space-y-4",children:(0,i.jsx)(aL,{initialContent:r,onChange:l,placeholder:"Start writing your post...",className:"min-h-[600px]"})}),n[0]=r,n[1]=l,n[2]=t):t=n[2],t}function aR({params:t}){let{slug:n}=(0,r.use)(t),[l,s]=r.useState(null),[o,a]=r.useState(!0),[u,d]=r.useState(null);r.useEffect(()=>{if("new"===n){a(!1),d({title:"",slug:"",bucket:"insights",excerpt:"",cover:"",tags:[],content:{root:{children:[],direction:"ltr",format:"",indent:0,type:"root",version:1}},status:"draft"});return}(async()=>{try{let{listPosts:t}=await e.A(32194),i=(await t()).find(e=>e.slug===n);if(i){let{getPostById:t}=await e.A(32194),n=await t(i.id);s(n),n&&d({title:n.title,slug:n.slug,bucket:n.bucket,excerpt:n.excerpt,cover:n.cover,tags:n.tags,content:n.content,seoTitle:n.seoTitle,seoDescription:n.seoDescription,canonical:n.canonical,noindex:n.noindex,status:n.status,scheduledFor:n.scheduledFor})}}catch(e){console.error("Failed to load post:",e)}finally{a(!1)}})()},[n]);let c=async e=>{await (0,b.saveDraft)(e,l?.id),l&&s(await (0,b.getPostById)(l.id))},h=async e=>{if(l)await (0,b.publish)(l.id);else{let t=await (0,b.saveDraft)(e);await (0,b.publish)(t.id)}};return o?(0,i.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,i.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})}):u?(0,i.jsx)(et,{post:l||void 0,onSave:c,onPublish:h,formData:u,onFormDataChange:d,children:(0,i.jsx)(az,{content:u.content,onChange:e=>{d({...u,content:e})}})}):(0,i.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,i.jsx)("p",{className:"text-muted-foreground",children:"Post not found"})})}e.s(["default",()=>aR],1810)}]);