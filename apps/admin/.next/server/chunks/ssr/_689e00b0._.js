module.exports=[69708,a=>{"use strict";var b=a.i(49377);a.s(["showToast",0,{success:a=>{b.toast.success(a)},error:a=>{b.toast.error(a)},info:a=>{b.toast.info(a)},promise:(a,c)=>b.toast.promise(a,c)}])},24259,a=>{"use strict";let b=(0,a.i(28761).default)("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);a.s(["Link",()=>b],24259)},24433,a=>{"use strict";var b=a.i(69825);function c(a,c){let n,o,p=c?.additionalDigits??2,q=function(a){let b,c={},g=a.split(d);if(g.length>2)return c;if(/:/.test(g[0])?b=g[0]:(c.date=g[0],b=g[1],e.test(c.date)&&(c.date=a.split(e)[0],b=a.substr(c.date.length,a.length))),b){let a=f.exec(b);a?(c.time=b.replace(a[1],""),c.timezone=a[1]):c.time=b}return c}(a);if(q.date){let a=function(a,b){let c=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+b)+"})|(\\d{2}|[+-]\\d{"+(2+b)+"})$)"),d=a.match(c);if(!d)return{year:NaN,restDateString:""};let e=d[1]?parseInt(d[1]):null,f=d[2]?parseInt(d[2]):null;return{year:null===f?e:100*f,restDateString:a.slice((d[1]||d[2]).length)}}(q.date,p);n=function(a,b){var c,d,e,f,h,i,k,n,o,p;if(null===b)return new Date(NaN);let q=a.match(g);if(!q)return new Date(NaN);let r=!!q[4],s=j(q[1]),t=j(q[2])-1,u=j(q[3]),v=j(q[4]),w=j(q[5])-1;if(r){let a,g;return(c=v,d=w,c>=1&&c<=53&&d>=0&&d<=6)?(e=b,f=v,h=w,(a=new Date(0)).setUTCFullYear(e,0,4),g=a.getUTCDay()||7,a.setUTCDate(a.getUTCDate()+((f-1)*7+h+1-g)),a):new Date(NaN)}{let a=new Date(0);return(i=b,k=t,n=u,k>=0&&k<=11&&n>=1&&n<=(l[k]||(m(i)?29:28))&&(o=b,(p=s)>=1&&p<=(m(o)?366:365)))?(a.setUTCFullYear(b,t,Math.max(s,u)),a):new Date(NaN)}}(a.restDateString,a.year)}if(!n||isNaN(n.getTime()))return new Date(NaN);let r=n.getTime(),s=0;if(q.time&&isNaN(s=function(a){var c,d,e;let f=a.match(h);if(!f)return NaN;let g=k(f[1]),i=k(f[2]),j=k(f[3]);return(c=g,d=i,e=j,24===c?0===d&&0===e:e>=0&&e<60&&d>=0&&d<60&&c>=0&&c<25)?g*b.millisecondsInHour+i*b.millisecondsInMinute+1e3*j:NaN}(q.time)))return new Date(NaN);if(q.timezone){if(isNaN(o=function(a){var c;if("Z"===a)return 0;let d=a.match(i);if(!d)return 0;let e="+"===d[1]?-1:1,f=parseInt(d[2]),g=d[3]&&parseInt(d[3])||0;return(c=g)>=0&&c<=59?e*(f*b.millisecondsInHour+g*b.millisecondsInMinute):NaN}(q.timezone)))return new Date(NaN)}else{let a=new Date(r+s),b=new Date(0);return b.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),b.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),b}return new Date(r+s+o)}let d=/[T ]/,e=/[Z ]/i,f=/([Z+-].*)$/,g=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,h=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,i=/^([+-])(\d{2})(?::?(\d{2}))?$/;function j(a){return a?parseInt(a):1}function k(a){return a&&parseFloat(a.replace(",","."))||0}let l=[31,null,31,30,31,30,31,31,30,31,30,31];function m(a){return a%400==0||a%4==0&&a%100!=0}a.s(["parseISO",()=>c])},33548,a=>{"use strict";let b=(0,a.i(28761).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);a.s(["ArrowRight",()=>b],33548)},9843,a=>{"use strict";let b=(0,a.i(28761).default)("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);a.s(["Tag",()=>b],9843)},62584,a=>{"use strict";let b=(0,a.i(28761).default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);a.s(["Copy",()=>b],62584)},37204,12691,a=>{"use strict";var b=a.i(42093),c=a.i(85455);a.i(56120);var d=a.i(27725),e=a.i(62584),f=a.i(76899),g=a.i(24259),h=a.i(9843);let i=(0,a.i(28761).default)("code",[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]]);var j=a.i(39226),k=a.i(69708);function l({campaign:a,variant:l="buttons",className:m}){let[n,o]=c.useState(null),p=async b=>{let c="",d="";"url"===b?(c=a.generatedUrl,d="URL"):"short"===b?(c=a.shortLabel||`[${a.channelPreset||"Other"}] ${a.utm_campaign}`,d="Short label"):(c=(0,j.extractUTMParams)(a.generatedUrl),d="UTM params"),await navigator.clipboard.writeText(c),o(b),k.showToast.success(`${d} copied`),setTimeout(()=>o(null),2e3)};return"icons"===l?(0,b.jsxs)("div",{className:`flex items-center gap-1 ${m||""}`,children:[(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:a=>{a.stopPropagation(),p("url")},title:"Copy URL",children:"url"===n?(0,b.jsx)(f.Check,{className:"size-3.5"}):(0,b.jsx)(g.Link,{className:"size-3.5"})}),(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:a=>{a.stopPropagation(),p("short")},title:"Copy short label",children:"short"===n?(0,b.jsx)(f.Check,{className:"size-3.5"}):(0,b.jsx)(h.Tag,{className:"size-3.5"})}),(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:a=>{a.stopPropagation(),p("utm")},title:"Copy UTM params",children:"utm"===n?(0,b.jsx)(f.Check,{className:"size-3.5"}):(0,b.jsx)(i,{className:"size-3.5"})})]}):(0,b.jsxs)("div",{className:`flex flex-wrap gap-2 ${m||""}`,children:[(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",onClick:()=>p("url"),children:["url"===n?(0,b.jsx)(f.Check,{className:"mr-2 size-4"}):(0,b.jsx)(e.Copy,{className:"mr-2 size-4"}),"Copy URL"]}),(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",onClick:()=>p("short"),children:["short"===n?(0,b.jsx)(f.Check,{className:"mr-2 size-4"}):(0,b.jsx)(h.Tag,{className:"mr-2 size-4"}),"Copy Short Label"]}),(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",onClick:()=>p("utm"),children:["utm"===n?(0,b.jsx)(f.Check,{className:"mr-2 size-4"}):(0,b.jsx)(i,{className:"mr-2 size-4"}),"Copy UTM Only"]})]})}a.s(["CopyFlows",()=>l],37204);var m=a.i(86945),n=a.i(51367),o=a.i(18416);function p({campaign:a,targetStatus:e,open:f,onOpenChange:g,onStatusChanged:h}){let[i,l]=c.useState(""),[p,q]=c.useState(!1);if(c.useEffect(()=>{f&&l("")},[f]),!a||!e)return null;let r="paused"===e||"archived"===e,s=async()=>{if(r&&!i.trim())return void k.showToast.error("Please provide a note for this status change");q(!0);try{await (0,j.updateCampaignStatus)(a.id,e,i||void 0),h?.(a.id,e),k.showToast.success(`Campaign ${e}`),g(!1)}catch(a){k.showToast.error("Failed to update status")}finally{q(!1)}},t={active:"Resume",paused:"Pause",archived:"Archive"};return(0,b.jsx)(m.Dialog,{open:f,onOpenChange:g,children:(0,b.jsxs)(m.DialogContent,{className:"sm:max-w-[425px]",children:[(0,b.jsxs)(m.DialogHeader,{children:[(0,b.jsxs)(m.DialogTitle,{children:[t[e]," Campaign"]}),(0,b.jsx)(m.DialogDescription,{children:"paused"===e?"Pausing this campaign will stop it from being actively used. You can resume it later.":"archived"===e?"Archiving this campaign will hide it from the default list. You can still access it via filters.":`Resume "${a.name}" to make it active again.`})]}),(0,b.jsx)("div",{className:"py-4",children:(0,b.jsxs)("div",{children:[(0,b.jsxs)(o.Label,{htmlFor:"notes",children:["Notes ",r&&(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsx)(n.Textarea,{id:"notes",value:i,onChange:a=>l(a.target.value),placeholder:"paused"===e?"Why is this campaign being paused?":"archived"===e?"Why is this campaign being archived?":"Add a note (optional)",rows:3,className:"mt-2"}),r&&(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["A note is required when ","paused"===e?"pausing":"archiving"," a campaign."]})]})}),(0,b.jsxs)(m.DialogFooter,{children:[(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>g(!1),disabled:p,children:"Cancel"}),(0,b.jsx)(d.Button,{onClick:s,disabled:p||r&&!i.trim(),variant:"archived"===e?"destructive":"default",children:p?"Updating...":t[e]})]})]})})}a.s(["StatusChangeDialog",()=>p],12691)},25137,a=>{"use strict";var b=a.i(42093),c=a.i(85455),d=a.i(99026);a.i(56120);var e=a.i(83750),f=a.i(39226),g=a.i(64964),h=a.i(24433),i=a.i(92365),j=a.i(37717),k=a.i(27725),l=a.i(33548),m=a.i(62584),n=a.i(28761);let o=(0,n.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),p=(0,n.default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var q=a.i(52557),r=a.i(37204),s=a.i(12691),t=a.i(69708);let u={active:"bg-green-100 text-green-800",paused:"bg-yellow-100 text-yellow-800",archived:"bg-gray-100 text-gray-800"},v={created:"ðŸ†•",edited:"âœï¸",status_changed:"ðŸ”„",copied:"ðŸ“‹",duplicated:"ðŸ“‘"};function w({campaign:a,onCampaignUpdated:e}){let n=(0,d.useRouter)(),[w,x]=c.useState(!1),[y,z]=c.useState(null),A=async()=>{try{let b=await (0,f.duplicateCampaign)(a.id);t.showToast.success("Campaign duplicated"),n.push(`/campaigns/${b.id}`)}catch(a){t.showToast.error("Failed to duplicate campaign")}},B=b=>{"paused"===b||"archived"===b?(z(b),x(!0)):(0,f.updateCampaignStatus)(a.id,b).then(()=>{t.showToast.success(`Campaign ${b}`),e?.({...a,status:b})})},C=[{label:"Source",value:a.utm_source,key:"utm_source"},{label:"Medium",value:a.utm_medium,key:"utm_medium"},{label:"Campaign",value:a.utm_campaign,key:"utm_campaign"},{label:"Content",value:a.utm_content,key:"utm_content"},{label:"Term",value:a.utm_term,key:"utm_term"}];return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:a.name}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,b.jsx)(j.Badge,{className:u[a.status],children:a.status}),a.channelPreset&&(0,b.jsx)(j.Badge,{variant:"outline",children:a.channelPreset}),a.tags?.map(a=>(0,b.jsx)(j.Badge,{variant:"secondary",className:"text-xs",children:a},a))]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(r.CopyFlows,{campaign:a,variant:"icons"}),(0,b.jsxs)(k.Button,{variant:"outline",size:"sm",onClick:A,children:[(0,b.jsx)(m.Copy,{className:"mr-2 size-4"}),"Duplicate"]}),(0,b.jsxs)(k.Button,{variant:"outline",size:"sm",onClick:()=>n.push("/campaigns"),children:[(0,b.jsx)(o,{className:"mr-2 size-4"}),"Edit"]})]})]}),"archived"!==a.status&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:["active"===a.status&&(0,b.jsx)(k.Button,{variant:"outline",size:"sm",onClick:()=>B("paused"),children:"Pause Campaign"}),"paused"===a.status&&(0,b.jsx)(k.Button,{variant:"outline",size:"sm",onClick:()=>B("active"),children:"Resume Campaign"}),(0,b.jsx)(k.Button,{variant:"outline",size:"sm",onClick:()=>B("archived"),children:"Archive"})]}),(0,b.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,b.jsx)(i.AdminSectionCard,{title:"UTM Parameters",children:(0,b.jsxs)("div",{className:"space-y-3",children:[C.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:a.label}),(0,b.jsx)("span",{className:"text-sm font-medium font-mono",children:a.value||(0,b.jsx)("span",{className:"text-muted-foreground",children:"â€”"})})]},a.key)),(0,b.jsxs)("div",{className:"border-t pt-3 mt-3",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Destination URL"}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,b.jsx)("a",{href:a.destinationUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline break-all",children:a.destinationUrl}),(0,b.jsx)(p,{className:"size-3 text-muted-foreground"})]})]}),(0,b.jsxs)("div",{className:"border-t pt-3 mt-3",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Generated URL"}),(0,b.jsx)("div",{className:"mt-1 p-2 bg-muted rounded-md",children:(0,b.jsx)("p",{className:"text-xs font-mono break-all",children:a.generatedUrl})})]})]})}),(0,b.jsx)(i.AdminSectionCard,{title:"Notes & Info",children:(0,b.jsxs)("div",{className:"space-y-4",children:[a.notes?(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Notes"}),(0,b.jsx)("p",{className:"text-sm mt-1",children:a.notes})]}):(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No notes added."}),(0,b.jsx)("div",{className:"border-t pt-3",children:(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Created by"}),(0,b.jsx)("p",{className:"font-medium",children:a.createdBy||"Unknown"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Created at"}),(0,b.jsx)("p",{className:"font-medium",children:(0,g.format)((0,h.parseISO)(a.createdAt),"MMM dd, yyyy HH:mm")})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Last updated"}),(0,b.jsx)("p",{className:"font-medium",children:(0,g.format)((0,h.parseISO)(a.updatedAt),"MMM dd, yyyy HH:mm")})]})]})})]})}),(0,b.jsx)(i.AdminSectionCard,{title:"Activity Log",children:a.timeline&&a.timeline.length>0?(0,b.jsx)("div",{className:"space-y-3",children:a.timeline.sort((a,b)=>(0,h.parseISO)(b.timestamp).getTime()-(0,h.parseISO)(a.timestamp).getTime()).map(a=>(0,b.jsxs)("div",{className:"flex items-start gap-3 text-sm",children:[(0,b.jsx)("span",{children:v[a.type]}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium",children:a.title}),a.payload?.notes&&(0,b.jsxs)("p",{className:"text-muted-foreground text-xs mt-1",children:['"',a.payload.notes,'"']}),(0,b.jsxs)("p",{className:"text-muted-foreground text-xs",children:[a.actor&&`by ${a.actor} â€¢ `,(0,g.format)((0,h.parseISO)(a.timestamp),"MMM dd, yyyy HH:mm")]})]})]},a.id))}):(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No activity recorded."})}),(0,b.jsx)(i.AdminSectionCard,{title:"Used In",children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"View leads that came from this campaign."}),(0,b.jsxs)(k.Button,{variant:"outline",className:"w-full justify-start",onClick:()=>n.push(`/leads?utm_campaign=${a.utm_campaign}`),children:[(0,b.jsx)(q.Users,{className:"mr-2 size-4"}),"View Leads with utm_campaign=",a.utm_campaign,(0,b.jsx)(l.ArrowRight,{className:"ml-auto size-4"})]})]})})]}),(0,b.jsx)(s.StatusChangeDialog,{campaign:a,targetStatus:y,open:w,onOpenChange:x,onStatusChanged:(b,c)=>{e?.({...a,status:c})}})]})}function x({params:a}){let{id:g}=(0,c.use)(a),h=(0,d.useRouter)(),[i,j]=c.useState(null),[k,l]=c.useState(!0);return(c.useEffect(()=>{(0,f.getCampaign)(g).then(a=>{j(a),l(!1),a||h.push("/campaigns")})},[g,h]),k)?(0,b.jsx)(e.AdminPageShell,{title:"Loading...",description:"",children:(0,b.jsx)("div",{className:"h-96 flex items-center justify-center",children:(0,b.jsx)("div",{className:"animate-pulse text-muted-foreground",children:"Loading campaign..."})})}):i?(0,b.jsx)(e.AdminPageShell,{title:"Campaign Details",description:`Viewing ${i.name}`,children:(0,b.jsx)(w,{campaign:i,onCampaignUpdated:a=>j(a)})}):null}a.s(["default",()=>x],25137)}];

//# sourceMappingURL=_689e00b0._.js.map