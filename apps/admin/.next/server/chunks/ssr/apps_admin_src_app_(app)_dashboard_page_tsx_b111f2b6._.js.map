{"version":3,"sources":["../../../../../../apps/admin/src/app/%28app%29/dashboard/page.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport { AdminPageShell, AdminSectionCard } from \"@prosfin/ui\";\nimport { listLeads } from \"@/lib/data/leads\";\n\nexport default function DashboardPage() {\n  const [stats, setStats] = React.useState({\n    leadsThisWeek: 0,\n    conversionRate: 0,\n    topSource: \"-\",\n    pipeline: 0,\n  });\n\n  React.useEffect(() => {\n    listLeads().then((leads) => {\n      const weekAgo = new Date();\n      weekAgo.setDate(weekAgo.getDate() - 7);\n      const leadsThisWeek = leads.filter(\n        (lead) => new Date(lead.createdAt) >= weekAgo\n      ).length;\n\n      const converted = leads.filter((l) => l.status === \"converted\").length;\n      const conversionRate = leads.length > 0 ? (converted / leads.length) * 100 : 0;\n\n      const sourceCounts: Record<string, number> = {};\n      leads.forEach((lead) => {\n        sourceCounts[lead.source] = (sourceCounts[lead.source] || 0) + 1;\n      });\n      const topSource =\n        Object.entries(sourceCounts).sort((a, b) => b[1] - a[1])[0]?.[0] || \"-\";\n\n      setStats({\n        leadsThisWeek,\n        conversionRate: Math.round(conversionRate * 10) / 10,\n        topSource,\n        pipeline: leads.filter((l) => l.status === \"qualified\" || l.status === \"meeting_scheduled\").length,\n      });\n    });\n  }, []);\n\n  return (\n    <AdminPageShell\n      title=\"Dashboard\"\n      description=\"Overview of your business metrics\"\n    >\n      <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-4\">\n        <AdminSectionCard title=\"Leads This Week\">\n          <div className=\"text-2xl font-bold\">{stats.leadsThisWeek}</div>\n          <p className=\"text-muted-foreground text-xs\">New leads</p>\n        </AdminSectionCard>\n        <AdminSectionCard title=\"Conversion Rate\">\n          <div className=\"text-2xl font-bold\">{stats.conversionRate}%</div>\n          <p className=\"text-muted-foreground text-xs\">Last 30 days</p>\n        </AdminSectionCard>\n        <AdminSectionCard title=\"Top Source\">\n          <div className=\"text-2xl font-bold\">{stats.topSource}</div>\n          <p className=\"text-muted-foreground text-xs\">Most effective</p>\n        </AdminSectionCard>\n        <AdminSectionCard title=\"Pipeline\">\n          <div className=\"text-2xl font-bold\">{stats.pipeline}</div>\n          <p className=\"text-muted-foreground text-xs\">Active deals</p>\n        </AdminSectionCard>\n      </div>\n      <div className=\"grid gap-6 md:grid-cols-2\">\n        <AdminSectionCard title=\"Leads Over Time\">\n          <div className=\"flex h-64 items-center justify-center text-muted-foreground\">\n            Chart placeholder\n          </div>\n        </AdminSectionCard>\n        <AdminSectionCard title=\"Source Distribution\">\n          <div className=\"flex h-64 items-center justify-center text-muted-foreground\">\n            Chart placeholder\n          </div>\n        </AdminSectionCard>\n      </div>\n    </AdminPageShell>\n  );\n}\n"],"names":[],"mappings":"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"}