module.exports=[22448,a=>{"use strict";var b=a.i(91870);let c=(0,a.i(28761).default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);a.i(56120);var d=a.i(27725),e=a.i(2042);function f({row:a,actions:f}){return(0,b.jsxs)(e.DropdownMenu,{children:[(0,b.jsx)(e.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(d.Button,{variant:"ghost",size:"icon",className:"size-8",children:[(0,b.jsx)(c,{className:"size-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Open menu"})]})}),(0,b.jsx)(e.DropdownMenuContent,{align:"end",children:f.map((c,d)=>{let f="function"==typeof c.label?c.label(a):c.label;return(0,b.jsx)(e.DropdownMenuItem,{onClick:()=>c.onClick(a),className:"destructive"===c.variant?"text-destructive":"",children:f},d)})})]})}a.s(["TableRowActions",()=>f],22448)},17490,a=>{"use strict";var b=a.i(91870),c=a.i(44981),d=a.i(45054),e=a.i(64964);a.i(56120);var f=a.i(83750),g=a.i(83357),h=a.i(22448),i=a.i(37717),j=a.i(27965);function k(a,b,e){let f=(0,d.useSearchParams)(),g=(0,d.useRouter)(),h=(0,d.usePathname)(),i=(0,c.useRef)(null),j=f.get(a),k=j?function(a,b){if("number"==typeof b){let c=Number(a);return isNaN(c)?b:c}return"boolean"==typeof b?"true"===a:a}(j,b):b,l=(0,c.useCallback)(c=>{i.current&&clearTimeout(i.current);let d=()=>{let d=new URLSearchParams(f.toString());c===b?d.delete(a):d.set(a,String(c));let i=d.toString(),j=i?`${h}?${i}`:h;(e?.replace?g.replace:g.push)(j)};e?.debounce&&e.debounce>0?i.current=setTimeout(d,e.debounce):d()},[a,b,f,h,g,e]);return(0,c.useEffect)(()=>()=>{i.current&&clearTimeout(i.current)},[]),[k,l]}var l=a.i(49377);let m={new:"bg-blue-100 text-blue-800",contacted:"bg-yellow-100 text-yellow-800",qualified:"bg-green-100 text-green-800",meeting_scheduled:"bg-purple-100 text-purple-800",converted:"bg-gray-100 text-gray-800",lost:"bg-red-100 text-red-800"};function n(){let a=(0,d.useRouter)(),[n,o]=c.useState([]),[p,q]=c.useState(!0),[r,s]=k("q","",{debounce:300,replace:!0}),[t,u]=function(a,b=[],e){let f=(0,d.useSearchParams)(),g=(0,d.useRouter)(),h=(0,d.usePathname)(),i=(0,c.useRef)(null),j=f.get(a),k=j?j.split(",").filter(Boolean):b,l=(0,c.useCallback)(c=>{let d,e,j;i.current&&clearTimeout(i.current);d=new URLSearchParams(f.toString()),0===c.length||JSON.stringify(c)===JSON.stringify(b)?d.delete(a):d.set(a,c.join(",")),j=(e=d.toString())?`${h}?${e}`:h,(0,g.push)(j)},[a,b,f,h,g,void 0]);return(0,c.useEffect)(()=>()=>{i.current&&clearTimeout(i.current)},[]),[k,l]}("status",[]),[v,w]=k("source",""),[x,y]=k("page","0"),z=c.useMemo(()=>{let a=parseInt(x,10);return isNaN(a)||a<0?0:a},[x]),A=c.useCallback(a=>{y(String(a))},[y]);c.useEffect(()=>{(0,j.listLeads)().then(a=>{o(a),q(!1)})},[]);let B=c.useMemo(()=>{let a=[...n];if(r){let b=r.toLowerCase();a=a.filter(a=>a.name.toLowerCase().includes(b)||a.email.toLowerCase().includes(b)||a.phone?.toLowerCase().includes(b)||a.company?.toLowerCase().includes(b))}return t.length>0&&(a=a.filter(a=>t.includes(a.status))),v&&(a=a.filter(a=>a.source===v)),a},[n,r,t,v]),C=async(a,b)=>{var c,d;try{await (0,j.updateLeadStatus)(a,b),o(c=>c.map(c=>c.id===a?{...c,status:b}:c)),c=`Lead status updated to ${b}`,l.toast.success(c)}catch(a){d="Failed to update lead status",l.toast.error(d)}},D=[{label:"Mark as Contacted",onClick:a=>C(a.id,"contacted")},{label:"Change Status",onClick:a=>{console.log("Change status for",a.id)}},{label:"Convert to Client",onClick:a=>{console.log("Convert",a.id)}},{label:"Export",onClick:a=>{console.log("Export",a.id)}}],E=[{id:"name",header:"Name",accessorKey:"name",enableSorting:!0},{id:"company",header:"Company",accessorKey:"company",enableSorting:!0},{id:"email",header:"Email",accessorKey:"email"},{id:"phone",header:"Phone",accessorKey:"phone"},{id:"status",header:"Status",accessorKey:"status",cell:({row:a})=>(0,b.jsx)(i.Badge,{className:m[a.original.status],children:a.original.status})},{id:"source",header:"Source",accessorKey:"source"},{id:"createdAt",header:"Created",accessorKey:"createdAt",cell:({row:a})=>(0,e.format)(new Date(a.original.createdAt),"MMM dd, yyyy")},{id:"actions",header:"",cell:({row:a})=>(0,b.jsx)(h.TableRowActions,{row:a.original,actions:D})}];return(0,b.jsx)(f.AdminPageShell,{title:"Leads",description:"Manage and track your leads",children:(0,b.jsx)(g.AppDataTable,{columns:E,data:B,isLoading:p,searchPlaceholder:"Search leads...",emptyMessage:"No leads found",searchValue:r,onSearchChange:s,pageIndex:z,onPageChange:A,onRowClick:b=>{a.push(`/leads/${b.id}`)}})})}a.s(["default",()=>n],17490)}];

//# sourceMappingURL=apps_admin_src_dd67ce93._.js.map