(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,1810,e=>{"use strict";let t,n;var r=e.i(12926),i=e.i(38131),l=e.i(51079),s=e.i(85617);e.i(16233);var o=e.i(35893),a=e.i(87352),u=e.i(191);let d=(0,u.default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),c=(0,u.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var f=e.i(24720),h=e.i(83398),g=e.i(42276),p=e.i(21079),m=e.i(33992),_=e.i(14877),y=e.i(23490);let x=[{value:"insights",label:"Insights"},{value:"resources",label:"Resources"},{value:"knowledge",label:"Knowledge"}],v=[{value:"draft",label:"Draft"},{value:"published",label:"Published"},{value:"scheduled",label:"Scheduled"},{value:"archived",label:"Archived"}];function S(e){let t,n,l,s,o,u,d,c,f,h,S,N,k,T,w,E,O,M,A,D,P,L,F,I,R,j,z,B,K,W,U,J,$,V,H,q,Y,G,X,Z,Q,ee,et,en,er,ei,el,es,eo,ea,eu,ed,ec,ef,eh,eg,ep,em,e_,ey,ex,ev=(0,g.c)(134),{post:eS,formData:eC,onFormDataChange:eb}=e;ev[0]!==eS?(t=eS?{title:eS.title,slug:eS.slug,bucket:eS.bucket,excerpt:eS.excerpt,cover:eS.cover,tags:eS.tags,content:eS.content,seoTitle:eS.seoTitle,seoDescription:eS.seoDescription,canonical:eS.canonical,noindex:eS.noindex,status:eS.status,scheduledFor:eS.scheduledFor}:{title:"",slug:"",bucket:"insights",excerpt:"",cover:"",tags:[],content:{root:{children:[],direction:"ltr",format:"",indent:0,type:"root",version:1}},status:"draft"},ev[0]=eS,ev[1]=t):t=ev[1];let[eN,ek]=i.useState(t);ev[2]!==eC?(n=()=>{eC&&ek(eC)},l=[eC],ev[2]=eC,ev[3]=n,ev[4]=l):(n=ev[3],l=ev[4]),i.useEffect(n,l),ev[5]!==eN||ev[6]!==eb?(s=(e,t)=>{let n={...eN,[e]:t};ek(n),eb(n)},ev[5]=eN,ev[6]=eb,ev[7]=s):s=ev[7];let eT=s;ev[8]!==eN.slug||ev[9]!==eS||ev[10]!==eT?(o=e=>{eT("title",e),eS&&eN.slug||eT("slug",function(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}(e))},ev[8]=eN.slug,ev[9]=eS,ev[10]=eT,ev[11]=o):o=ev[11];let ew=o;ev[12]!==eN.tags||ev[13]!==eT?(u=e=>{e.trim()&&!eN.tags?.includes(e.trim())&&eT("tags",[...eN.tags||[],e.trim()])},ev[12]=eN.tags,ev[13]=eT,ev[14]=u):u=ev[14];let eE=u;ev[15]!==eN.tags||ev[16]!==eT?(d=e=>{eT("tags",eN.tags?.filter(t=>t!==e)||[])},ev[15]=eN.tags,ev[16]=eT,ev[17]=d):d=ev[17];let eO=d;ev[18]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsx)("h3",{className:"font-semibold",children:"Basic Information"}),ev[18]=c):c=ev[18],ev[19]===Symbol.for("react.memo_cache_sentinel")?(f=(0,r.jsx)(m.Label,{htmlFor:"title",children:"Title *"}),ev[19]=f):f=ev[19];let eM=eN.title||"";ev[20]!==ew?(h=e=>ew(e.target.value),ev[20]=ew,ev[21]=h):h=ev[21],ev[22]!==eM||ev[23]!==h?(S=(0,r.jsxs)("div",{className:"space-y-2",children:[f,(0,r.jsx)(p.Input,{id:"title",value:eM,onChange:h,placeholder:"Enter post title"})]}),ev[22]=eM,ev[23]=h,ev[24]=S):S=ev[24],ev[25]===Symbol.for("react.memo_cache_sentinel")?(N=(0,r.jsx)(m.Label,{htmlFor:"slug",children:"Slug *"}),ev[25]=N):N=ev[25];let eA=eN.slug||"";ev[26]!==eT?(k=e=>eT("slug",e.target.value),ev[26]=eT,ev[27]=k):k=ev[27],ev[28]!==eA||ev[29]!==k?(T=(0,r.jsx)(p.Input,{id:"slug",value:eA,onChange:k,placeholder:"post-slug"}),ev[28]=eA,ev[29]=k,ev[30]=T):T=ev[30],ev[31]===Symbol.for("react.memo_cache_sentinel")?(w=(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"URL-friendly version of the title"}),ev[31]=w):w=ev[31],ev[32]!==T?(E=(0,r.jsxs)("div",{className:"space-y-2",children:[N,T,w]}),ev[32]=T,ev[33]=E):E=ev[33],ev[34]===Symbol.for("react.memo_cache_sentinel")?(O=(0,r.jsx)(m.Label,{htmlFor:"bucket",children:"Content Bucket"}),ev[34]=O):O=ev[34];let eD=eN.bucket||"insights";ev[35]!==eT?(M=e=>eT("bucket",e.target.value),ev[35]=eT,ev[36]=M):M=ev[36],ev[37]===Symbol.for("react.memo_cache_sentinel")?(A=x.map(b),ev[37]=A):A=ev[37],ev[38]!==eD||ev[39]!==M?(D=(0,r.jsxs)("div",{className:"space-y-2",children:[O,(0,r.jsx)("select",{id:"bucket",value:eD,onChange:M,className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring",children:A})]}),ev[38]=eD,ev[39]=M,ev[40]=D):D=ev[40],ev[41]===Symbol.for("react.memo_cache_sentinel")?(P=(0,r.jsx)(m.Label,{htmlFor:"excerpt",children:"Excerpt"}),ev[41]=P):P=ev[41];let eP=eN.excerpt||"";ev[42]!==eT?(L=e=>eT("excerpt",e.target.value),ev[42]=eT,ev[43]=L):L=ev[43],ev[44]!==eP||ev[45]!==L?(F=(0,r.jsxs)("div",{className:"space-y-2",children:[P,(0,r.jsx)(_.Textarea,{id:"excerpt",value:eP,onChange:L,placeholder:"Brief description of the post",rows:3})]}),ev[44]=eP,ev[45]=L,ev[46]=F):F=ev[46],ev[47]===Symbol.for("react.memo_cache_sentinel")?(I=(0,r.jsx)(m.Label,{htmlFor:"cover",children:"Cover Image URL"}),ev[47]=I):I=ev[47];let eL=eN.cover||"";ev[48]!==eT?(R=e=>eT("cover",e.target.value),ev[48]=eT,ev[49]=R):R=ev[49],ev[50]!==eL||ev[51]!==R?(j=(0,r.jsxs)("div",{className:"space-y-2",children:[I,(0,r.jsx)(p.Input,{id:"cover",value:eL,onChange:R,placeholder:"https://example.com/image.jpg"})]}),ev[50]=eL,ev[51]=R,ev[52]=j):j=ev[52],ev[53]!==S||ev[54]!==E||ev[55]!==D||ev[56]!==F||ev[57]!==j?(z=(0,r.jsxs)("div",{className:"space-y-4",children:[c,S,E,D,F,j]}),ev[53]=S,ev[54]=E,ev[55]=D,ev[56]=F,ev[57]=j,ev[58]=z):z=ev[58],ev[59]===Symbol.for("react.memo_cache_sentinel")?(B=(0,r.jsx)(a.Separator,{}),ev[59]=B):B=ev[59],ev[60]===Symbol.for("react.memo_cache_sentinel")?(K=(0,r.jsx)("h3",{className:"font-semibold",children:"Tags"}),ev[60]=K):K=ev[60],ev[61]!==eN.tags||ev[62]!==eO?(W=eN.tags?.map(e=>(0,r.jsxs)(y.Badge,{variant:"secondary",className:"cursor-pointer",onClick:()=>eO(e),children:[e," ×"]},e)),ev[61]=eN.tags,ev[62]=eO,ev[63]=W):W=ev[63],ev[64]!==W?(U=(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:W}),ev[64]=W,ev[65]=U):U=ev[65],ev[66]!==eE?(J=(0,r.jsx)("div",{className:"flex gap-2",children:(0,r.jsx)(p.Input,{placeholder:"Add tag",onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),eE(e.currentTarget.value),e.currentTarget.value="")}})}),ev[66]=eE,ev[67]=J):J=ev[67],ev[68]!==U||ev[69]!==J?($=(0,r.jsxs)("div",{className:"space-y-4",children:[K,U,J]}),ev[68]=U,ev[69]=J,ev[70]=$):$=ev[70],ev[71]===Symbol.for("react.memo_cache_sentinel")?(V=(0,r.jsx)(a.Separator,{}),ev[71]=V):V=ev[71],ev[72]===Symbol.for("react.memo_cache_sentinel")?(H=(0,r.jsx)("h3",{className:"font-semibold",children:"Status"}),ev[72]=H):H=ev[72];let eF=eN.status||"draft";ev[73]!==eT?(q=e=>eT("status",e.target.value),ev[73]=eT,ev[74]=q):q=ev[74],ev[75]===Symbol.for("react.memo_cache_sentinel")?(Y=v.map(C),ev[75]=Y):Y=ev[75],ev[76]!==eF||ev[77]!==q?(G=(0,r.jsx)("select",{value:eF,onChange:q,className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring",children:Y}),ev[76]=eF,ev[77]=q,ev[78]=G):G=ev[78],ev[79]!==eN.scheduledFor||ev[80]!==eN.status||ev[81]!==eT?(X="scheduled"===eN.status&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(m.Label,{htmlFor:"scheduledFor",children:"Schedule For"}),(0,r.jsx)(p.Input,{id:"scheduledFor",type:"datetime-local",value:eN.scheduledFor?new Date(eN.scheduledFor).toISOString().slice(0,16):"",onChange:e=>eT("scheduledFor",e.target.value?new Date(e.target.value).toISOString():void 0)})]}),ev[79]=eN.scheduledFor,ev[80]=eN.status,ev[81]=eT,ev[82]=X):X=ev[82],ev[83]!==G||ev[84]!==X?(Z=(0,r.jsxs)("div",{className:"space-y-4",children:[H,G,X]}),ev[83]=G,ev[84]=X,ev[85]=Z):Z=ev[85],ev[86]===Symbol.for("react.memo_cache_sentinel")?(Q=(0,r.jsx)(a.Separator,{}),ev[86]=Q):Q=ev[86],ev[87]===Symbol.for("react.memo_cache_sentinel")?(ee=(0,r.jsx)("h3",{className:"font-semibold",children:"SEO Settings"}),ev[87]=ee):ee=ev[87],ev[88]===Symbol.for("react.memo_cache_sentinel")?(et=(0,r.jsx)(m.Label,{htmlFor:"seoTitle",children:"SEO Title"}),ev[88]=et):et=ev[88];let eI=eN.seoTitle||"";ev[89]!==eT?(en=e=>eT("seoTitle",e.target.value),ev[89]=eT,ev[90]=en):en=ev[90],ev[91]!==eI||ev[92]!==en?(er=(0,r.jsx)(p.Input,{id:"seoTitle",value:eI,onChange:en,placeholder:"Custom title for search engines"}),ev[91]=eI,ev[92]=en,ev[93]=er):er=ev[93];let eR=eN.seoTitle?.length||0;ev[94]!==eR?(ei=(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[eR,"/60 characters"]}),ev[94]=eR,ev[95]=ei):ei=ev[95],ev[96]!==er||ev[97]!==ei?(el=(0,r.jsxs)("div",{className:"space-y-2",children:[et,er,ei]}),ev[96]=er,ev[97]=ei,ev[98]=el):el=ev[98],ev[99]===Symbol.for("react.memo_cache_sentinel")?(es=(0,r.jsx)(m.Label,{htmlFor:"seoDescription",children:"SEO Description"}),ev[99]=es):es=ev[99];let ej=eN.seoDescription||"";ev[100]!==eT?(eo=e=>eT("seoDescription",e.target.value),ev[100]=eT,ev[101]=eo):eo=ev[101],ev[102]!==ej||ev[103]!==eo?(ea=(0,r.jsx)(_.Textarea,{id:"seoDescription",value:ej,onChange:eo,placeholder:"Meta description for search engines",rows:3}),ev[102]=ej,ev[103]=eo,ev[104]=ea):ea=ev[104];let ez=eN.seoDescription?.length||0;ev[105]!==ez?(eu=(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[ez,"/160 characters"]}),ev[105]=ez,ev[106]=eu):eu=ev[106],ev[107]!==ea||ev[108]!==eu?(ed=(0,r.jsxs)("div",{className:"space-y-2",children:[es,ea,eu]}),ev[107]=ea,ev[108]=eu,ev[109]=ed):ed=ev[109],ev[110]===Symbol.for("react.memo_cache_sentinel")?(ec=(0,r.jsx)(m.Label,{htmlFor:"canonical",children:"Canonical URL"}),ev[110]=ec):ec=ev[110];let eB=eN.canonical||"";ev[111]!==eT?(ef=e=>eT("canonical",e.target.value),ev[111]=eT,ev[112]=ef):ef=ev[112],ev[113]!==eB||ev[114]!==ef?(eh=(0,r.jsxs)("div",{className:"space-y-2",children:[ec,(0,r.jsx)(p.Input,{id:"canonical",value:eB,onChange:ef,placeholder:"https://example.com/canonical-url"})]}),ev[113]=eB,ev[114]=ef,ev[115]=eh):eh=ev[115];let eK=eN.noindex||!1;return ev[116]!==eT?(eg=e=>eT("noindex",e.target.checked),ev[116]=eT,ev[117]=eg):eg=ev[117],ev[118]!==eK||ev[119]!==eg?(ep=(0,r.jsx)("input",{type:"checkbox",id:"noindex",checked:eK,onChange:eg,className:"size-4 rounded border-input"}),ev[118]=eK,ev[119]=eg,ev[120]=ep):ep=ev[120],ev[121]===Symbol.for("react.memo_cache_sentinel")?(em=(0,r.jsx)(m.Label,{htmlFor:"noindex",className:"cursor-pointer",children:"Noindex (prevent search engines from indexing)"}),ev[121]=em):em=ev[121],ev[122]!==ep?(e_=(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[ep,em]}),ev[122]=ep,ev[123]=e_):e_=ev[123],ev[124]!==el||ev[125]!==ed||ev[126]!==eh||ev[127]!==e_?(ey=(0,r.jsxs)("div",{className:"space-y-4",children:[ee,el,ed,eh,e_]}),ev[124]=el,ev[125]=ed,ev[126]=eh,ev[127]=e_,ev[128]=ey):ey=ev[128],ev[129]!==z||ev[130]!==$||ev[131]!==Z||ev[132]!==ey?(ex=(0,r.jsx)("div",{className:"flex h-full flex-col overflow-y-auto",children:(0,r.jsxs)("div",{className:"space-y-6 p-6",children:[z,B,$,V,Z,Q,ey]})}),ev[129]=z,ev[130]=$,ev[131]=Z,ev[132]=ey,ev[133]=ex):ex=ev[133],ex}function C(e){return(0,r.jsx)("option",{value:e.value,children:e.label},e.value)}function b(e){return(0,r.jsx)("option",{value:e.value,children:e.label},e.value)}function N({post:e,onSave:t,onPublish:n,onSchedule:u,formData:g,onFormDataChange:p,children:m}){let _=(0,s.useRouter)(),[y,x]=i.useState(!1),[v,C]=i.useState(!1),[b,N]=i.useState(!1),[k,T]=i.useState(null),w=g??k,E=p??T;i.useEffect(()=>{let e=e=>{b&&(e.preventDefault(),e.returnValue="")};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[b]),i.useEffect(()=>{if(w&&b&&w.title){let n=setTimeout(async()=>{let n=e?`post-draft-${e.id}`:"post-draft-new";localStorage.setItem(n,JSON.stringify(w));try{await t(w),N(!1)}catch(e){console.error("Auto-save failed:",e)}},3e3);return()=>clearTimeout(n)}},[w,b,e,t]);let O=async()=>{if(w){x(!0);try{await t(w),C(!0),N(!1),setTimeout(()=>C(!1),2e3)}catch(e){console.error("Failed to save:",e)}finally{x(!1)}}},M=async()=>{if(w){x(!0);try{await n?.(w),_.push("/content")}catch(e){console.error("Failed to publish:",e)}finally{x(!1)}}};return(0,r.jsxs)("div",{className:"flex h-screen flex-col",children:[(0,r.jsx)("div",{className:"border-b bg-background",children:(0,r.jsxs)("div",{className:"flex h-14 items-center justify-between px-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(l.default,{href:"/content",children:(0,r.jsx)(o.Button,{variant:"ghost",size:"icon",children:(0,r.jsx)(f.ArrowLeft,{className:"size-4"})})}),(0,r.jsx)(a.Separator,{orientation:"vertical",className:"h-6"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[v&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,r.jsx)(h.CheckCircle2,{className:"size-4 text-green-600"}),(0,r.jsx)("span",{children:"Saved"})]}),b&&!v&&(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:"Unsaved changes"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(o.Button,{variant:"outline",onClick:O,disabled:y||!b,children:[(0,r.jsx)(d,{className:"mr-2 size-4"}),y?"Saving...":"Save Draft"]}),e&&(0,r.jsxs)(o.Button,{variant:"outline",onClick:()=>{if(!w||!e)return;let t=w.slug||e.slug;window.open(`/content/preview/${t}`,"_blank")},children:[(0,r.jsx)(c,{className:"mr-2 size-4"}),"Preview"]}),(0,r.jsx)(o.Button,{onClick:M,disabled:y||!w,children:"Publish"})]})]})}),(0,r.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,r.jsx)("div",{className:"flex-1 overflow-y-auto bg-background",children:(0,r.jsx)("div",{className:"mx-auto max-w-4xl px-6 py-8",children:m})}),(0,r.jsx)("div",{className:"w-80 border-l bg-muted/30",children:(0,r.jsx)(S,{post:e,formData:w,onFormDataChange:e=>{E(e),N(!0)},onSchedule:u})})]})]})}let k=(0,i.createContext)(null);function T(){let e=(0,i.useContext)(k);return null==e&&function(e,...t){let n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;for(let e of(r.append("code",8),t))r.append("v",e);throw n.search=r.toString(),Error(`Minified Lexical error #8; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(0),e}function w(e,...t){let n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;for(let n of(r.append("code",e),t))r.append("v",n);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function E(e,...t){let n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;for(let n of(r.append("code",e),t))r.append("v",n);n.search=r.toString(),console.warn(`Minified Lexical warning #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let O="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,M=O&&"documentMode"in document?document.documentMode:null,A=O&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),D=O&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),P=!(!O||!("InputEvent"in window)||M)&&"getTargetRanges"in new window.InputEvent("input"),L=O&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),F=O&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,I=O&&/Android/.test(navigator.userAgent),R=O&&/^(?=.*Chrome).*/i.test(navigator.userAgent),j=O&&I&&R,z=O&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&A&&!R;function B(...e){let t=[];for(let n of e)if(n&&"string"==typeof n)for(let[e]of n.matchAll(/\S+/g))t.push(e);return t}let K=L||F||z?" ":"​",W=D?" ":K,U="֑-߿יִ-﷽ﹰ-ﻼ",J="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",$=(RegExp("^[^"+J+"]*["+U+"]"),RegExp("^[^"+U+"]*["+J+"]"),{bold:1,capitalize:1024,code:16,highlight:128,italic:2,lowercase:256,strikethrough:4,subscript:32,superscript:64,underline:8,uppercase:512}),V={directionless:1,unmergeable:2},H={center:2,end:6,justify:4,left:1,right:3,start:5},q={2:"center",6:"end",4:"justify",1:"left",3:"right",5:"start"},Y={normal:0,segmented:2,token:1},G={0:"normal",2:"segmented",1:"token"},X="$config",Z=!1,Q=0;function ee(e){Q=e.timeStamp}function et(e,t,n){let r="BR"===e.nodeName,i=t.__lexicalLineBreak;return i&&(e===i||r&&e.previousSibling===i)||r&&void 0!==it(e,n)}function en(e,t,n){Z=!0;let r=performance.now()-Q>100;try{rS(e,()=>{let i=n1()||e.getEditorState().read(()=>{let e=n1();return null!==e?e.clone():null}),l=new Map,s=e.getRootElement(),o=e._editorState,a=e._blockCursorElement,u=!1,d="";for(let n=0;n<t.length;n++){let c=t[n],f=c.type,h=c.target,g=function(e,t,n,r){var i;for(let l=e;l&&(i=l,!0!==i.__lexicalUnmanaged);l=iA(l)){let e=it(l,t);if(void 0!==e){let t=r8(e,n);if(t)return rE(t)||!iU(l)?void 0:[l,t]}else if(l===r)return[r,io(n)]}}(h,e,o,s);if(!g)continue;let[p,m]=g;if("characterData"===f)r&&nE(m)&&r0(h)&&function(e,t,n){if(nj(e)){let t=e.anchor.getNode();if(t.is(n)&&e.format!==t.getFormat())return!1}return r0(t)&&n.isAttached()}(i,h,m)&&function(e,t,n){let r=iK(iF(n)),i=null,l=null;null!==r&&r.anchorNode===e&&(i=r.anchorOffset,l=r.focusOffset);let s=e.nodeValue;null!==s&&im(t,s,i,l,!1)}(h,m,e);else if("childList"===f){u=!0;let t=c.addedNodes;for(let n=0;n<t.length;n++){let r=t[n],i=ie(r),l=r.parentNode;if(null!=l&&r!==a&&null===i&&!et(r,l,e)){if(D){let e=(iU(r)?r.innerText:null)||r.nodeValue;e&&(d+=e)}l.removeChild(r)}}let n=c.removedNodes,r=n.length;if(r>0){let t=0;for(let i=0;i<r;i++){let r=n[i];(et(r,h,e)||a===r)&&(h.appendChild(r),t++)}r!==t&&l.set(p,m)}}}if(l.size>0)for(let[t,n]of l)n.reconcileObservedMutation(t,e);let c=n.takeRecords();if(c.length>0){for(let t=0;t<c.length;t++){let n=c[t],r=n.addedNodes,i=n.target;for(let t=0;t<r.length;t++){let n=r[t],l=n.parentNode;null==l||"BR"!==n.nodeName||et(n,i,e)||l.removeChild(n)}}n.takeRecords()}null!==i&&(u&&ia(i),D&&iw(e)&&i.insertRawText(d))})}finally{Z=!1}}function er(e){let t=e._observer;null!==t&&en(e,t.takeRecords(),t)}function ei(e){0===Q&&iF(e).addEventListener("textInput",ee,!0),e._observer=new MutationObserver((t,n)=>{en(e,t,n)})}class el{node;knownState;unknownState;sharedNodeState;size;constructor(e,t,n,r=new Map,i){this.node=e,this.sharedNodeState=t,this.unknownState=n,this.knownState=r;const{sharedConfigMap:l}=this.sharedNodeState,s=void 0!==i?i:function(e,t,n){let r=n.size;if(t)for(let i in t){let t=e.get(i);t&&n.has(t)||r++}return r}(l,n,r);this.size=s}getValue(e){let t=this.knownState.get(e);if(void 0!==t)return t;this.sharedNodeState.sharedConfigMap.set(e.key,e);let n=e.defaultValue;if(this.unknownState&&e.key in this.unknownState){let t=this.unknownState[e.key];void 0!==t&&(n=e.parse(t)),this.updateFromKnown(e,n)}return n}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){let e={...this.unknownState},t={};for(let[t,n]of this.knownState)t.isEqual(n,t.defaultValue)?delete e[t.key]:e[t.key]=t.unparse(n);for(let n of this.sharedNodeState.flatKeys)n in e&&(t[n]=e[n],delete e[n]);return eo(e)&&(t.$=e),t}getWritable(e){if(this.node===e)return this;let{sharedNodeState:t,unknownState:n}=this,r=new Map(this.knownState);return new el(e,t,function(e,t,n){let r;if(n)for(let[i,l]of Object.entries(n)){let n=e.get(i);n?t.has(n)||t.set(n,n.parse(l)):(r=r||{})[i]=l}return r}(t.sharedConfigMap,r,n),r,this.size)}updateFromKnown(e,t){let n=e.key;this.sharedNodeState.sharedConfigMap.set(n,e);let{knownState:r,unknownState:i}=this;r.has(e)||i&&n in i||(i&&(delete i[n],this.unknownState=eo(i)),this.size++),r.set(e,t)}updateFromUnknown(e,t){let n=this.sharedNodeState.sharedConfigMap.get(e);n?this.updateFromKnown(n,n.parse(t)):(this.unknownState=this.unknownState||{},e in this.unknownState||this.size++,this.unknownState[e]=t)}updateFromJSON(e){let{knownState:t}=this;for(let e of t.keys())t.set(e,e.defaultValue);if(this.size=t.size,this.unknownState=void 0,e)for(let[t,n]of Object.entries(e))this.updateFromUnknown(t,n)}}function es(e){return e.__state?e.__state.sharedNodeState:rJ(rd(),e.getType()).sharedNodeState}function eo(e){if(e)for(let t in e)return e}function ea(e,t,n){for(let[r,i]of t.knownState){if(e.has(r.key))continue;e.add(r.key);let t=n?n.getValue(r):r.defaultValue;if(t!==i&&!r.isEqual(t,i))return!0}return!1}function eu(e,t,n){let{unknownState:r}=t,i=n?n.unknownState:void 0;if(r){for(let[t,n]of Object.entries(r))if(!e.has(t)&&(e.add(t),n!==(i?i[t]:void 0)))return!0}return!1}function ed(e,t){let n=e.__state;return n&&n.node===e?n.getWritable(t):n}function ec(e,t){let n=e.__mode,r=e.__format,i=e.__style,l=t.__mode,s=t.__format,o=t.__style,a=e.__state,u=t.__state;return(null===n||n===l)&&(null===r||r===s)&&(null===i||i===o)&&(null===e.__state||a===u||function(e,t){if(e===t)return!0;if(e&&t&&e.size!==t.size)return!1;let n=new Set;return!(e&&ea(n,e,t)||t&&ea(n,t,e)||e&&eu(n,e,t)||t&&eu(n,t,e))}(a,u))}function ef(e,t){let n=e.mergeWithSibling(t),r=rd()._normalizedNodes;return r.add(e.__key),r.add(t.__key),n}function eh(e){let t,n,r=e;if(""!==r.__text||!r.isSimpleText()||r.isUnmergeable()){for(;null!==(t=r.getPreviousSibling())&&nE(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(""!==t.__text){ec(t,r)&&(r=ef(t,r));break}t.remove()}for(;null!==(n=r.getNextSibling())&&nE(n)&&n.isSimpleText()&&!n.isUnmergeable();){if(""!==n.__text){ec(r,n)&&(r=ef(r,n));break}n.remove()}}else r.remove()}function eg(e){return ep(e.anchor),ep(e.focus),e}function ep(e){for(;"element"===e.type;){let t,n,r=e.getNode(),i=e.offset;if(i===r.getChildrenSize()?(t=r.getChildAtIndex(i-1),n=!0):(t=r.getChildAtIndex(i),n=!1),nE(t)){e.set(t.__key,n?t.getTextContentSize():0,"text",!0);break}if(!rk(t))break;e.set(t.__key,n?t.getChildrenSize():0,"element",!0)}}let em,e_,ey,ex,ev,eS,eC,eb,eN,ek,eT="",ew=null,eE=null,eO="",eM=!1,eA=!1;function eD(e,t){let n=eC.get(e);if(null!==t){let n=e$(e);n.parentNode===t&&t.removeChild(n)}if(eb.has(e)||e_._keyToDOMMap.delete(e),rk(n)){let e=eW(n,eC);eP(e,0,e.length-1,null)}void 0!==n&&iN(ek,ey,ex,n,"destroyed")}function eP(e,t,n,r){let i=t;for(;i<=n;++i){let t=e[i];void 0!==t&&eD(t,r)}}function eL(e,t){e.setProperty("text-align",t)}function eF(e,t){let n=em.theme.indent;if("string"==typeof n){let r=e.classList.contains(n);t>0&&!r?e.classList.add(n):t<1&&r&&e.classList.remove(n)}let r=getComputedStyle(e).getPropertyValue("--lexical-indent-base-value")||"40px";e.style.setProperty("padding-inline-start",0===t?"":`calc(${t} * ${r})`)}function eI(e,t){let n=e.style;0===t?eL(n,""):1===t?eL(n,"left"):2===t?eL(n,"center"):3===t?eL(n,"right"):4===t?eL(n,"justify"):5===t?eL(n,"start"):6===t&&eL(n,"end")}function eR(e,t){let n=function(e){let t=e.__dir;if(null!==t)return t;if(rM(e))return null;let n=e.getParentOrThrow();return rM(n)&&null===n.__dir?"auto":null}(t);null!==n?e.dir=n:e.removeAttribute("dir")}function ej(e,t){var n;let r,i=eb.get(e);void 0===i&&w(60);let l=i.createDOM(em,e_);if(r=(n=e_)._keyToDOMMap,l[`__lexicalKey_${n._key}`]=e,r.set(e,l),nE(i)?l.setAttribute("data-lexical-text","true"):rE(i)&&l.setAttribute("data-lexical-decorator","true"),rk(i)){let e=i.__indent,t=i.__size;eR(l,i),0!==e&&eF(l,e),0!==t&&ez(eW(i,eb),i,0,t-1,i.getDOMSlot(l));let n=i.__format;0!==n&&eI(l,n),i.isInline()||eK(null,i,l),iO(i)&&(eT+="\n\n",eO+="\n\n")}else{let t=i.getTextContent();if(rE(i)){let t=i.decorate(e_,em);null!==t&&eU(e,t),l.contentEditable="false"}eT+=t,eO+=t}return null!==t&&t.insertChild(l),iN(ek,ey,ex,i,"created"),l}function ez(e,t,n,r,i){let l=eT;eT="";let s=n;for(;s<=r;++s){ej(e[s],i);let t=eb.get(e[s]);null!==t&&nE(t)&&null===ew&&(ew=t.getFormat(),eE=t.getStyle())}iO(t)&&(eT+="\n\n"),i.element.__lexicalTextContent=eT,eT=l+eT}function eB(e,t){if(e){let n=e.__last;if(n){let e=t.get(n);if(e)return nc(e)?"line-break":rE(e)&&e.isInline()?"decorator":null}return"empty"}return null}function eK(e,t,n){let r=eB(e,eC),i=eB(t,eb);r!==i&&t.getDOMSlot(n).setManagedLineBreak(i)}function eW(e,t){let n=[],r=e.__first;for(;null!==r;){let e=t.get(r);void 0===e&&w(101),n.push(r),r=e.__next}return n}function eU(e,t){let n=e_._pendingDecorators,r=e_._decorators;if(null===n){if(r[e]===t)return;n=ii(e_)}n[e]=t}function eJ(e){let t=e.nextSibling;return null!==t&&t===e_._blockCursorElement&&(t=t.nextSibling),t}function e$(e){let t=eN.get(e);return void 0===t&&w(75,e),t}function eV(e){return{type:e}}let eH=eV("SELECTION_CHANGE_COMMAND"),eq=eV("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),eY=eV("CLICK_COMMAND"),eG=eV("BEFORE_INPUT_COMMAND"),eX=eV("INPUT_COMMAND"),eZ=eV("COMPOSITION_START_COMMAND"),eQ=eV("COMPOSITION_END_COMMAND"),e0=eV("DELETE_CHARACTER_COMMAND"),e1=eV("INSERT_LINE_BREAK_COMMAND"),e2=eV("INSERT_PARAGRAPH_COMMAND"),e3=eV("CONTROLLED_TEXT_INSERTION_COMMAND"),e4=eV("PASTE_COMMAND"),e6=eV("REMOVE_TEXT_COMMAND"),e5=eV("DELETE_WORD_COMMAND"),e7=eV("DELETE_LINE_COMMAND"),e9=eV("FORMAT_TEXT_COMMAND"),e8=eV("UNDO_COMMAND"),te=eV("REDO_COMMAND"),tt=eV("KEYDOWN_COMMAND"),tn=eV("KEY_ARROW_RIGHT_COMMAND"),tr=eV("MOVE_TO_END"),ti=eV("KEY_ARROW_LEFT_COMMAND"),tl=eV("MOVE_TO_START"),ts=eV("KEY_ARROW_UP_COMMAND"),to=eV("KEY_ARROW_DOWN_COMMAND"),ta=eV("KEY_ENTER_COMMAND"),tu=eV("KEY_SPACE_COMMAND"),td=eV("KEY_BACKSPACE_COMMAND"),tc=eV("KEY_ESCAPE_COMMAND"),tf=eV("KEY_DELETE_COMMAND"),th=eV("KEY_TAB_COMMAND"),tg=eV("INSERT_TAB_COMMAND"),tp=eV("INDENT_CONTENT_COMMAND"),tm=eV("OUTDENT_CONTENT_COMMAND"),t_=eV("DROP_COMMAND"),ty=eV("FORMAT_ELEMENT_COMMAND"),tx=eV("DRAGSTART_COMMAND"),tv=eV("DRAGOVER_COMMAND"),tS=eV("DRAGEND_COMMAND"),tC=eV("COPY_COMMAND"),tb=eV("CUT_COMMAND"),tN=eV("SELECT_ALL_COMMAND"),tk=eV("CLEAR_EDITOR_COMMAND"),tT=eV("CLEAR_HISTORY_COMMAND"),tw=eV("CAN_REDO_COMMAND"),tE=eV("CAN_UNDO_COMMAND"),tO=eV("FOCUS_COMMAND"),tM=eV("BLUR_COMMAND"),tA=eV("KEY_MODIFIER_COMMAND"),tD=Object.freeze({}),tP=[["keydown",function(e,t){tL=e.timeStamp,tF=e.key,t.isComposing()||iE(t,tt,e)}],["pointerdown",function(e,t){let n=e.target,r=e.pointerType;iJ(n)&&"touch"!==r&&"pen"!==r&&0===e.button&&rS(t,()=>{rE(ir(n))||(tK=!0)})}],["compositionstart",function(e,t){iE(t,eZ,e)}],["compositionend",function(e,t){D?tU=!0:!F&&(L||z)?(tJ=!0,t$=e.data):iE(t,eQ,e)}],["input",function(e,t){e.stopPropagation(),rS(t,()=>{t.dispatchCommand(eX,e)},{event:e}),tR=null}],["click",function(e,t){rS(t,()=>{let n=n1(),r=iK(iF(t)),i=n2();if(r){if(nj(n)){let t=n.anchor,l=t.getNode();if("element"===t.type&&0===t.offset&&n.isCollapsed()&&!rM(l)&&1===is().getChildrenSize()&&l.getTopLevelElementOrThrow().isEmpty()&&null!==i&&n.is(i))r.removeAllRanges(),n.dirty=!0;else if(3===e.detail&&!n.isCollapsed()&&l!==n.focus.getNode()){let e=i2(l,e=>rk(e)&&!e.isInline());rk(e)&&e.select(0)}}else if("touch"===e.pointerType||"pen"===e.pointerType){let n=r.anchorNode;(iU(n)||r0(n))&&ia(n0(i,r,t,e))}}iE(t,eY,e)})}],["cut",tD],["copy",tD],["dragstart",tD],["dragover",tD],["dragend",tD],["paste",tD],["focus",tD],["blur",tD],["drop",tD]];P&&tP.push(["beforeinput",(e,t)=>{let n;"deleteCompositionText"===(n=e.inputType)||D&&iw(t)||"insertCompositionText"!==n&&iE(t,eG,e)}]);let tL=0,tF=null,tI=0,tR=null,tj=new WeakMap,tz=new WeakMap,tB=!1,tK=!1,tW=!1,tU=!1,tJ=!1,t$="",tV=null,tH=[0,"",0,"root",0];function tq(e,t,n,r,i){let l=e.anchor,s=e.focus,o=l.getNode(),a=rd(),u=iK(iF(a)),d=null!==u?u.anchorNode:null,c=l.key,f=a.getElementByKey(c),h=n.length;return c!==s.key||!nE(o)||(!i&&(!P||tI<r+50)||o.isDirty()&&h<2||id(n))&&l.offset!==s.offset&&!o.isComposing()||rQ(o)||o.isDirty()&&h>1||(i||!P)&&null!==f&&!o.isComposing()&&d!==r2(f)||null!==u&&null!==t&&(!t.collapsed||t.startContainer!==u.anchorNode||t.startOffset!==u.anchorOffset)||o.getFormat()!==e.format||o.getStyle()!==e.style||function(e,t){let n;if(t.isSegmented())return!0;if(!e.isCollapsed())return!1;let r=e.anchor.offset,i=t.getParentOrThrow(),l=rZ(t);return 0===r?!t.canInsertTextBefore()||!i.canInsertTextBefore()&&!t.isComposing()||l||(nE(n=t.getPreviousSibling())||rk(n)&&n.isInline())&&!n.canInsertTextAfter():r===t.getTextContentSize()&&(!t.canInsertTextAfter()||!i.canInsertTextAfter()&&!t.isComposing()||l)}(e,o)}function tY(e,t){return r0(e)&&null!==e.nodeValue&&0!==t&&t!==e.nodeValue.length}function tG(e,t,n){let{anchorNode:r,anchorOffset:i,focusNode:l,focusOffset:s}=e;tB&&(tB=!1,tY(r,i)&&tY(l,s)&&!tV)||rS(t,()=>{if(!n)return void ia(null);if(!rq(t,r,l))return;let o=n1();if(tV&&nj(o)&&o.isCollapsed()){let e=o.anchor,t=tV.anchor;(e.key===t.key&&e.offset===t.offset+1||1===e.offset&&t.getNode().is(e.getNode().getPreviousSibling()))&&ia(o=tV.clone())}if(tV=null,nj(o)){let n=o.anchor,r=n.getNode();if(o.isCollapsed()){"Range"===e.type&&e.anchorNode===e.focusNode&&(o.dirty=!0);let i=iF(t).event,l=i?i.timeStamp:performance.now(),[s,a,u,d,c]=tH,f=is(),h=!1===t.isComposing()&&""===f.getTextContent();if(l<c+200&&n.offset===u&&n.key===d)tX(o,s,a);else if("text"===n.type)nE(r)||w(141),tZ(o,r);else if("element"===n.type&&!h){rk(r)||w(259);let e=n.getNode();e.isEmpty()?tX(o,e.getTextFormat(),e.getTextStyle()):tX(o,0,"")}}else{let e=n.key,t=o.focus.key,r=o.getNodes(),l=r.length,a=o.isBackward(),u=a?s:i,d=a?i:s,c=a?t:e,f=a?e:t,h=2047,g=!1;for(let e=0;e<l;e++){let t=r[e],n=t.getTextContentSize();if(nE(t)&&0!==n&&(0!==e||t.__key!==c||u!==n)&&(e!==l-1||t.__key!==f||0!==d)&&(g=!0,0==(h&=t.getFormat())))break}o.format=g?h:0}}iE(t,eH,void 0)})}function tX(e,t,n){e.format===t&&e.style===n||(e.format=t,e.style=n,e.dirty=!0)}function tZ(e,t){tX(e,t.getFormat(),t.getStyle())}function tQ(e){if(!e.getTargetRanges)return null;let t=e.getTargetRanges();return 0===t.length?null:t[0]}function t0(e){var t;let n=e.inputType,r=tQ(e),i=rd(),l=n1();if("deleteContentBackward"===n){if(null===l){let e=n2();if(!nj(e))return!0;ia(e.clone())}if(nj(l)){let n=l.anchor.key===l.focus.key;if(t=e.timeStamp,"MediaLast"===tF&&t<tL+30&&i.isComposing()&&n){if(r7(null),tL=0,setTimeout(()=>{rS(i,()=>{r7(null)})},30),nj(l)){let e=l.anchor.getNode();e.markDirty(),nE(e)||w(142),tZ(l,e)}}else{r7(null),e.preventDefault();let t=l.anchor.getNode(),r=t.getTextContent(),s=t.canInsertTextAfter(),o=0===l.anchor.offset&&l.focus.offset===r.length,a=j&&n&&!o&&s;if(a&&l.isCollapsed()&&(a=!rE(iT(l.anchor,!0))),!a){iE(i,e0,!0);let e=n1();j&&nj(e)&&e.isCollapsed()&&(tV=e,setTimeout(()=>tV=null))}}return!0}}if(!nj(l))return!0;let s=e.data;null!==tR&&ip(!1,i,tR),l.dirty&&null===tR||!l.isCollapsed()||rM(l.anchor.getNode())||null===r||l.applyDOMRange(r),tR=null;let o=l.anchor,a=l.focus,u=o.getNode(),d=a.getNode();if("insertText"===n||"insertTranspose"===n){if("\n"===s)e.preventDefault(),iE(i,e1,!1);else if("\n\n"===s)e.preventDefault(),iE(i,e2,void 0);else if(null==s&&e.dataTransfer){let t=e.dataTransfer.getData("text/plain");e.preventDefault(),l.insertRawText(t)}else null!=s&&tq(l,r,s,e.timeStamp,!0)?(e.preventDefault(),iE(i,e3,s)):tR=s;return tI=e.timeStamp,!0}switch(e.preventDefault(),n){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":iE(i,e3,e);break;case"insertFromComposition":r7(null),iE(i,e3,e);break;case"insertLineBreak":r7(null),iE(i,e1,!1);break;case"insertParagraph":r7(null),tW&&!F?(tW=!1,iE(i,e1,!1)):iE(i,e2,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":iE(i,e4,e);break;case"deleteByComposition":(u!==d||rk(u)||rk(d)||!rZ(u)||!rZ(d))&&iE(i,e6,e);break;case"deleteByDrag":case"deleteByCut":iE(i,e6,e);break;case"deleteContent":iE(i,e0,!1);break;case"deleteWordBackward":iE(i,e5,!0);break;case"deleteWordForward":iE(i,e5,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":iE(i,e7,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":iE(i,e7,!1);break;case"formatStrikeThrough":iE(i,e9,"strikethrough");break;case"formatBold":iE(i,e9,"bold");break;case"formatItalic":iE(i,e9,"italic");break;case"formatUnderline":iE(i,e9,"underline");break;case"historyUndo":iE(i,e8,void 0);break;case"historyRedo":iE(i,te,void 0)}return!0}function t1(e){if(iU(e.target)&&rE(ir(e.target)))return!0;let t=rd(),n=n1(),r=e.data,i=tQ(e);if(null!=r&&nj(n)&&tq(n,i,r,e.timeStamp,!1)){tU&&(t4(t,r),tU=!1);let i=n.anchor.getNode(),l=iK(iF(t));if(null===l)return!0;let s=n.isBackward(),o=s?n.anchor.offset:n.focus.offset,a=s?n.focus.offset:n.anchor.offset;P&&!n.isCollapsed()&&nE(i)&&null!==l.anchorNode&&i.getTextContent().slice(0,o)+r+i.getTextContent().slice(o+a)===ig(l.anchorNode)||iE(t,e3,r);let u=r.length;D&&u>1&&"insertCompositionText"===e.inputType&&!t.isComposing()&&(n.anchor.offset-=u),L||F||z||!t.isComposing()||(tL=0,r7(null))}else ip(!1,t,null!==r?r:void 0),tU&&(t4(t,r||void 0),tU=!1);return ro(),er(rd()),!0}function t2(e){let t=rd(),n=n1();if(nj(n)&&!t.isComposing()){let r=n.anchor,i=n.anchor.getNode();r7(r.key),(e.timeStamp<tL+30||"element"===r.type||!n.isCollapsed()||i.getFormat()!==n.format||nE(i)&&i.getStyle()!==n.style)&&iE(t,e3,W)}return!0}function t3(e){return t4(rd(),e.data),!0}function t4(e,t){let n=e._compositionKey;if(r7(null),null!==n&&null!=t){if(""===t){let t=r8(n),r=r2(e.getElementByKey(n));return void(null!==r&&null!==r.nodeValue&&nE(t)&&im(t,r.nodeValue,null,null,!0))}if("\n"===t[t.length-1]){let t=n1();if(nj(t)){let n=t.focus;return t.anchor.set(n.key,n.offset,n.type),void iE(e,ta,null)}}}ip(!0,e,t)}function t6(e){let t=rd();if(null==e.key)return!0;if(tJ&&iC(e))return rS(t,()=>{t4(t,t$)}),tJ=!1,t$="",!0;if(ix(e,"ArrowRight",{shiftKey:"any"}))iE(t,tn,e);else if(ix(e,"ArrowRight",iv))iE(t,tr,e);else if(ix(e,"ArrowLeft",{shiftKey:"any"}))iE(t,ti,e);else if(ix(e,"ArrowLeft",iv))iE(t,tl,e);else if(ix(e,"ArrowUp",{altKey:"any",shiftKey:"any"}))iE(t,ts,e);else if(ix(e,"ArrowDown",{altKey:"any",shiftKey:"any"}))iE(t,to,e);else if(ix(e,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0}))tW=!0,iE(t,ta,e);else if(" "===e.key)iE(t,tu,e);else if(A&&ix(e,"o",{ctrlKey:!0}))e.preventDefault(),tW=!0,iE(t,e1,!0);else if(ix(e,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"}))tW=!1,iE(t,ta,e);else if(ix(e,"Backspace",{shiftKey:"any"})||A&&ix(e,"h",{ctrlKey:!0}))iC(e)?iE(t,td,e):(e.preventDefault(),iE(t,e0,!0));else if("Escape"===e.key)iE(t,tc,e);else if(ix(e,"Delete",{})||A&&ix(e,"d",{ctrlKey:!0}))"Delete"!==e.key?(e.preventDefault(),iE(t,e0,!1)):iE(t,tf,e);else if(ix(e,"Backspace",iS))e.preventDefault(),iE(t,e5,!0);else if(ix(e,"Delete",iS))e.preventDefault(),iE(t,e5,!1);else if(A&&ix(e,"Backspace",{metaKey:!0}))e.preventDefault(),iE(t,e7,!0);else if(A&&(ix(e,"Delete",{metaKey:!0})||ix(e,"k",{ctrlKey:!0})))e.preventDefault(),iE(t,e7,!1);else if(ix(e,"b",iv))e.preventDefault(),iE(t,e9,"bold");else if(ix(e,"u",iv))e.preventDefault(),iE(t,e9,"underline");else if(ix(e,"i",iv))e.preventDefault(),iE(t,e9,"italic");else if(ix(e,"Tab",{shiftKey:"any"}))iE(t,th,e);else if(ix(e,"z",iv))e.preventDefault(),iE(t,e8,void 0);else if(A?ix(e,"z",{metaKey:!0,shiftKey:!0}):ix(e,"y",{ctrlKey:!0})||ix(e,"z",{ctrlKey:!0,shiftKey:!0}))e.preventDefault(),iE(t,te,void 0);else{let n=t._editorState._selection;null===n||nj(n)?ix(e,"a",iv)&&(e.preventDefault(),iE(t,tN,e)):ix(e,"c",iv)?(e.preventDefault(),iE(t,tC,e)):ix(e,"x",iv)?(e.preventDefault(),iE(t,tb,e)):ix(e,"a",iv)&&(e.preventDefault(),iE(t,tN,e))}return(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)&&t.dispatchCommand(tA,e),!0}function t5(e){let t=e.__lexicalEventHandles;return void 0===t&&(e.__lexicalEventHandles=t=[]),t}let t7=new Map;function t9(e){let t,n=(t=iL(e.target))?t.getSelection():null;if(null===n)return;let r=rG(n.anchorNode);if(null===r)return;tK&&(tK=!1,rS(r,()=>{let t=n2(),i=n.anchorNode;(iU(i)||r0(i))&&ia(n0(t,n,r,e))}));let i=ic(r),l=i[i.length-1],s=l._key,o=t7.get(s),a=o||l;a!==r&&tG(n,a,!1),tG(n,r,!0),r!==l?t7.set(s,r):o&&t7.delete(s)}function t8(e){e._lexicalHandled=!0}function ne(e){return!0===e._lexicalHandled}let nt=()=>{};function nn(e,t,n){ro();let r=e.__key,i=e.getParent();if(null===i)return;let l=function(e){let t=n1();if(!nj(t)||!rk(e))return t;let{anchor:n,focus:r}=t,i=n.getNode(),l=r.getNode();return iP(i,e)&&n.set(e.__key,0,"element"),iP(l,e)&&r.set(e.__key,0,"element"),t}(e),s=!1;if(nj(l)&&t){let t=l.anchor,n=l.focus;t.key===r&&(n6(t,e,i,e.getPreviousSibling(),e.getNextSibling()),s=!0),n.key===r&&(n6(n,e,i,e.getPreviousSibling(),e.getNextSibling()),s=!0)}else nB(l)&&t&&e.isSelected()&&e.selectPrevious();if(nj(l)&&t&&!s){let t=e.getIndexWithinParent();r6(e),n3(l,i,t,-1)}else r6(e);n||iI(i)||i.canBeEmpty()||!i.isEmpty()||nn(i,t),t&&l&&rM(i)&&i.isEmpty()&&i.selectEnd()}let nr=Symbol.for("ephemeral");function ni(e){return e[nr]||!1}class nl{__type;__key;__parent;__prev;__next;__state;static getType(){let{ownNodeType:e}=i1(this);return void 0===e&&w(64,this.name),e}static clone(e){w(65,this.name)}$config(){return{}}config(e,t){let n=t.extends||Object.getPrototypeOf(this.constructor);return Object.assign(t,{extends:n,type:e}),{[e]:t}}afterCloneFrom(e){this.__key===e.__key?(this.__parent=e.__parent,this.__next=e.__next,this.__prev=e.__prev,this.__state=e.__state):e.__state&&(this.__state=e.__state.getWritable(this))}static importDOM;constructor(e){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),function(e,t){let n,r=(n=rW,rW=null,n);if(null!=(t=t||r&&r.__key))return e.__key=t;ro(),ra();let i=rd(),l=ru(),s=""+rU++;l._nodeMap.set(s,e),rk(e)?i._dirtyElements.set(s,!0):i._dirtyLeaves.add(s),i._cloneNotNeeded.add(s),i._dirtyType=1,e.__key=s}(this,e)}getType(){return this.__type}isInline(){w(137,this.constructor.name)}isAttached(){let e=this.__key;for(;null!==e;){if("root"===e)return!0;let t=r8(e);if(null===t)break;e=t.__parent}return!1}isSelected(e){let t=e||n1();if(null==t)return!1;let n=t.getNodes().some(e=>e.__key===this.__key);if(nE(this))return n;if(nj(t)&&"element"===t.anchor.type&&"element"===t.focus.type){if(t.isCollapsed())return!1;let e=this.getParent();if(rE(this)&&this.isInline()&&e){let n=t.isBackward()?t.focus:t.anchor;if(e.is(n.getNode())&&n.offset===e.getChildrenSize()&&this.is(e.getLastChild()))return!1}}return n}getKey(){return this.__key}getIndexWithinParent(){let e=this.getParent();if(null===e)return -1;let t=e.getFirstChild(),n=0;for(;null!==t;){if(this.is(t))return n;n++,t=t.getNextSibling()}return -1}getParent(){let e=this.getLatest().__parent;return null===e?null:r8(e)}getParentOrThrow(){let e=this.getParent();return null===e&&w(66,this.__key),e}getTopLevelElement(){let e=this;for(;null!==e;){let t=e.getParent();if(iI(t))return rk(e)||e===this&&rE(e)||w(194),e;e=t}return null}getTopLevelElementOrThrow(){let e=this.getTopLevelElement();return null===e&&w(67,this.__key),e}getParents(){let e=[],t=this.getParent();for(;null!==t;)e.push(t),t=t.getParent();return e}getParentKeys(){let e=[],t=this.getParent();for(;null!==t;)e.push(t.__key),t=t.getParent();return e}getPreviousSibling(){let e=this.getLatest().__prev;return null===e?null:r8(e)}getPreviousSiblings(){let e=[],t=this.getParent();if(null===t)return e;let n=t.getFirstChild();for(;null!==n&&!n.is(this);)e.push(n),n=n.getNextSibling();return e}getNextSibling(){let e=this.getLatest().__next;return null===e?null:r8(e)}getNextSiblings(){let e=[],t=this.getNextSibling();for(;null!==t;)e.push(t),t=t.getNextSibling();return e}getCommonAncestor(e){let t=rk(this)?this:this.getParent(),n=rk(e)?e:e.getParent(),r=t&&n?lx(t,n):null;return r?r.commonAncestor:null}is(e){return null!=e&&this.__key===e.__key}isBefore(e){let t=lx(this,e);return null!==t&&("descendant"===t.type||("branch"===t.type?-1===l_(t):("same"!==t.type&&"ancestor"!==t.type&&w(279),!1)))}isParentOf(e){let t=lx(this,e);return null!==t&&"ancestor"===t.type}getNodesBetween(e){let t=this.isBefore(e),n=[],r=new Set,i=this;for(;null!==i;){let l=i.__key;if(r.has(l)||(r.add(l),n.push(i)),i===e)break;let s=rk(i)?t?i.getFirstChild():i.getLastChild():null;if(null!==s){i=s;continue}let o=t?i.getNextSibling():i.getPreviousSibling();if(null!==o){i=o;continue}let a=i.getParentOrThrow();if(r.has(a.__key)||n.push(a),a===e)break;let u=null,d=a;do{if(null===d&&w(68),u=t?d.getNextSibling():d.getPreviousSibling(),null===(d=d.getParent()))break;null!==u||r.has(d.__key)||n.push(d)}while(null===u)i=u}return t||n.reverse(),n}isDirty(){let e=rd()._dirtyLeaves;return null!==e&&e.has(this.__key)}getLatest(){if(ni(this))return this;let e=r8(this.__key);return null===e&&w(113),e}getWritable(){if(ni(this))return this;ro();let e=ru(),t=rd(),n=e._nodeMap,r=this.__key,i=this.getLatest(),l=t._cloneNotNeeded,s=n1();if(null!==s&&s.setCachedNodes(null),l.has(r))return r5(i),i;let o=iZ(i);return l.add(r),r5(o),n.set(r,o),o}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(e,t){w(70)}updateDOM(e,t,n){w(71)}exportDOM(e){return{element:this.createDOM(e._config,e)}}exportJSON(){let e=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...e}}static importJSON(e){w(18,this.name)}updateFromJSON(e){return function(e,t){let n,r,i=e.getWritable(),l=t.$,s=l;for(let e of es(i).flatKeys)e in t&&(void 0!==s&&s!==l||(s={...l}),s[e]=t[e]);return(i.__state||s)&&(r=(n=e.getWritable()).__state?n.__state.getWritable(n):new el(n,es(n)),n.__state=r,r).updateFromJSON(s),i}(this,e)}static transform(){return null}remove(e){nn(this,!0,e)}replace(e,t){ro();let n=n1();null!==n&&(n=n.clone()),ij(this,e);let r=this.getLatest(),i=this.__key,l=e.__key,s=e.getWritable(),o=this.getParentOrThrow().getWritable(),a=o.__size;r6(s);let u=r.getPreviousSibling(),d=r.getNextSibling(),c=r.__prev,f=r.__next,h=r.__parent;if((nn(r,!1,!0),null===u)?o.__first=l:u.getWritable().__next=l,(s.__prev=c,null===d)?o.__last=l:d.getWritable().__prev=l,s.__next=f,s.__parent=h,o.__size=a,t&&(rk(this)&&rk(s)||w(139),this.getChildren().forEach(e=>{s.append(e)})),nj(n)){ia(n);let e=n.anchor,t=n.focus;e.key===i&&nI(e,s),t.key===i&&nI(t,s)}return r9()===i&&r7(l),s}insertAfter(e,t=!0){ro(),ij(this,e);let n=this.getWritable(),r=e.getWritable(),i=r.getParent(),l=n1(),s=!1,o=!1;if(null!==i){let t=e.getIndexWithinParent();if(r6(r),nj(l)){let e=i.__key,n=l.anchor,r=l.focus;s="element"===n.type&&n.key===e&&n.offset===t+1,o="element"===r.type&&r.key===e&&r.offset===t+1}}let a=this.getNextSibling(),u=this.getParentOrThrow().getWritable(),d=r.__key,c=n.__next;if(null===a?u.__last=d:a.getWritable().__prev=d,u.__size++,n.__next=d,r.__next=c,r.__prev=n.__key,r.__parent=n.__parent,t&&nj(l)){let e=this.getIndexWithinParent();n3(l,u,e+1);let t=u.__key;s&&l.anchor.set(t,e+2,"element"),o&&l.focus.set(t,e+2,"element")}return e}insertBefore(e,t=!0){ro(),ij(this,e);let n=this.getWritable(),r=e.getWritable(),i=r.__key;r6(r);let l=this.getPreviousSibling(),s=this.getParentOrThrow().getWritable(),o=n.__prev,a=this.getIndexWithinParent();null===l?s.__first=i:l.getWritable().__next=i,s.__size++,n.__prev=i,r.__prev=o,r.__next=n.__key,r.__parent=n.__parent;let u=n1();return t&&nj(u)&&n3(u,this.getParentOrThrow(),a),e}isParentRequired(){return!1}createParentElementNode(){return rR()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(e,t){ro();let n=this.getPreviousSibling(),r=this.getParentOrThrow();if(null===n)return r.select(0,0);if(rk(n))return n.select();if(!nE(n)){let e=n.getIndexWithinParent()+1;return r.select(e,e)}return n.select(e,t)}selectNext(e,t){ro();let n=this.getNextSibling(),r=this.getParentOrThrow();if(null===n)return r.select();if(rk(n))return n.select(0,0);if(!nE(n)){let e=n.getIndexWithinParent();return r.select(e,e)}return n.select(e,t)}markDirty(){this.getWritable()}reconcileObservedMutation(e,t){this.markDirty()}}let ns="historic",no="history-merge";class na extends nl{static getType(){return"linebreak"}static clone(e){return new na(e.__key)}constructor(e){super(e)}getTextContent(){return"\n"}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:e=>(function(e){let t=e.parentElement;if(null!==t&&iH(t)){let n=t.firstChild;if(n===e||n.nextSibling===e&&nf(n)){let n=t.lastChild;if(n===e||n.previousSibling===e&&nf(n))return!0}}return!1})(e)||function(e){let t=e.parentElement;if(null!==t&&iH(t)){let n=t.firstChild;if(n===e||n.nextSibling===e&&nf(n))return!1;let r=t.lastChild;if(r===e||r.previousSibling===e&&nf(r))return!0}return!1}(e)?null:{conversion:nu,priority:0}}}static importJSON(e){return nd().updateFromJSON(e)}}function nu(e){return{node:nd()}}function nd(){return iR(new na)}function nc(e){return e instanceof na}function nf(e){return r0(e)&&/^( |\t|\r?\n)+$/.test(e.textContent||"")}function nh(e,t){return 16&t?"code":128&t?"mark":32&t?"sub":64&t?"sup":null}function ng(e,t){return 1&t?"strong":2&t?"em":"span"}function np(e,t,n,r,i){let l=r.classList,s=ib(i,"base");void 0!==s&&l.add(...s);let o=!1,a=8&t&&4&t;for(let e in void 0!==(s=ib(i,"underlineStrikethrough"))&&(8&n&&4&n?(o=!0,a||l.add(...s)):a&&l.remove(...s)),$){let r=$[e];if(void 0!==(s=ib(i,e)))if(n&r){if(o&&("underline"===e||"strikethrough"===e)){t&r&&l.remove(...s);continue}(0==(t&r)||a&&"underline"===e||"strikethrough"===e)&&l.add(...s)}else t&r&&l.remove(...s)}}function nm(e,t,n){let r=t.firstChild,i=n.isComposing(),l=e+(i?K:"");if(null==r)t.textContent=l;else{let e=r.nodeValue;if(e!==l)if(i||D){let[t,n,i]=function(e,t){let n=e.length,r=t.length,i=0,l=0;for(;i<n&&i<r&&e[i]===t[i];)i++;for(;l+i<n&&l+i<r&&e[n-l-1]===t[r-l-1];)l++;return[i,n-i-l,t.slice(i,r-l)]}(e,l);0!==n&&r.deleteData(t,n),r.insertData(t,i)}else r.nodeValue=l}}function n_(e,t,n,r,i,l){nm(i,e,t);let s=l.theme.text;void 0!==s&&np(0,0,r,e,s)}function ny(e,t){let n=document.createElement(t);return n.appendChild(e),n}class nx extends nl{__text;__format;__style;__mode;__detail;static getType(){return"text"}static clone(e){return new nx(e.__text,e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__text=e.__text,this.__format=e.__format,this.__style=e.__style,this.__mode=e.__mode,this.__detail=e.__detail}constructor(e="",t){super(t),this.__text=e,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){return G[this.getLatest().__mode]}getStyle(){return this.getLatest().__style}isToken(){return 1===this.getLatest().__mode}isComposing(){return this.__key===r9()}isSegmented(){return 2===this.getLatest().__mode}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(e){let t=$[e];return 0!=(this.getFormat()&t)}isSimpleText(){return"text"===this.__type&&0===this.__mode}getTextContent(){return this.getLatest().__text}getFormatFlags(e,t){return r3(this.getLatest().__format,e,t)}canHaveFormat(){return!0}isInline(){return!0}createDOM(e,t){let n=this.__format,r=nh(0,n),i=ng(0,n),l=null===r?i:r,s=document.createElement(l),o=s;this.hasFormat("code")&&s.setAttribute("spellcheck","false"),null!==r&&(o=document.createElement(i),s.appendChild(o)),n_(o,this,0,n,this.__text,e);let a=this.__style;return""!==a&&(s.style.cssText=a),s}updateDOM(e,t,n){let r=this.__text,i=e.__format,l=this.__format,s=nh(0,i),o=nh(0,l),a=ng(0,i),u=ng(0,l);if((null===s?a:s)!==(null===o?u:o))return!0;if(s===o&&a!==u){let e=t.firstChild;null==e&&w(48);let i=document.createElement(u);return n_(i,this,0,l,r,n),t.replaceChild(i,e),!1}let d=t;null!==o&&null!==s&&null==(d=t.firstChild)&&w(49),nm(r,d,this);let c=n.theme.text;void 0!==c&&i!==l&&np(0,i,l,d,c);let f=e.__style,h=this.__style;return f!==h&&(t.style.cssText=h),!1}static importDOM(){return{"#text":()=>({conversion:nb,priority:0}),b:()=>({conversion:nS,priority:0}),code:()=>({conversion:nT,priority:0}),em:()=>({conversion:nT,priority:0}),i:()=>({conversion:nT,priority:0}),mark:()=>({conversion:nT,priority:0}),s:()=>({conversion:nT,priority:0}),span:()=>({conversion:nv,priority:0}),strong:()=>({conversion:nT,priority:0}),sub:()=>({conversion:nT,priority:0}),sup:()=>({conversion:nT,priority:0}),u:()=>({conversion:nT,priority:0})}}static importJSON(e){return nw().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setTextContent(e.text).setFormat(e.format).setDetail(e.detail).setMode(e.mode).setStyle(e.style)}exportDOM(e){let{element:t}=super.exportDOM(e);return iU(t)||w(132),t.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?t.style.textTransform="lowercase":this.hasFormat("uppercase")?t.style.textTransform="uppercase":this.hasFormat("capitalize")&&(t.style.textTransform="capitalize"),this.hasFormat("bold")&&(t=ny(t,"b")),this.hasFormat("italic")&&(t=ny(t,"i")),this.hasFormat("strikethrough")&&(t=ny(t,"s")),this.hasFormat("underline")&&(t=ny(t,"u")),{element:t}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(e,t){}setFormat(e){let t=this.getWritable();return t.__format="string"==typeof e?$[e]:e,t}setDetail(e){let t=this.getWritable();return t.__detail="string"==typeof e?V[e]:e,t}setStyle(e){let t=this.getWritable();return t.__style=e,t}toggleFormat(e){let t=r3(this.getFormat(),e,null);return this.setFormat(t)}toggleDirectionless(){let e=this.getWritable();return e.__detail^=1,e}toggleUnmergeable(){let e=this.getWritable();return e.__detail^=2,e}setMode(e){let t=Y[e];if(this.__mode===t)return this;let n=this.getWritable();return n.__mode=t,n}setTextContent(e){if(this.__text===e)return this;let t=this.getWritable();return t.__text=e,t}select(e,t){ro();let n=e,r=t,i=n1(),l=this.getTextContent(),s=this.__key;if("string"==typeof l){let e=l.length;void 0===n&&(n=e),void 0===r&&(r=e)}else n=0,r=0;if(!nj(i))return nX(s,n,s,r,"text","text");{let e=r9();e!==i.anchor.key&&e!==i.focus.key||r7(s),i.setTextNodeRange(this,n,this,r)}return i}selectStart(){return this.select(0,0)}selectEnd(){let e=this.getTextContentSize();return this.select(e,e)}spliceText(e,t,n,r){let i=this.getWritable(),l=i.__text,s=n.length,o=e;o<0&&(o=s+o)<0&&(o=0);let a=n1();if(r&&nj(a)){let t=e+s;a.setTextNodeRange(i,t,i,t)}return i.__text=l.slice(0,o)+n+l.slice(o+t),i}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...e){let t;ro();let n=this.getLatest(),r=n.getTextContent();if(""===r)return[];let i=n.__key,l=r9(),s=r.length;e.sort((e,t)=>e-t),e.push(s);let o=[],a=e.length;for(let t=0,n=0;t<s&&n<=a;n++){let i=e[n];i>t&&(o.push(r.slice(t,i)),t=i)}let u=o.length;if(1===u)return[n];let d=o[0],c=n.getParent(),f=n.getFormat(),h=n.getStyle(),g=n.__detail,p=!1,m=null,_=null,y=n1();if(nj(y)){let[e,t]=y.isBackward()?[y.focus,y.anchor]:[y.anchor,y.focus];"text"===e.type&&e.key===i&&(m=e),"text"===t.type&&t.key===i&&(_=t)}n.isSegmented()?((t=nw(d)).__format=f,t.__style=h,t.__detail=g,t.__state=ed(n,t),p=!0):t=n.setTextContent(d);let x=[t];for(let e=1;e<u;e++){let t=nw(o[e]);t.__format=f,t.__style=h,t.__detail=g,t.__state=ed(n,t);let r=t.__key;l===i&&r7(r),x.push(t)}let v=m?m.offset:null,S=_?_.offset:null,C=0;for(let e of x){if(!m&&!_)break;let t=C+e.getTextContentSize();if(null!==m&&null!==v&&v<=t&&v>=C&&(m.set(e.getKey(),v-C,"text"),v<t&&(m=null)),null!==_&&null!==S&&S<=t&&S>=C){_.set(e.getKey(),S-C,"text");break}C=t}if(null!==c){let e,t;e=this.getPreviousSibling(),t=this.getNextSibling(),null!==e&&r5(e),null!==t&&r5(t);let n=c.getWritable(),r=this.getIndexWithinParent();p?(n.splice(r,0,x),this.remove()):n.splice(r,1,x),nj(y)&&n3(y,c,r,u-1)}return x}mergeWithSibling(e){let t=e===this.getPreviousSibling();t||e===this.getNextSibling()||w(50);let n=this.__key,r=e.__key,i=this.__text,l=i.length;r9()===r&&r7(n);let s=n1();if(nj(s)){let i=s.anchor,o=s.focus;null!==i&&i.key===r&&n5(i,t,n,e,l),null!==o&&o.key===r&&n5(o,t,n,e,l)}let o=e.__text,a=t?o+i:i+o;this.setTextContent(a);let u=this.getWritable();return e.remove(),u}isTextEntity(){return!1}}function nv(e){return{forChild:nO(e.style),node:null}}function nS(e){let t="normal"===e.style.fontWeight;return{forChild:nO(e.style,t?void 0:"bold"),node:null}}let nC=new WeakMap;function nb(e){null===e.parentElement&&w(129);let t=e.textContent||"";if(null!==function(e){let t,n=e.parentNode,r=[e];for(;null!==n&&void 0===(t=nC.get(n))&&!function(e){if(!iU(e))return!1;if("PRE"===e.nodeName)return!0;let t=e.style.whiteSpace;return"string"==typeof t&&t.startsWith("pre")}(n);)r.push(n),n=n.parentNode;let i=void 0===t?n:t;for(let e=0;e<r.length;e++)nC.set(r[e],i);return i}(e)){let e=t.split(/(\r?\n|\t)/),n=[],r=e.length;for(let t=0;t<r;t++){let r=e[t];"\n"===r||"\r\n"===r?n.push(nd()):"	"===r?n.push(nA()):""!==r&&n.push(nw(r))}return{node:n}}if(""===(t=t.replace(/\r/g,"").replace(/[ \t\n]+/g," ")))return{node:null};if(" "===t[0]){let n=e,r=!0;for(;null!==n&&null!==(n=nN(n,!1));){let e=n.textContent||"";if(e.length>0){/[ \t\n]$/.test(e)&&(t=t.slice(1)),r=!1;break}}r&&(t=t.slice(1))}if(" "===t[t.length-1]){let n=e,r=!0;for(;null!==n&&null!==(n=nN(n,!0));)if((n.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){r=!1;break}r&&(t=t.slice(0,t.length-1))}return""===t?{node:null}:{node:nw(t)}}function nN(e,t){let n=e;for(;;){let e;for(;null===(e=t?n.nextSibling:n.previousSibling);){let e=n.parentElement;if(null===e)return null;n=e}if(iU(n=e)){let e=n.style.display;if(""===e&&!iV(n)||""!==e&&!e.startsWith("inline"))return null}let r=n;for(;null!==(r=t?n.firstChild:n.lastChild);)n=r;if(r0(n))return n;if("BR"===n.nodeName)return null}}let nk={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function nT(e){let t=nk[e.nodeName.toLowerCase()];return void 0===t?{node:null}:{forChild:nO(e.style,t),node:null}}function nw(e=""){return iR(new nx(e))}function nE(e){return e instanceof nx}function nO(e,t){let n=e.fontWeight,r=e.textDecoration.split(" "),i="700"===n||"bold"===n,l=r.includes("line-through"),s="italic"===e.fontStyle,o=r.includes("underline"),a=e.verticalAlign;return e=>(nE(e)&&(i&&!e.hasFormat("bold")&&e.toggleFormat("bold"),l&&!e.hasFormat("strikethrough")&&e.toggleFormat("strikethrough"),s&&!e.hasFormat("italic")&&e.toggleFormat("italic"),o&&!e.hasFormat("underline")&&e.toggleFormat("underline"),"sub"!==a||e.hasFormat("subscript")||e.toggleFormat("subscript"),"super"!==a||e.hasFormat("superscript")||e.toggleFormat("superscript"),t&&!e.hasFormat(t)&&e.toggleFormat(t)),e)}class nM extends nx{static getType(){return"tab"}static clone(e){return new nM(e.__key)}constructor(e){super("	",e),this.__detail=2}static importDOM(){return null}createDOM(e){let t=super.createDOM(e),n=ib(e.theme,"tab");return void 0!==n&&t.classList.add(...n),t}static importJSON(e){return nA().updateFromJSON(e)}setTextContent(e){return"	"!==e&&""!==e&&E(126),super.setTextContent("	")}spliceText(e,t,n,r){return""===n&&0===t||"	"===n&&1===t||w(286),this}setDetail(e){return 2!==e&&w(127),this}setMode(e){return"normal"!==e&&w(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function nA(){return iR(new nM)}function nD(e){return e instanceof nM}class nP{key;offset;type;_selection;constructor(e,t,n){this._selection=null,this.key=e,this.offset=t,this.type=n}is(e){return this.key===e.key&&this.offset===e.offset&&this.type===e.type}isBefore(e){return this.key===e.key?this.offset<e.offset:0>lm(lw(lv(this,"next")),lw(lv(e,"next")))}getNode(){let e=r8(this.key);return null===e&&w(20),e}set(e,t,n,r){let i=this._selection,l=this.key;r&&this.key===e&&this.offset===t&&this.type===n||(this.key=e,this.offset=t,this.type=n,rs()||(r9()===l&&r7(e),null!==i&&(i.setCachedNodes(null),i.dirty=!0)))}}function nL(e,t,n){return new nP(e,t,n)}function nF(e,t){let n=t.__key,r=e.offset,i="element";if(nE(t)){i="text";let e=t.getTextContentSize();r>e&&(r=e)}else if(!rk(t)){let e=t.getNextSibling();if(nE(e))n=e.__key,r=0,i="text";else{let e=t.getParent();e&&(n=e.__key,r=t.getIndexWithinParent()+1)}}e.set(n,r,i)}function nI(e,t){if(rk(t)){let n=t.getLastDescendant();rk(n)||nE(n)?nF(e,n):nF(e,t)}else nF(e,t)}class nR{_nodes;_cachedNodes;dirty;constructor(e){this._cachedNodes=null,this._nodes=e,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){if(!nB(e))return!1;let t=this._nodes,n=e._nodes;return t.size===n.size&&Array.from(t).every(e=>n.has(e))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(e){this.dirty=!0,this._nodes.add(e),this._cachedNodes=null}delete(e){this.dirty=!0,this._nodes.delete(e),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(e){return this._nodes.has(e)}clone(){return new nR(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(e){}insertText(){}insertNodes(e){let t,n=this.getNodes(),r=n.length,i=n[r-1];if(nE(i))t=i.select();else{let e=i.getIndexWithinParent()+1;t=i.getParentOrThrow().select(e,e)}t.insertNodes(e);for(let e=0;e<r;e++)n[e].remove()}getNodes(){let e=this._cachedNodes;if(null!==e)return e;let t=this._nodes,n=[];for(let e of t){let t=r8(e);null!==t&&n.push(t)}return rs()||(this._cachedNodes=n),n}getTextContent(){let e=this.getNodes(),t="";for(let n=0;n<e.length;n++)t+=e[n].getTextContent();return t}deleteNodes(){let e=this.getNodes();if((n1()||n2())===this&&e[0]){var t;let n,r,i=ls(e[0],"next");t=lg(i,i),lC(r=nj(n=n1())?n:nZ(),t),ia(r)}for(let t of e)t.remove()}}function nj(e){return e instanceof nz}class nz{format;style;anchor;focus;_cachedNodes;dirty;constructor(e,t,n,r){this.anchor=e,this.focus=t,e._selection=this,t._selection=this,this._cachedNodes=null,this.format=n,this.style=r,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){return!!nj(e)&&this.anchor.is(e.anchor)&&this.focus.is(e.focus)&&this.format===e.format&&this.style===e.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){let e=this._cachedNodes;if(null!==e)return e;let t=function(e){let t=[],[n,r]=e.getTextSlices();n&&t.push(n.caret.origin);let i=new Set,l=new Set;for(let n of e)if(ln(n)){let{origin:e}=n;0===t.length?i.add(e):(l.add(e),t.push(e))}else{let{origin:e}=n;rk(e)&&l.has(e)||t.push(e)}if(r&&t.push(r.caret.origin),lt(e.focus)&&rk(e.focus.origin)&&null===e.focus.getNodeAtCaret())for(let n=lu(e.focus.origin,"previous");ln(n)&&i.has(n.origin)&&!n.origin.isEmpty()&&n.origin.is(t[t.length-1]);n=ld(n))i.delete(n.origin),t.pop();for(;t.length>1;){let e=t[t.length-1];if(!rk(e)||l.has(e)||e.isEmpty()||i.has(e))break;t.pop()}if(0===t.length&&e.isCollapsed()){let n=lw(e.anchor),r=lw(e.anchor.getFlipped()),i=e=>le(e)?e.origin:e.getNodeAtCaret(),l=i(n)||i(r)||(e.anchor.getNodeAtCaret()?n.origin:r.origin);t.push(l)}return t}(lM(lb(this),"next"));return rs()||(this._cachedNodes=t),t}setTextNodeRange(e,t,n,r){this.anchor.set(e.__key,t,"text"),this.focus.set(n.__key,r,"text")}getTextContent(){let e=this.getNodes();if(0===e.length)return"";let t=e[0],n=e[e.length-1],r=this.anchor,i=this.focus,l=r.isBefore(i),[s,o]=nW(this),a="",u=!0;for(let d=0;d<e.length;d++){let c=e[d];if(rk(c)&&!c.isInline())u||(a+="\n"),u=!c.isEmpty();else if(u=!1,nE(c)){let e=c.getTextContent();c===t?c===n?"element"===r.type&&"element"===i.type&&i.offset!==r.offset||(e=s<o?e.slice(s,o):e.slice(o,s)):e=l?e.slice(s):e.slice(o):c===n&&(e=l?e.slice(0,o):e.slice(0,s)),a+=e}else!rE(c)&&!nc(c)||c===n&&this.isCollapsed()||(a+=c.getTextContent())}return a}applyDOMRange(e){let t=rd(),n=t.getEditorState()._selection,r=nY(e.startContainer,e.startOffset,e.endContainer,e.endOffset,t,n);if(null===r)return;let[i,l]=r;this.anchor.set(i.key,i.offset,i.type,!0),this.focus.set(l.key,l.offset,l.type,!0),eg(this)}clone(){let e=this.anchor,t=this.focus;return new nz(nL(e.key,e.offset,e.type),nL(t.key,t.offset,t.type),this.format,this.style)}toggleFormat(e){this.format=r3(this.format,e,null),this.dirty=!0}setFormat(e){this.format=e,this.dirty=!0}setStyle(e){this.style=e,this.dirty=!0}hasFormat(e){let t=$[e];return 0!=(this.format&t)}insertRawText(e){let t=e.split(/(\r?\n|\t)/),n=[],r=t.length;for(let e=0;e<r;e++){let r=t[e];"\n"===r||"\r\n"===r?n.push(nd()):"	"===r?n.push(nA()):n.push(nw(r))}this.insertNodes(n)}insertText(e){let t=this.anchor,n=this.focus,r=this.format,i=this.style,l=t,s=n;!this.isCollapsed()&&n.isBefore(t)&&(l=n,s=t),"element"===l.type&&function(e,t,n,r){let i=e.getNode(),l=i.getChildAtIndex(e.offset),s=nw();if(s.setFormat(n),s.setStyle(r),rj(l))l.splice(0,0,[s]);else{let e=rM(i)?rR().append(s):s;null===l?i.append(e):l.insertBefore(e)}e.is(t)&&t.set(s.__key,0,"text"),e.set(s.__key,0,"text")}(l,s,r,i),"element"===s.type&&lS(s,lw(lv(s,"next")));let o=l.offset,a=s.offset,u=this.getNodes(),d=u.length,c=u[0];nE(c)||w(26);let f=c.getTextContent().length,h=c.getParentOrThrow(),g=u[d-1];if(1===d&&"element"===s.type&&(a=f,s.set(l.key,a,"text")),this.isCollapsed()&&o===f&&(rQ(c)||!c.canInsertTextAfter()||!h.canInsertTextAfter()&&null===c.getNextSibling())){let t=c.getNextSibling();if(nE(t)&&t.canInsertTextBefore()&&!rQ(t)||((t=nw()).setFormat(r),t.setStyle(i),h.canInsertTextAfter()?c.insertAfter(t):h.insertAfter(t)),t.select(0,0),c=t,""!==e)return void this.insertText(e)}else if(this.isCollapsed()&&0===o&&(rQ(c)||!c.canInsertTextBefore()||!h.canInsertTextBefore()&&null===c.getPreviousSibling())){let t=c.getPreviousSibling();if(nE(t)&&!rQ(t)||((t=nw()).setFormat(r),h.canInsertTextBefore()?c.insertBefore(t):h.insertBefore(t)),t.select(),c=t,""!==e)return void this.insertText(e)}else if(c.isSegmented()&&o!==f){let e=nw(c.getTextContent());e.setFormat(r),c.replace(e),c=e}else if(!this.isCollapsed()&&""!==e){let t=g.getParent();if(!h.canInsertTextBefore()||!h.canInsertTextAfter()||rk(t)&&(!t.canInsertTextBefore()||!t.canInsertTextAfter()))return this.insertText(""),nq(this.anchor,this.focus,null),void this.insertText(e)}if(1===d){if(rZ(c)){let t=nw(e);return t.select(),void c.replace(t)}let t=c.getFormat(),n=c.getStyle();if(o!==a||t===r&&n===i){if(nD(c)){let t=nw(e);return t.setFormat(r),t.setStyle(i),t.select(),void c.replace(t)}}else{if(""!==c.getTextContent()){let t=nw(e);if(t.setFormat(r),t.setStyle(i),t.select(),0===o)c.insertBefore(t,!1);else{let[e]=c.splitText(o);e.insertAfter(t,!1)}return void(t.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=e.length))}c.setFormat(r),c.setStyle(i)}let l=a-o;""===(c=c.spliceText(o,l,e,!0)).getTextContent()?c.remove():"text"===this.anchor.type&&(c.isComposing()?this.anchor.offset-=e.length:(this.format=t,this.style=n))}else{let t=new Set([...c.getParentKeys(),...g.getParentKeys()]),n=rk(c)?c:c.getParentOrThrow(),r=rk(g)?g:g.getParentOrThrow(),i=g;if(!n.is(r)&&r.isInline())do i=r,r=r.getParentOrThrow();while(r.isInline())if("text"===s.type&&(0!==a||""===g.getTextContent())||"element"===s.type&&g.getIndexWithinParent()<a)if(nE(g)&&!rZ(g)&&a!==g.getTextContentSize()){if(g.isSegmented()){let e=nw(g.getTextContent());g.replace(e),g=e}rM(s.getNode())||"text"!==s.type||(g=g.spliceText(0,a,"")),t.add(g.__key)}else{let e=g.getParentOrThrow();e.canBeEmpty()||1!==e.getChildrenSize()?g.remove():e.remove()}else t.add(g.__key);let l=r.getChildren(),h=new Set(u),p=n.is(r),m=n.isInline()&&null===c.getNextSibling()?n:c;for(let e=l.length-1;e>=0;e--){let t=l[e];if(t.is(c)||rk(t)&&t.isParentOf(c))break;t.isAttached()&&(!h.has(t)||t.is(i)?p||m.insertAfter(t,!1):t.remove())}if(!p){let e=r,n=null;for(;null!==e;){let r=e.getChildren(),i=r.length;(0===i||r[i-1].is(n))&&(t.delete(e.__key),n=e),e=e.getParent()}}if(rZ(c))if(o===f)c.select();else{let t=nw(e);t.select(),c.replace(t)}else""===(c=c.spliceText(o,f-o,e,!0)).getTextContent()?c.remove():c.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=e.length);for(let e=1;e<d;e++){let n=u[e],r=n.__key;t.has(r)||n.remove()}}}removeText(){let e=n1()===this;lC(this,function(e,t="removeEmptySlices"){let n,r;if(e.isCollapsed())return e;let i="root",l="next",s=t,o=lM(e,l),a=lk(o.anchor,i),u=lk(o.focus.getFlipped(),i),d=new Set,c=[];for(let e of o.iterNodeCarets(i))if(ln(e))d.add(e.origin.getKey());else if(lt(e)){let{origin:t}=e;rk(t)&&!d.has(t.getKey())||c.push(t)}for(let e of c)e.remove();for(let e of o.getTextSlices()){if(!e)continue;let{origin:t}=e.caret,n=t.getTextContentSize(),r=lN(ls(t,l)),i=t.getMode();if(Math.abs(e.distance)===n&&"removeEmptySlices"===s||"token"===i&&0!==e.distance)r.remove();else if(0!==e.distance){s="removeEmptySlices";let t=e.removeTextSlice(),n=e.caret.origin;if("segmented"===i){let e=t.origin,n=nw(e.getTextContent()).setStyle(e.getStyle()).setFormat(e.getFormat());r.replaceOrInsert(n),t=lo(n,l,t.offset)}n.is(a[0].origin)&&(a[0]=t),n.is(u[0].origin)&&(u[0]=t.getFlipped())}}for(let e of a)if(lT(e)){n=lw(e);break}for(let e of u)if(lT(e)){r=lw(e);break}let f=function(e,t,n){let r;if(!e||!t)return null;let i=e.getParentAtCaret(),l=t.getParentAtCaret();if(!i||!l)return null;let s=i.getParents().reverse();s.push(i);let o=l.getParents().reverse();o.push(l);let a=Math.min(s.length,o.length);for(r=0;r<a&&s[r]===o[r];r++);let u=(e,t)=>{let n;for(let i=r;i<e.length;i++){let r=e[i];if(iI(r))return;!n&&t(r)&&(n=r)}return n},d=u(s,iq),c=d&&u(o,e=>n.has(e.getKey())&&iq(e));return d&&c?[d,c]:null}(n,r,d);if(f){let[e,t]=f;lu(e,"previous").splice(0,t.getChildren()),t.remove()}let h=[n,r,...a,...u].find(lT);if(h){var g;return lg(g=lO(lw(h),e.direction),g)}w(269,JSON.stringify(a.map(e=>e.origin.__key)))}(lb(this))),e&&n1()!==this&&ia(this)}formatText(e,t=null){if(this.isCollapsed())return this.toggleFormat(e),void r7(null);let n=this.getNodes(),r=[];for(let e of n)nE(e)&&r.push(e);let i=t=>{n.forEach(n=>{if(rk(n)){let r=n.getFormatFlags(e,t);n.setTextFormat(r)}})},l=r.length;if(0===l)return this.toggleFormat(e),r7(null),void i(t);let s=this.anchor,o=this.focus,a=this.isBackward(),u=a?o:s,d=a?s:o,c=0,f=r[0],h="element"===u.type?0:u.offset;if("text"===u.type&&h===f.getTextContentSize()&&(c=1,f=r[1],h=0),null==f)return;let g=f.getFormatFlags(e,t);i(g);let p=l-1,m=r[p],_="text"===d.type?d.offset:m.getTextContentSize();if(f.is(m)){if(h===_)return;if(rQ(f)||0===h&&_===f.getTextContentSize())f.setFormat(g);else{let e=f.splitText(h,_),t=0===h?e[0]:e[1];t.setFormat(g),"text"===u.type&&u.set(t.__key,0,"text"),"text"===d.type&&d.set(t.__key,_-h,"text")}return void(this.format=g)}0===h||rQ(f)||([,f]=f.splitText(h),h=0),f.setFormat(g);let y=m.getFormatFlags(e,g);_>0&&(_===m.getTextContentSize()||rQ(m)||([m]=m.splitText(_)),m.setFormat(y));for(let t=c+1;t<p;t++){let n=r[t],i=n.getFormatFlags(e,y);n.setFormat(i)}"text"===u.type&&u.set(f.__key,h,"text"),"text"===d.type&&d.set(m.__key,_,"text"),this.format=g|y}insertNodes(e){var t;if(0===e.length)return;if(this.isCollapsed()||this.removeText(),"root"===this.anchor.key){this.insertParagraph();let t=n1();return nj(t)||w(134),t.insertNodes(e)}let n=(this.isBackward()?this.focus:this.anchor).getNode(),r=i2(n,iq),i=e[e.length-1];if(rk(r)&&"__language"in r){if("__language"in e[0])this.insertText(e[0].getTextContent());else{let t=n9(this);r.splice(t,0,e),i.selectEnd()}return}if(!e.some(e=>(rk(e)||rE(e))&&!e.isInline())){rk(r)||w(211,n.constructor.name,n.getType());let t=n9(this);return r.splice(t,0,e),void i.selectEnd()}let l=function(e){let t=rR(),n=null;for(let r=0;r<e.length;r++){let i=e[r],l=nc(i);if(l||rE(i)&&i.isInline()||rk(i)&&i.isInline()||nE(i)||i.isParentRequired()){if(null===n&&(n=i.createParentElementNode(),t.append(n),l))continue;null!==n&&n.append(i)}else t.append(i),n=null}return t}(e),s=l.getLastDescendant(),o=l.getChildren(),a=rk(r)&&r.isEmpty()?null:this.insertParagraph(),u=o[o.length-1],d=o[0];rk(t=d)&&iq(t)&&!t.isEmpty()&&rk(r)&&(!r.isEmpty()||r.canMergeWhenEmpty())&&(rk(r)||w(211,n.constructor.name,n.getType()),r.append(...d.getChildren()),d=o[1]),d&&(null===r&&w(212,n.constructor.name,n.getType()),function(e,t){let n=t.getParentOrThrow().getLastChild(),r=t,i=[t];for(;r!==n;)r.getNextSibling()||w(140),i.push(r=r.getNextSibling());let l=e;for(let e of i)l=l.insertAfter(e)}(r,d));let c=i2(s,iq);a&&rk(c)&&(a.canMergeWhenEmpty()||iq(u))&&(c.append(...a.getChildren()),a.remove()),rk(r)&&r.isEmpty()&&r.remove(),s.selectEnd();let f=rk(r)?r.getLastChild():null;nc(f)&&c!==r&&f.remove()}insertParagraph(){if("root"===this.anchor.key){let e=rR();return is().splice(this.anchor.offset,0,[e]),e.select(),e}let e=n9(this),t=i2(this.anchor.getNode(),iq);rk(t)||w(213);let n=t.getChildAtIndex(e),r=n?[n,...n.getNextSiblings()]:[],i=t.insertNewAfter(this,!1);return i?(i.append(...r),i.selectStart(),i):null}insertLineBreak(e){let t=nd();if(this.insertNodes([t]),e){let e=t.getParentOrThrow(),n=t.getIndexWithinParent();e.select(n,n)}}extract(){let e=[...this.getNodes()],t=e.length,n=e[0],r=e[t-1],[i,l]=nW(this),s=this.isBackward(),[o,a]=s?[this.focus,this.anchor]:[this.anchor,this.focus],[u,d]=s?[l,i]:[i,l];if(0===t)return[];if(1===t){if(nE(n)&&!this.isCollapsed()){let e=n.splitText(u,d),t=0===u?e[0]:e[1];return t?(o.set(t.getKey(),0,"text"),a.set(t.getKey(),t.getTextContentSize(),"text"),[t]):[]}return[n]}if(nE(n)&&(u===n.getTextContentSize()?e.shift():0!==u&&([,n]=n.splitText(u),e[0]=n,o.set(n.getKey(),0,"text"))),nE(r)){let t=r.getTextContent().length;0===d?e.pop():d!==t&&([r]=r.splitText(d),e[e.length-1]=r,a.set(r.getKey(),r.getTextContentSize(),"text"))}return e}modify(e,t,n){var r;if(n8(this,e,t,n))return;let i="move"===e,l=rd(),s=iK(iF(l));if(!s)return;let o=l._blockCursorElement,a=l._rootElement,u=this.focus.getNode();if(null===a||null===o||!rk(u)||u.isInline()||u.canBeEmpty()||iB(o,l,a),this.dirty){let e=iM(l,this.anchor.key),t=iM(l,this.focus.key);"text"===this.anchor.type&&(e=r2(e)),"text"===this.focus.type&&(t=r2(t)),e&&t&&n7(s,e,this.anchor.offset,t,this.focus.offset)}if(r=t?"backward":"forward",s.modify(e,r,n),s.rangeCount>0){let e=s.getRangeAt(0),n=this.anchor.getNode(),r=rM(n)?n:function(e){let t=e.getParentOrThrow();for(;null!==t&&!iI(t);)t=t.getParentOrThrow();return t}(n);if(this.applyDOMRange(e),this.dirty=!0,!i){let n,i,l,o,a,u=this.getNodes(),d=[],c=!1;for(let e=0;e<u.length;e++){let t=u[e];iP(t,r)?d.push(t):c=!0}if(c&&d.length>0)if(t){let e=d[0];rk(e)?e.selectStart():e.getParentOrThrow().selectStart()}else{let e=d[d.length-1];rk(e)?e.selectEnd():e.getParentOrThrow().selectEnd()}s.anchorNode===e.startContainer&&s.anchorOffset===e.startOffset||(n=this.focus,l=(i=this.anchor).key,o=i.offset,a=i.type,i.set(n.key,n.offset,n.type,!0),n.set(l,o,a,!0))}}"lineboundary"===n&&n8(this,e,t,n,"decorators")}forwardDeletion(e,t,n){if(!n&&("element"===e.type&&rk(t)&&e.offset===t.getChildrenSize()||"text"===e.type&&e.offset===t.getTextContentSize())){let e=t.getParent(),n=t.getNextSibling()||(null===e?null:e.getNextSibling());if(rk(n)&&n.isShadowRoot())return!0}return!1}deleteCharacter(e){let t=this.isCollapsed();if(this.isCollapsed()){let t=this.anchor,n=t.getNode();if(this.forwardDeletion(t,n,e))return;let r=lh(lv(t,e?"previous":"next"));if(r.getTextSlices().every(e=>null===e||0===e.distance)){let e={type:"initial"};for(let t of r.iterNodeCarets("shadowRoot"))if(ln(t))if(t.origin.isInline());else{if(t.origin.isShadowRoot()){if("merge-block"===e.type)break;if(rk(r.anchor.origin)&&r.anchor.origin.isEmpty()){let e=lw(t);lC(this,lg(e,e)),r.anchor.origin.remove()}return}"merge-next-block"!==e.type&&"merge-block"!==e.type||(e={block:e.block,caret:t,type:"merge-block"})}else{if("merge-block"===e.type)break;if(lt(t)){if(rk(t.origin)){if(t.origin.isInline()){if(!t.origin.isParentOf(r.anchor.origin))break}else e={block:t.origin,type:"merge-next-block"};continue}if(rE(t.origin)){if(t.origin.isIsolated());else if("merge-next-block"===e.type&&(t.origin.isKeyboardSelectable()||!t.origin.isInline())&&rk(r.anchor.origin)&&r.anchor.origin.isEmpty()){r.anchor.origin.remove();let e=nQ();e.add(t.origin.getKey()),ia(e)}else t.origin.remove();return}break}}if("merge-block"===e.type){let{caret:t,block:n}=e;return lC(this,lg(!t.origin.isEmpty()&&n.isEmpty()?lN(ls(n,t.direction)):r.anchor,t)),this.removeText()}}let i=this.focus;if(this.modify("extend",e,"character"),this.isCollapsed()){if(e&&0===t.offset&&nU(this,t.getNode()))return}else{let r="text"===i.type?i.getNode():null;if(n="text"===t.type?t.getNode():null,null!==r&&r.isSegmented()){let t=i.offset,l=r.getTextContentSize();if(r.is(n)||e&&t!==l||!e&&0!==t)return void n$(r,e,t)}else if(null!==n&&n.isSegmented()){let i=t.offset,l=n.getTextContentSize();if(n.is(r)||e&&0!==i||!e&&i!==l)return void n$(n,e,i)}!function(e,t){let n=e.anchor,r=e.focus,i=n.getNode();if(i===r.getNode()&&"text"===n.type&&"text"===r.type){var l;let e=n.offset,s=r.offset,o=e<s,a=o?e:s,u=o?s:e,d=u-1;a===d||id(l=i.getTextContent().slice(a,u))||nJ(l)||(t?r.set(r.key,d,r.type):n.set(n.key,d,n.type))}}(this,e)}}if(this.removeText(),e&&!t&&this.isCollapsed()&&"element"===this.anchor.type&&0===this.anchor.offset){let e=this.anchor.getNode();e.isEmpty()&&rM(e.getParent())&&null===e.getPreviousSibling()&&nU(this,e)}}deleteLine(e){this.isCollapsed()&&this.modify("extend",e,"lineboundary"),this.isCollapsed()?this.deleteCharacter(e):this.removeText()}deleteWord(e){if(this.isCollapsed()){let t=this.anchor,n=t.getNode();if(this.forwardDeletion(t,n,e))return;this.modify("extend",e,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function nB(e){return e instanceof nR}function nK(e){let t=e.offset;if("text"===e.type)return t;let n=e.getNode();return t===n.getChildrenSize()?n.getTextContent().length:0}function nW(e){let t=e.getStartEndPoints();if(null===t)return[0,0];let[n,r]=t;return"element"===n.type&&"element"===r.type&&n.key===r.key&&n.offset===r.offset?[0,0]:[nK(n),nK(r)]}function nU(e,t){for(let n=t;n;n=n.getParent()){if(rk(n)){if(n.collapseAtStart(e))return!0;if(iI(n))break}if(n.getPreviousSibling())break}return!1}let nJ=(()=>{try{let e=RegExp("\\p{Emoji}","u"),t=e.test.bind(e);if(t("❤️")&&t("#️⃣")&&t("👍"))return t}catch(e){}return()=>!1})();function n$(e,t,n){let r=e.getTextContent().split(/(?=\s)/g),i=r.length,l=0,s=0;for(let e=0;e<i;e++){let o=e===i-1;if(s=l,l+=r[e].length,t&&l===n||l>n||o){r.splice(e,1),o&&(s=void 0);break}}let o=r.join("").trim();""===o?e.remove():(e.setTextContent(o),e.select(s,s))}function nV(e,t,n,r){let i,l=t;if(iU(e)){let s=!1,o=e.childNodes,a=o.length,u=r._blockCursorElement;l===a&&(s=!0,l=a-1);let d=o[l],c=!1;if(d===u)d=o[l+1],c=!0;else if(null!==u){let n=u.parentNode;e===n&&t>Array.prototype.indexOf.call(n.children,u)&&l--}if(nE(i=iu(d)))l=la(i,s?"next":"previous");else{let o=iu(e);if(null===o)return null;if(rk(o)){let a,u=r.getElementByKey(o.getKey());null===u&&w(214);let d=o.getDOMSlot(u);[o,l]=d.resolveChildIndex(o,u,e,t),rk(o)||w(215),s&&l>=o.getChildrenSize()&&(l=Math.max(0,o.getChildrenSize()-1));let f=o.getChildAtIndex(l);if(rk(f)&&(a=f.getParent(),null===n||null===a||!a.canBeEmpty()||a!==n.getNode())){let e=s?f.getLastDescendant():f.getFirstDescendant();o=null===e||rk(f=e)?f:f.getParentOrThrow(),l=0}nE(f)?(i=f,o=null,l=la(f,s?"next":"previous")):f!==o&&s&&!c&&(rk(o)||w(216),l=Math.min(o.getChildrenSize(),l+1))}else{let n=o.getIndexWithinParent();l=0===t&&rE(o)&&iu(e)===o?n:n+1,o=o.getParentOrThrow()}if(rk(o))return nL(o.__key,l,"element")}}else i=iu(e);return nE(i)?nL(i.__key,la(i,l,"clamp"),"text"):null}function nH(e,t,n){let r=e.offset,i=e.getNode();if(0===r){let r=i.getPreviousSibling(),l=i.getParent();if(t){if((n||!t)&&null===r&&rk(l)&&l.isInline()){let t=l.getPreviousSibling();nE(t)&&e.set(t.__key,t.getTextContent().length,"text")}}else rk(r)&&!n&&r.isInline()?e.set(r.__key,r.getChildrenSize(),"element"):nE(r)&&e.set(r.__key,r.getTextContent().length,"text")}else if(r===i.getTextContent().length){let r=i.getNextSibling(),l=i.getParent();if(t&&rk(r)&&r.isInline())e.set(r.__key,0,"element");else if((n||t)&&null===r&&rk(l)&&l.isInline()&&!l.canInsertTextAfter()){let t=l.getNextSibling();nE(t)&&e.set(t.__key,0,"text")}}}function nq(e,t,n){if("text"===e.type&&"text"===t.type){let r=e.isBefore(t),i=e.is(t);nH(e,r,i),nH(t,!r,i),i&&t.set(e.key,e.offset,e.type);let l=rd();if(l.isComposing()&&l._compositionKey!==e.key&&nj(n)){let r=n.anchor,i=n.focus;e.set(r.key,r.offset,r.type,!0),t.set(i.key,i.offset,i.type,!0)}}}function nY(e,t,n,r,i,l){if(null===e||null===n||!rq(i,e,n))return null;let s=nV(e,t,nj(l)?l.anchor:null,i);if(null===s)return null;let o=nV(n,r,nj(l)?l.focus:null,i);if(null===o)return null;if("element"===s.type&&"element"===o.type){let t=iu(e),r=iu(n);if(rE(t)&&rE(r))return null}return nq(s,o,l),[s,o]}function nG(e){return rk(e)&&!e.isInline()}function nX(e,t,n,r,i,l){let s=ru(),o=new nz(nL(e,t,i),nL(n,r,l),0,"");return o.dirty=!0,s._selection=o,o}function nZ(){return new nz(nL("root",0,"element"),nL("root",0,"element"),0,"")}function nQ(){return new nR(new Set)}function n0(e,t,n,r){let i,l,s,o,a=n._window;if(null===a)return null;let u=r||a.event,d=u?u.type:void 0,c="selectionchange"===d,f=!Z&&(c||"beforeinput"===d||"compositionstart"===d||"compositionend"===d||"click"===d&&u&&3===u.detail||"drop"===d||void 0===d);if(nj(e)&&!f)return e.clone();if(null===t)return null;if(i=t.anchorNode,l=t.focusNode,s=t.anchorOffset,o=t.focusOffset,(c||void 0===d)&&nj(e)&&!rq(n,i,l))return e.clone();let h=nY(i,s,l,o,n,e);if(null===h)return null;let[g,p]=h;return new nz(g,p,nj(e)?e.format:0,nj(e)?e.style:"")}function n1(){return ru()._selection}function n2(){return rd()._editorState._selection}function n3(e,t,n,r=1){let i=e.anchor,l=e.focus,s=i.getNode(),o=l.getNode();if(!t.is(s)&&!t.is(o))return;let a=t.__key;if(e.isCollapsed()){let t=i.offset;if(n<=t&&r>0||n<t&&r<0){let n=Math.max(0,t+r);i.set(a,n,"element"),l.set(a,n,"element"),n4(e)}}else{let s=e.isBackward(),o=s?l:i,u=o.getNode(),d=s?i:l,c=d.getNode();if(t.is(u)){let e=o.offset;(n<=e&&r>0||n<e&&r<0)&&o.set(a,Math.max(0,e+r),"element")}if(t.is(c)){let e=d.offset;(n<=e&&r>0||n<e&&r<0)&&d.set(a,Math.max(0,e+r),"element")}}n4(e)}function n4(e){let t=e.anchor,n=t.offset,r=e.focus,i=r.offset,l=t.getNode(),s=r.getNode();if(e.isCollapsed()){if(!rk(l))return;let e=l.getChildrenSize(),i=n>=e,s=i?l.getChildAtIndex(e-1):l.getChildAtIndex(n);if(nE(s)){let e=0;i&&(e=s.getTextContentSize()),t.set(s.__key,e,"text"),r.set(s.__key,e,"text")}return}if(rk(l)){let e=l.getChildrenSize(),r=n>=e,i=r?l.getChildAtIndex(e-1):l.getChildAtIndex(n);if(nE(i)){let e=0;r&&(e=i.getTextContentSize()),t.set(i.__key,e,"text")}}if(rk(s)){let e=s.getChildrenSize(),t=i>=e,n=t?s.getChildAtIndex(e-1):s.getChildAtIndex(i);if(nE(n)){let e=0;t&&(e=n.getTextContentSize()),r.set(n.__key,e,"text")}}}function n6(e,t,n,r,i){let l=null,s=0,o=null;null!==r?(l=r.__key,nE(r)?(s=r.getTextContentSize(),o="text"):rk(r)&&(s=r.getChildrenSize(),o="element")):null!==i&&(l=i.__key,nE(i)?o="text":rk(i)&&(o="element")),null!==l&&null!==o?e.set(l,s,o):(-1===(s=t.getIndexWithinParent())&&(s=n.getChildrenSize()),e.set(n.__key,s,"element"))}function n5(e,t,n,r,i){"text"===e.type?e.set(n,e.offset+(t?0:i),"text"):e.offset>r.getIndexWithinParent()&&e.set(e.key,e.offset-1,"element")}function n7(e,t,n,r,i){try{e.setBaseAndExtent(t,n,r,i)}catch(e){}}function n9(e){let t=e;e.isCollapsed()||t.removeText();let n=n1();nj(n)&&(t=n),nj(t)||w(161);let r=t.anchor,i=r.getNode(),l=r.offset;for(;!iq(i);){let e=i;if([i,l]=function(e,t){let n=e.getParent();if(!n){let e=rR();return is().append(e),e.select(),[is(),0]}if(nE(e)){let r=e.splitText(t);if(0===r.length)return[n,e.getIndexWithinParent()];let i=+(0!==t);return[n,r[0].getIndexWithinParent()+i]}if(!rk(e)||0===t)return[n,e.getIndexWithinParent()];let r=e.getChildAtIndex(t);if(r){let n=new nz(nL(e.__key,t,"element"),nL(e.__key,t,"element"),0,""),i=e.insertNewAfter(n);i&&i.append(r,...r.getNextSiblings())}return[n,e.getIndexWithinParent()+1]}(i,l),e.is(i))break}return l}function n8(e,t,n,r,i="decorators-and-blocks"){if("move"===t&&"character"===r&&!e.isCollapsed()){let[t,r]=n===e.isBackward()?[e.focus,e.anchor]:[e.anchor,e.focus];return r.set(t.key,t.offset,t.type),!0}let l=lv(e.focus,n?"previous":"next"),s="lineboundary"===r,o="move"===t,a=l,u="decorators-and-blocks"===i;if(!lE(a)){for(let e of a){u=!1;let{origin:t}=e;if(!rE(t)||t.isIsolated()||(a=e,!s||!t.isInline()))break}if(u)for(let e of lh(l).iterNodeCarets("extend"===t?"shadowRoot":"root")){if(ln(e))e.origin.isInline()||(a=e);else{if(rk(e.origin))continue;rE(e.origin)&&!e.origin.isInline()&&(a=e)}break}}if(a===l)return!1;if(o&&!s&&rE(a.origin)&&a.origin.isKeyboardSelectable()){let e=nQ();return e.add(a.origin.getKey()),ia(e),!0}return a=lw(a),o&&lS(e.anchor,a),lS(e.focus,a),u||!s}let re=null,rt=null,rn=!1,rr=!1,ri=0,rl={characterData:!0,childList:!0,subtree:!0};function rs(){return rn||null!==re&&re._readOnly}function ro(){rn&&w(13)}function ra(){ri>99&&w(14)}function ru(){return null===re&&w(195,rc()),re}function rd(){return null===rt&&w(196,rc()),rt}function rc(){let e=0,t=new Set,n=rK.version;if("undefined"!=typeof window)for(let r of document.querySelectorAll("[contenteditable]")){let i=rX(r);if(rY(i))e++;else if(i){let e=String(i.constructor.version||"<0.17.1");e===n&&(e+=" (separately built, likely a bundler configuration issue)"),t.add(e)}}let r=` Detected on the page: ${e} compatible editor(s) with version ${n}`;return t.size&&(r+=` and incompatible editors with versions ${Array.from(t).join(", ")}`),r}function rf(e,t,n){let r=t.__type,i=rJ(e,r),l=n.get(r);void 0===l&&(l=Array.from(i.transforms),n.set(r,l));let s=l.length;for(let e=0;e<s&&(l[e](t),t.isAttached());e++);}function rh(e,t){return void 0!==e&&e.__key!==t&&e.isAttached()}function rg(e,t){if(!t)return;let n=e._updateTags,r=t;for(let e of(Array.isArray(t)||(r=[t]),r))n.add(e)}function rp(e,t){let n=e.type,r=t.get(n);void 0===r&&w(17,n);let i=r.klass;e.type!==i.getType()&&w(18,i.name);let l=i.importJSON(e),s=e.children;if(rk(l)&&Array.isArray(s))for(let e=0;e<s.length;e++){let n=rp(s[e],t);l.append(n)}return l}function rm(e,t,n){let r=re,i=rn,l=rt;re=t,rn=!0,rt=e;try{return n()}finally{re=r,rn=i,rt=l}}function r_(e,t){let n,r,i=e._pendingEditorState,l=e._rootElement,s=e._headless||null===l;if(null===i)return;let o=e._editorState,a=o._selection,u=i._selection,d=0!==e._dirtyType,c=re,f=rn,h=rt,g=e._updating,p=e._observer,m=null;if(e._pendingEditorState=null,e._editorState=i,!s&&d&&null!==p){rt=e,re=i,rn=!1,e._updating=!0;try{let t,n=e._dirtyType,r=e._dirtyElements,l=e._dirtyLeaves;p.disconnect(),eT="",eO="",eM=2===n,e_=e,em=e._config,ey=e._nodes,ex=e_._listeners.mutation,ev=r,eS=l,eC=o._nodeMap,eb=i._nodeMap,eA=i._readOnly,eN=new Map(e._keyToDOMMap),ek=t=new Map,function e(t,n){let r=eC.get(t),i=eb.get(t);void 0!==r&&void 0!==i||w(61);let l=eM||eS.has(t)||ev.has(t),s=iM(e_,t);if(r===i&&!l){if(rk(r)){let e=s.__lexicalTextContent;void 0!==e&&(eT+=e,eO+=e)}else{let e=r.getTextContent();eO+=e,eT+=e}return s}if(r!==i&&l&&iN(ek,ey,ex,i,"updated"),i.updateDOM(r,s,em)){let e=ej(t,null);return null===n&&w(62),n.replaceChild(e,s),eD(t,null),e}if(rk(r)&&rk(i)){let t=i.__indent;(eM||t!==r.__indent)&&eF(s,t);let n=i.__format;if((eM||n!==r.__format)&&eI(s,n),l&&(function(t,n,r){ew=null,eE=null,function(t,n,r){let i=eT,l=t.__size,s=n.__size;eT="";let o=r.element;if(1===l&&1===s){let r=t.__first,i=n.__first;if(r===i)e(r,o);else{let e=e$(r),t=ej(i,null);try{o.replaceChild(t,e)}catch(n){if("object"==typeof n&&null!=n)throw Error(`${n.toString()} Parent: ${o.tagName}, new child: {tag: ${t.tagName} key: ${i}}, old child: {tag: ${e.tagName}, key: ${r}}.`);throw n}eD(r,null)}let l=eb.get(i);nE(l)&&null===ew&&(ew=l.getFormat(),eE=l.getStyle())}else{let i=eW(t,eC),a=eW(n,eb);if(i.length!==l&&w(227),a.length!==s&&w(228),0===l)0!==s&&ez(a,n,0,s-1,r);else if(0===s){if(0!==l){let e=null==r.after&&null==r.before&&null==r.element.__lexicalLineBreak;eP(i,0,l-1,e?null:o),e&&(o.textContent="")}}else!function(t,n,r,i,l,s){let o=i-1,a=l-1,u,d,c=s.getFirstChild(),f=0,h=0;for(;f<=o&&h<=a;){let t=n[f],i=r[h];if(t===i)c=eJ(e(i,s.element)),f++,h++;else{void 0===u&&(u=new Set(n)),void 0===d&&(d=new Set(r));let l=d.has(t),o=u.has(i);if(l)if(o){let t=iM(e_,i);t===c?c=eJ(e(i,s.element)):(s.withBefore(c).insertChild(t),e(i,s.element)),f++,h++}else ej(i,s.withBefore(c)),h++;else c=eJ(e$(t)),eD(t,s.element),f++}let l=eb.get(i);null!==l&&nE(l)&&null===ew&&(ew=l.getFormat(),eE=l.getStyle())}let g=f>o,p=h>a;if(g&&!p){let e=r[a+1],n=void 0===e?null:e_.getElementByKey(e);ez(r,t,h,a,s.withBefore(n))}else p&&!g&&eP(n,f,o,s.element)}(n,i,a,l,s,r)}iO(n)&&(eT+="\n\n"),o.__lexicalTextContent=eT,eT=i+eT}(t,n,n.getDOMSlot(r)),null==ew||ew===n.__textFormat||eA||n.setTextFormat(ew),null==eE||eE===n.__textStyle||eA||n.setTextStyle(eE)}(r,i,s),rM(i)||i.isInline()||eK(r,i,s)),iO(i)&&(eT+="\n\n",eO+="\n\n"),(eM||i.__dir!==r.__dir)&&(eR(s,i),rM(i)&&!eM))for(let e of i.getChildren())rk(e)&&eR(iM(e_,e.getKey()),e)}else{let e=i.getTextContent();if(rE(i)){let e=i.decorate(e_,em);null!==e&&eU(t,e)}eT+=e,eO+=e}if(!eA&&rM(i)&&i.__cachedText!==eO){let e=i.getWritable();e.__cachedText=eO,i=e}return s}("root",null),e_=void 0,ey=void 0,ev=void 0,eS=void 0,eC=void 0,eb=void 0,em=void 0,eN=void 0,ek=void 0,m=t}catch(t){if(t instanceof Error&&e._onError(t),rr)throw t;return rz(e,null,l,i),ei(e),e._dirtyType=2,rr=!0,r_(e,o),void(rr=!1)}finally{p.observe(l,rl),e._updating=g,re=c,rn=f,rt=h}}i._readOnly||(i._readOnly=!0);let _=e._dirtyLeaves,y=e._dirtyElements,x=e._normalizedNodes,v=e._updateTags,S=e._deferred;d&&(e._dirtyType=0,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set),function(e,t){let n,r=e._decorators,i=e._pendingDecorators||r,l=t._nodeMap;for(n in i)l.has(n)||(i===r&&(i=ii(e)),delete i[n])}(e,i);let C=s?null:iK(iF(e));if(e._editable&&null!==C&&(d||null===u||u.dirty||!u.is(a))&&null!==l&&!v.has("skip-dom-selection")){rt=e,re=i;try{if(null!==p&&p.disconnect(),d||null===u||u.dirty){let t=e._blockCursorElement;null!==t&&iB(t,e,l),function(e,t,n,r,i,l,s){let o=r.anchorNode,a=r.focusNode,u=r.anchorOffset,d=r.focusOffset,c=document.activeElement;if(i.has("collaboration")&&c!==l||null!==c&&rH(c))return;if(!nj(t))return null!==e&&rq(n,o,a)&&r.removeAllRanges();let f=t.anchor,h=t.focus,g=f.key,p=h.key,m=iM(n,g),_=iM(n,p),y=f.offset,x=h.offset,v=t.format,S=t.style,C=t.isCollapsed(),b=m,N=_,k=!1;if("text"===f.type){b=r2(m);let e=f.getNode();k=e.getFormat()!==v||e.getStyle()!==S}else nj(e)&&"text"===e.anchor.type&&(k=!0);if("text"===h.type&&(N=r2(_)),null!==b&&null!==N&&(C&&(null===e||k||nj(e)&&(e.format!==v||e.style!==S))&&(tH=[v,S,y,g,performance.now()]),u!==y||d!==x||o!==b||a!==N||"Range"===r.type&&C||(null!==c&&l.contains(c)||i.has("skip-selection-focus")||l.focus({preventScroll:!0}),"element"===f.type))){if(n7(r,b,y,N,x),!i.has("skip-scroll-into-view")&&t.isCollapsed()&&null!==l&&l===document.activeElement){let e=nj(t)&&"element"===t.anchor.type?b.childNodes[y]||null:r.rangeCount>0?r.getRangeAt(0):null;if(null!==e){let t;if(e instanceof Text){let n=document.createRange();n.selectNode(e),t=n.getBoundingClientRect()}else t=e.getBoundingClientRect();!function(e,t,n){let r=iD(n),i=iL(r);if(null===r||null===i)return;let{top:l,bottom:s}=t,o=0,a=0,u=n;for(;null!==u;){let t=u===r.body;if(t)o=0,a=iF(e).innerHeight;else{let e=u.getBoundingClientRect();o=e.top,a=e.bottom}let n=0;if(l<o?n=-(o-l):s>a&&(n=s-a),0!==n)if(t)i.scrollBy(0,n);else{let e=u.scrollTop;u.scrollTop+=n;let t=u.scrollTop-e;l-=t,s-=t}if(t)break;u=iA(u)}}(n,t,l)}}tB=!0}}(a,u,e,C,v,l)}!function(e,t,n){let r=e._blockCursorElement;if(nj(n)&&n.isCollapsed()&&"element"===n.anchor.type&&t.contains(document.activeElement)){let i=n.anchor,l=i.getNode(),s=i.offset,o=!1,a=null;if(s===l.getChildrenSize())iz(l.getChildAtIndex(s-1))&&(o=!0);else{let t=l.getChildAtIndex(s);if(null!==t&&iz(t)){let n=t.getPreviousSibling();(null===n||iz(n))&&(o=!0,a=e.getElementByKey(t.__key))}}if(o){let n,i,s,o=e.getElementByKey(l.__key);return null===r&&(n=e._config.theme,(i=document.createElement("div")).contentEditable="false",i.setAttribute("data-lexical-cursor","true"),s=n.blockCursor,void 0!==s&&("string"==typeof s&&(s=n.blockCursor=B(s)),void 0!==s&&i.classList.add(...s)),e._blockCursorElement=r=i),t.style.caretColor="transparent",null===a?o.appendChild(r):o.insertBefore(r,a)}}null!==r&&iB(r,e,t)}(e,l,u)}finally{null!==p&&p.observe(l,rl),rt=h,re=c}}null!==m&&function(e,t,n,r,i){let l=Array.from(e._listeners.mutation),s=l.length;for(let e=0;e<s;e++){let[s,o]=l[e];for(let e of o){let l=t.get(e);void 0!==l&&s(l,{dirtyLeaves:r,prevEditorState:i,updateTags:n})}}}(e,m,v,_,o),nj(u)||null===u||null!==a&&a.is(u)||e.dispatchCommand(eH,void 0);let b=e._pendingDecorators;null!==b&&(e._decorators=b,e._pendingDecorators=null,ry("decorator",e,!0,b)),n=il(t||o),n!==(r=il(i))&&ry("textcontent",e,!0,r),ry("update",e,!0,{dirtyElements:y,dirtyLeaves:_,editorState:i,mutatedNodes:m,normalizedNodes:x,prevEditorState:t||o,tags:v}),function(e,t){if(e._deferred=[],0!==t.length){let n=e._updating;e._updating=!0;try{for(let e=0;e<t.length;e++)t[e]()}finally{e._updating=n}}}(e,S),function(e){let t=e._updates;if(0!==t.length){let n=t.shift();if(n){let[t,r]=n;rv(e,t,r)}}}(e)}function ry(e,t,n,...r){let i=t._updating;t._updating=n;try{let n=Array.from(t._listeners[e]);for(let e=0;e<n.length;e++)n[e].apply(null,r)}finally{t._updating=i}}function rx(e,t){let n=e._updates,r=t||!1;for(;0!==n.length;){let t=n.shift();if(t){let n,[i,l]=t,s=e._pendingEditorState;void 0!==l&&(n=l.onUpdate,l.skipTransforms&&(r=!0),l.discrete&&(null===s&&w(191),s._flushSync=!0),n&&e._deferred.push(n),rg(e,l.tag)),null==s?rv(e,i,l):i()}}return r}function rv(e,t,n){let r=e._updateTags,i,l=!1,s=!1;void 0!==n&&(i=n.onUpdate,rg(e,n.tag),l=n.skipTransforms||!1,s=n.discrete||!1),i&&e._deferred.push(i);let o=e._editorState,a=e._pendingEditorState,u=!1;(null===a||a._readOnly)&&(a=e._pendingEditorState=rA(a||o),u=!0),a._flushSync=s;let d=re,c=rn,f=rt,h=e._updating;re=a,rn=!1,e._updating=!0,rt=e;let g=e._headless||null===e.getRootElement();rW=null;try{var p;let r,i;u&&(g?null!==o._selection&&(a._selection=o._selection.clone()):a._selection=(p=n&&n.event||null,r=e.getEditorState()._selection,i=iK(iF(e)),nj(r)||null==r?n0(r,i,e,p):r.clone()));let s=e._compositionKey;t(),l=rx(e,l),function(e,t){let n=t.getEditorState()._selection,r=e._selection;if(nj(r)){let e,t=r.anchor,i=r.focus;if("text"===t.type&&(e=t.getNode()).selectionTransform(n,r),"text"===i.type){let t=i.getNode();e!==t&&t.selectionTransform(n,r)}}}(a,e),0!==e._dirtyType&&(l?function(e,t){let n=t._dirtyLeaves,r=e._nodeMap;for(let e of n){let t=r.get(e);nE(t)&&t.isAttached()&&t.isSimpleText()&&!t.isUnmergeable()&&eh(t)}}(a,e):function(e,t){let n=t._dirtyLeaves,r=t._dirtyElements,i=e._nodeMap,l=r9(),s=new Map,o=n,a=o.size,u=r,d=u.size;for(;a>0||d>0;){if(a>0){for(let e of(t._dirtyLeaves=new Set,o)){let r=i.get(e);nE(r)&&r.isAttached()&&r.isSimpleText()&&!r.isUnmergeable()&&eh(r),void 0!==r&&rh(r,l)&&rf(t,r,s),n.add(e)}if((a=(o=t._dirtyLeaves).size)>0){ri++;continue}}for(let e of(t._dirtyLeaves=new Set,t._dirtyElements=new Map,u.delete("root")&&u.set("root",!0),u)){let n=e[0],o=e[1];if(r.set(n,o),!o)continue;let a=i.get(n);void 0!==a&&rh(a,l)&&rf(t,a,s)}a=(o=t._dirtyLeaves).size,d=(u=t._dirtyElements).size,ri++}t._dirtyLeaves=n,t._dirtyElements=r}(a,e),rx(e),function(e,t,n,r){let i=e._nodeMap,l=t._nodeMap,s=[];for(let[e]of r){let t=l.get(e);void 0!==t&&(t.isAttached()||(rk(t)&&function e(t,n,r,i,l,s){let o=t.getFirstChild();for(;null!==o;){let t=o.__key;o.__parent===n&&(rk(o)&&e(o,t,r,i,l,s),r.has(t)||s.delete(t),l.push(t)),o=o.getNextSibling()}}(t,e,i,l,s,r),i.has(e)||r.delete(e),s.push(e)))}for(let e of s)l.delete(e);for(let e of n){let t=l.get(e);void 0===t||t.isAttached()||(i.has(e)||n.delete(e),l.delete(e))}}(o,a,e._dirtyLeaves,e._dirtyElements)),s!==e._compositionKey&&(a._flushSync=!0);let d=a._selection;if(nj(d)){let e=a._nodeMap,t=d.anchor.key,n=d.focus.key;void 0!==e.get(t)&&void 0!==e.get(n)||w(19)}else nB(d)&&0===d._nodes.size&&(a._selection=null)}catch(t){return t instanceof Error&&e._onError(t),e._pendingEditorState=o,e._dirtyType=2,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),void r_(e)}finally{re=d,rn=c,rt=f,e._updating=h,ri=0}0!==e._dirtyType||e._deferred.length>0||function(e,t){let n=t.getEditorState()._selection,r=e._selection;if(null!==r){if(r.dirty||!r.is(n))return!0}else if(null!==n)return!0;return!1}(a,e)?a._flushSync?(a._flushSync=!1,r_(e)):u&&rV(()=>{r_(e)}):(a._flushSync=!1,u&&(r.clear(),e._deferred=[],e._pendingEditorState=null))}function rS(e,t,n){rt===e&&void 0===n?t():rv(e,t,n)}class rC{element;before;after;constructor(e,t,n){this.element=e,this.before=t||null,this.after=n||null}withBefore(e){return new rC(this.element,e,this.after)}withAfter(e){return new rC(this.element,this.before,e)}withElement(e){return this.element===e?this:new rC(e,this.before,this.after)}insertChild(e){let t=this.before||this.getManagedLineBreak();return null!==t&&t.parentElement!==this.element&&w(222),this.element.insertBefore(e,t),this}removeChild(e){return e.parentElement!==this.element&&w(223),this.element.removeChild(e),this}replaceChild(e,t){return t.parentElement!==this.element&&w(224),this.element.replaceChild(e,t),this}getFirstChild(){let e=this.after?this.after.nextSibling:this.element.firstChild;return e===this.before||e===this.getManagedLineBreak()?null:e}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(e){null===e?this.removeManagedLineBreak():this.insertManagedLineBreak("decorator"===e&&(z||F||L))}removeManagedLineBreak(){let e=this.getManagedLineBreak();if(e){let t=this.element,n="IMG"===e.nodeName?e.nextSibling:null;n&&t.removeChild(n),t.removeChild(e),t.__lexicalLineBreak=void 0}}insertManagedLineBreak(e){let t=this.getManagedLineBreak();if(t){if(e===("IMG"===t.nodeName))return;this.removeManagedLineBreak()}let n=this.element,r=this.before,i=document.createElement("br");if(n.insertBefore(i,r),e){let e=document.createElement("img");e.setAttribute("data-lexical-linebreak","true"),e.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",e.alt="",n.insertBefore(e,i),n.__lexicalLineBreak=e}else n.__lexicalLineBreak=i}getFirstChildOffset(){let e=0;for(let t=this.after;null!==t;t=t.previousSibling)e++;return e}resolveChildIndex(e,t,n,r){if(n===this.element){let t=this.getFirstChildOffset();return[e,Math.min(t+e.getChildrenSize(),Math.max(t,r))]}let i=rb(t,n);i.push(r);let l=rb(t,this.element),s=e.getIndexWithinParent();for(let e=0;e<l.length;e++){let t=i[e],n=l[e];if(void 0===t||t<n)break;if(t>n){s+=1;break}}return[e.getParentOrThrow(),s]}}function rb(e,t){let n=[],r=t;for(;r!==e&&null!==r;r=r.parentNode){let e=0;for(let t=r.previousSibling;null!==t;t=t.previousSibling)e++;n.push(e)}return r!==e&&w(225),n.reverse()}class rN extends nl{__first;__last;__size;__format;__style;__indent;__dir;__textFormat;__textStyle;constructor(e){super(e),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(e){super.afterCloneFrom(e),this.__key===e.__key&&(this.__first=e.__first,this.__last=e.__last,this.__size=e.__size),this.__indent=e.__indent,this.__format=e.__format,this.__style=e.__style,this.__dir=e.__dir,this.__textFormat=e.__textFormat,this.__textStyle=e.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){return q[this.getFormat()]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){let e=[],t=this.getFirstChild();for(;null!==t;)e.push(t),t=t.getNextSibling();return e}getChildrenKeys(){let e=[],t=this.getFirstChild();for(;null!==t;)e.push(t.__key),t=t.getNextSibling();return e}getChildrenSize(){return this.getLatest().__size}isEmpty(){return 0===this.getChildrenSize()}isDirty(){let e=rd()._dirtyElements;return null!==e&&e.has(this.__key)}isLastChild(){let e=this.getLatest(),t=this.getParentOrThrow().getLastChild();return null!==t&&t.is(e)}getAllTextNodes(){let e=[],t=this.getFirstChild();for(;null!==t;){if(nE(t)&&e.push(t),rk(t)){let n=t.getAllTextNodes();e.push(...n)}t=t.getNextSibling()}return e}getFirstDescendant(){let e=this.getFirstChild();for(;rk(e);){let t=e.getFirstChild();if(null===t)break;e=t}return e}getLastDescendant(){let e=this.getLastChild();for(;rk(e);){let t=e.getLastChild();if(null===t)break;e=t}return e}getDescendantByIndex(e){let t=this.getChildren(),n=t.length;if(e>=n){let e=t[n-1];return rk(e)&&e.getLastDescendant()||e||null}let r=t[e];return rk(r)&&r.getFirstDescendant()||r||null}getFirstChild(){let e=this.getLatest().__first;return null===e?null:r8(e)}getFirstChildOrThrow(){let e=this.getFirstChild();return null===e&&w(45,this.__key),e}getLastChild(){let e=this.getLatest().__last;return null===e?null:r8(e)}getLastChildOrThrow(){let e=this.getLastChild();return null===e&&w(96,this.__key),e}getChildAtIndex(e){let t,n,r=this.getChildrenSize();if(e<r/2){for(t=this.getFirstChild(),n=0;null!==t&&n<=e;){if(n===e)return t;t=t.getNextSibling(),n++}return null}for(t=this.getLastChild(),n=r-1;null!==t&&n>=e;){if(n===e)return t;t=t.getPreviousSibling(),n--}return null}getTextContent(){let e="",t=this.getChildren(),n=t.length;for(let r=0;r<n;r++){let i=t[r];e+=i.getTextContent(),rk(i)&&r!==n-1&&!i.isInline()&&(e+="\n\n")}return e}getTextContentSize(){let e=0,t=this.getChildren(),n=t.length;for(let r=0;r<n;r++){let i=t[r];e+=i.getTextContentSize(),rk(i)&&r!==n-1&&!i.isInline()&&(e+=2)}return e}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(e){if(""!==e){let t=H[e];return 0!=(this.getFormat()&t)}return!1}hasTextFormat(e){let t=$[e];return 0!=(this.getTextFormat()&t)}getFormatFlags(e,t){return r3(this.getLatest().__textFormat,e,t)}getTextStyle(){return this.getLatest().__textStyle}select(e,t){ro();let n=n1(),r=e,i=t,l=this.getChildrenSize();if(!this.canBeEmpty()){if(0===e&&0===t){let e=this.getFirstChild();if(nE(e)||rk(e))return e.select(0,0)}else if((void 0===e||e===l)&&(void 0===t||t===l)){let e=this.getLastChild();if(nE(e)||rk(e))return e.select()}}void 0===r&&(r=l),void 0===i&&(i=l);let s=this.__key;return nj(n)?(n.anchor.set(s,r,"element"),n.focus.set(s,i,"element"),n.dirty=!0,n):nX(s,r,s,i,"element","element")}selectStart(){let e=this.getFirstDescendant();return e?e.selectStart():this.select()}selectEnd(){let e=this.getLastDescendant();return e?e.selectEnd():this.select()}clear(){let e=this.getWritable();return this.getChildren().forEach(e=>e.remove()),e}append(...e){return this.splice(this.getChildrenSize(),0,e)}setDirection(e){let t=this.getWritable();return t.__dir=e,t}setFormat(e){return this.getWritable().__format=""!==e?H[e]:0,this}setStyle(e){return this.getWritable().__style=e||"",this}setTextFormat(e){let t=this.getWritable();return t.__textFormat=e,t}setTextStyle(e){let t=this.getWritable();return t.__textStyle=e,t}setIndent(e){return this.getWritable().__indent=e,this}splice(e,t,n){ni(this)&&w(324,this.__key,this.__type);let r=this.getChildrenSize(),i=this.getWritable();e+t<=r||w(226,String(e),String(t),String(r));let l=i.__key,s=[],o=[],a=this.getChildAtIndex(e+t),u=null,d=r-t+n.length;if(0!==e)if(e===r)u=this.getLastChild();else{let t=this.getChildAtIndex(e);null!==t&&(u=t.getPreviousSibling())}if(t>0){let e=null===u?this.getFirstChild():u.getNextSibling();for(let n=0;n<t;n++){null===e&&w(100);let t=e.getNextSibling(),n=e.__key;r6(e.getWritable()),o.push(n),e=t}}let c=u;for(let e of n){null!==c&&e.is(c)&&(u=c=c.getPreviousSibling());let t=e.getWritable();t.__parent===l&&d--,r6(t);let n=e.__key;if(null===c)i.__first=n,t.__prev=null;else{let e=c.getWritable();e.__next=n,t.__prev=e.__key}e.__key===l&&w(76),t.__parent=l,s.push(n),c=e}if(e+t===r)null!==c&&(c.getWritable().__next=null,i.__last=c.__key);else if(null!==a){let e=a.getWritable();if(null!==c){let t=c.getWritable();e.__prev=c.__key,t.__next=a.__key}else e.__prev=null}if(i.__size=d,o.length){let e=n1();if(nj(e)){let t=new Set(o),n=new Set(s),{anchor:r,focus:i}=e;rT(r,t,n)&&n6(r,r.getNode(),this,u,a),rT(i,t,n)&&n6(i,i.getNode(),this,u,a),0!==d||this.canBeEmpty()||iI(this)||this.remove()}}return i}getDOMSlot(e){return new rC(e)}exportDOM(e){let{element:t}=super.exportDOM(e);if(iU(t)){let e=this.getIndent();e>0&&(t.style.paddingInlineStart=40*e+"px");let n=this.getDirection();n&&(t.dir=n)}return{element:t}}exportJSON(){let e={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},t=this.getTextFormat(),n=this.getTextStyle();return 0===t&&""===n||iI(this)||this.getChildren().some(nE)||(0!==t&&(e.textFormat=t),""!==n&&(e.textStyle=n)),e}updateFromJSON(e){return super.updateFromJSON(e).setFormat(e.format).setIndent(e.indent).setDirection(e.direction).setTextFormat(e.textFormat||0).setTextStyle(e.textStyle||"")}insertNewAfter(e,t){return null}canIndent(){return!0}collapseAtStart(e){return!1}excludeFromCopy(e){return!1}canReplaceWith(e){return!0}canInsertAfter(e){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(e){return!1}extractWithChild(e,t,n){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(e,t){let n=this.getDOMSlot(e),r=n.getFirstChild();for(let e=this.getFirstChild();e;e=e.getNextSibling()){let i=t.getElementByKey(e.getKey());null!==i&&(null==r?(n.insertChild(i),r=i):r!==i&&n.replaceChild(i,r),r=r.nextSibling)}}}function rk(e){return e instanceof rN}function rT(e,t,n){let r=e.getNode();for(;r;){let e=r.__key;if(t.has(e)&&!n.has(e))return!0;r=r.getParent()}return!1}class rw extends nl{decorate(e,t){return null}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function rE(e){return e instanceof rw}class rO extends rN{__cachedText;static getType(){return"root"}static clone(){return new rO}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){w(51)}getTextContent(){let e=this.__cachedText;return(rs()||0===rd()._dirtyType)&&null!==e?e:super.getTextContent()}remove(){w(52)}replace(e){w(53)}insertBefore(e){w(54)}insertAfter(e){w(55)}updateDOM(e,t){return!1}splice(e,t,n){for(let e of n)rk(e)||rE(e)||w(282);return super.splice(e,t,n)}static importJSON(e){return is().updateFromJSON(e)}collapseAtStart(){return!0}}function rM(e){return e instanceof rO}function rA(e){return new rP(new Map(e._nodeMap))}function rD(){return new rP(new Map([["root",new rO]]))}class rP{_nodeMap;_selection;_flushSync;_readOnly;constructor(e,t){this._nodeMap=e,this._selection=t||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return 1===this._nodeMap.size&&null===this._selection}read(e,t){return rm(t&&t.editor||null,this,e)}clone(e){let t=new rP(this._nodeMap,void 0===e?this._selection:e);return t._readOnly=!0,t}toJSON(){return rm(null,this,()=>({root:function e(t){let n=t.exportJSON(),r=t.constructor;if(n.type!==r.getType()&&w(130,r.name),rk(t)){let i=n.children;Array.isArray(i)||w(59,r.name);let l=t.getChildren();for(let t=0;t<l.length;t++){let n=e(l[t]);i.push(n)}}return n}(is())}))}}class rL extends rN{static getType(){return"artificial"}createDOM(e){return document.createElement("div")}}class rF extends rN{static getType(){return"paragraph"}static clone(e){return new rF(e.__key)}createDOM(e){let t=document.createElement("p"),n=ib(e.theme,"paragraph");return void 0!==n&&t.classList.add(...n),t}updateDOM(e,t,n){return!1}static importDOM(){return{p:e=>({conversion:rI,priority:0})}}exportDOM(e){let{element:t}=super.exportDOM(e);if(iU(t)){this.isEmpty()&&t.append(document.createElement("br"));let e=this.getFormatType();e&&(t.style.textAlign=e)}return{element:t}}static importJSON(e){return rR().updateFromJSON(e)}exportJSON(){let e=super.exportJSON();if(void 0===e.textFormat||void 0===e.textStyle){let t=this.getChildren().find(nE);t?(e.textFormat=t.getFormat(),e.textStyle=t.getStyle()):(e.textFormat=this.getTextFormat(),e.textStyle=this.getTextStyle())}return e}insertNewAfter(e,t){let n=rR();n.setTextFormat(e.format),n.setTextStyle(e.style);let r=this.getDirection();return n.setDirection(r),n.setFormat(this.getFormatType()),n.setStyle(this.getStyle()),this.insertAfter(n,t),n}collapseAtStart(){let e=this.getChildren();if(0===e.length||nE(e[0])&&""===e[0].getTextContent().trim()){if(null!==this.getNextSibling())return this.selectNext(),this.remove(),!0;if(null!==this.getPreviousSibling())return this.selectPrevious(),this.remove(),!0}return!1}}function rI(e){let t=rR();return e.style&&(t.setFormat(e.style.textAlign),iQ(e,t)),{node:t}}function rR(){return iR(new rF)}function rj(e){return e instanceof rF}function rz(e,t,n,r){let i=e._keyToDOMMap;i.clear(),e._editorState=rD(),e._pendingEditorState=r,e._compositionKey=null,e._dirtyType=0,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],e._blockCursorElement=null;let l=e._observer;null!==l&&(l.disconnect(),e._observer=null),null!==t&&(t.textContent=""),null!==n&&(n.textContent="",i.set("root",n))}function rB(e){var t,n;let r,i,l,s,o=e||{},a=rt,u=o.theme||{},d=void 0===e?a:o.parentEditor||null,c=o.disableEvents||!1,f=rD(),h=o.namespace||(null!==d?d._config.namespace:ih()),g=o.editorState,p=[rO,nx,na,nM,rF,rL,...o.nodes||[]],{onError:m,html:_}=o,y=void 0===o.editable||o.editable;if(void 0===e&&null!==a)r=a._nodes;else{r=new Map;for(let e=0;e<p.length;e++){let t=p[e],n=null,i=null;if("function"!=typeof t){let e=t;t=e.replace,n=e.with,i=e.withKlass||null}i1(t);let l=t.getType(),s=function(e){let t=new Set,n=new Set,r=e;for(;r;){let{ownNodeConfig:e}=i1(r),i=r.transform;if(!n.has(i)){n.add(i);let e=r.transform();e&&t.add(e)}if(e){let n=e.$transform;n&&t.add(n),r=e.extends}else{let e=Object.getPrototypeOf(r);r=e.prototype instanceof nl&&e!==nl?e:void 0}}return t}(t);r.set(l,{exportDOM:_&&_.export?_.export.get(t):void 0,klass:t,replace:n,replaceWithKlass:i,sharedNodeState:function(e){let t=new Map,n=new Set;for(let r="function"==typeof e?e:e.replace;r.prototype&&void 0!==r.prototype.getType;r=Object.getPrototypeOf(r)){let{ownNodeConfig:e}=i1(r);if(e&&e.stateConfigs)for(let r of e.stateConfigs){let e;"stateConfig"in r?(e=r.stateConfig,r.flat&&n.add(e.key)):e=r,t.set(e.key,e)}}return{flatKeys:n,sharedConfigMap:t}}(p[e]),transforms:s})}}let x=new rK(f,d,r,{disableEvents:c,namespace:h,theme:u},m||console.error,(t=r,n=_?_.import:void 0,i=new Map,l=new Set,s=e=>{Object.keys(e).forEach(t=>{let n=i.get(t);void 0===n&&(n=[],i.set(t,n)),n.push(e[t])})},t.forEach(e=>{let t=e.klass.importDOM;if(null==t||l.has(t))return;l.add(t);let n=t.call(e.klass);null!==n&&s(n)}),n&&s(n),i),y,e);return void 0!==g&&(x._pendingEditorState=g,x._dirtyType=2),x.registerCommand(eG,t0,0),x.registerCommand(eX,t1,0),x.registerCommand(eZ,t2,0),x.registerCommand(eQ,t3,0),x.registerCommand(tt,t6,0),x}class rK{static version;_headless;_parentEditor;_rootElement;_editorState;_pendingEditorState;_compositionKey;_deferred;_keyToDOMMap;_updates;_updating;_listeners;_commands;_nodes;_decorators;_pendingDecorators;_config;_dirtyType;_cloneNotNeeded;_dirtyLeaves;_dirtyElements;_normalizedNodes;_updateTags;_observer;_key;_onError;_htmlConversions;_window;_editable;_blockCursorElement;_createEditorArgs;constructor(e,t,n,r,i,l,s,o){this._createEditorArgs=o,this._parentEditor=t,this._rootElement=null,this._editorState=e,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=r,this._nodes=n,this._decorators={},this._pendingDecorators=null,this._dirtyType=0,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=ih(),this._onError=i,this._htmlConversions=l,this._editable=s,this._headless=null!==t&&t._headless,this._window=null,this._blockCursorElement=null}isComposing(){return null!=this._compositionKey}registerUpdateListener(e){let t=this._listeners.update;return t.add(e),()=>{t.delete(e)}}registerEditableListener(e){let t=this._listeners.editable;return t.add(e),()=>{t.delete(e)}}registerDecoratorListener(e){let t=this._listeners.decorator;return t.add(e),()=>{t.delete(e)}}registerTextContentListener(e){let t=this._listeners.textcontent;return t.add(e),()=>{t.delete(e)}}registerRootListener(e){let t=this._listeners.root;return e(this._rootElement,null),t.add(e),()=>{e(null,this._rootElement),t.delete(e)}}registerCommand(e,t,n){void 0===n&&w(35);let r=this._commands;r.has(e)||r.set(e,[new Set,new Set,new Set,new Set,new Set]);let i=r.get(e);void 0===i&&w(36,String(e));let l=i[n];return l.add(t),()=>{l.delete(t),i.every(e=>0===e.size)&&r.delete(e)}}registerMutationListener(e,t,n){let r=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(e)).klass,i=this._listeners.mutation,l=i.get(t);void 0===l&&(l=new Set,i.set(t,l)),l.add(r);let s=n&&n.skipInitialization;return void 0!==s&&s||this.initializeMutationListener(t,r),()=>{l.delete(r),0===l.size&&i.delete(t)}}getRegisteredNode(e){let t=this._nodes.get(e.getType());return void 0===t&&w(37,e.name),t}resolveRegisteredNodeAfterReplacements(e){for(;e.replaceWithKlass;)e=this.getRegisteredNode(e.replaceWithKlass);return e}initializeMutationListener(e,t){let n=this._editorState,r=iX(n).get(t.getType());if(!r)return;let i=new Map;for(let e of r.keys())i.set(e,"created");i.size>0&&e(i,{dirtyLeaves:new Set,prevEditorState:n,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(e,t){let n=this.getRegisteredNode(e);return n.transforms.add(t),n}registerNodeTransform(e,t){let n=this.registerNodeTransformToKlass(e,t),r=[n],i=n.replaceWithKlass;if(null!=i){let e=this.registerNodeTransformToKlass(i,t);r.push(e)}return function(e,t){let n=iX(e.getEditorState()),r=[];for(let e of t){let t=n.get(e);t&&r.push(t)}0!==r.length&&e.update(()=>{for(let e of r)for(let t of e.keys()){let e=r8(t);e&&e.markDirty()}},null===e._pendingEditorState?{tag:no}:void 0)}(this,r.map(e=>e.klass.getType())),()=>{r.forEach(e=>e.transforms.delete(t))}}hasNode(e){return this._nodes.has(e.getType())}hasNodes(e){return e.every(this.hasNode.bind(this))}dispatchCommand(e,t){return iE(this,e,t)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(e){let t=this._rootElement;if(e!==t){let n=ib(this._config.theme,"root"),r=this._pendingEditorState||this._editorState;if(this._rootElement=e,rz(this,t,e,r),null!==t&&(this._config.disableEvents||function(e){let t=tj.get(e);if(void 0===t)return nt();let n=tz.get(t);if(void 0===n)return nt();let r=n-1;r>=0||w(164),tj.delete(e),tz.set(t,r),0===r&&t.removeEventListener("selectionchange",t9);let i=rX(e);rY(i)?(!function(e){if(null!==e._parentEditor){let t=ic(e),n=t[t.length-1]._key;t7.get(n)===e&&t7.delete(n)}else t7.delete(e._key)}(i),e.__lexicalEditor=null):i&&w(198);let l=t5(e);for(let e=0;e<l.length;e++)l[e]();e.__lexicalEventHandles=[]}(t),null!=n&&t.classList.remove(...n)),null!==e){let t=iL(e),r=e.style;r.userSelect="text",r.whiteSpace="pre-wrap",r.wordBreak="break-word",e.setAttribute("data-lexical-editor","true"),this._window=t,this._dirtyType=2,ei(this),this._updateTags.add(no),r_(this),this._config.disableEvents||function(e,t){let n=e.ownerDocument;tj.set(e,n);let r=tz.get(n)??0;r<1&&n.addEventListener("selectionchange",t9),tz.set(n,r+1),e.__lexicalEditor=t;let i=t5(e);for(let n=0;n<tP.length;n++){let[r,l]=tP[n],s="function"==typeof l?e=>{ne(e)||(t8(e),(t.isEditable()||"click"===r)&&l(e,t))}:e=>{if(ne(e))return;t8(e);let n=t.isEditable();switch(r){case"cut":return n&&iE(t,tb,e);case"copy":return iE(t,tC,e);case"paste":return n&&iE(t,e4,e);case"dragstart":return n&&iE(t,tx,e);case"dragover":return n&&iE(t,tv,e);case"dragend":return n&&iE(t,tS,e);case"focus":return n&&iE(t,tO,e);case"blur":return n&&iE(t,tM,e);case"drop":return n&&iE(t,t_,e)}};e.addEventListener(r,s),i.push(()=>{e.removeEventListener(r,s)})}}(e,this),null!=n&&e.classList.add(...n)}else this._window=null,this._updateTags.add(no),r_(this);ry("root",this,!1,e,t)}}getElementByKey(e){return this._keyToDOMMap.get(e)||null}getEditorState(){return this._editorState}setEditorState(e,t){e.isEmpty()&&w(38);let n=e;n._readOnly&&((n=rA(e))._selection=e._selection?e._selection.clone():null),er(this);let r=this._pendingEditorState,i=this._updateTags,l=void 0!==t?t.tag:null;null===r||r.isEmpty()||(null!=l&&i.add(l),r_(this)),this._pendingEditorState=n,this._dirtyType=2,this._dirtyElements.set("root",!1),this._compositionKey=null,null!=l&&i.add(l),this._updating||r_(this)}parseEditorState(e,t){return function(e,t,n){let r=rD(),i=re,l=rn,s=rt,o=t._dirtyElements,a=t._dirtyLeaves,u=t._cloneNotNeeded,d=t._dirtyType;t._dirtyElements=new Map,t._dirtyLeaves=new Set,t._cloneNotNeeded=new Set,t._dirtyType=0,re=r,rn=!1,rt=t,rW=null;try{let i=t._nodes;rp(e.root,i),n&&n(),r._readOnly=!0}catch(e){e instanceof Error&&t._onError(e)}finally{t._dirtyElements=o,t._dirtyLeaves=a,t._cloneNotNeeded=u,t._dirtyType=d,re=i,rn=l,rt=s}return r}("string"==typeof e?JSON.parse(e):e,this,t)}read(e){return r_(this),this.getEditorState().read(e,{editor:this})}update(e,t){this._updating?this._updates.push([e,t]):rv(this,e,t)}focus(e,t={}){let n=this._rootElement;null!==n&&(n.setAttribute("autocapitalize","off"),rS(this,()=>{var r,i;let l=n1(),s=is();null!==l?l.dirty||ia(l.clone()):0!==s.getChildrenSize()&&("rootStart"===t.defaultSelection?s.selectStart():s.selectEnd()),r="focus",ro(),rd()._updateTags.add(r),i=()=>{n.removeAttribute("autocapitalize"),e&&e()},ro(),rd()._deferred.push(i)}),null===this._pendingEditorState&&n.removeAttribute("autocapitalize"))}blur(){let e=this._rootElement;null!==e&&e.blur();let t=iK(this._window);null!==t&&t.removeAllRanges()}isEditable(){return this._editable}setEditable(e){this._editable!==e&&(this._editable=e,ry("editable",this,!0,e))}toJSON(){return{editorState:this._editorState.toJSON()}}}rK.version="0.39.0+prod.esm";let rW=null,rU=1;function rJ(e,t){let n=r$(e,t);return void 0===n&&w(30,t),n}function r$(e,t){return e._nodes.get(t)}let rV="function"==typeof queueMicrotask?queueMicrotask:e=>{Promise.resolve().then(e)};function rH(e){let t=document.activeElement;if(!iU(t))return!1;let n=t.nodeName;return rE(ir(e))&&("INPUT"===n||"TEXTAREA"===n||"true"===t.contentEditable&&null==rX(t))}function rq(e,t,n){let r=e.getRootElement();try{return null!==r&&r.contains(t)&&r.contains(n)&&null!==t&&!rH(t)&&rG(t)===e}catch(e){return!1}}function rY(e){return e instanceof rK}function rG(e){let t=e;for(;null!=t;){let e=rX(t);if(rY(e))return e;t=iA(t)}return null}function rX(e){return e?e.__lexicalEditor:null}function rZ(e){return nD(e)||e.isToken()}function rQ(e){return rZ(e)||e.isSegmented()}function r0(e){return iJ(e)&&3===e.nodeType}function r1(e){return iJ(e)&&9===e.nodeType}function r2(e){let t=e;for(;null!=t;){if(r0(t))return t;t=t.firstChild}return null}function r3(e,t,n){let r=$[t];if(null!==n&&(e&r)==(n&r))return e;let i=e^r;return"subscript"===t?i&=~$.superscript:"superscript"===t?i&=~$.subscript:"lowercase"===t?(i&=~$.uppercase,i&=~$.capitalize):"uppercase"===t?(i&=~$.lowercase,i&=~$.capitalize):"capitalize"===t&&(i&=~$.lowercase,i&=~$.uppercase),i}function r4(e){return nE(e)||nc(e)||rE(e)}function r6(e){let t=e.getParent();if(null!==t){let n=e.getWritable(),r=t.getWritable(),i=e.getPreviousSibling(),l=e.getNextSibling(),s=null!==l?l.__key:null,o=null!==i?i.__key:null,a=null!==i?i.getWritable():null,u=null!==l?l.getWritable():null;null===i&&(r.__first=s),null===l&&(r.__last=o),null!==a&&(a.__next=s),null!==u&&(u.__prev=o),n.__prev=null,n.__next=null,n.__parent=null,r.__size--}}function r5(e){ra(),ni(e)&&w(323,e.__key,e.__type);let t=e.getLatest(),n=t.__parent,r=ru(),i=rd(),l=r._nodeMap,s=i._dirtyElements;null!==n&&function(e,t,n){let r=e;for(;null!==r;){if(n.has(r))return;let e=t.get(r);if(void 0===e)break;n.set(r,!1),r=e.__parent}}(n,l,s);let o=t.__key;i._dirtyType=1,rk(e)?s.set(o,!0):i._dirtyLeaves.add(o)}function r7(e){ro();let t=rd(),n=t._compositionKey;if(e!==n){if(t._compositionKey=e,null!==n){let e=r8(n);null!==e&&e.getWritable()}if(null!==e){let t=r8(e);null!==t&&t.getWritable()}}}function r9(){return rs()?null:rd()._compositionKey}function r8(e,t){let n=(t||ru())._nodeMap.get(e);return void 0===n?null:n}function ie(e,t){let n=it(e,rd());return void 0!==n?r8(n,t):null}function it(e,t){return e[`__lexicalKey_${t._key}`]}function ir(e,t){let n=e;for(;null!=n;){let e=ie(n,t);if(null!==e)return e;n=iA(n)}return null}function ii(e){let t=Object.assign({},e._decorators);return e._pendingDecorators=t,t}function il(e){return e.read(()=>is().getTextContent())}function is(){return io(ru())}function io(e){return e._nodeMap.get("root")}function ia(e){ro();let t=ru();null!==e&&(e.dirty=!0,e.setCachedNodes(null)),t._selection=e}function iu(e){let t=rd(),n=function(e,t){let n=e;for(;null!=n;){let e=it(n,t);if(void 0!==e)return e;n=iA(n)}return null}(e,t);return null===n?e===t.getRootElement()?r8("root"):null:r8(n)}function id(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e)}function ic(e){let t=[],n=e;for(;null!==n;)t.push(n),n=n._parentEditor;return t}function ih(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function ig(e){return r0(e)?e.nodeValue:null}function ip(e,t,n){let r=iK(iF(t));if(null===r)return;let i=r.anchorNode,{anchorOffset:l,focusOffset:s}=r;if(null!==i){let t=ig(i),r=ir(i);if(null!==t&&nE(r)){if(t===K&&n){let e=n.length;t=n,l=e,s=e}null!==t&&im(r,t,l,s,e)}}}function im(e,t,n,r,i){let l=e;if(l.isAttached()&&(i||!l.isDirty())){let s=l.isComposing(),o=t;(s||i)&&t[t.length-1]===K&&(o=t.slice(0,-1));let a=l.getTextContent();if(i||o!==a){if(""===o){if(r7(null),L||F||z)l.remove();else{let e=rd();setTimeout(()=>{e.update(()=>{l.isAttached()&&l.remove()})},20)}return}let t=l.getParent(),i=n2(),a=l.getTextContentSize(),u=r9(),d=l.getKey();if(l.isToken()||null!==u&&d===u&&!s||nj(i)&&(null!==t&&!t.canInsertTextBefore()&&0===i.anchor.offset||i.anchor.key===e.__key&&0===i.anchor.offset&&!l.canInsertTextBefore()&&!s||i.focus.key===e.__key&&i.focus.offset===a&&!l.canInsertTextAfter()&&!s))return void l.markDirty();let c=n1();if(!nj(c)||null===n||null===r)return void i_(l,o,c);if(c.setTextNodeRange(l,n,l,r),l.isSegmented()){let e=nw(l.getTextContent());l.replace(e),l=e}i_(l,o,c)}}}function i_(e,t,n){if(e.setTextContent(t),nj(n)){let t=e.getKey();for(let r of["anchor","focus"]){let i=n[r];"text"===i.type&&i.key===t&&(i.offset=la(e,i.offset,"clamp"))}}}function iy(e,t,n){let r=t[n]||!1;return"any"===r||r===e[n]}function ix(e,t,n){return iy(e,n,"altKey")&&iy(e,n,"ctrlKey")&&iy(e,n,"shiftKey")&&iy(e,n,"metaKey")&&e.key.toLowerCase()===t.toLowerCase()}let iv={ctrlKey:!A,metaKey:A},iS={altKey:A,ctrlKey:!A};function iC(e){return"Backspace"===e.key}function ib(e,t){void 0===e.__lexicalClassNameCache&&(e.__lexicalClassNameCache={});let n=e.__lexicalClassNameCache,r=n[t];if(void 0!==r)return r;let i=e[t];if("string"==typeof i){let e=B(i);return n[t]=e,e}return i}function iN(e,t,n,r,i){if(0===n.size)return;let l=r.__type,s=r.__key,o=t.get(l);void 0===o&&w(33,l);let a=o.klass,u=e.get(a);void 0===u&&(u=new Map,e.set(a,u));let d=u.get(s),c="destroyed"===d&&"created"===i;(void 0===d||c)&&u.set(s,c?"updated":i)}function ik(e,t,n){let r=e.getParent(),i=n,l=e;return null!==r&&(t&&0===n?(i=l.getIndexWithinParent(),l=r):t||n!==l.getChildrenSize()||(i=l.getIndexWithinParent()+1,l=r)),l.getChildAtIndex(t?i-1:i)}function iT(e,t){let n=e.offset;if("element"===e.type)return ik(e.getNode(),t,n);{let r=e.getNode();if(t&&0===n||!t&&n===r.getTextContentSize()){let e=t?r.getPreviousSibling():r.getNextSibling();return null===e?ik(r.getParentOrThrow(),t,r.getIndexWithinParent()+ +!t):e}}return null}function iw(e){let t=iF(e).event,n=t&&t.inputType;return"insertFromPaste"===n||"insertFromPasteAsQuotation"===n}function iE(e,t,n){return function(e,t,n){let r=ic(e);for(let i=4;i>=0;i--)for(let l=0;l<r.length;l++){let s=r[l],o=s._commands.get(t);if(void 0!==o){let t=o[i];if(void 0!==t){let r=Array.from(t),i=r.length,l=!1;if(rS(s,()=>{for(let t=0;t<i;t++)if(r[t](n,e))return void(l=!0)}),l)return l}}}return!1}(e,t,n)}function iO(e){return!rM(e)&&!e.isLastChild()&&!e.isInline()}function iM(e,t){let n=e._keyToDOMMap.get(t);return void 0===n&&w(75,t),n}function iA(e){let t=e.assignedSlot||e.parentElement;return i$(t)?t.host:t}function iD(e){return r1(e)?e:iU(e)?e.ownerDocument:null}function iP(e,t){let n=e.getParent();for(;null!==n;){if(n.is(t))return!0;n=n.getParent()}return!1}function iL(e){let t=iD(e);return t?t.defaultView:null}function iF(e){let t=e._window;return null===t&&w(78),t}function iI(e){return rM(e)||rk(e)&&e.isShadowRoot()}function iR(e){let t=rd(),n=e.getType(),r=r$(t,n);void 0===r&&w(200,e.constructor.name,n);let{replace:i,replaceWithKlass:l}=r;if(null!==i){let t=i(e),r=t.constructor;return null!==l?t instanceof l||w(201,l.name,l.getType(),r.name,r.getType(),e.constructor.name,n):t instanceof e.constructor&&r!==e.constructor||w(202,r.name,r.getType(),e.constructor.name,n),t.__key===e.__key&&w(203,e.constructor.name,n,r.name,r.getType()),t}return e}function ij(e,t){!rM(e.getParent())||rk(t)||rE(t)||w(99)}function iz(e){return(rE(e)||rk(e)&&!e.canBeEmpty())&&!e.isInline()}function iB(e,t,n){n.style.removeProperty("caret-color"),t._blockCursorElement=null;let r=e.parentElement;null!==r&&r.removeChild(e)}function iK(e){return O?(e||window).getSelection():null}function iW(e){return iU(e)&&"A"===e.tagName}function iU(e){return iJ(e)&&1===e.nodeType}function iJ(e){return"object"==typeof e&&null!==e&&"nodeType"in e&&"number"==typeof e.nodeType}function i$(e){return iJ(e)&&11===e.nodeType}function iV(e){let t=RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return null!==e.nodeName.match(t)}function iH(e){let t=RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return null!==e.nodeName.match(t)}function iq(e){if(rE(e)&&!e.isInline())return!0;if(!rk(e)||iI(e))return!1;let t=e.getFirstChild(),n=null===t||nc(t)||nE(t)||t.isInline();return!e.isInline()&&!1!==e.canBeEmpty()&&n}let iY=new WeakMap,iG=new Map;function iX(e){if(!e._readOnly&&e.isEmpty())return iG;e._readOnly||w(192);let t=iY.get(e);return t||(t=function(e){let t=new Map;for(let[n,r]of e._nodeMap){let e=r.__type,i=t.get(e);i||(i=new Map,t.set(e,i)),i.set(n,r)}return t}(e),iY.set(e,t)),t}function iZ(e){let t=e.constructor.clone(e);return t.afterCloneFrom(e),t}function iQ(e,t){let n=Math.round((parseInt(e.style.paddingInlineStart,10)||0)/40);t.setIndent(n)}function i0(e,t){return Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==nl[t]}function i1(e){let t=X in e.prototype?e.prototype[X]():void 0,n=function(e){if(!(e===nl||e.prototype instanceof nl)){let t="<unknown>",n="<unknown>";try{t=e.getType()}catch(e){}try{rK.version&&(n=JSON.parse(rK.version))}catch(e){}w(290,e.name,t,n)}return e===rw||e===rN||e===nl}(e),r=!n&&i0(e,"getType")?e.getType():void 0,i,l=r;if(t)if(r)i=t[r];else for(let[e,n]of Object.entries(t))l=e,i=n;if(!n&&l&&(i0(e,"getType")||(e.getType=()=>l),i0(e,"clone")||(e.clone=t=>(rW=t,new e)),i0(e,"importJSON")||(e.importJSON=i&&i.$importJSON||(t=>(new e).updateFromJSON(t))),!i0(e,"importDOM")&&i)){let{importDOM:t}=i;t&&(e.importDOM=()=>t)}return{ownNodeConfig:i,ownNodeType:l}}let i2=(e,t)=>{let n=e;for(;null!=n&&!rM(n);){if(t(n))return n;n=n.getParent()}return null},i3={next:"previous",previous:"next"};class i4{origin;constructor(e){this.origin=e}[Symbol.iterator](){return lp({hasNext:lt,initial:this.getAdjacentCaret(),map:e=>e,step:e=>e.getAdjacentCaret()})}getAdjacentCaret(){return ls(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return ls(this.origin,this.direction)}remove(){let e=this.getNodeAtCaret();return e&&e.remove(),this}replaceOrInsert(e,t){let n=this.getNodeAtCaret();return e.is(this.origin)||e.is(n)||(null===n?this.insert(e):n.replace(e,t)),this}splice(e,t,n="next"){let r=n===this.direction?t:Array.from(t).reverse(),i=this,l=this.getParentAtCaret(),s=new Map;for(let t=i.getAdjacentCaret();null!==t&&s.size<e;t=t.getAdjacentCaret()){let e=t.origin.getWritable();s.set(e.getKey(),e)}for(let e of r){if(s.size>0){let t=i.getNodeAtCaret();if(t)if(s.delete(t.getKey()),s.delete(e.getKey()),t.is(e)||i.origin.is(e));else{let n=e.getParent();n&&n.is(l)&&e.remove(),t.replace(e)}else null===t&&w(263,Array.from(s).join(" "))}else i.insert(e);i=ls(e,this.direction)}for(let e of s.values())e.remove();return this}}class i6 extends i4{type="child";getLatest(){let e=this.origin.getLatest();return e===this.origin?this:lu(e,this.direction)}getParentCaret(e="root"){return ls(i7(this.getParentAtCaret(),e),this.direction)}getFlipped(){let e=i3[this.direction];return ls(this.getNodeAtCaret(),e)||lu(this.origin,e)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(e){return e instanceof i6&&this.direction===e.direction&&this.origin.is(e.origin)}isSamePointCaret(e){return this.isSameNodeCaret(e)}}let i5={root:rM,shadowRoot:iI};function i7(e,t="root"){return i5[t](e)?null:e}class i9 extends i4{type="sibling";getLatest(){let e=this.origin.getLatest();return e===this.origin?this:ls(e,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return rk(this.origin)?lu(this.origin,this.direction):null}getParentCaret(e="root"){return ls(i7(this.getParentAtCaret(),e),this.direction)}getFlipped(){let e=i3[this.direction];return ls(this.getNodeAtCaret(),e)||lu(this.origin.getParentOrThrow(),e)}isSamePointCaret(e){return e instanceof i9&&this.direction===e.direction&&this.origin.is(e.origin)}isSameNodeCaret(e){return(e instanceof i9||e instanceof i8)&&this.direction===e.direction&&this.origin.is(e.origin)}}class i8 extends i4{type="text";offset;constructor(e,t){super(e),this.offset=t}getLatest(){let e=this.origin.getLatest();return e===this.origin?this:lo(e,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(e="root"){return ls(i7(this.getParentAtCaret(),e),this.direction)}getFlipped(){return lo(this.origin,i3[this.direction],this.offset)}isSamePointCaret(e){return e instanceof i8&&this.direction===e.direction&&this.origin.is(e.origin)&&this.offset===e.offset}isSameNodeCaret(e){return(e instanceof i9||e instanceof i8)&&this.direction===e.direction&&this.origin.is(e.origin)}getSiblingCaret(){return ls(this.origin,this.direction)}}function le(e){return e instanceof i8}function lt(e){return e instanceof i9}function ln(e){return e instanceof i6}let lr={next:class extends i8{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends i8{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},li={next:class extends i9{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends i9{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},ll={next:class extends i6{direction="next";getNodeAtCaret(){return this.origin.getFirstChild()}insert(e){return this.origin.splice(0,0,[e]),this}},previous:class extends i6{direction="previous";getNodeAtCaret(){return this.origin.getLastChild()}insert(e){return this.origin.splice(this.origin.getChildrenSize(),0,[e]),this}}};function ls(e,t){return e?new li[t](e):null}function lo(e,t,n){return e?new lr[t](e,la(e,n)):null}function la(e,t,n="error"){let r=e.getTextContentSize(),i="next"===t?r:"previous"===t?0:t;return(i<0||i>r)&&("clamp"!==n&&E(284,String(t),String(r),e.getKey()),i=i<0?0:r),i}function lu(e,t){return rk(e)?new ll[t](e):null}function ld(e){var t;return e&&((t=e.getAdjacentCaret())&&t.getChildCaret()||t)}class lc{type="node-caret-range";direction;anchor;focus;constructor(e,t,n){this.anchor=e,this.focus=t,this.direction=n}getLatest(){let e=this.anchor.getLatest(),t=this.focus.getLatest();return e===this.anchor&&t===this.focus?this:new lc(e,t,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){let e=e=>{let t=this[e].getLatest();return le(t)?function(e,t){let{direction:n,origin:r}=e;return new lf(e,la(r,"focus"===t?i3[n]:n)-e.offset)}(t,e):null},t=e("anchor"),n=e("focus");if(t&&n){let{caret:e}=t,{caret:r}=n;if(e.isSameNodeCaret(r))return[new lf(e,r.offset-e.offset),null]}return[t,n]}iterNodeCarets(e="root"){let t=le(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),n=this.focus.getLatest(),r=le(n),i=t=>t.isSameNodeCaret(n)?null:ld(t)||t.getParentCaret(e);return lp({hasNext:e=>null!==e&&!(r&&n.isSameNodeCaret(e)),initial:t.isSameNodeCaret(n)?null:i(t),map:e=>e,step:i})}[Symbol.iterator](){return this.iterNodeCarets("root")}}class lf{type="slice";caret;distance;constructor(e,t){this.caret=e,this.distance=t}getSliceIndices(){let{distance:e,caret:{offset:t}}=this,n=t+e;return n<t?[n,t]:[t,n]}getTextContent(){let[e,t]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(e,t)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){let{caret:{origin:e,direction:t}}=this,[n,r]=this.getSliceIndices(),i=e.getTextContent();return lo(e.setTextContent(i.slice(0,n)+i.slice(r)),t,n)}}function lh(e){return lg(e,ls(is(),e.direction))}function lg(e,t){return e.direction!==t.direction&&w(265),new lc(e,t,e.direction)}function lp(e){let{initial:t,hasNext:n,step:r,map:i}=e,l=t;return{[Symbol.iterator](){return this},next(){if(!n(l))return{done:!0,value:void 0};let e={done:!1,value:i(l)};return l=r(l),e}}}function lm(e,t){let n=lx(e.origin,t.origin);switch(null===n&&w(275,e.origin.getKey(),t.origin.getKey()),n.type){case"same":{let n="text"===e.type,r="text"===t.type;return n&&r?Math.sign(e.offset-t.offset):e.type===t.type?0:n?-1:r?1:"child"===e.type?-1:1}case"ancestor":return"child"===e.type?-1:1;case"descendant":return"child"===t.type?1:-1;case"branch":return l_(n)}}function l_(e){let{a:t,b:n}=e,r=t.__key,i=n.__key,l=t,s=n;for(;l&&s;l=l.getNextSibling(),s=s.getNextSibling()){if(l.__key===i)return -1;if(s.__key===r)return 1}return null===l?1:-1}function ly(e){return rk(e)?[e.getLatest(),null]:[e.getParent(),e.getLatest()]}function lx(e,t){if(e.is(t))return{commonAncestor:e,type:"same"};let n=new Map;for(let[t,r]=ly(e);t;r=t,t=t.getParent())n.set(t,r);for(let[r,i]=ly(t);r;i=r,r=r.getParent()){let l=n.get(r);if(void 0!==l)return null===l?(r.is(e)||w(276),{commonAncestor:r,type:"ancestor"}):null===i?(r.is(t)||w(277),{commonAncestor:r,type:"descendant"}):((rk(l)||l.is(e))&&(rk(i)||i.is(t))&&r.is(l.getParent())&&r.is(i.getParent())||w(278),{a:l,b:i,commonAncestor:r,type:"branch"})}return null}function lv(e,t){var n;let r,{type:i,key:l,offset:s}=e,o=(null===(r=r8(n=e.key))&&w(63,n),r);return"text"===i?(nE(o)||w(266,o.getType(),l),lo(o,t,s)):(rk(o)||w(267,o.getType(),l),function(e,t,n){let r=lu(e,"next");for(let e=0;e<t;e++){let e=r.getAdjacentCaret();if(null===e)break;r=e}return lO(r,n)}(o,e.offset,t))}function lS(e,t){let{origin:n,direction:r}=t,i="next"===r;le(t)?e.set(n.getKey(),t.offset,"text"):lt(t)?nE(n)?e.set(n.getKey(),la(n,r),"text"):e.set(n.getParentOrThrow().getKey(),n.getIndexWithinParent()+ +!!i,"element"):(ln(t)&&rk(n)||w(268),e.set(n.getKey(),i?0:n.getChildrenSize(),"element"))}function lC(e,t){lS(e.anchor,t.anchor),lS(e.focus,t.focus)}function lb(e){let{anchor:t,focus:n}=e,r=lv(t,"next"),i=lv(n,"next"),l=0>=lm(r,i)?"next":"previous";return lg(lO(r,l),lO(i,l))}function lN(e){let{direction:t,origin:n}=e,r=ls(n,i3[t]).getNodeAtCaret();return r?ls(r,t):lu(n.getParentOrThrow(),t)}function lk(e,t="root"){let n=[e];for(let r=ln(e)?e.getParentCaret(t):e.getSiblingCaret();null!==r;r=r.getParentCaret(t))n.push(lN(r));return n}function lT(e){return!!e&&e.origin.isAttached()}function lw(e){let t=function(e){let t=e;for(;ln(t);){let e=ld(t);if(!ln(e))break;t=e}return t}(e.getLatest()),{direction:n}=t;if(nE(t.origin))return le(t)?t:lo(t.origin,n,n);let r=t.getAdjacentCaret();return lt(r)&&nE(r.origin)?lo(r.origin,n,i3[n]):t}function lE(e){return le(e)&&e.offset!==la(e.origin,e.direction)}function lO(e,t){return e.direction===t?e:e.getFlipped()}function lM(e,t){return e.direction===t?e:lg(lO(e.focus,t),lO(e.anchor,t))}function lA(e,t){if(!t||e===t)return e;for(let n in t)if(e[n]!==t[n])return{...e,...t};return e}let lD="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,lP=lD?i.useLayoutEffect:i.useEffect,lL={tag:no};function lF({initialConfig:e,children:t}){let n=(0,i.useMemo)(()=>{let{theme:t,namespace:n,nodes:r,onError:i,editorState:l,html:s}=e,o={getTheme:function(){return null!=t?t:null}},a=rB({editable:e.editable,html:s,namespace:n,nodes:r,onError:e=>i(e,a),theme:t});return function(e,t){if(null!==t){if(void 0===t)e.update(()=>{let t=is();if(t.isEmpty()){let n=rR();t.append(n);let r=lD?document.activeElement:null;(null!==n1()||null!==r&&r===e.getRootElement())&&n.select()}},lL);else if(null!==t)switch(typeof t){case"string":{let n=e.parseEditorState(t);e.setEditorState(n,lL);break}case"object":e.setEditorState(t,lL);break;case"function":e.update(()=>{is().isEmpty()&&t(e)},lL)}}}(a,l),[a,o]},[]);return lP(()=>{let t=e.editable,[r]=n;r.setEditable(void 0===t||t)},[]),(0,r.jsx)(k.Provider,{value:n,children:t})}let lI="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?i.useLayoutEffect:i.useEffect;function lR(e){return{initialValueFn:()=>e.isEditable(),subscribe:t=>e.registerEditableListener(t)}}let lj=new Map;function lz(e){let t={};if(!e)return t;for(let n of e.split(";"))if(""!==n){let[e,r]=n.split(/:([^]+)/);e&&r&&(t[e.trim()]=r.trim())}return t}function lB(e){let t=lj.get(e);return void 0===t&&(t=lz(e),lj.set(e,t)),t}function lK(e){let t=rd().getElementByKey(e.getKey());if(null===t)return null;let n=t.ownerDocument.defaultView;return null===n?null:n.getComputedStyle(t)}function lW(e){return lK(rM(e)?e:e.getParentOrThrow())}function lU(e){let t=lW(e);return null!==t&&"rtl"===t.direction}function lJ(e,t,n="self"){let r=e.getStartEndPoints();if(t.isSelected(e)&&!rQ(t)&&null!==r){let[l,s]=r,o=e.isBackward(),a=l.getNode(),u=s.getNode(),d=t.is(a),c=t.is(u);if(d||c){var i;let[r,l]=nW(e),s=a.is(u),d=t.is(o?u:a),c=t.is(o?a:u),f,h=0;s?(h=r>l?l:r,f=r>l?r:l):d?(h=o?l:r,f=void 0):c&&(h=0,f=o?r:l);let g=t.__text.slice(h,f);g!==t.__text&&("clone"===n&&((i=iZ(t))[nr]=!0,t=i),t.__text=g)}}return t}function l$(e){let t=lV(e);return null!==t&&"vertical-rl"===t.writingMode}function lV(e){let t=e.anchor.getNode();return rk(t)?lK(t):lW(t)}function lH(e,t){let n=l$(e)?!t:t;lq(e)&&(n=!n);let r=lv(e.focus,n?"previous":"next");if(lE(r))return!1;for(let e of lh(r)){if(ln(e))return!e.origin.isInline();if(!rk(e.origin)){if(rE(e.origin))return!0;break}}return!1}function lq(e){let t=lV(e);return null!==t&&"rtl"===t.direction}function lY(e,t,n){let r,i=lq(e);r=l$(e)||i?!n:n,e.modify(t?"extend":"move",r,"character")}let lG="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,lX=lG&&"documentMode"in document?document.documentMode:null,lZ=(lG&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),lG&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent));function lQ(...e){let t=[];for(let n of e)if(n&&"string"==typeof n)for(let[e]of n.matchAll(/\S+/g))t.push(e);return t}function l0(...e){return()=>{for(let t=e.length-1;t>=0;t--)e[t]();e.length=0}}function l1(e,...t){let n=lQ(...t);n.length>0&&e.classList.add(...n)}function l2(e,...t){let n=lQ(...t);n.length>0&&e.classList.remove(...n)}lG&&"InputEvent"in window&&!lX&&new window.InputEvent("input"),lG&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),lG&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&window.MSStream,lG&&/Android/.test(navigator.userAgent),lG&&/^(?=.*Chrome).*/i.test(navigator.userAgent),lG&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent);function l3(e,t){return null!==e&&Object.getPrototypeOf(e).constructor.name===t.name}let l4=!(lZ||!lG)&&void 0,l6=Symbol.for("preact-signals");function l5(){if(l9>1)return void l9--;let e,t=!1;for(;void 0!==n;){let r=n;for(n=void 0,l8++;void 0!==r;){let n=r.o;if(r.o=void 0,r.f&=-3,!(8&r.f)&&sr(r))try{r.c()}catch(n){t||(e=n,t=!0)}r=n}}if(l8=0,l9--,t)throw e}function l7(e){let n=t;t=void 0;try{return e()}finally{t=n}}let l9=0,l8=0,se=0;function st(e){if(void 0===t)return;let n=e.n;return void 0===n||n.t!==t?(n={i:0,S:e,p:t.s,n:void 0,t:t,e:void 0,x:void 0,r:n},void 0!==t.s&&(t.s.n=n),t.s=n,e.n=n,32&t.f&&e.S(n),n):-1===n.i?(n.i=0,void 0!==n.n&&(n.n.p=n.p,void 0!==n.p&&(n.p.n=n.n),n.p=t.s,n.n=void 0,t.s.n=n,t.s=n),n):void 0}function sn(e,t){this.v=e,this.i=0,this.n=void 0,this.t=void 0,this.W=null==t?void 0:t.watched,this.Z=null==t?void 0:t.unwatched,this.name=null==t?void 0:t.name}function sr(e){for(let t=e.s;void 0!==t;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function si(e){for(let t=e.s;void 0!==t;t=t.n){let n=t.S.n;if(void 0!==n&&(t.r=n),t.S.n=t,t.i=-1,void 0===t.n){e.s=t;break}}}function sl(e){let t,n=e.s;for(;void 0!==n;){let e=n.p;-1===n.i?(n.S.U(n),void 0!==e&&(e.n=n.n),void 0!==n.n&&(n.n.p=e)):t=n,n.S.n=n.r,void 0!==n.r&&(n.r=void 0),n=e}e.s=t}function ss(e,t){sn.call(this,void 0),this.x=e,this.s=void 0,this.g=se-1,this.f=4,this.W=null==t?void 0:t.watched,this.Z=null==t?void 0:t.unwatched,this.name=null==t?void 0:t.name}function so(e){let n=e.u;if(e.u=void 0,"function"==typeof n){l9++;let r=t;t=void 0;try{n()}catch(t){throw e.f&=-2,e.f|=8,sa(e),t}finally{t=r,l5()}}}function sa(e){for(let t=e.s;void 0!==t;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,so(e)}function su(e){if(t!==this)throw Error("Out-of-order effect");sl(this),t=e,this.f&=-2,8&this.f&&sa(this),l5()}function sd(e,t){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=null==t?void 0:t.name}function sc(e,t){let n=new sd(e,t);try{n.c()}catch(e){throw n.d(),e}let r=n.d.bind(n);return r[Symbol.dispose]=r,r}function sf(e,t={}){let n={};for(let r in e){let i=t[r],l=new sn(void 0===i?e[r]:i,void 0);n[r]=l}return n}sn.prototype.brand=l6,sn.prototype.h=function(){return!0},sn.prototype.S=function(e){let t=this.t;t!==e&&void 0===e.e&&(e.x=t,this.t=e,void 0!==t?t.e=e:l7(()=>{var e;null==(e=this.W)||e.call(this)}))},sn.prototype.U=function(e){if(void 0!==this.t){let t=e.e,n=e.x;void 0!==t&&(t.x=n,e.e=void 0),void 0!==n&&(n.e=t,e.x=void 0),e===this.t&&(this.t=n,void 0===n&&l7(()=>{var e;null==(e=this.Z)||e.call(this)}))}},sn.prototype.subscribe=function(e){return sc(()=>{let n=this.value,r=t;t=void 0;try{e(n)}finally{t=r}},{name:"sub"})},sn.prototype.valueOf=function(){return this.value},sn.prototype.toString=function(){return this.value+""},sn.prototype.toJSON=function(){return this.value},sn.prototype.peek=function(){let e=t;t=void 0;try{return this.value}finally{t=e}},Object.defineProperty(sn.prototype,"value",{get(){let e=st(this);return void 0!==e&&(e.i=this.i),this.v},set(e){if(e!==this.v){if(l8>100)throw Error("Cycle detected");this.v=e,this.i++,se++,l9++;try{for(let e=this.t;void 0!==e;e=e.x)e.t.N()}finally{l5()}}}}),ss.prototype=new sn,ss.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if(32==(36&this.f)||(this.f&=-5,this.g===se))return!0;if(this.g=se,this.f|=1,this.i>0&&!sr(this))return this.f&=-2,!0;let e=t;try{si(this),t=this;let e=this.x();(16&this.f||this.v!==e||0===this.i)&&(this.v=e,this.f&=-17,this.i++)}catch(e){this.v=e,this.f|=16,this.i++}return t=e,sl(this),this.f&=-2,!0},ss.prototype.S=function(e){if(void 0===this.t){this.f|=36;for(let e=this.s;void 0!==e;e=e.n)e.S.S(e)}sn.prototype.S.call(this,e)},ss.prototype.U=function(e){if(void 0!==this.t&&(sn.prototype.U.call(this,e),void 0===this.t)){this.f&=-33;for(let e=this.s;void 0!==e;e=e.n)e.S.U(e)}},ss.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(let e=this.t;void 0!==e;e=e.x)e.t.N()}},Object.defineProperty(ss.prototype,"value",{get(){if(1&this.f)throw Error("Cycle detected");let e=st(this);if(this.h(),void 0!==e&&(e.i=this.i),16&this.f)throw this.v;return this.v}}),sd.prototype.c=function(){let e=this.S();try{if(8&this.f||void 0===this.x)return;let e=this.x();"function"==typeof e&&(this.u=e)}finally{e()}},sd.prototype.S=function(){if(1&this.f)throw Error("Cycle detected");this.f|=1,this.f&=-9,so(this),si(this),l9++;let e=t;return t=this,su.bind(this,e)},sd.prototype.N=function(){2&this.f||(this.f|=2,this.o=n,n=this)},sd.prototype.d=function(){this.f|=8,1&this.f||sa(this)},sd.prototype.dispose=function(){this.d()},(e,t,n)=>sf(t);function sh(e,...t){let n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;for(let n of(r.append("code",e),t))r.append("v",n);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let sg=new Set;class sp{builder;configs;_dependency;_peerNameSet;extension;state;_signal;constructor(e,t){this.builder=e,this.extension=t,this.configs=new Set,this.state={id:0}}mergeConfigs(){let e=this.extension.config||{},t=this.extension.mergeConfig?this.extension.mergeConfig.bind(this.extension):lA;for(let n of this.configs)e=t(e,n);return e}init(e){let t,n=this.state;2===n.id||sh(306,String(n.id));let r={getDependency:this.getInitDependency.bind(this),getDirectDependentNames:this.getDirectDependentNames.bind(this),getPeer:this.getInitPeer.bind(this),getPeerNameSet:this.getPeerNameSet.bind(this)},i={...r,getDependency:this.getDependency.bind(this),getInitResult:this.getInitResult.bind(this),getPeer:this.getPeer.bind(this)},l=Object.assign(n,{config:this.mergeConfigs(),id:3,registerState:r});this.state=l,this.extension.init&&(t=this.extension.init(e,l.config,r)),this.state=Object.assign(l,{id:4,initResult:t,registerState:i})}build(e){let t,n=this.state;4!==n.id&&sh(307,String(n.id),String(5)),this.extension.build&&(t=this.extension.build(e,n.config,n.registerState));let r={...n.registerState,getOutput:()=>t,getSignal:this.getSignal.bind(this)};this.state=Object.assign(n,{id:5,output:t,registerState:r})}register(e,t){this._signal=t;let n=this.state;5!==n.id&&sh(308,String(n.id),String(5));let r=this.extension.register&&this.extension.register(e,n.config,n.registerState);return this.state=Object.assign(n,{id:6}),()=>{let e=this.state;7!==e.id&&sh(309,String(n.id),String(7)),this.state=Object.assign(e,{id:5}),r&&r()}}afterRegistration(e){let t,n=this.state;return 6!==n.id&&sh(310,String(n.id),String(6)),this.extension.afterRegistration&&(t=this.extension.afterRegistration(e,n.config,n.registerState)),this.state=Object.assign(n,{id:7}),t}getSignal(){return void 0===this._signal&&sh(311),this._signal}getInitResult(){void 0===this.extension.init&&sh(312,this.extension.name);let e=this.state;return e.id>=4||sh(313,String(e.id),String(4)),e.initResult}getInitPeer(e){let t=this.builder.extensionNameMap.get(e);return t?t.getExtensionInitDependency():void 0}getExtensionInitDependency(){let e=this.state;return e.id>=3||sh(314,String(e.id),String(3)),{config:e.config}}getPeer(e){let t=this.builder.extensionNameMap.get(e);return t?t.getExtensionDependency():void 0}getInitDependency(e){let t=this.builder.getExtensionRep(e);return void 0===t&&sh(315,this.extension.name,e.name),t.getExtensionInitDependency()}getDependency(e){let t=this.builder.getExtensionRep(e);return void 0===t&&sh(315,this.extension.name,e.name),t.getExtensionDependency()}getState(){let e=this.state;return e.id>=7||sh(316,String(e.id),String(7)),e}getDirectDependentNames(){return this.builder.incomingEdges.get(this.extension.name)||sg}getPeerNameSet(){let e=this._peerNameSet;return e||(e=new Set((this.extension.peerDependencies||[]).map(([e])=>e)),this._peerNameSet=e),e}getExtensionDependency(){if(!this._dependency){let e=this.state;e.id>=5||sh(317,this.extension.name),this._dependency={config:e.config,init:e.initResult,output:e.output}}return this._dependency}}let sm={tag:no};function s_(){let e=is();e.isEmpty()&&e.append(rR())}let sy={config:{setOptions:sm,updateOptions:sm},init:({$initialEditorState:e=s_})=>({$initialEditorState:e,initialized:!1}),afterRegistration(e,{updateOptions:t,setOptions:n},r){let i=r.getInitResult();if(!i.initialized){i.initialized=!0;let{$initialEditorState:r}=i;if(r instanceof rP)e.setEditorState(r,n);else if("function"==typeof r)e.update(()=>{r(e)},t);else if(r&&("string"==typeof r||"object"==typeof r)){let t=e.parseEditorState(r);e.setEditorState(t,n)}}return()=>{}},name:"@lexical/extension/InitialState",nodes:[rO,nx,na,nM,rF]},sx=Symbol.for("@lexical/extension/LexicalBuilder");function sv(){}function sS(e){throw e}function sC(e){return Array.isArray(e)?e:[e]}let sb="0.39.0+prod.esm";class sN{roots;extensionNameMap;outgoingConfigEdges;incomingEdges;conflicts;_sortedExtensionReps;PACKAGE_VERSION;constructor(e){for(const t of(this.outgoingConfigEdges=new Map,this.incomingEdges=new Map,this.extensionNameMap=new Map,this.conflicts=new Map,this.PACKAGE_VERSION=sb,this.roots=e,e))this.addExtension(t)}static fromExtensions(e){let t=[sC(sy)];for(let n of e)t.push(sC(n));return new sN(t)}static maybeFromEditor(e){let t=e[sx];return t&&(t.PACKAGE_VERSION!==sb&&sh(292,t.PACKAGE_VERSION,sb),t instanceof sN||sh(293)),t}static fromEditor(e){let t=sN.maybeFromEditor(e);return void 0===t&&sh(294),t}constructEditor(){let{$initialEditorState:e,onError:t,...n}=this.buildCreateEditorArgs(),r=Object.assign(rB({...n,...t?{onError:e=>{t(e,r)}}:{}}),{[sx]:this});for(let e of this.sortedExtensionReps())e.build(r);return r}buildEditor(){let e=sv;function t(){try{e()}finally{e=sv}}let n=Object.assign(this.constructEditor(),{dispose:t,[Symbol.dispose]:t});return e=l0(this.registerEditor(n),()=>n.setRootElement(null)),n}hasExtensionByName(e){return this.extensionNameMap.has(e)}getExtensionRep(e){let t=this.extensionNameMap.get(e.name);if(t)return t.extension!==e&&sh(295,e.name),t}addEdge(e,t,n){let r=this.outgoingConfigEdges.get(e);r?r.set(t,n):this.outgoingConfigEdges.set(e,new Map([[t,n]]));let i=this.incomingEdges.get(t);i?i.add(e):this.incomingEdges.set(t,new Set([e]))}addExtension(e){void 0!==this._sortedExtensionReps&&sh(296);let[t]=sC(e);"string"!=typeof t.name&&sh(297,typeof t.name);let n=this.extensionNameMap.get(t.name);if(void 0!==n&&n.extension!==t&&sh(298,t.name),!n){n=new sp(this,t),this.extensionNameMap.set(t.name,n);let e=this.conflicts.get(t.name);for(let n of("string"==typeof e&&sh(299,t.name,e),t.conflictsWith||[]))this.extensionNameMap.has(n)&&sh(299,t.name,n),this.conflicts.set(n,t.name);for(let e of t.dependencies||[]){let n=sC(e);this.addEdge(t.name,n[0].name,n.slice(1)),this.addExtension(n)}for(let[e,n]of t.peerDependencies||[])this.addEdge(t.name,e,n?[n]:[])}}sortedExtensionReps(){if(this._sortedExtensionReps)return this._sortedExtensionReps;let e=[],t=(n,r)=>{var i,l;let s=n.state;if(2===s.id)return;let o=n.extension.name;0===s.id||sh(300,o,r||"[unknown]"),0===(i=s).id||sh(304,String(i.id),String(0)),n.state=s=Object.assign(i,{id:1});let a=this.outgoingConfigEdges.get(o);if(a)for(let e of a.keys()){let n=this.extensionNameMap.get(e);n&&t(n,o)}1===(l=s).id||sh(305,String(l.id),String(1)),n.state=s=Object.assign(l,{id:2}),e.push(n)};for(let e of this.extensionNameMap.values())0===e.state.id&&t(e);for(let t of e)for(let[e,n]of this.outgoingConfigEdges.get(t.extension.name)||[])if(n.length>0){let t=this.extensionNameMap.get(e);if(t)for(let e of n)t.configs.add(e)}for(let[e,...t]of this.roots)if(t.length>0){let n=this.extensionNameMap.get(e.name);for(let r of(void 0===n&&sh(301,e.name),t))n.configs.add(r)}return this._sortedExtensionReps=e,this._sortedExtensionReps}registerEditor(e){let t=this.sortedExtensionReps(),n=new AbortController,r=[()=>n.abort()],i=n.signal;for(let n of t){let t=n.register(e,i);t&&r.push(t)}for(let n of t){let t=n.afterRegistration(e);t&&r.push(t)}return l0(...r)}buildCreateEditorArgs(){let e={},t=new Set,n=new Map,r=new Map,i={},l={},s=this.sortedExtensionReps();for(let o of s){let{extension:s}=o;if(void 0!==s.onError&&(e.onError=s.onError),void 0!==s.disableEvents&&(e.disableEvents=s.disableEvents),void 0!==s.parentEditor&&(e.parentEditor=s.parentEditor),void 0!==s.editable&&(e.editable=s.editable),void 0!==s.namespace&&(e.namespace=s.namespace),void 0!==s.$initialEditorState&&(e.$initialEditorState=s.$initialEditorState),s.nodes){for(let e of("function"==typeof s.nodes?s.nodes():s.nodes)||[]){if("function"!=typeof e){let t=n.get(e.replace);t&&sh(302,s.name,e.replace.name,t.extension.name),n.set(e.replace,o)}t.add(e)}}if(s.html){if(s.html.export)for(let[e,t]of s.html.export.entries())r.set(e,t);s.html.import&&Object.assign(i,s.html.import)}s.theme&&function e(t,n){if(t&&n&&!Array.isArray(n)&&"object"==typeof t&&"object"==typeof n){for(let r in n)t[r]=e(t[r],n[r]);return t}return n}(l,s.theme)}Object.keys(l).length>0&&(e.theme=l),t.size&&(e.nodes=[...t]);let o=Object.keys(i).length>0,a=r.size>0;for(let t of((o||a)&&(e.html={},o&&(e.html.import=i),a&&(e.html.export=r)),s))t.init(e);return e.onError||(e.onError=sS),e}}eV("INSERT_HORIZONTAL_RULE_COMMAND");var sk=e.i(64924);function sT(e){return()=>(function(e){if(!function(e,t=!0){if(e)return!1;let n=is().getTextContent();return t&&(n=n.trim()),""===n}(e,!1))return!1;let t=is().getChildren(),n=t.length;if(n>1)return!1;for(let e=0;e<n;e++){let n=t[e];if(rE(n))return!1;if(rk(n)){if(!rj(n)||0!==n.__indent)return!1;let t=n.getChildren(),r=t.length;for(let n=0;n<r;n++)if(!nE(t[e]))return!1}}return!0})(e)}function sw(e){let t=window.location.origin,n=n=>{if(n.origin!==t)return;let r=e.getRootElement();if(document.activeElement!==r)return;let i=n.data;if("string"==typeof i){let t;try{t=JSON.parse(i)}catch(e){return}if(t&&"nuanria_messaging"===t.protocol&&"request"===t.type){let r=t.payload;if(r&&"makeChanges"===r.functionId){let t=r.args;if(t){let[r,i,l,s,o]=t;e.update(()=>{let e=n1();if(nj(e)){let t=e.anchor,a=t.getNode(),u=0,d=0;if(nE(a)&&r>=0&&i>=0&&(u=r,d=r+i,e.setTextNodeRange(a,u,a,d)),u===d&&""===l||(e.insertRawText(l),a=t.getNode()),nE(a)){u=s,d=s+o;let t=a.getTextContentSize();u=u>t?t:u,d=d>t?t:d,e.setTextNodeRange(a,u,a,d)}n.stopImmediatePropagation()}})}}}}};return window.addEventListener("message",n,!0),()=>{window.removeEventListener("message",n,!0)}}(e,t,n)=>sf(t),(e,t,n)=>sc(()=>n.getOutput().disabled.value?void 0:sw(e));let sE=new Set(["STYLE","SCRIPT"]);function sO(e,...t){let n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;for(let n of(r.append("code",e),t))r.append("v",n);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function sM(e,t,n){let r=e.getData("application/x-lexical-editor");if(r)try{let e=JSON.parse(r);if(e.namespace===n._config.namespace&&Array.isArray(e.nodes))return sA(n,function(e){let t=[];for(let n=0;n<e.length;n++){let r=rp(e[n],rd()._nodes);nE(r)&&function(e){let t=e.getStyle(),n=lz(t);lj.set(t,n)}(r),t.push(r)}return t}(e.nodes),t)}catch(e){console.error(e)}let i=e.getData("text/html"),l=e.getData("text/plain");if(i&&l!==i)try{let e=(new DOMParser).parseFromString(window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("lexical",{createHTML:e=>e}).createHTML(i):i,"text/html");return sA(n,function(e,t){let n=r1(t)?t.body.childNodes:t.childNodes,r=[],i=[];for(let t of n)if(!sE.has(t.nodeName)){let n=function e(t,n,r,i,l=new Map,s){let o=[];if(sE.has(t.nodeName))return o;let a=null,u=function(e,t){let{nodeName:n}=e,r=t._htmlConversions.get(n.toLowerCase()),i=null;if(void 0!==r)for(let t of r){let n=t(e);null!==n&&(null===i||(i.priority||0)<=(n.priority||0))&&(i=n)}return null!==i?i.conversion:null}(t,n),d=u?u(t):null,c=null;if(null!==d){c=d.after;let e=d.node;if(null!==(a=Array.isArray(e)?e[e.length-1]:e)){for(let[,e]of l)if(!(a=e(a,s)))break;a&&o.push(...Array.isArray(e)?e:[a])}null!=d.forChild&&l.set(t.nodeName,d.forChild)}let f=t.childNodes,h=[],g=(null==a||!iI(a))&&(null!=a&&nG(a)||i);for(let t=0;t<f.length;t++)h.push(...e(f[t],n,r,g,new Map(l),a));return null!=c&&(h=c(h)),iH(t)&&(h=function(e,t,n){let r=e.style.textAlign,i=[],l=[];for(let e=0;e<t.length;e++){let s=t[e];if(nG(s))r&&!s.getFormat()&&s.setFormat(r),i.push(s);else if(l.push(s),e===t.length-1||e<t.length-1&&nG(t[e+1])){let e=n();e.setFormat(r),e.append(...l),i.push(e),l=[]}}return i}(t,h,g?()=>{let e=new rL;return r.push(e),e}:rR)),null==a?h.length>0?o=o.concat(h):iH(t)&&null!=t.nextSibling&&null!=t.previousSibling&&iV(t.nextSibling)&&iV(t.previousSibling)&&(o=o.concat(nd())):rk(a)&&a.append(...h),o}(t,e,i,!1);null!==n&&(r=r.concat(n))}return function(e){for(let t of e)t.getNextSibling()instanceof rL&&t.insertAfter(nd());for(let t of e){for(let e of t.getChildren())t.insertBefore(e);t.remove()}}(i),r}(n,e),t)}catch(e){console.error(e)}let s=l||e.getData("text/uri-list");if(null!=s)if(nj(t)){let e=s.split(/(\r?\n|\t)/);""===e[e.length-1]&&e.pop();for(let t=0;t<e.length;t++){let n=n1();if(nj(n)){let r=e[t];"\n"===r||"\r\n"===r?n.insertParagraph():"	"===r?n.insertNodes([nA()]):n.insertText(r)}}}else t.insertRawText(s)}function sA(e,t,n){e.dispatchCommand(eq,{nodes:t,selection:n})||(n.insertNodes(t),function(e){if(nj(e)&&e.isCollapsed()){let t=e.anchor,n=null,r=lv(t,"previous");if(r)if(le(r))n=r.origin;else for(let e of lg(r,lu(is(),"next").getFlipped())){if(nE(e.origin)){n=e.origin;break}if(rk(e.origin)&&!e.origin.isInline())break}if(n&&nE(n)){let t=n.getFormat(),r=n.getStyle();e.format===t&&e.style===r||(e.format=t,e.style=r,e.dirty=!0)}}}(n))}let sD=null;async function sP(e,t,n){if(null!==sD)return!1;if(null!==t)return new Promise((r,i)=>{e.update(()=>{r(sL(e,t,n))})});let r=e.getRootElement(),i=e._window||window,l=i.document,s=iK(i);if(null===r||null===s)return!1;let o=l.createElement("span");o.style.cssText="position: fixed; top: -1000px;",o.append(l.createTextNode("#")),r.append(o);let a=new Range;return a.setStart(o,0),a.setEnd(o,1),s.removeAllRanges(),s.addRange(a),new Promise((t,r)=>{let s=e.registerCommand(tC,r=>(l3(r,ClipboardEvent)&&(s(),null!==sD&&(i.clearTimeout(sD),sD=null),t(sL(e,r,n))),!0),4);sD=i.setTimeout(()=>{s(),sD=null,t(!1)},50),l.execCommand("copy"),o.remove()})}function sL(e,t,n){if(void 0===n){let t=iK(e._window),r=n1();if(!r||r.isCollapsed()||!t)return!1;let i=t.anchorNode,l=t.focusNode;if(null!==i&&null!==l&&!rq(e,i,l))return!1;n=function(e=n1()){let t={"text/plain":e?e.getTextContent():""};if(e){let n=rd();for(let[r,i]of sF){let l=i(n,e);null!==l&&(t[r]=l)}}return t}(r)}t.preventDefault();let r=t.clipboardData;return null!==r&&(function(e,t){for(let[n]of sF)void 0===t[n]&&e.setData(n,"");for(let n in t){let r=t[n];void 0!==r&&e.setData(n,r)}}(r,n),!0)}let sF=[["text/html",function(t,n=n1()){return null==n&&sO(166),nj(n)&&n.isCollapsed()||0===n.getNodes().length?"":function(t,n){if("undefined"==typeof document||"undefined"==typeof window&&void 0===e.g.window)throw Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");let r=document.createElement("div"),i=is().getChildren();for(let e=0;e<i.length;e++)!function e(t,n,r,i=null){let l=null===i||n.isSelected(i),s=rk(n)&&n.excludeFromCopy("html"),o=n;null!==i&&nE(n)&&(o=lJ(i,n,"clone"));let a=rk(o)?o.getChildren():[],u=r$(t,o.getType()),{element:d,after:c}=u&&void 0!==u.exportDOM?u.exportDOM(t,o):o.exportDOM(t);if(!d)return!1;let f=document.createDocumentFragment();for(let r=0;r<a.length;r++){let s=a[r],o=e(t,s,f,i);!l&&rk(n)&&o&&n.extractWithChild(s,i,"html")&&(l=!0)}if(l&&!s){if((iU(d)||i$(d))&&d.append(f),r.append(d),c){let e=c.call(o,d);e&&(i$(d)?d.replaceChildren(e):d.replaceWith(e))}}else r.append(f);return l}(t,i[e],r,n);return r.innerHTML}(t,n)}],["application/x-lexical-editor",function(e,t=n1()){return null==t&&sO(166),nj(t)&&t.isCollapsed()||0===t.getNodes().length?null:JSON.stringify(function(e,t){let n=[],r=is().getChildren();for(let i=0;i<r.length;i++)!function e(t,n,r,i=[]){var l;let s,o,a=null===n||r.isSelected(n),u=rk(r)&&r.excludeFromCopy("html"),d=r;null!==n&&nE(d)&&(d=lJ(n,d,"clone"));let c=rk(d)?d.getChildren():[],f=(s=(l=d).exportJSON(),o=l.constructor,s.type!==o.getType()&&sO(58,o.name),rk(l)&&(Array.isArray(s.children)||sO(59,o.name)),s);nE(d)&&0===d.getTextContentSize()&&(a=!1);for(let i=0;i<c.length;i++){let l=c[i],s=e(t,n,l,f.children);!a&&rk(r)&&s&&r.extractWithChild(l,n,"clone")&&(a=!0)}if(a&&!u)i.push(f);else if(Array.isArray(f.children))for(let e=0;e<f.children.length;e++){let t=f.children[e];i.push(t)}return a}(e,t,r[i],n);return{namespace:e._config.namespace,nodes:n}}(e,t))}]];function sI(e,t){if(void 0!==document.caretRangeFromPoint){let n=document.caretRangeFromPoint(e,t);return null===n?null:{node:n.startContainer,offset:n.startOffset}}if("undefined"!==document.caretPositionFromPoint){let n=document.caretPositionFromPoint(e,t);return null===n?null:{node:n.offsetNode,offset:n.offset}}return null}let sR="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,sj=sR&&"documentMode"in document?document.documentMode:null,sz=sR&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),sB=!(!sR||!("InputEvent"in window)||sj)&&"getTargetRanges"in new window.InputEvent("input"),sK=sR&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),sW=sR&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,sU=sR&&/^(?=.*Chrome).*/i.test(navigator.userAgent),sJ=sR&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&sz&&!sU,s$=eV("DRAG_DROP_PASTE_FILE");class sV extends rN{static getType(){return"quote"}static clone(e){return new sV(e.__key)}createDOM(e){let t=document.createElement("blockquote");return l1(t,e.theme.quote),t}updateDOM(e,t){return!1}static importDOM(){return{blockquote:e=>({conversion:sX,priority:0})}}exportDOM(e){let{element:t}=super.exportDOM(e);if(iU(t)){this.isEmpty()&&t.append(document.createElement("br"));let e=this.getFormatType();e&&(t.style.textAlign=e);let n=this.getDirection();n&&(t.dir=n)}return{element:t}}static importJSON(e){return sH().updateFromJSON(e)}insertNewAfter(e,t){let n=rR(),r=this.getDirection();return n.setDirection(r),this.insertAfter(n,t),n}collapseAtStart(){let e=rR();return this.getChildren().forEach(t=>e.append(t)),this.replace(e),!0}canMergeWhenEmpty(){return!0}}function sH(){return iR(new sV)}class sq extends rN{__tag;static getType(){return"heading"}static clone(e){return new sq(e.__tag,e.__key)}constructor(e,t){super(t),this.__tag=e}getTag(){return this.__tag}setTag(e){let t=this.getWritable();return this.__tag=e,t}createDOM(e){let t=this.__tag,n=document.createElement(t),r=e.theme.heading;return void 0!==r&&l1(n,r[t]),n}updateDOM(e,t,n){return e.__tag!==this.__tag}static importDOM(){return{h1:e=>({conversion:sG,priority:0}),h2:e=>({conversion:sG,priority:0}),h3:e=>({conversion:sG,priority:0}),h4:e=>({conversion:sG,priority:0}),h5:e=>({conversion:sG,priority:0}),h6:e=>({conversion:sG,priority:0}),p:e=>{let t=e.firstChild;return null!==t&&sY(t)?{conversion:()=>({node:null}),priority:3}:null},span:e=>sY(e)?{conversion:e=>({node:sZ("h1")}),priority:3}:null}}exportDOM(e){let{element:t}=super.exportDOM(e);if(iU(t)){this.isEmpty()&&t.append(document.createElement("br"));let e=this.getFormatType();e&&(t.style.textAlign=e);let n=this.getDirection();n&&(t.dir=n)}return{element:t}}static importJSON(e){return sZ(e.tag).updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setTag(e.tag)}exportJSON(){return{...super.exportJSON(),tag:this.getTag()}}insertNewAfter(e,t=!0){let n=e?e.anchor.offset:0,r=this.getLastDescendant(),i=r&&(!e||e.anchor.key!==r.getKey()||n!==r.getTextContentSize())&&e?sZ(this.getTag()):rR(),l=this.getDirection();if(i.setDirection(l),this.insertAfter(i,t),0===n&&!this.isEmpty()&&e){let e=rR();e.select(),this.replace(e,!0)}return i}collapseAtStart(){let e=this.isEmpty()?rR():sZ(this.getTag());return this.getChildren().forEach(t=>e.append(t)),this.replace(e),!0}extractWithChild(){return!0}}function sY(e){return"span"===e.nodeName.toLowerCase()&&"26pt"===e.style.fontSize}function sG(e){let t=e.nodeName.toLowerCase(),n=null;return"h1"!==t&&"h2"!==t&&"h3"!==t&&"h4"!==t&&"h5"!==t&&"h6"!==t||(n=sZ(t),null!==e.style&&(iQ(e,n),n.setFormat(e.style.textAlign))),{node:n}}function sX(e){let t=sH();return null!==e.style&&(t.setFormat(e.style.textAlign),iQ(e,t)),{node:t}}function sZ(e="h1"){return iR(new sq(e))}function sQ(e){let t=null;if(l3(e,DragEvent)?t=e.dataTransfer:l3(e,ClipboardEvent)&&(t=e.clipboardData),null===t)return[!1,[],!1];let n=t.types,r=n.includes("Files"),i=n.includes("text/html")||n.includes("text/plain");return[r,Array.from(t.files),i]}function s0(e){let t=n1();if(!nj(t))return!1;let n=new Set,r=t.getNodes();for(let t=0;t<r.length;t++){let i=r[t],l=i.getKey();if(n.has(l))continue;let s=i2(i,e=>rk(e)&&!e.isInline());if(null===s)continue;let o=s.getKey();s.canIndent()&&!n.has(o)&&(n.add(o),e(s))}return n.size>0}function s1(e){for(let t of["lowercase","uppercase","capitalize"])e.hasFormat(t)&&e.toggleFormat(t)}let s2="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?i.useLayoutEffect:i.useEffect;function s3({editor:e,ErrorBoundary:t}){return function(e,t){let[n,l]=(0,i.useState)(()=>e.getDecorators());return s2(()=>e.registerDecoratorListener(e=>{(0,sk.flushSync)(()=>{l(e)})}),[e]),(0,i.useEffect)(()=>{l(e.getDecorators())},[e]),(0,i.useMemo)(()=>{let l=[],s=Object.keys(n);for(let o=0;o<s.length;o++){let a=s[o],u=(0,r.jsx)(t,{onError:t=>e._onError(t),children:(0,r.jsx)(i.Suspense,{fallback:null,children:n[a]})}),d=e.getElementByKey(a);null!==d&&l.push((0,sk.createPortal)(u,d,a))}return l},[t,n,e])}(e,t)}function s4({editor:e,ErrorBoundary:t}){return!function(e){let t=sN.maybeFromEditor(e);if(t&&t.hasExtensionByName("@lexical/react/ReactProvider")){for(let e of["@lexical/plain-text","@lexical/rich-text"])t.hasExtensionByName(e)&&function(e,...t){let n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;for(let e of(r.append("code",320),t))r.append("v",e);throw n.search=r.toString(),Error(`Minified Lexical error #320; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(0,e);return!0}return!1}(e)?(0,r.jsx)(s3,{editor:e,ErrorBoundary:t}):null}function s6(e){return e.getEditorState().read(sT(e.isComposing()))}function s5({contentEditable:e,placeholder:t=null,ErrorBoundary:n}){var i;let[l]=T();return s2(()=>{var e;return l0(l0((e=i).registerCommand(eY,e=>{let t=n1();return!!nB(t)&&(t.clear(),!0)},0),e.registerCommand(e0,e=>{let t=n1();return nj(t)?(t.deleteCharacter(e),!0):!!nB(t)&&(t.deleteNodes(),!0)},0),e.registerCommand(e5,e=>{let t=n1();return!!nj(t)&&(t.deleteWord(e),!0)},0),e.registerCommand(e7,e=>{let t=n1();return!!nj(t)&&(t.deleteLine(e),!0)},0),e.registerCommand(e3,t=>{let n=n1();if("string"==typeof t)null!==n&&n.insertText(t);else{if(null===n)return!1;let r=t.dataTransfer;if(null!=r)sM(r,n,e);else if(nj(n)){let e=t.data;return e&&n.insertText(e),!0}}return!0},0),e.registerCommand(e6,()=>{let e=n1();return!!nj(e)&&(e.removeText(),!0)},0),e.registerCommand(e9,e=>{let t=n1();return!!nj(t)&&(t.formatText(e),!0)},0),e.registerCommand(ty,e=>{let t=n1();if(!nj(t)&&!nB(t))return!1;for(let n of t.getNodes()){let t=i2(n,e=>rk(e)&&!e.isInline());null!==t&&t.setFormat(e)}return!0},0),e.registerCommand(e1,e=>{let t=n1();return!!nj(t)&&(t.insertLineBreak(e),!0)},0),e.registerCommand(e2,()=>{let e=n1();return!!nj(e)&&(e.insertParagraph(),!0)},0),e.registerCommand(tg,()=>{var e;let t;return e=[nA()],null===(t=n1()||n2())&&(t=is().selectEnd()),t.insertNodes(e),!0},0),e.registerCommand(tp,()=>s0(e=>{let t=e.getIndent();e.setIndent(t+1)}),0),e.registerCommand(tm,()=>s0(e=>{let t=e.getIndent();t>0&&e.setIndent(Math.max(0,t-1))}),0),e.registerCommand(ts,e=>{let t=n1();if(nB(t)){let n=t.getNodes();if(n.length>0)return e.preventDefault(),n[0].selectPrevious(),!0}else if(nj(t)){let n=iT(t.focus,!0);if(!e.shiftKey&&rE(n)&&!n.isIsolated()&&!n.isInline())return n.selectPrevious(),e.preventDefault(),!0}return!1},0),e.registerCommand(to,e=>{let t=n1();if(nB(t)){let n=t.getNodes();if(n.length>0)return e.preventDefault(),n[0].selectNext(0,0),!0}else if(nj(t)){let n;if("root"===(n=t.focus).key&&n.offset===is().getChildrenSize())return e.preventDefault(),!0;let r=iT(t.focus,!1);if(!e.shiftKey&&rE(r)&&!r.isIsolated()&&!r.isInline())return r.selectNext(),e.preventDefault(),!0}return!1},0),e.registerCommand(ti,e=>{let t=n1();if(nB(t)){let n=t.getNodes();if(n.length>0)return e.preventDefault(),lU(n[0])?n[0].selectNext(0,0):n[0].selectPrevious(),!0}if(!nj(t))return!1;if(lH(t,!0)){let n=e.shiftKey;return e.preventDefault(),lY(t,n,!0),!0}return!1},0),e.registerCommand(tn,e=>{let t=n1();if(nB(t)){let n=t.getNodes();if(n.length>0)return e.preventDefault(),lU(n[0])?n[0].selectPrevious():n[0].selectNext(0,0),!0}if(!nj(t))return!1;let n=e.shiftKey;return!!lH(t,!1)&&(e.preventDefault(),lY(t,n,!1),!0)},0),e.registerCommand(td,t=>{if(rE(ir(t.target)))return!1;let n=n1();if(nj(n)){if(function(e){var t;let n;if(!e.isCollapsed())return!1;let{anchor:r}=e;if(0!==r.offset)return!1;let i=r.getNode();if(rM(i))return!1;let l=(n=i2(t=i,e=>rk(e)&&!e.isInline()),rk(n)||function(e,...t){let n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;for(let e of(r.append("code",4),t))r.append("v",e);throw n.search=r.toString(),Error(`Minified Lexical error #4; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(0,t.__key),n);return l.getIndent()>0&&(l.is(i)||i.is(l.getFirstDescendant()))}(n))return t.preventDefault(),e.dispatchCommand(tm,void 0);if(sW&&"ko-KR"===navigator.language)return!1}else if(!nB(n))return!1;return t.preventDefault(),e.dispatchCommand(e0,!0)},0),e.registerCommand(tf,t=>{if(rE(ir(t.target)))return!1;let n=n1();return!(!nj(n)&&!nB(n))&&(t.preventDefault(),e.dispatchCommand(e0,!1))},0),e.registerCommand(ta,t=>{let n=n1();if(!nj(n))return!1;if(s1(n),null!==t){if((sW||sK||sJ)&&sB)return!1;if(t.preventDefault(),t.shiftKey)return e.dispatchCommand(e1,!1)}return e.dispatchCommand(e2,void 0)},0),e.registerCommand(tc,()=>!!nj(n1())&&(e.blur(),!0),0),e.registerCommand(t_,t=>{let[,n]=sQ(t);if(n.length>0){let r=sI(t.clientX,t.clientY);if(null!==r){let{offset:t,node:i}=r,l=ir(i);if(null!==l){let e=nZ();if(nE(l))e.anchor.set(l.getKey(),t,"text"),e.focus.set(l.getKey(),t,"text");else{let t=l.getParentOrThrow().getKey(),n=l.getIndexWithinParent()+1;e.anchor.set(t,n,"element"),e.focus.set(t,n,"element")}ia(eg(e))}e.dispatchCommand(s$,n)}return t.preventDefault(),!0}return!!nj(n1())},0),e.registerCommand(tx,e=>{let[t]=sQ(e),n=n1();return!(t&&!nj(n))},0),e.registerCommand(tv,e=>{let[t]=sQ(e),n=n1();if(t&&!nj(n))return!1;let r=sI(e.clientX,e.clientY);return null!==r&&rE(ir(r.node))&&e.preventDefault(),!0},0),e.registerCommand(tN,()=>((function(e){let t=is();if(nj(void 0)){let e=(void 0).anchor,t=(void 0).focus,n=e.getNode().getTopLevelElementOrThrow().getParentOrThrow();return e.set(n.getKey(),0,"element"),t.set(n.getKey(),n.getChildrenSize(),"element"),eg(void 0)}ia(eg(t.select(0,t.getChildrenSize())))})(),!0),0),e.registerCommand(tC,t=>(sP(e,l3(t,ClipboardEvent)?t:null),!0),0),e.registerCommand(tb,t=>((async function(e,t){await sP(t,l3(e,ClipboardEvent)?e:null),t.update(()=>{let e=n1();nj(e)?e.removeText():nB(e)&&e.getNodes().forEach(e=>e.remove())})})(t,e),!0),0),e.registerCommand(e4,t=>{let[,n,r]=sQ(t);return n.length>0&&!r?(e.dispatchCommand(s$,n),!0):!(iJ(t.target)&&rH(t.target))&&null!==n1()&&(t.preventDefault(),e.update(()=>{let n=n1(),r=l3(t,InputEvent)||l3(t,KeyboardEvent)?null:t.clipboardData;null!=r&&null!==n&&sM(r,n,e)},{tag:"paste"}),!0)},0),e.registerCommand(tu,e=>{let t=n1();return nj(t)&&s1(t),!1},0),e.registerCommand(th,e=>{let t=n1();return nj(t)&&s1(t),!1},0)),sw(i))},[i=l]),(0,r.jsxs)(r.Fragment,{children:[e,(0,r.jsx)(s7,{content:t}),(0,r.jsx)(s4,{editor:l,ErrorBoundary:n})]})}function s7({content:e}){let[t]=T(),n=function(e){let[t,n]=(0,i.useState)(()=>s6(e));return s2(()=>{function t(){n(s6(e))}return t(),l0(e.registerUpdateListener(()=>{t()}),e.registerEditableListener(()=>{t()}))},[e]),t}(t),r=function(e){let[t]=T(),n=(0,i.useMemo)(()=>e(t),[t,e]),[r,l]=(0,i.useState)(()=>n.initialValueFn()),s=(0,i.useRef)(r);return lI(()=>{let{initialValueFn:e,subscribe:t}=n,r=e();return s.current!==r&&(s.current=r,l(r)),t(e=>{s.current=e,l(e)})},[n,e]),r}(lR);return n?"function"==typeof e?e(r):e:null}let s9="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?i.useLayoutEffect:i.useEffect,s8=(0,i.forwardRef)(function({editor:e,ariaActiveDescendant:t,ariaAutoComplete:n,ariaControls:l,ariaDescribedBy:s,ariaErrorMessage:o,ariaExpanded:a,ariaInvalid:u,ariaLabel:d,ariaLabelledBy:c,ariaMultiline:f,ariaOwns:h,ariaRequired:g,autoCapitalize:p,className:m,id:_,role:y="textbox",spellCheck:x=!0,style:v,tabIndex:S,"data-testid":C,...b},N){let[k,T]=(0,i.useState)(e.isEditable()),w=(0,i.useCallback)(t=>{t&&t.ownerDocument&&t.ownerDocument.defaultView?e.setRootElement(t):e.setRootElement(null)},[e]),E=(0,i.useMemo)(()=>(function(...e){return t=>{for(let n of e)"function"==typeof n?n(t):null!=n&&(n.current=t)}})(N,w),[w,N]);return s9(()=>(T(e.isEditable()),e.registerEditableListener(e=>{T(e)})),[e]),(0,r.jsx)("div",{"aria-activedescendant":k?t:void 0,"aria-autocomplete":k?n:"none","aria-controls":k?l:void 0,"aria-describedby":s,...null!=o?{"aria-errormessage":o}:{},"aria-expanded":k&&"combobox"===y?!!a:void 0,...null!=u?{"aria-invalid":u}:{},"aria-label":d,"aria-labelledby":c,"aria-multiline":f,"aria-owns":k?h:void 0,"aria-readonly":!k||void 0,"aria-required":g,autoCapitalize:p,className:m,contentEditable:k,"data-testid":C,id:_,ref:E,role:y,spellCheck:x,style:v,tabIndex:S,...b})});function oe(e){return e.getEditorState().read(sT(e.isComposing()))}let ot=(0,i.forwardRef)(function(e,t){let{placeholder:n,...i}=e,[l]=T();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s8,{editor:l,...i,ref:t}),null!=n&&(0,r.jsx)(on,{editor:l,content:n})]})});function on({content:e,editor:t}){let n=function(e){let[t,n]=(0,i.useState)(()=>oe(e));return s9(()=>{function t(){n(oe(e))}return t(),l0(e.registerUpdateListener(()=>{t()}),e.registerEditableListener(()=>{t()}))},[e]),t}(t),[l,s]=(0,i.useState)(t.isEditable());if((0,i.useLayoutEffect)(()=>(s(t.isEditable()),t.registerEditableListener(e=>{s(e)})),[t]),!n)return null;let o=null;return"function"==typeof e?o=e(l):null!==e&&(o=e),null===o?null:(0,r.jsx)("div",{"aria-hidden":!0,children:o})}function or(e){e.undoStack=[],e.redoStack=[],e.current=null}function oi(e,t,n){let r,i,l=(r=Date.now(),i=0,(t,l,s,o,a,u)=>{let d=Date.now();if(u.has(ns))return i=0,r=d,2;let c=function(e,t,n,r,i){if(null===e||0===n.size&&0===r.size&&!i)return 0;let l=t._selection,s=e._selection;if(i)return 1;if(!(nj(l)&&nj(s)&&s.isCollapsed()&&l.isCollapsed()))return 0;let o=function(e,t,n){let r=e._nodeMap,i=[];for(let e of t){let t=r.get(e);void 0!==t&&i.push(t)}for(let[e,t]of n){if(!t)continue;let n=r.get(e);void 0===n||rM(n)||i.push(n)}return i}(t,n,r);if(0===o.length)return 0;if(o.length>1){let n=t._nodeMap,r=n.get(l.anchor.key),i=n.get(s.anchor.key);return r&&i&&!e._nodeMap.has(r.__key)&&nE(r)&&1===r.__text.length&&1===l.anchor.offset?2:0}let a=o[0],u=e._nodeMap.get(a.__key);if(!nE(u)||!nE(a)||u.__mode!==a.__mode)return 0;let d=u.__text,c=a.__text;if(d===c)return 0;let f=l.anchor,h=s.anchor;if(f.key!==h.key||"text"!==f.type)return 0;let g=f.offset,p=h.offset,m=c.length-d.length;return 1===m&&p===g-1?2:-1===m&&p===g+1?3:4*(-1===m&&p===g)}(t,l,o,a,e.isComposing()),f=(()=>{var f;let h,g,p,m,_=null===s||s.editor===e,y=u.has("history-push");if(!y&&_&&u.has(no))return 0;if(null===t)return 1;let x=l._selection;if(!(o.size>0||a.size>0))return 2*(null===x);let v="number"==typeof n?n:n.peek();return!1===y&&0!==c&&c===i&&d<r+v&&_?0:1!==o.size||(f=Array.from(o)[0],h=t._nodeMap.get(f),g=l._nodeMap.get(f),p=t._selection,m=l._selection,nj(p)&&nj(m)&&"element"===p.anchor.type&&"element"===p.focus.type&&"text"===m.anchor.type&&"text"===m.focus.type||!nE(h)||!nE(g)||h.__parent!==g.__parent||JSON.stringify(t.read(()=>h.exportJSON()))!==JSON.stringify(l.read(()=>g.exportJSON())))?1:0})();return r=d,i=c,f});return l0(e.registerCommand(e8,()=>((function(e,t){let n=t.redoStack,r=t.undoStack;if(0!==r.length){let i=t.current,l=r.pop();null!==i&&(n.push(i),e.dispatchCommand(tw,!0)),0===r.length&&e.dispatchCommand(tE,!1),t.current=l||null,l&&l.editor.setEditorState(l.editorState,{tag:ns})}})(e,t),!0),0),e.registerCommand(te,()=>((function(e,t){let n=t.redoStack,r=t.undoStack;if(0!==n.length){let i=t.current;null!==i&&(r.push(i),e.dispatchCommand(tE,!0));let l=n.pop();0===n.length&&e.dispatchCommand(tw,!1),t.current=l||null,l&&l.editor.setEditorState(l.editorState,{tag:ns})}})(e,t),!0),0),e.registerCommand(tk,()=>(or(t),!1),0),e.registerCommand(tT,()=>(or(t),e.dispatchCommand(tw,!1),e.dispatchCommand(tE,!1),!0),0),e.registerUpdateListener(({editorState:n,prevEditorState:r,dirtyLeaves:i,dirtyElements:s,tags:o})=>{let a=t.current,u=t.redoStack,d=t.undoStack,c=null===a?null:a.editorState;if(null!==a&&n===c)return;let f=l(r,n,a,i,s,o);if(1===f)0!==u.length&&(t.redoStack=[],e.dispatchCommand(tw,!1)),null!==a&&(d.push({...a}),e.dispatchCommand(tE,!0));else if(2===f)return;t.current={editor:e,editorState:n}}))}function ol(){return{current:null,redoStack:[],undoStack:[]}}function os({delay:e,externalHistoryState:t}){let[n]=T();return function(e,t,n=1e3){let r=(0,i.useMemo)(()=>t||ol(),[t]);(0,i.useEffect)(()=>oi(e,r,n),[n,e,r])}(n,t,e),null}let oo=new Set(["http:","https:","mailto:","sms:","tel:"]);class oa extends rN{__url;__target;__rel;__title;static getType(){return"link"}static clone(e){return new oa(e.__url,{rel:e.__rel,target:e.__target,title:e.__title},e.__key)}constructor(e="",t={},n){super(n);const{target:r=null,rel:i=null,title:l=null}=t;this.__url=e,this.__target=r,this.__rel=i,this.__title=l}createDOM(e){let t=document.createElement("a");return this.updateLinkDOM(null,t,e),l1(t,e.theme.link),t}updateLinkDOM(e,t,n){if(iW(t))for(let n of(e&&e.__url===this.__url||(t.href=this.sanitizeUrl(this.__url)),["target","rel","title"])){let r=`__${n}`,i=this[r];e&&e[r]===i||(i?t[n]=i:t.removeAttribute(n))}}updateDOM(e,t,n){return this.updateLinkDOM(e,t,n),!1}static importDOM(){return{a:e=>({conversion:ou,priority:1})}}static importJSON(e){return od().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setURL(e.url).setRel(e.rel||null).setTarget(e.target||null).setTitle(e.title||null)}sanitizeUrl(e){e=ox(e);try{let t=new URL(ox(e));if(!oo.has(t.protocol))return"about:blank"}catch(e){}return e}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()}}getURL(){return this.getLatest().__url}setURL(e){let t=this.getWritable();return t.__url=e,t}getTarget(){return this.getLatest().__target}setTarget(e){let t=this.getWritable();return t.__target=e,t}getRel(){return this.getLatest().__rel}setRel(e){let t=this.getWritable();return t.__rel=e,t}getTitle(){return this.getLatest().__title}setTitle(e){let t=this.getWritable();return t.__title=e,t}insertNewAfter(e,t=!0){let n=od(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(n,t),n}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(e,t,n){if(!nj(t))return!1;let r=t.anchor.getNode(),i=t.focus.getNode();return this.isParentOf(r)&&this.isParentOf(i)&&t.getTextContent().length>0}isEmailURI(){return this.__url.startsWith("mailto:")}isWebSiteURI(){return this.__url.startsWith("https://")||this.__url.startsWith("http://")}}function ou(e){let t=null;if(iW(e)){let n=e.textContent;(null!==n&&""!==n||e.children.length>0)&&(t=od(e.getAttribute("href")||"",{rel:e.getAttribute("rel"),target:e.getAttribute("target"),title:e.getAttribute("title")}))}return{node:t}}function od(e="",t){return iR(new oa(e,t))}function oc(e){return e instanceof oa}class of extends oa{__isUnlinked;constructor(e="",t={},n){super(e,t,n),this.__isUnlinked=void 0!==t.isUnlinked&&null!==t.isUnlinked&&t.isUnlinked}static getType(){return"autolink"}static clone(e){return new of(e.__url,{isUnlinked:e.__isUnlinked,rel:e.__rel,target:e.__target,title:e.__title},e.__key)}getIsUnlinked(){return this.__isUnlinked}setIsUnlinked(e){let t=this.getWritable();return t.__isUnlinked=e,t}createDOM(e){return this.__isUnlinked?document.createElement("span"):super.createDOM(e)}updateDOM(e,t,n){return super.updateDOM(e,t,n)||e.__isUnlinked!==this.__isUnlinked}static importJSON(e){return oh().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setIsUnlinked(e.isUnlinked||!1)}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),isUnlinked:this.__isUnlinked}}insertNewAfter(e,t=!0){let n=this.getParentOrThrow().insertNewAfter(e,t);if(rk(n)){let e=oh(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,target:this.__target,title:this.__title});return n.append(e),e}return null}}function oh(e="",t){return iR(new of(e,t))}function og(e){return e instanceof of}let op=eV("TOGGLE_LINK_COMMAND");function om(e,t){if("element"===e.type){let n=e.getNode();return rk(n)||function(e,...t){let n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;for(let e of(r.append("code",252),t))r.append("v",e);throw n.search=r.toString(),Error(`Minified Lexical error #252; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(0),n.getChildren()[e.offset+t]||null}return null}function o_(e,t={}){let n;if(e&&"object"==typeof e){let{url:r,...i}=e;n=r,t={...i,...t}}else n=e;let{target:r,title:i}=t,l=void 0===t.rel?"noreferrer":t.rel,s=n1();if(null===s||!nj(s)&&!nB(s))return;if(nB(s)){let e=s.getNodes();if(0===e.length)return;return void e.forEach(e=>{if(null===n){let t=i2(e,e=>!og(e)&&oc(e));t&&(t.insertBefore(e),0===t.getChildren().length&&t.remove())}else{let t=i2(e,e=>!og(e)&&oc(e));if(t)t.setURL(n),void 0!==r&&t.setTarget(r),void 0!==l&&t.setRel(l);else{let t=od(n,{rel:l,target:r});e.insertBefore(t),t.append(e)}}})}let o=s.extract();if(null===n){let e=new Set;return void o.forEach(t=>{let n=t.getParent();if(oc(n)&&!og(n)){let t=n.getKey();if(e.has(t))return;!function(e,t){let n=new Set(t.filter(t=>e.isParentOf(t)).map(e=>e.getKey())),r=e.getChildren(),i=r.filter(e=>n.has(e.getKey()));if(i.length===r.length)return r.forEach(t=>e.insertBefore(t)),e.remove();let l=r.findIndex(e=>n.has(e.getKey())),s=r.findLastIndex(e=>n.has(e.getKey())),o=s===r.length-1;if(0===l)i.forEach(t=>e.insertBefore(t));else if(o)for(let t=i.length-1;t>=0;t--)e.insertAfter(i[t]);else{for(let t=i.length-1;t>=0;t--)e.insertAfter(i[t]);let t=r.slice(s+1);if(t.length>0){let n=od(e.getURL(),{rel:e.getRel(),target:e.getTarget(),title:e.getTitle()});i[i.length-1].insertAfter(n),t.forEach(e=>n.append(e))}}}(n,o),e.add(t)}})}let a=new Set,u=e=>{a.has(e.getKey())||(a.add(e.getKey()),e.setURL(n),void 0!==r&&e.setTarget(r),void 0!==l&&e.setRel(l),void 0!==i&&e.setTitle(i))};if(1===o.length){let e=i2(o[0],oc);if(null!==e)return u(e)}!function(e){let t=n1();if(!nj(t))return e();let n=eg(t),r=n.isBackward(),i=om(n.anchor,r?-1:0),l=om(n.focus,r?0:-1);if(e(),i||l){let e=n1();if(nj(e)){let t=e.clone();if(i){let e=i.getParent();e&&t.anchor.set(e.getKey(),i.getIndexWithinParent()+ +!!r,"element")}if(l){let e=l.getParent();e&&t.focus.set(e.getKey(),l.getIndexWithinParent()+ +!r,"element")}ia(eg(t))}}}(()=>{let e=null;for(let t of o){if(!t.isAttached())continue;let s=i2(t,oc);if(s){u(s);continue}if(rk(t)){if(!t.isInline())continue;if(oc(t)){if(!(og(t)||null!==e&&e.getParentOrThrow().isParentOf(t))){u(t),e=t;continue}for(let e of t.getChildren())t.insertBefore(e);t.remove();continue}}let o=t.getPreviousSibling();oc(o)&&o.is(e)?o.append(t):(e=od(n,{rel:l,target:r,title:i}),t.insertAfter(e),e.append(t))}})}let oy=/^\+?[0-9\s()-]{5,}$/;function ox(e){return e.match(/^[a-z][a-z0-9+.-]*:/i)||e.match(/^[/#.]/)?e:e.includes("@")?`mailto:${e}`:oy.test(e)?`tel:${e}`:`https://${e}`}function ov(e,t){return l0(sc(()=>e.registerCommand(op,e=>{let n=t.validateUrl.peek(),r=t.attributes.peek();if(null===e)return o_(null),!0;if("string"==typeof e)return!(void 0!==n&&!n(e))&&(o_(e,r),!0);{let{url:t,target:n,rel:i,title:l}=e;return o_(t,{...r,rel:i,target:n,title:l}),!0}},1)),sc(()=>{let n=t.validateUrl.value;if(!n)return;let r=t.attributes.value;return e.registerCommand(e4,t=>{let i=n1();if(!nj(i)||i.isCollapsed()||!l3(t,ClipboardEvent)||null===t.clipboardData)return!1;let l=t.clipboardData.getData("text");return!!n(l)&&!i.getNodes().some(e=>rk(e))&&(e.dispatchCommand(op,{...r,url:l}),t.preventDefault(),!0)},1)}))}function oS({validateUrl:e,attributes:t}){let[n]=T();return(0,i.useEffect)(()=>{if(!n.hasNodes([oa]))throw Error("LinkPlugin: LinkNode not registered on editor")}),(0,i.useEffect)(()=>ov(n,sf({attributes:t,validateUrl:e})),[n,e,t]),null}function oC(e,...t){let n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;for(let n of(r.append("code",e),t))r.append("v",n);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function ob(e){let t=1,n=e.getParent();for(;null!=n;){if(oj(n)){let e=n.getParent();if(o$(e)){t++,n=e.getParent();continue}oC(40)}break}return t}function oN(e){let t=e.getParent();o$(t)||oC(40);let n=t;for(;null!==n;)o$(n=n.getParent())&&(t=n);return t}function ok(e){return oj(e)&&o$(e.getFirstChild())}function oT(e){return oR().append(e)}function ow(e,t){return oj(e)&&(0===t.length||1===t.length&&e.is(t[0])&&0===e.getChildrenSize())}function oE(e){let t=n1();if(null!==t){let n=t.getNodes();if(nj(t)){let r=t.getStartEndPoints();null===r&&oC(143);let[i]=r,l=i.getNode(),s=l.getParent();if(iI(l)){let e=l.getFirstChild();if(e)n=e.selectStart().getNodes();else{let e=rR();l.append(e),n=e.select().getNodes()}}else if(ow(l,n)){let t=oJ(e);if(iI(s)){l.replace(t);let e=oR();rk(l)&&(e.setFormat(l.getFormatType()),e.setIndent(l.getIndent())),t.append(e)}else if(oj(l)){let e=l.getParentOrThrow();oO(t,e.getChildren()),e.replace(t)}return}}let r=new Set;for(let t=0;t<n.length;t++){let i=n[t];if(rk(i)&&i.isEmpty()&&!oj(i)&&!r.has(i.getKey())){oM(i,e);continue}let l=r4(i)?i.getParent():oj(i)&&i.isEmpty()?i:null;for(;null!=l;){let t=l.getKey();if(o$(l)){if(!r.has(t)){let n=oJ(e);oO(n,l.getChildren()),l.replace(n),r.add(t)}break}{let n=l.getParent();if(iI(n)&&!r.has(t)){r.add(t),oM(l,e);break}l=n}}}}}function oO(e,t){e.splice(e.getChildrenSize(),0,t)}function oM(e,t){let n;if(o$(e))return e;let r=e.getPreviousSibling(),i=e.getNextSibling(),l=oR();if(oO(l,e.getChildren()),o$(r)&&t===r.getListType())r.append(l),o$(i)&&t===i.getListType()&&(oO(r,i.getChildren()),i.remove()),n=r;else if(o$(i)&&t===i.getListType())i.getFirstChildOrThrow().insertBefore(l),n=i;else{let r=oJ(t);r.append(l),e.replace(r),n=r}return l.setFormat(e.getFormatType()),l.setIndent(e.getIndent()),e.remove(),n}function oA(e,t){let n=e.getLastChild(),r=t.getFirstChild();n&&r&&ok(n)&&ok(r)&&(oA(n.getFirstChild(),r.getFirstChild()),r.remove());let i=t.getChildren();i.length>0&&e.append(...i),t.remove()}function oD(e){let t="check"!==e.getListType(),n=e.getStart();for(let r of e.getChildren())oj(r)&&(r.getValue()!==n&&r.setValue(n),t&&null!=r.getLatest().__checked&&r.setChecked(void 0),o$(r.getFirstChild())||n++)}function oP(...e){let t=[];for(let n of e)if(n&&"string"==typeof n)for(let[e]of n.matchAll(/\S+/g))t.push(e);return t}class oL extends rN{__value;__checked;$config(){return this.config("listitem",{$transform:e=>{if(null==e.__checked)return;let t=e.getParent();o$(t)&&"check"!==t.getListType()&&null!=e.getChecked()&&e.setChecked(void 0)},extends:rN,importDOM:{li:()=>({conversion:oF,priority:0})}})}constructor(e=1,t,n){super(n),this.__value=void 0===e?1:e,this.__checked=t}afterCloneFrom(e){super.afterCloneFrom(e),this.__value=e.__value,this.__checked=e.__checked}createDOM(e){let t=document.createElement("li");return this.updateListItemDOM(null,t,e),t}updateListItemDOM(e,t,n){let r;!o$(r=this.getParent())||"check"!==r.getListType()||o$(this.getFirstChild())?(t.removeAttribute("role"),t.removeAttribute("tabIndex"),t.removeAttribute("aria-checked")):(t.setAttribute("role","checkbox"),t.setAttribute("tabIndex","-1"),e&&this.__checked===e.__checked||t.setAttribute("aria-checked",this.getChecked()?"true":"false")),t.value=this.__value,function(e,t,n){let r,i=[],l=[],s=t.list,o=s?s.listitem:void 0;if(s&&s.nested&&(r=s.nested.listitem),void 0!==o&&i.push(...oP(o)),s){let e=n.getParent(),t=o$(e)&&"check"===e.getListType(),r=n.getChecked();t&&!r||l.push(s.listitemUnchecked),t&&r||l.push(s.listitemChecked),t&&i.push(r?s.listitemChecked:s.listitemUnchecked)}if(void 0!==r){let e=oP(r);n.getChildren().some(e=>o$(e))?i.push(...e):l.push(...e)}l.length>0&&l2(e,...l),i.length>0&&l1(e,...i)}(t,n.theme,this);let i=e?e.__style:"",l=this.__style;i!==l&&(""===l?t.removeAttribute("style"):t.style.cssText=l),function(e,t,n){let r=lB(t.__textStyle);for(let t in r)e.style.setProperty(`--listitem-marker-${t}`,r[t]);if(n)for(let t in lB(n.__textStyle))t in r||e.style.removeProperty(`--listitem-marker-${t}`)}(t,this,e)}updateDOM(e,t,n){return this.updateListItemDOM(e,t,n),!1}updateFromJSON(e){return super.updateFromJSON(e).setValue(e.value).setChecked(e.checked)}exportDOM(e){let t=this.createDOM(e._config),n=this.getFormatType();n&&(t.style.textAlign=n);let r=this.getDirection();return r&&(t.dir=r),{element:t}}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),value:this.getValue()}}append(...e){for(let t=0;t<e.length;t++){let n=e[t];if(rk(n)&&this.canMergeWith(n)){let e=n.getChildren();this.append(...e),n.remove()}else super.append(n)}return this}replace(e,t){if(oj(e))return super.replace(e);this.setIndent(0);let n=this.getParentOrThrow();if(!o$(n))return e;if(n.__first===this.getKey())n.insertBefore(e);else if(n.__last===this.getKey())n.insertAfter(e);else{let t=oJ(n.getListType()),r=this.getNextSibling();for(;r;){let e=r;r=r.getNextSibling(),t.append(e)}n.insertAfter(e),e.insertAfter(t)}return t&&(rk(e)||oC(139),this.getChildren().forEach(t=>{e.append(t)})),this.remove(),0===n.getChildrenSize()&&n.remove(),e}insertAfter(e,t=!0){let n=this.getParentOrThrow();if(o$(n)||oC(39),oj(e))return super.insertAfter(e,t);let r=this.getNextSiblings();if(n.insertAfter(e,t),0!==r.length){let i=oJ(n.getListType());r.forEach(e=>i.append(e)),e.insertAfter(i,t)}return e}remove(e){let t=this.getPreviousSibling(),n=this.getNextSibling();super.remove(e),t&&n&&ok(t)&&ok(n)&&(oA(t.getFirstChild(),n.getFirstChild()),n.remove())}insertNewAfter(e,t=!0){let n=oR().updateFromJSON(this.exportJSON()).setChecked(!this.getChecked()&&void 0);return this.insertAfter(n,t),n}collapseAtStart(e){let t=rR();this.getChildren().forEach(e=>t.append(e));let n=this.getParentOrThrow(),r=n.getParentOrThrow(),i=oj(r);if(1===n.getChildrenSize())if(i)n.remove(),r.select();else{n.insertBefore(t),n.remove();let r=e.anchor,i=e.focus,l=t.getKey();"element"===r.type&&r.getNode().is(this)&&r.set(l,r.offset,"element"),"element"===i.type&&i.getNode().is(this)&&i.set(l,i.offset,"element")}else n.insertBefore(t),this.remove();return!0}getValue(){return this.getLatest().__value}setValue(e){let t=this.getWritable();return t.__value=e,t}getChecked(){let e,t=this.getLatest(),n=this.getParent();return o$(n)&&(e=n.getListType()),"check"===e?!!t.__checked:void 0}setChecked(e){let t=this.getWritable();return t.__checked=e,t}toggleChecked(){let e=this.getWritable();return e.setChecked(!e.__checked)}getIndent(){let e=this.getParent();if(null===e||!this.isAttached())return this.getLatest().__indent;let t=e.getParentOrThrow(),n=0;for(;oj(t);)t=t.getParentOrThrow().getParentOrThrow(),n++;return n}setIndent(e){"number"!=typeof e&&oC(117),(e=Math.floor(e))>=0||oC(199);let t=this.getIndent();for(;t!==e;)t<e?(function(e){let t=new Set;if(ok(e)||t.has(e.getKey()))return;let n=e.getParent(),r=e.getNextSibling(),i=e.getPreviousSibling();if(ok(r)&&ok(i)){let n=i.getFirstChild();if(o$(n)){n.append(e);let i=r.getFirstChild();o$(i)&&(oO(n,i.getChildren()),r.remove(),t.add(r.getKey()))}}else if(ok(r)){let t=r.getFirstChild();if(o$(t)){let n=t.getFirstChild();null!==n&&n.insertBefore(e)}}else if(ok(i)){let t=i.getFirstChild();o$(t)&&t.append(e)}else if(o$(n)){let t=oR().setTextFormat(e.getTextFormat()).setTextStyle(e.getTextStyle()),l=oJ(n.getListType()).setTextFormat(n.getTextFormat()).setTextStyle(n.getTextStyle());t.append(l),l.append(e),i?i.insertAfter(t):r?r.insertBefore(t):n.append(t)}}(this),t++):(function(e){if(ok(e))return;let t=e.getParent(),n=t?t.getParent():void 0;if(o$(n?n.getParent():void 0)&&oj(n)&&o$(t)){let r=t?t.getFirstChild():void 0,i=t?t.getLastChild():void 0;if(e.is(r))n.insertBefore(e),t.isEmpty()&&n.remove();else if(e.is(i))n.insertAfter(e),t.isEmpty()&&n.remove();else{let r=t.getListType(),i=oR(),l=oJ(r);i.append(l),e.getPreviousSiblings().forEach(e=>l.append(e));let s=oR(),o=oJ(r);s.append(o),oO(o,e.getNextSiblings()),n.insertBefore(i),n.insertAfter(s),n.replace(e)}}}(this),t--);return this}canInsertAfter(e){return oj(e)}canReplaceWith(e){return oj(e)}canMergeWith(e){return oj(e)||rj(e)}extractWithChild(e,t){if(!nj(t))return!1;let n=t.anchor.getNode(),r=t.focus.getNode();return this.isParentOf(n)&&this.isParentOf(r)&&this.getTextContent().length===t.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return oJ("bullet")}canMergeWhenEmpty(){return!0}}function oF(e){if(e.classList.contains("task-list-item")){for(let t of e.children)if("INPUT"===t.tagName)return oI(t)}if(e.classList.contains("joplin-checkbox")){for(let t of e.children)if(t.classList.contains("checkbox-wrapper")&&t.children.length>0&&"INPUT"===t.children[0].tagName)return oI(t.children[0])}let t=e.getAttribute("aria-checked");return{node:oR("true"===t||"false"!==t&&void 0)}}function oI(e){return"checkbox"!==e.getAttribute("type")?{node:null}:{node:oR(e.hasAttribute("checked"))}}function oR(e){return iR(new oL(void 0,e))}function oj(e){return e instanceof oL}class oz extends rN{__tag;__start;__listType;$config(){return this.config("list",{$transform:e=>{let t;o$(t=e.getNextSibling())&&e.getListType()===t.getListType()&&oA(e,t),oD(e)},extends:rN,importDOM:{ol:()=>({conversion:oW,priority:0}),ul:()=>({conversion:oW,priority:0})}})}constructor(e="number",t=1,n){super(n);const r=oU[e]||e;this.__listType=r,this.__tag="number"===r?"ol":"ul",this.__start=t}afterCloneFrom(e){super.afterCloneFrom(e),this.__listType=e.__listType,this.__tag=e.__tag,this.__start=e.__start}getTag(){return this.getLatest().__tag}setListType(e){let t=this.getWritable();return t.__listType=e,t.__tag="number"===e?"ol":"ul",t}getListType(){return this.getLatest().__listType}getStart(){return this.getLatest().__start}setStart(e){let t=this.getWritable();return t.__start=e,t}createDOM(e,t){let n=this.__tag,r=document.createElement(n);return 1!==this.__start&&r.setAttribute("start",String(this.__start)),r.__lexicalListType=this.__listType,oB(r,e.theme,this),r}updateDOM(e,t,n){return e.__tag!==this.__tag||e.__listType!==this.__listType||(oB(t,n.theme,this),!1)}updateFromJSON(e){return super.updateFromJSON(e).setListType(e.listType).setStart(e.start)}exportDOM(e){let t=this.createDOM(e._config,e);return iU(t)&&(1!==this.__start&&t.setAttribute("start",String(this.__start)),"check"===this.__listType&&t.setAttribute("__lexicalListType","check")),{element:t}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag()}}canBeEmpty(){return!1}canIndent(){return!1}splice(e,t,n){let r=n;for(let e=0;e<n.length;e++){let t=n[e];oj(t)||(r===n&&(r=[...n]),r[e]=oR().append(!rk(t)||o$(t)||t.isInline()?t:nw(t.getTextContent())))}return super.splice(e,t,r)}extractWithChild(e){return oj(e)}}function oB(e,t,n){let r=[],i=[],l=t.list;if(void 0!==l){let e,t=l[`${n.__tag}Depth`]||[],s=ob(n)-1,o=s%t.length,a=t[o],u=l[n.__tag],d=l.nested,c=l.checklist;if(void 0!==d&&d.list&&(e=d.list),void 0!==u&&r.push(u),void 0!==c&&"check"===n.__listType&&r.push(c),void 0!==a){r.push(...oP(a));for(let e=0;e<t.length;e++)e!==o&&i.push(n.__tag+e)}if(void 0!==e){let t=oP(e);s>1?r.push(...t):i.push(...t)}}i.length>0&&l2(e,...i),r.length>0&&l1(e,...r)}function oK(e){let t=[];for(let n=0;n<e.length;n++){let r=e[n];if(oj(r)){t.push(r);let e=r.getChildren();e.length>1&&e.forEach(e=>{o$(e)&&t.push(oT(e))})}else t.push(oT(r))}return t}function oW(e){let t=e.nodeName.toLowerCase(),n=null;return"ol"===t?n=oJ("number",e.start):"ul"===t&&(n=!function(e){if("check"===e.getAttribute("__lexicallisttype")||e.classList.contains("contains-task-list")||"1"===e.getAttribute("data-is-checklist"))return!0;for(let t of e.childNodes)if(iU(t)&&t.hasAttribute("aria-checked"))return!0;return!1}(e)?oJ("bullet"):oJ("check")),{after:oK,node:n}}let oU={ol:"number",ul:"bullet"};function oJ(e="number",t=1){return iR(new oz(e,t))}function o$(e){return e instanceof oz}eV("INSERT_CHECK_LIST_COMMAND");let oV=eV("UPDATE_LIST_START_COMMAND"),oH=eV("INSERT_UNORDERED_LIST_COMMAND"),oq=eV("INSERT_ORDERED_LIST_COMMAND"),oY=eV("REMOVE_LIST_COMMAND");function oG({hasStrictIndent:e=!1}){let[t]=T();return(0,i.useEffect)(()=>{if(!t.hasNodes([oz,oL]))throw Error("ListPlugin: ListNode and/or ListItemNode not registered on editor")},[t]),(0,i.useEffect)(()=>{if(e){var n;let e;return n=t,e=e=>{let t=e.getParent();if(o$(e.getFirstChild())||!o$(t))return;let n=i2(e,e=>oj(e)&&o$(e.getParent())&&oj(e.getPreviousSibling()));if(null===n&&e.getIndent()>0)e.setIndent(0);else if(oj(n)){let r=n.getPreviousSibling();if(oj(r)){let n=(function(e){let t=e,n=t.getFirstChild();for(;o$(n);){let e=n.getLastChild();if(!oj(e))break;n=(t=e).getFirstChild()}return t})(r).getParent();if(o$(n)){let r=ob(n);r+1<ob(t)&&e.setIndent(r)}}}},n.registerNodeTransform(oz,t=>{let n=[t];for(;n.length>0;){let t=n.shift();if(o$(t)){for(let r of t.getChildren())if(oj(r)){e(r);let t=r.getFirstChild();o$(t)&&n.push(t)}}}})}},[t,e]),(0,i.useEffect)(()=>{var e;return l0((e=t).registerCommand(oq,()=>(oE("number"),!0),1),e.registerCommand(oV,e=>{let{listNodeKey:t,newStart:n}=e,r=r8(t);return!!o$(r)&&("number"===r.getListType()&&(r.setStart(n),oD(r)),!0)},1),e.registerCommand(oH,()=>(oE("bullet"),!0),1),e.registerCommand(oY,()=>((function(){let e=n1();if(nj(e)){let t=new Set,n=e.getNodes(),r=e.anchor.getNode();if(ow(r,n))t.add(oN(r));else for(let e=0;e<n.length;e++){let r=n[e];if(r4(r)){let e=function(e,t){let n=e;for(;null!=n;){if(n instanceof t)return n;n=n.getParent()}return null}(r,oL);null!=e&&t.add(oN(e))}}for(let n of t){let t=n;for(let r of function e(t){let n=[],r=t.getChildren().filter(oj);for(let t=0;t<r.length;t++){let i=r[t],l=i.getFirstChild();o$(l)?n=n.concat(e(l)):n.push(i)}return n}(n)){let n=rR().setTextStyle(e.style).setTextFormat(e.format);oO(n,r.getChildren()),t.insertAfter(n),t=n,r.__key===e.anchor.key&&lS(e.anchor,lw(lu(n,"next"))),r.__key===e.focus.key&&lS(e.focus,lw(lu(n,"next"))),r.remove()}n.remove()}}})(),!0),1),e.registerCommand(e2,()=>(function(){let e,t=n1();if(!nj(t)||!t.isCollapsed())return!1;let n=t.anchor.getNode();if(!oj(n)||0!==n.getChildrenSize())return!1;let r=oN(n),i=n.getParent();o$(i)||oC(40);let l=i.getParent();if(iI(l))e=rR(),r.insertAfter(e);else{if(!oj(l))return!1;e=oR(),l.insertAfter(e)}e.setTextStyle(t.style).setTextFormat(t.format).select();let s=n.getNextSiblings();if(s.length>0){let t=oJ(i.getListType());if(oj(e)){let n=oR();n.append(t),e.insertAfter(n)}else e.insertAfter(t);t.append(...s)}return function(e){let t=e;for(;null==t.getNextSibling()&&null==t.getPreviousSibling();){let e=t.getParent();if(null==e||!oj(e)&&!o$(e))break;t=e}t.remove()}(n),!0})(),1),e.registerNodeTransform(oL,e=>{let t=e.getFirstChild();if(t){if(nE(t)){let n=t.getStyle(),r=t.getFormat();e.getTextStyle()!==n&&e.setTextStyle(n),e.getTextFormat()!==r&&e.setTextFormat(r)}}else{let t=n1();nj(t)&&(t.style!==e.getTextStyle()||t.format!==e.getTextFormat())&&t.isCollapsed()&&e.is(t.anchor.getNode())&&e.setTextStyle(t.style).setTextFormat(t.format)}}),e.registerNodeTransform(nx,e=>{let t=e.getParent();if(oj(t)&&e.is(t.getFirstChild())){let n=e.getStyle(),r=e.getFormat();n===t.getTextStyle()&&r===t.getTextFormat()||t.setTextStyle(n).setTextFormat(r)}}))},[t]),null}var oX=e.i(39779);let oZ=(0,u.default)("bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]),oQ=(0,u.default)("italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]),o0=(0,u.default)("underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]),o1=(0,u.default)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]),o2=(0,u.default)("list-ordered",[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]]),o3=(0,u.default)("quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]),o4=(0,u.default)("heading-1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]),o6=(0,u.default)("heading-2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]),o5=(0,u.default)("heading-3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);var o7=e.i(39558);let o9=(0,u.default)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);function o8(){let e,t,n,l,s,a,u,d,c,f,h,_,y,x,v,S,C,b,N,k,w,E,O,M,A,D,P,L,F,I,R,j,z,B,K,W,U,J,$,V,H,q,Y,G,X,Z,Q,ee,et,en,er=(0,g.c)(97),[ei]=T(),[el,es]=i.useState(!1),[eo,ea]=i.useState(!1),[eu,ed]=i.useState(!1);er[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{let e=n1();nj(e)&&(es(e.hasFormat("bold")),ea(e.hasFormat("italic")),ed(e.hasFormat("underline")))},er[0]=e):e=er[0];let ec=e;er[1]!==ei?(t=()=>ei.registerUpdateListener(e=>{let{editorState:t}=e;t.read(()=>{ec()})}),n=[ei,ec],er[1]=ei,er[2]=t,er[3]=n):(t=er[2],n=er[3]),i.useEffect(t,n),er[4]!==ei?(l=e=>{ei.update(()=>{let t=n1();if(nj(t)){let n=sZ(e);t.insertNodes([n])}})},er[4]=ei,er[5]=l):l=er[5];let ef=l;er[6]!==ei?(s=()=>{ei.update(at)},er[6]=ei,er[7]=s):s=er[7];let eh=s,[eg,ep]=i.useState(!1),[em,e_]=i.useState(""),[ey,ex]=i.useState("");er[8]!==ei||er[9]!==ey||er[10]!==em?(a=()=>{ei.update(()=>{let e=n1();if(nj(e))if(e.isCollapsed()){let t=od(em||"https://",{target:"_blank"});rR(),e.insertNodes([t])}else{let e=em||"https://";ei.dispatchCommand(op,e)}ep(!1),e_(""),ex("")})},er[8]=ei,er[9]=ey,er[10]=em,er[11]=a):a=er[11];let ev=a;er[12]!==ei?(u=()=>ei.dispatchCommand(e9,"bold"),er[12]=ei,er[13]=u):u=er[13];let eS=el?"bg-muted":"";er[14]===Symbol.for("react.memo_cache_sentinel")?(d=(0,r.jsx)(oZ,{className:"size-4"}),er[14]=d):d=er[14],er[15]!==u||er[16]!==eS?(c=(0,r.jsx)(o.Button,{variant:"ghost",size:"icon",onClick:u,className:eS,children:d}),er[15]=u,er[16]=eS,er[17]=c):c=er[17],er[18]!==ei?(f=()=>ei.dispatchCommand(e9,"italic"),er[18]=ei,er[19]=f):f=er[19];let eC=eo?"bg-muted":"";er[20]===Symbol.for("react.memo_cache_sentinel")?(h=(0,r.jsx)(oQ,{className:"size-4"}),er[20]=h):h=er[20],er[21]!==f||er[22]!==eC?(_=(0,r.jsx)(o.Button,{variant:"ghost",size:"icon",onClick:f,className:eC,children:h}),er[21]=f,er[22]=eC,er[23]=_):_=er[23],er[24]!==ei?(y=()=>ei.dispatchCommand(e9,"underline"),er[24]=ei,er[25]=y):y=er[25];let eb=eu?"bg-muted":"";return er[26]===Symbol.for("react.memo_cache_sentinel")?(x=(0,r.jsx)(o0,{className:"size-4"}),er[26]=x):x=er[26],er[27]!==y||er[28]!==eb?(v=(0,r.jsx)(o.Button,{variant:"ghost",size:"icon",onClick:y,className:eb,children:x}),er[27]=y,er[28]=eb,er[29]=v):v=er[29],er[30]===Symbol.for("react.memo_cache_sentinel")?(S=(0,r.jsx)("div",{className:"mx-1 h-6 w-px bg-border"}),er[30]=S):S=er[30],er[31]!==ef?(C=()=>ef("h1"),er[31]=ef,er[32]=C):C=er[32],er[33]===Symbol.for("react.memo_cache_sentinel")?(b=(0,r.jsx)(o4,{className:"size-4"}),er[33]=b):b=er[33],er[34]!==C?(N=(0,r.jsx)(o.Button,{variant:"ghost",size:"icon",onClick:C,title:"Heading 1",children:b}),er[34]=C,er[35]=N):N=er[35],er[36]!==ef?(k=()=>ef("h2"),er[36]=ef,er[37]=k):k=er[37],er[38]===Symbol.for("react.memo_cache_sentinel")?(w=(0,r.jsx)(o6,{className:"size-4"}),er[38]=w):w=er[38],er[39]!==k?(E=(0,r.jsx)(o.Button,{variant:"ghost",size:"icon",onClick:k,title:"Heading 2",children:w}),er[39]=k,er[40]=E):E=er[40],er[41]!==ef?(O=()=>ef("h3"),er[41]=ef,er[42]=O):O=er[42],er[43]===Symbol.for("react.memo_cache_sentinel")?(M=(0,r.jsx)(o5,{className:"size-4"}),er[43]=M):M=er[43],er[44]!==O?(A=(0,r.jsx)(o.Button,{variant:"ghost",size:"icon",onClick:O,title:"Heading 3",children:M}),er[44]=O,er[45]=A):A=er[45],er[46]===Symbol.for("react.memo_cache_sentinel")?(D=(0,r.jsx)("div",{className:"mx-1 h-6 w-px bg-border"}),er[46]=D):D=er[46],er[47]!==ei?(P=()=>ei.dispatchCommand(oH,void 0),er[47]=ei,er[48]=P):P=er[48],er[49]===Symbol.for("react.memo_cache_sentinel")?(L=(0,r.jsx)(o1,{className:"size-4"}),er[49]=L):L=er[49],er[50]!==P?(F=(0,r.jsx)(o.Button,{variant:"ghost",size:"icon",onClick:P,title:"Bullet List",children:L}),er[50]=P,er[51]=F):F=er[51],er[52]!==ei?(I=()=>ei.dispatchCommand(oq,void 0),er[52]=ei,er[53]=I):I=er[53],er[54]===Symbol.for("react.memo_cache_sentinel")?(R=(0,r.jsx)(o2,{className:"size-4"}),er[54]=R):R=er[54],er[55]!==I?(j=(0,r.jsx)(o.Button,{variant:"ghost",size:"icon",onClick:I,title:"Numbered List",children:R}),er[55]=I,er[56]=j):j=er[56],er[57]!==ei?(z=()=>{ei.update(ae)},er[57]=ei,er[58]=z):z=er[58],er[59]===Symbol.for("react.memo_cache_sentinel")?(B=(0,r.jsx)(o3,{className:"size-4"}),er[59]=B):B=er[59],er[60]!==z?(K=(0,r.jsx)(o.Button,{variant:"ghost",size:"icon",onClick:z,title:"Quote",children:B}),er[60]=z,er[61]=K):K=er[61],er[62]===Symbol.for("react.memo_cache_sentinel")?(W=(0,r.jsx)("div",{className:"mx-1 h-6 w-px bg-border"}),er[62]=W):W=er[62],er[63]===Symbol.for("react.memo_cache_sentinel")?(U=(0,r.jsx)(oX.DialogTrigger,{asChild:!0,children:(0,r.jsx)(o.Button,{variant:"ghost",size:"icon",title:"Insert Link",children:(0,r.jsx)(o7.Link,{className:"size-4"})})}),er[63]=U):U=er[63],er[64]===Symbol.for("react.memo_cache_sentinel")?(J=(0,r.jsx)(oX.DialogHeader,{children:(0,r.jsx)(oX.DialogTitle,{children:"Insert Link"})}),er[64]=J):J=er[64],er[65]===Symbol.for("react.memo_cache_sentinel")?($=(0,r.jsx)(m.Label,{htmlFor:"link-url",children:"URL"}),er[65]=$):$=er[65],er[66]===Symbol.for("react.memo_cache_sentinel")?(V=e=>e_(e.target.value),er[66]=V):V=er[66],er[67]!==em?(H=(0,r.jsxs)("div",{className:"space-y-2",children:[$,(0,r.jsx)(p.Input,{id:"link-url",type:"url",placeholder:"https://example.com",value:em,onChange:V})]}),er[67]=em,er[68]=H):H=er[68],er[69]===Symbol.for("react.memo_cache_sentinel")?(q=(0,r.jsx)(m.Label,{htmlFor:"link-text",children:"Link Text (optional)"}),er[69]=q):q=er[69],er[70]===Symbol.for("react.memo_cache_sentinel")?(Y=e=>ex(e.target.value),er[70]=Y):Y=er[70],er[71]!==ey?(G=(0,r.jsxs)("div",{className:"space-y-2",children:[q,(0,r.jsx)(p.Input,{id:"link-text",placeholder:"Link text",value:ey,onChange:Y})]}),er[71]=ey,er[72]=G):G=er[72],er[73]!==ev?(X=(0,r.jsx)(o.Button,{onClick:ev,className:"w-full",children:"Insert Link"}),er[73]=ev,er[74]=X):X=er[74],er[75]!==H||er[76]!==G||er[77]!==X?(Z=(0,r.jsxs)(oX.DialogContent,{children:[J,(0,r.jsxs)("div",{className:"space-y-4 py-4",children:[H,G,X]})]}),er[75]=H,er[76]=G,er[77]=X,er[78]=Z):Z=er[78],er[79]!==eg||er[80]!==Z?(Q=(0,r.jsxs)(oX.Dialog,{open:eg,onOpenChange:ep,children:[U,Z]}),er[79]=eg,er[80]=Z,er[81]=Q):Q=er[81],er[82]===Symbol.for("react.memo_cache_sentinel")?(ee=(0,r.jsx)(o9,{className:"size-4"}),er[82]=ee):ee=er[82],er[83]!==eh?(et=(0,r.jsx)(o.Button,{variant:"ghost",size:"icon",onClick:eh,title:"Divider",children:ee}),er[83]=eh,er[84]=et):et=er[84],er[85]!==_||er[86]!==v||er[87]!==N||er[88]!==E||er[89]!==A||er[90]!==F||er[91]!==j||er[92]!==K||er[93]!==Q||er[94]!==et||er[95]!==c?(en=(0,r.jsxs)("div",{className:"flex items-center gap-1 border-b p-2",children:[c,_,v,S,N,E,A,D,F,j,K,W,Q,et]}),er[85]=_,er[86]=v,er[87]=N,er[88]=E,er[89]=A,er[90]=F,er[91]=j,er[92]=K,er[93]=Q,er[94]=et,er[95]=c,er[96]=en):en=er[96],en}function ae(){let e=n1();if(nj(e)){let t=sH();e.insertNodes([t])}}function at(){let e=is(),t=rR();e.append(t);let n=rR();n.setFormat("center"),e.append(n)}let an={namespace:"ProsFinEditor",theme:{paragraph:"mb-2",heading:{h1:"text-4xl font-bold mb-4",h2:"text-3xl font-bold mb-3",h3:"text-2xl font-bold mb-2"},quote:"border-l-4 border-gray-300 pl-4 italic my-4",list:{nested:{listitem:"ml-4"},ol:"list-decimal ml-6 my-2",ul:"list-disc ml-6 my-2",listitem:"my-1"},link:"text-blue-600 underline hover:text-blue-800",text:{bold:"font-bold",italic:"italic",underline:"underline"}},nodes:[sq,sV,oz,oL,oa],onError:e=>{console.error("Lexical error:",e)}};function ar(e){let t,n,i=(0,g.c)(5),{placeholder:l}=e,s=l||"Start writing...";return i[0]!==s?(t=(0,r.jsx)("div",{className:"absolute top-0 left-0 text-muted-foreground pointer-events-none",children:s}),i[0]=s,i[1]=t):t=i[1],i[2]!==s||i[3]!==t?(n=(0,r.jsx)(ot,{className:"min-h-[600px] outline-none prose prose-lg max-w-none","aria-placeholder":s,placeholder:t}),i[2]=s,i[3]=t,i[4]=n):n=i[4],n}function ai(e){let t,n,r=(0,g.c)(4),{onChange:l}=e,[s]=T();return r[0]!==s||r[1]!==l?(t=()=>s.registerUpdateListener(e=>{let{editorState:t}=e;t.read(()=>{let e=t.toJSON();l?.(e)})}),n=[s,l],r[0]=s,r[1]=l,r[2]=t,r[3]=n):(t=r[2],n=r[3]),i.useEffect(t,n),null}function al(e){let t,n,r=(0,g.c)(5),{initialContent:l}=e,[s]=T(),[o,a]=i.useState(!1);return r[0]!==s||r[1]!==o||r[2]!==l?(t=()=>{if(l&&!o&&s)try{let e=s.parseEditorState(l);s.setEditorState(e),a(!0)}catch(e){console.error("Failed to parse initial content:",e)}},n=[s,l,o],r[0]=s,r[1]=o,r[2]=l,r[3]=t,r[4]=n):(t=r[3],n=r[4]),i.useEffect(t,n),null}function as(e){let t,n,i,l,s,o,a,u,d,c=(0,g.c)(17),{initialContent:f,onChange:h,placeholder:p,className:m}=e,_=void 0===p?"Start writing...":p,y=`flex flex-col border rounded-lg ${m}`;return c[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(o8,{}),c[0]=t):t=c[0],c[1]!==_?(n=(0,r.jsx)(s5,{contentEditable:(0,r.jsx)(ar,{placeholder:_}),placeholder:null,ErrorBoundary:ao}),c[1]=_,c[2]=n):n=c[2],c[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,r.jsx)(os,{}),l=(0,r.jsx)(oS,{}),s=(0,r.jsx)(oG,{}),c[3]=i,c[4]=l,c[5]=s):(i=c[3],l=c[4],s=c[5]),c[6]!==h?(o=(0,r.jsx)(ai,{onChange:h}),c[6]=h,c[7]=o):o=c[7],c[8]!==f?(a=f&&(0,r.jsx)(al,{initialContent:f}),c[8]=f,c[9]=a):a=c[9],c[10]!==n||c[11]!==o||c[12]!==a?(u=(0,r.jsxs)("div",{className:"p-4",children:[n,i,l,s,o,a]}),c[10]=n,c[11]=o,c[12]=a,c[13]=u):u=c[13],c[14]!==u||c[15]!==y?(d=(0,r.jsx)(lF,{initialConfig:an,children:(0,r.jsxs)("div",{className:y,children:[t,u]})}),c[14]=u,c[15]=y,c[16]=d):d=c[16],d}function ao(e){let{children:t}=e;return(0,r.jsx)(r.Fragment,{children:t})}function aa(e){let t,n=(0,g.c)(3),{content:i,onChange:l}=e;return n[0]!==i||n[1]!==l?(t=(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsx)(as,{initialContent:i,onChange:l,placeholder:"Start writing your post...",className:"min-h-[600px]"})}),n[0]=i,n[1]=l,n[2]=t):t=n[2],t}var au=e.i(16772);function ad({params:t}){let{slug:n}=(0,i.use)(t),[l,s]=i.useState(null),[o,a]=i.useState(!0),[u,d]=i.useState(null);i.useEffect(()=>{if("new"===n){a(!1),d({title:"",slug:"",bucket:"insights",excerpt:"",cover:"",tags:[],content:{root:{children:[],direction:"ltr",format:"",indent:0,type:"root",version:1}},status:"draft"});return}(async()=>{try{let{listPosts:t}=await e.A(32194),r=(await t()).find(e=>e.slug===n);if(r){let{getPostById:t}=await e.A(32194),n=await t(r.id);s(n),n&&d({title:n.title,slug:n.slug,bucket:n.bucket,excerpt:n.excerpt,cover:n.cover,tags:n.tags,content:n.content,seoTitle:n.seoTitle,seoDescription:n.seoDescription,canonical:n.canonical,noindex:n.noindex,status:n.status,scheduledFor:n.scheduledFor})}}catch(e){console.error("Failed to load post:",e)}finally{a(!1)}})()},[n]);let c=async e=>{await (0,au.saveDraft)(e,l?.id),l&&s(await (0,au.getPostById)(l.id))},f=async e=>{if(l)await (0,au.publish)(l.id);else{let t=await (0,au.saveDraft)(e);await (0,au.publish)(t.id)}};return o?(0,r.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})}):u?(0,r.jsx)(N,{post:l||void 0,onSave:c,onPublish:f,formData:u,onFormDataChange:d,children:(0,r.jsx)(aa,{content:u.content,onChange:e=>{d({...u,content:e})}})}):(0,r.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"Post not found"})})}e.s(["default",()=>ad],1810)}]);