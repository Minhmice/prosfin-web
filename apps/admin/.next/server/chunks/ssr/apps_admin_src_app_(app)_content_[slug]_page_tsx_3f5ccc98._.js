module.exports=[3221,a=>{"use strict";let b,c;var d=a.i(42093),e=a.i(85455),f=a.i(99026);a.i(56120);var g=a.i(6334),h=a.i(18416),i=a.i(51367),j=a.i(37717),k=a.i(46010),l=a.i(40780),m=a.i(11789),n=a.i(27725),o=a.i(62331),p=a.i(28761);let q=(0,p.default)("git-compare",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]]);var r=a.i(49861),s=a.i(64964);function t({events:a}){return 0===a.length?(0,d.jsx)("div",{className:"text-center text-muted-foreground text-sm py-8",children:"No activity yet"}):(0,d.jsx)("div",{className:"space-y-4",children:a.map(a=>(0,d.jsx)("div",{className:"flex items-start gap-3 border-b pb-4 last:border-0",children:(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("p",{className:"font-medium text-sm",children:a.title}),a.description&&(0,d.jsx)("p",{className:"text-muted-foreground text-xs mt-1",children:a.description}),(0,d.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[a.actor&&(0,d.jsx)("span",{className:"text-muted-foreground text-xs",children:a.actor}),(0,d.jsx)("span",{className:"text-muted-foreground text-xs",children:"•"}),(0,d.jsx)("span",{className:"text-muted-foreground text-xs",children:(0,s.format)(new Date(a.timestamp),"MMM dd, yyyy HH:mm")})]})]})},a.id))})}var u=a.i(42133);function v({post:a,formData:b,onRestorePublished:c}){let[f,g]=e.useState([]),[h,i]=e.useState(!1);e.useEffect(()=>{a?.id&&(i(!0),(0,u.getPostActivity)(a.id).then(a=>{g(a),i(!1)}))},[a?.id]);let j=a?.status==="published"?"Published":"Draft",k=b?.updatedAt||a?.updatedAt,l=a?.publishedAt;return(0,d.jsxs)("div",{className:"space-y-6 p-4",children:[(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)("h3",{className:"font-semibold text-sm",children:"Version Info"}),(0,d.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-muted-foreground",children:"Viewing: "}),(0,d.jsx)("span",{className:"font-medium",children:j})]}),k&&(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-muted-foreground",children:"Last saved: "}),(0,d.jsx)("span",{className:"font-medium",children:(0,m.formatDistanceToNow)(new Date(k),{addSuffix:!0})})]}),l&&(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-muted-foreground",children:"Last published: "}),(0,d.jsx)("span",{className:"font-medium",children:(0,m.formatDistanceToNow)(new Date(l),{addSuffix:!0})})]})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("h3",{className:"font-semibold text-sm",children:"Actions"}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)(n.Button,{variant:"outline",size:"sm",className:"w-full justify-start",disabled:!0,title:"Coming in Phase 3",children:[(0,d.jsx)(q,{className:"mr-2 size-4"}),"Compare changes"]}),a?.status==="draft"&&a?.publishedAt&&(0,d.jsxs)(n.Button,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:c,children:[(0,d.jsx)(o.RotateCcw,{className:"mr-2 size-4"}),"Restore published → draft"]}),(0,d.jsxs)(n.Button,{variant:"outline",size:"sm",className:"w-full justify-start",disabled:!0,title:"Coming in Phase 3",children:[(0,d.jsx)(r.Save,{className:"mr-2 size-4"}),"Save as new revision"]})]})]}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)("h3",{className:"font-semibold text-sm",children:"Activity Log"}),h?(0,d.jsx)("div",{className:"text-center text-muted-foreground text-sm py-4",children:"Loading..."}):(0,d.jsx)(t,{events:f})]})]})}var w=a.i(12741);let x=(0,p.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var y=a.i(78974);function z(a,b){let[c,d]=e.useState(null),[f,g]=e.useState(!1);if(e.useEffect(()=>{a?.slug&&a?.bucket?(g(!0),(0,u.isSlugUnique)(a.slug,a.bucket,b).then(a=>{d(a),g(!1)}).catch(()=>{d(null),g(!1)})):d(null)},[a?.slug,a?.bucket,b]),!a)return{items:[],passCount:0,warningCount:0,failCount:0,canPublish:!1,hasWarnings:!1};let h=[];h.push({id:"title",label:"Title present",status:a.title?.trim()?"pass":"fail",message:a.title?.trim()?void 0:"Title is required"});let i=a.slug?.trim()&&/^[a-z0-9-]+$/.test(a.slug);h.push({id:"slug",label:"Slug valid + unique",status:a.slug?.trim()&&i?!1===c?"fail":!0===c?"pass":f?"warning":"pass":"fail",message:a.slug?.trim()?i?!1===c?"Slug is not unique":f?"Checking...":void 0:"Slug must contain only lowercase letters, numbers, and hyphens":"Slug is required"}),h.push({id:"excerpt",label:"Excerpt present",status:a.excerpt?.trim()?"pass":"warning",message:a.excerpt?.trim()?void 0:"Excerpt is recommended"}),h.push({id:"cover",label:"Cover present",status:a.cover?.trim()?"pass":"warning",message:a.cover?.trim()?void 0:"Cover image is recommended"});let j=a.seoTitle?.length||0;h.push({id:"seoTitle",label:"SEO title length",status:0===j||j>60?"warning":"pass",message:0===j?"SEO title is recommended":j>60?`SEO title is ${j} characters (recommended: ≤60)`:void 0});let k=a.seoDescription?.length||0;h.push({id:"seoDescription",label:"SEO description length",status:0===k||k>160?"warning":"pass",message:0===k?"SEO description is recommended":k>160?`SEO description is ${k} characters (recommended: ≤160)`:void 0});let l=h.filter(a=>"pass"===a.status).length,m=h.filter(a=>"warning"===a.status).length,n=h.filter(a=>"fail"===a.status).length;return{items:h,passCount:l,warningCount:m,failCount:n,canPublish:0===n,hasWarnings:m>0}}function A({formData:a,postId:b}){let c=z(a,b);return a?(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("h3",{className:"font-semibold text-sm",children:"Content Checklist"}),(0,d.jsxs)(j.Badge,{variant:"secondary",className:"text-xs",children:[c.passCount,"/",c.items.length]})]}),(0,d.jsx)("div",{className:"space-y-2",children:c.items.map(a=>(0,d.jsxs)("div",{className:"flex items-start gap-2 text-sm",children:[(a=>{switch(a){case"pass":return(0,d.jsx)(w.CheckCircle2,{className:"size-4 text-green-600"});case"warning":return(0,d.jsx)(y.AlertCircle,{className:"size-4 text-yellow-600"});case"fail":return(0,d.jsx)(x,{className:"size-4 text-red-600"})}})(a.status),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("div",{className:"font-medium",children:a.label}),a.message&&(0,d.jsx)("div",{className:"text-muted-foreground text-xs mt-0.5",children:a.message})]})]},a.id))}),c.failCount>0&&(0,d.jsxs)("div",{className:"rounded-md border border-red-200 bg-red-50 p-2 text-red-800 text-xs",children:[c.failCount," issue",c.failCount>1?"s":""," must be fixed before publishing"]}),0===c.failCount&&c.warningCount>0&&(0,d.jsxs)("div",{className:"rounded-md border border-yellow-200 bg-yellow-50 p-2 text-yellow-800 text-xs",children:[c.warningCount," warning",c.warningCount>1?"s":""," - review before publishing"]})]}):null}let B=[{value:"insights",label:"Insights"},{value:"resources",label:"Resources"},{value:"knowledge",label:"Knowledge"}],C=[{value:"draft",label:"Draft"},{value:"published",label:"Published"},{value:"scheduled",label:"Scheduled"},{value:"archived",label:"Archived"}];function D({post:a,formData:b,onFormDataChange:c,onSchedule:f}){let[m,n]=e.useState(a?{title:a.title,slug:a.slug,bucket:a.bucket,excerpt:a.excerpt,cover:a.cover,tags:a.tags,content:a.content,seoTitle:a.seoTitle,seoDescription:a.seoDescription,canonical:a.canonical,noindex:a.noindex,status:a.status,scheduledFor:a.scheduledFor}:{title:"",slug:"",bucket:"insights",excerpt:"",cover:"",tags:[],content:{root:{children:[],direction:"ltr",format:"",indent:0,type:"root",version:1}},status:"draft"});e.useEffect(()=>{b&&n(b)},[b]);let o=(a,b)=>{let d={...m,[a]:b};n(d),c(d)},p=async()=>{console.log("Restore published to draft")};return(0,d.jsx)("div",{className:"flex h-full flex-col overflow-hidden",children:(0,d.jsxs)(l.Tabs,{defaultValue:"metadata",className:"flex h-full flex-col",children:[(0,d.jsxs)(l.TabsList,{className:"mx-4 mt-4",children:[(0,d.jsx)(l.TabsTrigger,{value:"metadata",children:"Metadata"}),(0,d.jsx)(l.TabsTrigger,{value:"versions",children:"Versions"})]}),(0,d.jsx)(l.TabsContent,{value:"metadata",className:"flex-1 overflow-y-auto",children:(0,d.jsxs)("div",{className:"space-y-6 p-6",children:[(0,d.jsx)("div",{className:"rounded-md border bg-background p-4",children:(0,d.jsx)(A,{formData:b,postId:a?.id})}),(0,d.jsx)(k.Separator,{}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("h3",{className:"font-semibold",children:"Basic Information"}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(h.Label,{htmlFor:"title",children:"Title *"}),(0,d.jsx)(g.Input,{id:"title",value:m.title||"",onChange:b=>{var c;o("title",c=b.target.value),a&&m.slug||o("slug",c.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""))},placeholder:"Enter post title"})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(h.Label,{htmlFor:"slug",children:"Slug *"}),(0,d.jsx)(g.Input,{id:"slug",value:m.slug||"",onChange:a=>o("slug",a.target.value),placeholder:"post-slug"}),(0,d.jsx)("p",{className:"text-xs text-muted-foreground",children:"URL-friendly version of the title"})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(h.Label,{htmlFor:"bucket",children:"Content Bucket"}),(0,d.jsx)("select",{id:"bucket",value:m.bucket||"insights",onChange:a=>o("bucket",a.target.value),className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring",children:B.map(a=>(0,d.jsx)("option",{value:a.value,children:a.label},a.value))})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(h.Label,{htmlFor:"excerpt",children:"Excerpt"}),(0,d.jsx)(i.Textarea,{id:"excerpt",value:m.excerpt||"",onChange:a=>o("excerpt",a.target.value),placeholder:"Brief description of the post",rows:3})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(h.Label,{htmlFor:"cover",children:"Cover Image URL"}),(0,d.jsx)(g.Input,{id:"cover",value:m.cover||"",onChange:a=>o("cover",a.target.value),placeholder:"https://example.com/image.jpg"})]})]}),(0,d.jsx)(k.Separator,{}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("h3",{className:"font-semibold",children:"Tags"}),(0,d.jsx)("div",{className:"flex flex-wrap gap-2",children:m.tags?.map(a=>(0,d.jsxs)(j.Badge,{variant:"secondary",className:"cursor-pointer",onClick:()=>{o("tags",m.tags?.filter(b=>b!==a)||[])},children:[a," ×"]},a))}),(0,d.jsx)("div",{className:"flex gap-2",children:(0,d.jsx)(g.Input,{placeholder:"Add tag",onKeyDown:a=>{if("Enter"===a.key){var b;a.preventDefault(),(b=a.currentTarget.value).trim()&&!m.tags?.includes(b.trim())&&o("tags",[...m.tags||[],b.trim()]),a.currentTarget.value=""}}})})]}),(0,d.jsx)(k.Separator,{}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("h3",{className:"font-semibold",children:"Status"}),(0,d.jsx)("select",{value:m.status||"draft",onChange:b=>{let c=b.target.value;"scheduled"===m.status&&"draft"===c&&a?(o("status",c),o("scheduledFor",void 0)):o("status",c)},className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring",children:C.map(a=>(0,d.jsx)("option",{value:a.value,children:a.label},a.value))}),"scheduled"===m.status&&m.scheduledFor&&(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(h.Label,{htmlFor:"scheduledFor",children:"Schedule For"}),(0,d.jsx)(g.Input,{id:"scheduledFor",type:"datetime-local",value:m.scheduledFor?new Date(m.scheduledFor).toISOString().slice(0,16):"",onChange:a=>o("scheduledFor",a.target.value?new Date(a.target.value).toISOString():void 0)}),(0,d.jsx)("p",{className:"text-muted-foreground text-xs",children:"Changes to slug/SEO will be applied when the post is published."})]}),"scheduled"===m.status&&!m.scheduledFor&&(0,d.jsx)("div",{className:"rounded-md border border-yellow-200 bg-yellow-50 p-2 text-yellow-800 text-xs",children:"Scheduled but no date set. Please reschedule."})]}),(0,d.jsx)(k.Separator,{}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("h3",{className:"font-semibold",children:"SEO Settings"}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(h.Label,{htmlFor:"seoTitle",children:"SEO Title"}),(0,d.jsx)(g.Input,{id:"seoTitle",value:m.seoTitle||"",onChange:a=>o("seoTitle",a.target.value),placeholder:"Custom title for search engines"}),(0,d.jsxs)("p",{className:"text-xs text-muted-foreground",children:[m.seoTitle?.length||0,"/60 characters"]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(h.Label,{htmlFor:"seoDescription",children:"SEO Description"}),(0,d.jsx)(i.Textarea,{id:"seoDescription",value:m.seoDescription||"",onChange:a=>o("seoDescription",a.target.value),placeholder:"Meta description for search engines",rows:3}),(0,d.jsxs)("p",{className:"text-xs text-muted-foreground",children:[m.seoDescription?.length||0,"/160 characters"]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(h.Label,{htmlFor:"canonical",children:"Canonical URL"}),(0,d.jsx)(g.Input,{id:"canonical",value:m.canonical||"",onChange:a=>o("canonical",a.target.value),placeholder:"https://example.com/canonical-url"})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("input",{type:"checkbox",id:"noindex",checked:m.noindex||!1,onChange:a=>o("noindex",a.target.checked),className:"size-4 rounded border-input"}),(0,d.jsx)(h.Label,{htmlFor:"noindex",className:"cursor-pointer",children:"Noindex (prevent search engines from indexing)"})]})]})]})}),(0,d.jsx)(l.TabsContent,{value:"versions",className:"flex-1 overflow-y-auto",children:(0,d.jsx)(v,{post:a,formData:b,onRestorePublished:p})})]})})}let E=(0,p.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var F=a.i(93254),G=a.i(10610),H=a.i(1088);let I=(0,p.default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var J=a.i(3150),K=a.i(27976);let L=(0,p.default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);var M=a.i(62373),N=a.i(69708);function O({post:a,formData:b,hasUnsavedChanges:c,isSaving:g,isSaved:h,lastSavedAt:i,onSave:l,onPublish:p,onSchedule:q,onUnpublish:s,onArchive:t,onRestore:u,onReschedule:v,onPublishNow:x,onCancelSchedule:A,onUpdatePublished:B,onUnsavedChangesChange:C,showChecklist:D=!1}){(0,f.useRouter)();let O=a?.status||b?.status||"draft",P=z(b,a?.id);e.useEffect(()=>{let a=a=>{c&&(a.preventDefault(),a.returnValue="")};return window.addEventListener("beforeunload",a),()=>window.removeEventListener("beforeunload",a)},[c]);let Q=async()=>{b&&(await l(),C?.(!1))},R=()=>{if(!b)return;let c=b.slug||a?.slug,d=b.bucket||a?.bucket;c&&d?window.open(`/api/draft?secret=your-secret-token&slug=${c}&bucket=${d}`,"_blank"):N.showToast.error("Slug and bucket are required for preview")},S=async()=>{b&&await p?.()},T=()=>{v?.()},U=async()=>{confirm("Are you sure you want to unpublish this post? It will be set to draft.")&&await s?.()},V=async()=>{confirm("Are you sure you want to archive this post? It will be hidden from public view.")&&await t?.()},W=async()=>{await u?.()},X=e.useMemo(()=>{if(!i)return null;try{return(0,m.formatDistanceToNow)(new Date(i),{addSuffix:!0})}catch{return null}},[i]),Y=e.useMemo(()=>{if("scheduled"!==O||!a?.scheduledFor)return null;try{let b=new Date(a.scheduledFor),c=new Date;if(b<=c)return"Ready to publish";return`Publishes ${(0,m.formatDistanceToNow)(b,{addSuffix:!0})}`}catch{return null}},[O,a?.scheduledFor]);return(0,d.jsx)("div",{className:"border-b bg-background",children:(0,d.jsxs)("div",{className:"flex h-14 items-center justify-between px-6",children:[(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)(M.default,{href:"/content",children:(0,d.jsx)(n.Button,{variant:"ghost",size:"icon",children:(0,d.jsx)(G.ArrowLeft,{className:"size-4"})})}),(0,d.jsx)(k.Separator,{orientation:"vertical",className:"h-6"}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[h&&(0,d.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,d.jsx)(w.CheckCircle2,{className:"size-4 text-green-600"}),(0,d.jsx)("span",{children:"Saved"})]}),c&&!h&&(0,d.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,d.jsx)(H.Clock,{className:"size-4"}),(0,d.jsx)("span",{children:"Unsaved changes"})]}),!c&&X&&(0,d.jsx)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:(0,d.jsxs)("span",{children:["Last saved ",X]})}),Y&&(0,d.jsxs)("div",{className:"flex items-center gap-2 text-sm text-blue-600",children:[(0,d.jsx)(F.Calendar,{className:"size-4"}),(0,d.jsx)("span",{children:Y})]})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[b&&(0,d.jsxs)("div",{className:"group relative mr-2",children:[P.failCount>0?(0,d.jsxs)(j.Badge,{variant:"destructive",className:"cursor-help",children:[(0,d.jsx)(y.AlertCircle,{className:"mr-1 size-3"}),P.failCount," issue",P.failCount>1?"s":""]}):P.warningCount>0?(0,d.jsxs)(j.Badge,{variant:"secondary",className:"cursor-help",children:[(0,d.jsx)(y.AlertCircle,{className:"mr-1 size-3"}),P.warningCount," warning",P.warningCount>1?"s":""]}):(0,d.jsxs)(j.Badge,{variant:"secondary",className:"cursor-help",children:[(0,d.jsx)(w.CheckCircle2,{className:"mr-1 size-3"}),"All checks pass"]}),D&&(0,d.jsx)("div",{className:"invisible absolute right-0 top-full z-10 mt-2 w-64 rounded-md border bg-popover p-3 text-sm shadow-lg group-hover:visible",children:(0,d.jsx)("div",{className:"space-y-1",children:P.items.map(a=>(0,d.jsxs)("div",{className:"flex items-center gap-2",children:["pass"===a.status&&(0,d.jsx)(w.CheckCircle2,{className:"size-3 text-green-600"}),"warning"===a.status&&(0,d.jsx)(y.AlertCircle,{className:"size-3 text-yellow-600"}),"fail"===a.status&&(0,d.jsx)(y.AlertCircle,{className:"size-3 text-red-600"}),(0,d.jsx)("span",{className:"fail"===a.status?"font-medium":"",children:a.label})]},a.id))})})]}),"draft"===O&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(n.Button,{variant:"outline",onClick:Q,disabled:g||!c,children:[(0,d.jsx)(r.Save,{className:"mr-2 size-4"}),g?"Saving...":"Save Draft"]}),(0,d.jsxs)(n.Button,{variant:"outline",onClick:R,disabled:!b?.slug,children:[(0,d.jsx)(E,{className:"mr-2 size-4"}),"Preview Draft"]}),(0,d.jsxs)(n.Button,{variant:"outline",onClick:T,children:[(0,d.jsx)(F.Calendar,{className:"mr-2 size-4"}),"Schedule"]}),(0,d.jsxs)(n.Button,{onClick:S,disabled:g||!b||!P.canPublish,title:P.canPublish?void 0:"Fix required issues before publishing",children:[(0,d.jsx)(I,{className:"mr-2 size-4"}),"Publish"]})]}),"scheduled"===O&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(n.Button,{variant:"outline",onClick:Q,disabled:g||!c,children:[(0,d.jsx)(r.Save,{className:"mr-2 size-4"}),g?"Saving...":"Save"]}),(0,d.jsxs)(n.Button,{variant:"outline",onClick:R,disabled:!b?.slug,children:[(0,d.jsx)(E,{className:"mr-2 size-4"}),"Preview Draft"]}),(0,d.jsxs)(n.Button,{variant:"outline",onClick:T,children:[(0,d.jsx)(F.Calendar,{className:"mr-2 size-4"}),"Reschedule"]}),(0,d.jsxs)(n.Button,{variant:"outline",onClick:x,children:[(0,d.jsx)(L,{className:"mr-2 size-4"}),"Publish Now"]}),(0,d.jsxs)(n.Button,{variant:"outline",onClick:A,children:[(0,d.jsx)(K.X,{className:"mr-2 size-4"}),"Cancel Schedule"]})]}),"published"===O&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(n.Button,{variant:"outline",onClick:Q,disabled:g||!c,children:[(0,d.jsx)(r.Save,{className:"mr-2 size-4"}),g?"Saving...":"Save"]}),(0,d.jsxs)(n.Button,{variant:"outline",onClick:()=>{if(!a||"published"!==a.status)return;let b=a.bucket,c=a.slug;window.open(`/${b}/${c}`,"_blank")},children:[(0,d.jsx)(E,{className:"mr-2 size-4"}),"Preview Published"]}),(0,d.jsxs)(n.Button,{variant:"outline",onClick:B,children:[(0,d.jsx)(I,{className:"mr-2 size-4"}),"Update Published"]}),(0,d.jsx)(n.Button,{variant:"outline",onClick:U,children:"Unpublish"}),(0,d.jsxs)(n.Button,{variant:"outline",onClick:V,children:[(0,d.jsx)(J.Archive,{className:"mr-2 size-4"}),"Archive"]})]}),"archived"===O&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(n.Button,{variant:"outline",onClick:R,disabled:!b?.slug,children:[(0,d.jsx)(E,{className:"mr-2 size-4"}),"Preview Draft"]}),(0,d.jsxs)(n.Button,{onClick:W,children:[(0,d.jsx)(o.RotateCcw,{className:"mr-2 size-4"}),"Restore"]})]})]})]})})}var P=a.i(86945),Q=a.i(29695);function R({open:a,onOpenChange:b,onConfirm:c}){let[f,g]=e.useState("update");return(0,d.jsx)(P.Dialog,{open:a,onOpenChange:b,children:(0,d.jsxs)(P.DialogContent,{className:"sm:max-w-[425px]",children:[(0,d.jsxs)(P.DialogHeader,{children:[(0,d.jsx)(P.DialogTitle,{children:"Edit Published Post"}),(0,d.jsx)(P.DialogDescription,{children:"Choose how you want to handle changes to this published post."})]}),(0,d.jsx)("div",{className:"grid gap-4 py-4",children:(0,d.jsxs)(Q.RadioGroup,{value:f,onValueChange:a=>g(a),children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("input",{type:"radio",id:"update",value:"update",checked:"update"===f,onChange:()=>g("update"),className:"size-4"}),(0,d.jsxs)(h.Label,{htmlFor:"update",className:"flex-1 cursor-pointer",children:[(0,d.jsx)("div",{className:"font-medium",children:"Update published immediately"}),(0,d.jsx)("div",{className:"text-muted-foreground text-sm",children:"Changes will be live on the published version right away."})]})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("input",{type:"radio",id:"draft",value:"draft",checked:"draft"===f,onChange:()=>g("draft"),className:"size-4"}),(0,d.jsxs)(h.Label,{htmlFor:"draft",className:"flex-1 cursor-pointer",children:[(0,d.jsx)("div",{className:"font-medium",children:"Create draft revision"}),(0,d.jsx)("div",{className:"text-muted-foreground text-sm",children:"Create a new draft version. You can review and publish it later."})]})]})]})}),(0,d.jsxs)(P.DialogFooter,{children:[(0,d.jsx)(n.Button,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),(0,d.jsx)(n.Button,{onClick:()=>{c(f),b(!1)},children:"Continue"})]})]})})}var S=a.i(23867),T=a.i(29274);function U({open:a,onOpenChange:b,onConfirm:c,currentScheduledFor:f}){let[g,i]=e.useState(!f),[j,k]=e.useState(()=>f?(0,s.format)(new Date(f),"yyyy-MM-dd"):(0,s.format)((0,S.addDays)(new Date,1),"yyyy-MM-dd")),[l,m]=e.useState(()=>f?(0,s.format)(new Date(f),"HH:mm"):"08:00");e.useEffect(()=>{if(a&&f){let a=new Date(f);k((0,s.format)(a,"yyyy-MM-dd")),m((0,s.format)(a,"HH:mm")),i(!1)}else a&&!f&&i(!0)},[a,f]);let o=Intl.DateTimeFormat().resolvedOptions().timeZone;return(0,d.jsx)(P.Dialog,{open:a,onOpenChange:b,children:(0,d.jsxs)(P.DialogContent,{className:"sm:max-w-[425px]",children:[(0,d.jsxs)(P.DialogHeader,{children:[(0,d.jsx)(P.DialogTitle,{children:"Schedule Publication"}),(0,d.jsx)(P.DialogDescription,{children:"Choose when to publish this post. You can schedule it for later or publish immediately."})]}),(0,d.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)(h.Label,{htmlFor:"publish-immediately",className:"cursor-pointer",children:"Publish immediately"}),(0,d.jsx)(T.Switch,{id:"publish-immediately",checked:g,onCheckedChange:i})]}),!g&&(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)(h.Label,{htmlFor:"schedule-date",className:"mb-2 flex items-center gap-2",children:[(0,d.jsx)(F.Calendar,{className:"size-4"}),"Date"]}),(0,d.jsx)("input",{id:"schedule-date",type:"date",value:j,onChange:a=>k(a.target.value),min:(0,s.format)(new Date,"yyyy-MM-dd"),className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm"})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)(h.Label,{htmlFor:"schedule-time",className:"mb-2 flex items-center gap-2",children:[(0,d.jsx)(H.Clock,{className:"size-4"}),"Time"]}),(0,d.jsx)("input",{id:"schedule-time",type:"time",value:l,onChange:a=>m(a.target.value),className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm"})]}),(0,d.jsxs)("div",{className:"text-muted-foreground text-xs",children:["Timezone: ",o]})]})]}),(0,d.jsxs)(P.DialogFooter,{children:[(0,d.jsx)(n.Button,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),(0,d.jsx)(n.Button,{onClick:()=>{if(g)c(null);else{let a=new Date(`${j}T${l}:00`);if(a<=new Date)return void alert("Cannot schedule in the past. Please select a future date and time.");c(a.toISOString())}b(!1)},children:g?"Publish Now":"Schedule"})]})]})})}function V({post:b,onSave:c,onPublish:g,onSchedule:h,formData:i,onFormDataChange:j,children:k}){let l=(0,f.useRouter)(),[m,n]=e.useState(!1),[o,p]=e.useState(!1),[q,r]=e.useState(!1),[s,t]=e.useState(),[v,w]=e.useState(null),[x,y]=e.useState(!1),[z,A]=e.useState(!1),B=i??v,C=j??w;e.useEffect(()=>{if(B&&q&&B.title){let a=setTimeout(async()=>{let a=b?`post-draft-${b.id}`:"post-draft-new";localStorage.setItem(a,JSON.stringify(B));try{await E()}catch(a){console.error("Auto-save failed:",a)}},3e3);return()=>clearTimeout(a)}},[B,q,b]);let E=async()=>{B&&b&&(await (0,u.saveDraft)(B,b.id),t(new Date().toISOString()),r(!1))},F=async()=>{if(B){n(!0);try{if(b){await (0,u.saveDraft)(B,b.id);let c=await a.A(80439).then(a=>a.getPostById(b.id));c&&C({...B,status:c.status,scheduledFor:c.scheduledFor})}else{let a=await (0,u.saveDraft)(B);l.push(`/content/${a.slug}`);return}p(!0),t(new Date().toISOString()),r(!1),setTimeout(()=>p(!1),2e3),N.showToast.success("Draft saved")}catch(a){console.error("Failed to save:",a),N.showToast.error("Failed to save draft")}finally{n(!1)}}},G=async()=>{if(B){n(!0);try{if(b)await (0,u.publish)(b.id);else{let a=await (0,u.saveDraft)(B);await (0,u.publish)(a.id)}N.showToast.success("Post published"),l.push("/content")}catch(a){console.error("Failed to publish:",a),N.showToast.error("Failed to publish post")}finally{n(!1)}}},H=async a=>{if(B){n(!0);try{if(null===a){if(b)await (0,u.publish)(b.id);else{let a=await (0,u.saveDraft)(B);await (0,u.publish)(a.id)}N.showToast.success("Post published")}else{if(b)await (0,u.reschedulePost)(b.id,a);else{let b=await (0,u.saveDraft)(B);await (0,u.reschedulePost)(b.id,a)}N.showToast.success("Post scheduled")}l.push("/content")}catch(a){console.error("Failed to schedule:",a),N.showToast.error("Failed to schedule post")}finally{n(!1)}}},I=async()=>{if(b){n(!0);try{await (0,u.unpublish)(b.id),N.showToast.success("Post unpublished"),l.push("/content")}catch(a){console.error("Failed to unpublish:",a),N.showToast.error("Failed to unpublish post")}finally{n(!1)}}},J=async()=>{if(b){n(!0);try{await (0,u.archivePost)(b.id),N.showToast.success("Post archived"),l.push("/content")}catch(a){console.error("Failed to archive:",a),N.showToast.error("Failed to archive post")}finally{n(!1)}}},K=async()=>{if(b){n(!0);try{await (0,u.restorePost)(b.id),N.showToast.success("Post restored"),l.push("/content")}catch(a){console.error("Failed to restore:",a),N.showToast.error("Failed to restore post")}finally{n(!1)}}},L=async()=>{if(b){n(!0);try{await (0,u.publishNow)(b.id),N.showToast.success("Post published"),l.push("/content")}catch(a){console.error("Failed to publish now:",a),N.showToast.error("Failed to publish post")}finally{n(!1)}}},M=async()=>{if(b){n(!0);try{await (0,u.cancelSchedule)(b.id),N.showToast.success("Schedule cancelled"),l.push("/content")}catch(a){console.error("Failed to cancel schedule:",a),N.showToast.error("Failed to cancel schedule")}finally{n(!1)}}},P=async a=>{if(B&&b){n(!0);try{if("update"===a)await (0,u.updatePublishedPost)(b.id,B),N.showToast.success("Published post updated");else{let a=await (0,u.createDraftRevision)(b.id,B);N.showToast.success("Draft revision created"),l.push(`/content/${a.slug}`);return}l.push("/content")}catch(a){console.error("Failed to update published:",a),N.showToast.error("Failed to update published post")}finally{n(!1)}}};return(0,d.jsxs)("div",{className:"flex h-screen flex-col",children:[(0,d.jsx)(O,{post:b,formData:B,hasUnsavedChanges:q,isSaving:m,isSaved:o,lastSavedAt:s,onSave:F,onPublish:G,onSchedule:H,onUnpublish:I,onArchive:J,onRestore:K,onReschedule:()=>A(!0),onPublishNow:L,onCancelSchedule:M,onUpdatePublished:()=>y(!0),onUnsavedChangesChange:r}),(0,d.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,d.jsx)("div",{className:"flex-1 overflow-y-auto bg-background",children:(0,d.jsx)("div",{className:"mx-auto max-w-4xl px-6 py-8",children:k})}),(0,d.jsx)("div",{className:"w-80 border-l bg-muted/30",children:(0,d.jsx)(D,{post:b,formData:B,onFormDataChange:a=>{b?.status==="scheduled"&&"draft"===a.status&&b.scheduledFor&&(0,u.cancelSchedule)(b.id).catch(console.error),C(a),r(!0)}})})]}),(0,d.jsx)(R,{open:x,onOpenChange:y,onConfirm:P}),(0,d.jsx)(U,{open:z,onOpenChange:A,onConfirm:H,currentScheduledFor:b?.scheduledFor})]})}let W=(0,e.createContext)(null);function X(){let a=(0,e.useContext)(W);return null==a&&function(a,...b){let c=new URL("https://lexical.dev/docs/error"),d=new URLSearchParams;for(let a of(d.append("code",8),b))d.append("v",a);throw c.search=d.toString(),Error(`Minified Lexical error #8; visit ${c.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(0),a}function Y(a,...b){let c=new URL("https://lexical.dev/docs/error"),d=new URLSearchParams;for(let c of(d.append("code",a),b))d.append("v",c);throw c.search=d.toString(),Error(`Minified Lexical error #${a}; visit ${c.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function Z(a,...b){let c=new URL("https://lexical.dev/docs/error"),d=new URLSearchParams;for(let c of(d.append("code",a),b))d.append("v",c);c.search=d.toString(),console.warn(`Minified Lexical warning #${a}; visit ${c.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function $(...a){let b=[];for(let c of a)if(c&&"string"==typeof c)for(let[a]of c.matchAll(/\S+/g))b.push(a);return b}let _="֑-߿יִ-﷽ﹰ-ﻼ",aa="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",ab=(RegExp("^[^"+aa+"]*["+_+"]"),RegExp("^[^"+_+"]*["+aa+"]"),{bold:1,capitalize:1024,code:16,highlight:128,italic:2,lowercase:256,strikethrough:4,subscript:32,superscript:64,underline:8,uppercase:512}),ac={directionless:1,unmergeable:2},ad={center:2,end:6,justify:4,left:1,right:3,start:5},ae={2:"center",6:"end",4:"justify",1:"left",3:"right",5:"start"},af={normal:0,segmented:2,token:1},ag={0:"normal",2:"segmented",1:"token"},ah="$config",ai=!1,aj=0;function ak(a){aj=a.timeStamp}function al(a,b,c){let d="BR"===a.nodeName,e=b.__lexicalLineBreak;return e&&(a===e||d&&a.previousSibling===e)||d&&void 0!==ek(a,c)}function am(a,b,c){ai=!0;let d=performance.now()-aj>100;try{dE(a,()=>{let e=db()||a.getEditorState().read(()=>{let a=db();return null!==a?a.clone():null}),f=new Map,g=a.getRootElement(),h=a._editorState,i=a._blockCursorElement,j=!1;for(let c=0;c<b.length;c++){let k=b[c],l=k.type,m=k.target,n=function(a,b,c,d){var e;for(let f=a;f&&(e=f,!0!==e.__lexicalUnmanaged);f=eJ(f)){let a=ek(f,b);if(void 0!==a){let b=ei(a,c);if(b)return dL(b)||!eU(f)?void 0:[f,b]}else if(f===d)return[d,ep(c)]}}(m,a,h,g);if(!n)continue;let[o,p]=n;if("characterData"===l)d&&cM(p)&&d9(m)&&function(a,b,c){if(cW(a)){let b=a.anchor.getNode();if(b.is(c)&&a.format!==b.getFormat())return!1}return d9(b)&&c.isAttached()}(e,m,p)&&function(a,b,c){var d;let e=(d=eN(c),null),f=null,g=null;null!==e&&e.anchorNode===a&&(f=e.anchorOffset,g=e.focusOffset);let h=a.nodeValue;null!==h&&ev(b,h,f,g,!1)}(m,p,a);else if("childList"===l){j=!0;let b=k.addedNodes;for(let c=0;c<b.length;c++){let d=b[c],e=ej(d),f=d.parentNode;null==f||d===i||null!==e||al(d,f,a)||f.removeChild(d)}let c=k.removedNodes,d=c.length;if(d>0){let b=0;for(let e=0;e<d;e++){let d=c[e];(al(d,m,a)||i===d)&&(m.appendChild(d),b++)}d!==b&&f.set(o,p)}}}if(f.size>0)for(let[b,c]of f)c.reconcileObservedMutation(b,a);let k=c.takeRecords();if(k.length>0){for(let b=0;b<k.length;b++){let c=k[b],d=c.addedNodes,e=c.target;for(let b=0;b<d.length;b++){let c=d[b],f=c.parentNode;null==f||"BR"!==c.nodeName||al(c,e,a)||f.removeChild(c)}}c.takeRecords()}null!==e&&j&&eq(e)})}finally{ai=!1}}function an(a){let b=a._observer;null!==b&&am(a,b.takeRecords(),b)}function ao(a){0===aj&&eN(a).addEventListener("textInput",ak,!0),a._observer=new MutationObserver((b,c)=>{am(a,b,c)})}class ap{node;knownState;unknownState;sharedNodeState;size;constructor(a,b,c,d=new Map,e){this.node=a,this.sharedNodeState=b,this.unknownState=c,this.knownState=d;const{sharedConfigMap:f}=this.sharedNodeState,g=void 0!==e?e:function(a,b,c){let d=c.size;if(b)for(let e in b){let b=a.get(e);b&&c.has(b)||d++}return d}(f,c,d);this.size=g}getValue(a){let b=this.knownState.get(a);if(void 0!==b)return b;this.sharedNodeState.sharedConfigMap.set(a.key,a);let c=a.defaultValue;if(this.unknownState&&a.key in this.unknownState){let b=this.unknownState[a.key];void 0!==b&&(c=a.parse(b)),this.updateFromKnown(a,c)}return c}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){let a={...this.unknownState},b={};for(let[b,c]of this.knownState)b.isEqual(c,b.defaultValue)?delete a[b.key]:a[b.key]=b.unparse(c);for(let c of this.sharedNodeState.flatKeys)c in a&&(b[c]=a[c],delete a[c]);return ar(a)&&(b.$=a),b}getWritable(a){if(this.node===a)return this;let{sharedNodeState:b,unknownState:c}=this,d=new Map(this.knownState);return new ap(a,b,function(a,b,c){let d;if(c)for(let[e,f]of Object.entries(c)){let c=a.get(e);c?b.has(c)||b.set(c,c.parse(f)):(d=d||{})[e]=f}return d}(b.sharedConfigMap,d,c),d,this.size)}updateFromKnown(a,b){let c=a.key;this.sharedNodeState.sharedConfigMap.set(c,a);let{knownState:d,unknownState:e}=this;d.has(a)||e&&c in e||(e&&(delete e[c],this.unknownState=ar(e)),this.size++),d.set(a,b)}updateFromUnknown(a,b){let c=this.sharedNodeState.sharedConfigMap.get(a);c?this.updateFromKnown(c,c.parse(b)):(this.unknownState=this.unknownState||{},a in this.unknownState||this.size++,this.unknownState[a]=b)}updateFromJSON(a){let{knownState:b}=this;for(let a of b.keys())b.set(a,a.defaultValue);if(this.size=b.size,this.unknownState=void 0,a)for(let[b,c]of Object.entries(a))this.updateFromUnknown(b,c)}}function aq(a){return a.__state?a.__state.sharedNodeState:d_(dt(),a.getType()).sharedNodeState}function ar(a){if(a)for(let b in a)return a}function as(a,b,c){for(let[d,e]of b.knownState){if(a.has(d.key))continue;a.add(d.key);let b=c?c.getValue(d):d.defaultValue;if(b!==e&&!d.isEqual(b,e))return!0}return!1}function at(a,b,c){let{unknownState:d}=b,e=c?c.unknownState:void 0;if(d){for(let[b,c]of Object.entries(d))if(!a.has(b)&&(a.add(b),c!==(e?e[b]:void 0)))return!0}return!1}function au(a,b){let c=a.__state;return c&&c.node===a?c.getWritable(b):c}function av(a,b){let c=a.__mode,d=a.__format,e=a.__style,f=b.__mode,g=b.__format,h=b.__style,i=a.__state,j=b.__state;return(null===c||c===f)&&(null===d||d===g)&&(null===e||e===h)&&(null===a.__state||i===j||function(a,b){if(a===b)return!0;if(a&&b&&a.size!==b.size)return!1;let c=new Set;return!(a&&as(c,a,b)||b&&as(c,b,a)||a&&at(c,a,b)||b&&at(c,b,a))}(i,j))}function aw(a,b){let c=a.mergeWithSibling(b),d=dt()._normalizedNodes;return d.add(a.__key),d.add(b.__key),c}function ax(a){let b,c,d=a;if(""!==d.__text||!d.isSimpleText()||d.isUnmergeable()){for(;null!==(b=d.getPreviousSibling())&&cM(b)&&b.isSimpleText()&&!b.isUnmergeable();){if(""!==b.__text){av(b,d)&&(d=aw(b,d));break}b.remove()}for(;null!==(c=d.getNextSibling())&&cM(c)&&c.isSimpleText()&&!c.isUnmergeable();){if(""!==c.__text){av(d,c)&&(d=aw(d,c));break}c.remove()}}else d.remove()}function ay(a){return az(a.anchor),az(a.focus),a}function az(a){for(;"element"===a.type;){let b,c,d=a.getNode(),e=a.offset;if(e===d.getChildrenSize()?(b=d.getChildAtIndex(e-1),c=!0):(b=d.getChildAtIndex(e),c=!1),cM(b)){a.set(b.__key,c?b.getTextContentSize():0,"text",!0);break}if(!dI(b))break;a.set(b.__key,c?b.getChildrenSize():0,"element",!0)}}let aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK="",aL=null,aM=null,aN="",aO=!1,aP=!1;function aQ(a,b){let c=aG.get(a);if(null!==b){let c=a1(a);c.parentNode===b&&b.removeChild(c)}if(aH.has(a)||aB._keyToDOMMap.delete(a),dI(c)){let a=a$(c,aG);aR(a,0,a.length-1,null)}void 0!==c&&eD(aJ,aC,aD,c,"destroyed")}function aR(a,b,c,d){let e=b;for(;e<=c;++e){let b=a[e];void 0!==b&&aQ(b,d)}}function aS(a,b){a.setProperty("text-align",b)}function aT(a,b){let c=aA.theme.indent;if("string"==typeof c){let d=a.classList.contains(c);b>0&&!d?a.classList.add(c):b<1&&d&&a.classList.remove(c)}let d=getComputedStyle(a).getPropertyValue("--lexical-indent-base-value")||"40px";a.style.setProperty("padding-inline-start",0===b?"":`calc(${b} * ${d})`)}function aU(a,b){let c=a.style;0===b?aS(c,""):1===b?aS(c,"left"):2===b?aS(c,"center"):3===b?aS(c,"right"):4===b?aS(c,"justify"):5===b?aS(c,"start"):6===b&&aS(c,"end")}function aV(a,b){let c=function(a){let b=a.__dir;if(null!==b)return b;if(dN(a))return null;let c=a.getParentOrThrow();return dN(c)&&null===c.__dir?"auto":null}(b);null!==c?a.dir=c:a.removeAttribute("dir")}function aW(a,b){var c;let d,e=aH.get(a);void 0===e&&Y(60);let f=e.createDOM(aA,aB);if(d=(c=aB)._keyToDOMMap,f[`__lexicalKey_${c._key}`]=a,d.set(a,f),cM(e)?f.setAttribute("data-lexical-text","true"):dL(e)&&f.setAttribute("data-lexical-decorator","true"),dI(e)){let a=e.__indent,b=e.__size;aV(f,e),0!==a&&aT(f,a),0!==b&&aX(a$(e,aH),e,0,b-1,e.getDOMSlot(f));let c=e.__format;0!==c&&aU(f,c),e.isInline()||aZ(null,e,f),eH(e)&&(aK+="\n\n",aN+="\n\n")}else{let b=e.getTextContent();if(dL(e)){let b=e.decorate(aB,aA);null!==b&&a_(a,b),f.contentEditable="false"}aK+=b,aN+=b}return null!==b&&b.insertChild(f),eD(aJ,aC,aD,e,"created"),f}function aX(a,b,c,d,e){let f=aK;aK="";let g=c;for(;g<=d;++g){aW(a[g],e);let b=aH.get(a[g]);null!==b&&cM(b)&&null===aL&&(aL=b.getFormat(),aM=b.getStyle())}eH(b)&&(aK+="\n\n"),e.element.__lexicalTextContent=aK,aK=f+aK}function aY(a,b){if(a){let c=a.__last;if(c){let a=b.get(c);if(a)return cv(a)?"line-break":dL(a)&&a.isInline()?"decorator":null}return"empty"}return null}function aZ(a,b,c){let d=aY(a,aG),e=aY(b,aH);d!==e&&b.getDOMSlot(c).setManagedLineBreak(e)}function a$(a,b){let c=[],d=a.__first;for(;null!==d;){let a=b.get(d);void 0===a&&Y(101),c.push(d),d=a.__next}return c}function a_(a,b){let c=aB._pendingDecorators,d=aB._decorators;if(null===c){if(d[a]===b)return;c=em(aB)}c[a]=b}function a0(a){let b=a.nextSibling;return null!==b&&b===aB._blockCursorElement&&(b=b.nextSibling),b}function a1(a){let b=aI.get(a);return void 0===b&&Y(75,a),b}function a2(a){return{type:a}}let a3=a2("SELECTION_CHANGE_COMMAND"),a4=a2("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),a5=a2("CLICK_COMMAND"),a6=a2("BEFORE_INPUT_COMMAND"),a7=a2("INPUT_COMMAND"),a8=a2("COMPOSITION_START_COMMAND"),a9=a2("COMPOSITION_END_COMMAND"),ba=a2("DELETE_CHARACTER_COMMAND"),bb=a2("INSERT_LINE_BREAK_COMMAND"),bc=a2("INSERT_PARAGRAPH_COMMAND"),bd=a2("CONTROLLED_TEXT_INSERTION_COMMAND"),be=a2("PASTE_COMMAND"),bf=a2("REMOVE_TEXT_COMMAND"),bg=a2("DELETE_WORD_COMMAND"),bh=a2("DELETE_LINE_COMMAND"),bi=a2("FORMAT_TEXT_COMMAND"),bj=a2("UNDO_COMMAND"),bk=a2("REDO_COMMAND"),bl=a2("KEYDOWN_COMMAND"),bm=a2("KEY_ARROW_RIGHT_COMMAND"),bn=a2("MOVE_TO_END"),bo=a2("KEY_ARROW_LEFT_COMMAND"),bp=a2("MOVE_TO_START"),bq=a2("KEY_ARROW_UP_COMMAND"),br=a2("KEY_ARROW_DOWN_COMMAND"),bs=a2("KEY_ENTER_COMMAND"),bt=a2("KEY_SPACE_COMMAND"),bu=a2("KEY_BACKSPACE_COMMAND"),bv=a2("KEY_ESCAPE_COMMAND"),bw=a2("KEY_DELETE_COMMAND"),bx=a2("KEY_TAB_COMMAND"),by=a2("INSERT_TAB_COMMAND"),bz=a2("INDENT_CONTENT_COMMAND"),bA=a2("OUTDENT_CONTENT_COMMAND"),bB=a2("DROP_COMMAND"),bC=a2("FORMAT_ELEMENT_COMMAND"),bD=a2("DRAGSTART_COMMAND"),bE=a2("DRAGOVER_COMMAND"),bF=a2("DRAGEND_COMMAND"),bG=a2("COPY_COMMAND"),bH=a2("CUT_COMMAND"),bI=a2("SELECT_ALL_COMMAND"),bJ=a2("CLEAR_EDITOR_COMMAND"),bK=a2("CLEAR_HISTORY_COMMAND"),bL=a2("CAN_REDO_COMMAND"),bM=a2("CAN_UNDO_COMMAND"),bN=a2("FOCUS_COMMAND"),bO=a2("BLUR_COMMAND"),bP=a2("KEY_MODIFIER_COMMAND"),bQ=Object.freeze({}),bR=[["keydown",function(a,b){bS=a.timeStamp,bT=a.key,b.isComposing()||eG(b,bl,a)}],["pointerdown",function(a,b){let c=a.target,d=a.pointerType;eV(c)&&"touch"!==d&&"pen"!==d&&0===a.button&&dE(b,()=>{dL(el(c))||(bZ=!0)})}],["compositionstart",function(a,b){eG(b,a8,a)}],["compositionend",function(a,b){eG(b,a9,a)}],["input",function(a,b){a.stopPropagation(),dE(b,()=>{b.dispatchCommand(a7,a)},{event:a}),bV=null}],["click",function(a,b){dE(b,()=>{var c;db(),c=eN(b),dc(),eG(b,a5,a)})}],["cut",bQ],["copy",bQ],["dragstart",bQ],["dragover",bQ],["dragend",bQ],["paste",bQ],["focus",bQ],["blur",bQ],["drop",bQ]],bS=0,bT=null,bU=0,bV=null,bW=new WeakMap,bX=new WeakMap,bY=!1,bZ=!1,b$=!1,b_=!1,b0=!1,b1="",b2=null,b3=[0,"",0,"root",0];function b4(a,b,c,d,e){var f;let g=a.anchor,h=a.focus,i=g.getNode(),j=dt(),k=(f=eN(j),null),l=g.key,m=j.getElementByKey(l),n=c.length;return l!==h.key||!cM(i)||(!e||i.isDirty()&&n<2||es(c))&&g.offset!==h.offset&&!i.isComposing()||d8(i)||i.isDirty()&&n>1||null!==m&&!i.isComposing()&&null!==eb(m)||null!==k&&null!==b&&(!b.collapsed||b.startContainer!==k.anchorNode||b.startOffset!==k.anchorOffset)||i.getFormat()!==a.format||i.getStyle()!==a.style||function(a,b){let c;if(b.isSegmented())return!0;if(!a.isCollapsed())return!1;let d=a.anchor.offset,e=b.getParentOrThrow(),f=d7(b);return 0===d?!b.canInsertTextBefore()||!e.canInsertTextBefore()&&!b.isComposing()||f||(cM(c=b.getPreviousSibling())||dI(c)&&c.isInline())&&!c.canInsertTextAfter():d===b.getTextContentSize()&&(!b.canInsertTextAfter()||!e.canInsertTextAfter()&&!b.isComposing()||f)}(a,i)}function b5(a,b){return d9(a)&&null!==a.nodeValue&&0!==b&&b!==a.nodeValue.length}function b6(a,b,c){let{anchorNode:d,anchorOffset:e,focusNode:f,focusOffset:g}=a;bY&&(bY=!1,b5(d,e)&&b5(f,g)&&!b2)||dE(b,()=>{if(!c)return void eq(null);if(!d3(b,d,f))return;let h=db();if(b2&&cW(h)&&h.isCollapsed()){let a=h.anchor,b=b2.anchor;(a.key===b.key&&a.offset===b.offset+1||1===a.offset&&b.getNode().is(a.getNode().getPreviousSibling()))&&eq(h=b2.clone())}if(b2=null,cW(h)){let c=h.anchor,d=c.getNode();if(h.isCollapsed()){"Range"===a.type&&a.anchorNode===a.focusNode&&(h.dirty=!0);let e=eN(b).event,f=e?e.timeStamp:performance.now(),[g,i,j,k,l]=b3,m=eo(),n=!1===b.isComposing()&&""===m.getTextContent();if(f<l+200&&c.offset===j&&c.key===k)b7(h,g,i);else if("text"===c.type)cM(d)||Y(141),b8(h,d);else if("element"===c.type&&!n){dI(d)||Y(259);let a=c.getNode();a.isEmpty()?b7(h,a.getTextFormat(),a.getTextStyle()):b7(h,0,"")}}else{let a=c.key,b=h.focus.key,d=h.getNodes(),f=d.length,i=h.isBackward(),j=i?g:e,k=i?e:g,l=i?b:a,m=i?a:b,n=2047,o=!1;for(let a=0;a<f;a++){let b=d[a],c=b.getTextContentSize();if(cM(b)&&0!==c&&(0!==a||b.__key!==l||j!==c)&&(a!==f-1||b.__key!==m||0!==k)&&(o=!0,0==(n&=b.getFormat())))break}h.format=o?n:0}}eG(b,a3,void 0)})}function b7(a,b,c){a.format===b&&a.style===c||(a.format=b,a.style=c,a.dirty=!0)}function b8(a,b){b7(a,b.getFormat(),b.getStyle())}function b9(a){if(!a.getTargetRanges)return null;let b=a.getTargetRanges();return 0===b.length?null:b[0]}function ca(a){var b;let c=a.inputType,d=b9(a),e=dt(),f=db();if("deleteContentBackward"===c){if(null===f){let a=dc();if(!cW(a))return!0;eq(a.clone())}if(cW(f)){let c=f.anchor.key===f.focus.key;if(b=a.timeStamp,"MediaLast"===bT&&b<bS+30&&e.isComposing()&&c){if(eg(null),bS=0,setTimeout(()=>{dE(e,()=>{eg(null)})},30),cW(f)){let a=f.anchor.getNode();a.markDirty(),cM(a)||Y(142),b8(f,a)}}else{eg(null),a.preventDefault();let b=f.anchor.getNode(),c=b.getTextContent(),d=b.canInsertTextAfter(),g=0===f.anchor.offset&&f.focus.offset===c.length,h=!1;if(h&&f.isCollapsed()&&(h=!dL(eF(f.anchor,!0))),!h){eG(e,ba,!0);db()}}return!0}}if(!cW(f))return!0;let g=a.data;null!==bV&&eN(e),f.dirty&&null===bV||!f.isCollapsed()||dN(f.anchor.getNode())||null===d||f.applyDOMRange(d),bV=null;let h=f.anchor,i=f.focus,j=h.getNode(),k=i.getNode();if("insertText"===c||"insertTranspose"===c){if("\n"===g)a.preventDefault(),eG(e,bb,!1);else if("\n\n"===g)a.preventDefault(),eG(e,bc,void 0);else if(null==g&&a.dataTransfer){let b=a.dataTransfer.getData("text/plain");a.preventDefault(),f.insertRawText(b)}else null!=g&&b4(f,d,g,a.timeStamp,!0)?(a.preventDefault(),eG(e,bd,g)):bV=g;return bU=a.timeStamp,!0}switch(a.preventDefault(),c){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":eG(e,bd,a);break;case"insertFromComposition":eg(null),eG(e,bd,a);break;case"insertLineBreak":eg(null),eG(e,bb,!1);break;case"insertParagraph":eg(null),b$&&1?(b$=!1,eG(e,bb,!1)):eG(e,bc,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":eG(e,be,a);break;case"deleteByComposition":(j!==k||dI(j)||dI(k)||!d7(j)||!d7(k))&&eG(e,bf,a);break;case"deleteByDrag":case"deleteByCut":eG(e,bf,a);break;case"deleteContent":eG(e,ba,!1);break;case"deleteWordBackward":eG(e,bg,!0);break;case"deleteWordForward":eG(e,bg,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":eG(e,bh,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":eG(e,bh,!1);break;case"formatStrikeThrough":eG(e,bi,"strikethrough");break;case"formatBold":eG(e,bi,"bold");break;case"formatItalic":eG(e,bi,"italic");break;case"formatUnderline":eG(e,bi,"underline");break;case"historyUndo":eG(e,bj,void 0);break;case"historyRedo":eG(e,bk,void 0)}return!0}function cb(a){if(eU(a.target)&&dL(el(a.target)))return!0;let b=dt(),c=db(),d=a.data,e=b9(a);if(null!=d&&cW(c)&&b4(c,e,d,a.timeStamp,!1)){var f;return b_&&(ce(b,d),b_=!1),c.anchor.getNode(),f=eN(b),!0}return eN(b),b_&&(ce(b,d||void 0),b_=!1),dq(),an(dt()),!0}function cc(a){let b=dt(),c=db();if(cW(c)&&!b.isComposing()){let d=c.anchor,e=c.anchor.getNode();eg(d.key),(a.timeStamp<bS+30||"element"===d.type||!c.isCollapsed()||e.getFormat()!==c.format||cM(e)&&e.getStyle()!==c.style)&&eG(b,bd,"​")}return!0}function cd(a){return ce(dt(),a.data),!0}function ce(a,b){let c=a._compositionKey;if(eg(null),null!==c&&null!=b){if(""===b){let b=ei(c),d=eb(a.getElementByKey(c));return void(null!==d&&null!==d.nodeValue&&cM(b)&&ev(b,d.nodeValue,null,null,!0))}if("\n"===b[b.length-1]){let b=db();if(cW(b)){let c=b.focus;return b.anchor.set(c.key,c.offset,c.type),void eG(a,bs,null)}}}eN(a)}function cf(a){let b=dt();if(null==a.key)return!0;if(b0&&eB(a))return dE(b,()=>{ce(b,b1)}),b0=!1,b1="",!0;if(ey(a,"ArrowRight",{shiftKey:"any"}))eG(b,bm,a);else if(ey(a,"ArrowRight",ez))eG(b,bn,a);else if(ey(a,"ArrowLeft",{shiftKey:"any"}))eG(b,bo,a);else if(ey(a,"ArrowLeft",ez))eG(b,bp,a);else if(ey(a,"ArrowUp",{altKey:"any",shiftKey:"any"}))eG(b,bq,a);else if(ey(a,"ArrowDown",{altKey:"any",shiftKey:"any"}))eG(b,br,a);else if(ey(a,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0}))b$=!0,eG(b,bs,a);else if(" "===a.key)eG(b,bt,a);else if(0)a.preventDefault(),b$=!0,eG(b,bb,!0);else if(ey(a,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"}))b$=!1,eG(b,bs,a);else if(ey(a,"Backspace",{shiftKey:"any"}))eB(a)?eG(b,bu,a):(a.preventDefault(),eG(b,ba,!0));else if("Escape"===a.key)eG(b,bv,a);else if(ey(a,"Delete",{}))"Delete"!==a.key?(a.preventDefault(),eG(b,ba,!1)):eG(b,bw,a);else if(ey(a,"Backspace",eA))a.preventDefault(),eG(b,bg,!0);else if(ey(a,"Delete",eA))a.preventDefault(),eG(b,bg,!1);else if(0)a.preventDefault(),eG(b,bh,!0);else if(0)a.preventDefault(),eG(b,bh,!1);else if(ey(a,"b",ez))a.preventDefault(),eG(b,bi,"bold");else if(ey(a,"u",ez))a.preventDefault(),eG(b,bi,"underline");else if(ey(a,"i",ez))a.preventDefault(),eG(b,bi,"italic");else if(ey(a,"Tab",{shiftKey:"any"}))eG(b,bx,a);else if(ey(a,"z",ez))a.preventDefault(),eG(b,bj,void 0);else if(ey(a,"y",{ctrlKey:!0})||ey(a,"z",{ctrlKey:!0,shiftKey:!0}))a.preventDefault(),eG(b,bk,void 0);else{let c=b._editorState._selection;null===c||cW(c)?ey(a,"a",ez)&&(a.preventDefault(),eG(b,bI,a)):ey(a,"c",ez)?(a.preventDefault(),eG(b,bG,a)):ey(a,"x",ez)?(a.preventDefault(),eG(b,bH,a)):ey(a,"a",ez)&&(a.preventDefault(),eG(b,bI,a))}return(a.ctrlKey||a.shiftKey||a.altKey||a.metaKey)&&b.dispatchCommand(bP,a),!0}function cg(a){let b=a.__lexicalEventHandles;return void 0===b&&(a.__lexicalEventHandles=b=[]),b}let ch=new Map;function ci(a){let b,c=(b=eM(a.target))?b.getSelection():null;if(null===c)return;let d=d5(c.anchorNode);if(null===d)return;bZ&&(bZ=!1,dE(d,()=>{let b=dc(),e=c.anchorNode;(eU(e)||d9(e))&&eq(da(b,c,d,a))}));let e=et(d),f=e[e.length-1],g=f._key,h=ch.get(g),i=h||f;i!==d&&b6(c,i,!1),b6(c,d,!0),d!==f?ch.set(g,d):h&&ch.delete(g)}function cj(a){a._lexicalHandled=!0}function ck(a){return!0===a._lexicalHandled}let cl=()=>{};function cm(a,b,c){dq();let d=a.__key,e=a.getParent();if(null===e)return;let f=function(a){let b=db();if(!cW(b)||!dI(a))return b;let{anchor:c,focus:d}=b,e=c.getNode(),f=d.getNode();return eL(e,a)&&c.set(a.__key,0,"element"),eL(f,a)&&d.set(a.__key,0,"element"),b}(a),g=!1;if(cW(f)&&b){let b=f.anchor,c=f.focus;b.key===d&&(df(b,a,e,a.getPreviousSibling(),a.getNextSibling()),g=!0),c.key===d&&(df(c,a,e,a.getPreviousSibling(),a.getNextSibling()),g=!0)}else cY(f)&&b&&a.isSelected()&&a.selectPrevious();if(cW(f)&&b&&!g){let b=a.getIndexWithinParent();ee(a),dd(f,e,b,-1)}else ee(a);c||eO(e)||e.canBeEmpty()||!e.isEmpty()||cm(e,b),b&&f&&dN(e)&&e.isEmpty()&&e.selectEnd()}let cn=Symbol.for("ephemeral");function co(a){return a[cn]||!1}class cp{__type;__key;__parent;__prev;__next;__state;static getType(){let{ownNodeType:a}=e4(this);return void 0===a&&Y(64,this.name),a}static clone(a){Y(65,this.name)}$config(){return{}}config(a,b){let c=b.extends||Object.getPrototypeOf(this.constructor);return Object.assign(b,{extends:c,type:a}),{[a]:b}}afterCloneFrom(a){this.__key===a.__key?(this.__parent=a.__parent,this.__next=a.__next,this.__prev=a.__prev,this.__state=a.__state):a.__state&&(this.__state=a.__state.getWritable(this))}static importDOM;constructor(a){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),function(a,b){let c,d=(c=dZ,dZ=null,c);if(null!=(b=b||d&&d.__key))return a.__key=b;dq(),dr();let e=dt(),f=ds(),g=""+d$++;f._nodeMap.set(g,a),dI(a)?e._dirtyElements.set(g,!0):e._dirtyLeaves.add(g),e._cloneNotNeeded.add(g),e._dirtyType=1,a.__key=g}(this,a)}getType(){return this.__type}isInline(){Y(137,this.constructor.name)}isAttached(){let a=this.__key;for(;null!==a;){if("root"===a)return!0;let b=ei(a);if(null===b)break;a=b.__parent}return!1}isSelected(a){let b=a||db();if(null==b)return!1;let c=b.getNodes().some(a=>a.__key===this.__key);if(cM(this))return c;if(cW(b)&&"element"===b.anchor.type&&"element"===b.focus.type){if(b.isCollapsed())return!1;let a=this.getParent();if(dL(this)&&this.isInline()&&a){let c=b.isBackward()?b.focus:b.anchor;if(a.is(c.getNode())&&c.offset===a.getChildrenSize()&&this.is(a.getLastChild()))return!1}}return c}getKey(){return this.__key}getIndexWithinParent(){let a=this.getParent();if(null===a)return -1;let b=a.getFirstChild(),c=0;for(;null!==b;){if(this.is(b))return c;c++,b=b.getNextSibling()}return -1}getParent(){let a=this.getLatest().__parent;return null===a?null:ei(a)}getParentOrThrow(){let a=this.getParent();return null===a&&Y(66,this.__key),a}getTopLevelElement(){let a=this;for(;null!==a;){let b=a.getParent();if(eO(b))return dI(a)||a===this&&dL(a)||Y(194),a;a=b}return null}getTopLevelElementOrThrow(){let a=this.getTopLevelElement();return null===a&&Y(67,this.__key),a}getParents(){let a=[],b=this.getParent();for(;null!==b;)a.push(b),b=b.getParent();return a}getParentKeys(){let a=[],b=this.getParent();for(;null!==b;)a.push(b.__key),b=b.getParent();return a}getPreviousSibling(){let a=this.getLatest().__prev;return null===a?null:ei(a)}getPreviousSiblings(){let a=[],b=this.getParent();if(null===b)return a;let c=b.getFirstChild();for(;null!==c&&!c.is(this);)a.push(c),c=c.getNextSibling();return a}getNextSibling(){let a=this.getLatest().__next;return null===a?null:ei(a)}getNextSiblings(){let a=[],b=this.getNextSibling();for(;null!==b;)a.push(b),b=b.getNextSibling();return a}getCommonAncestor(a){let b=dI(this)?this:this.getParent(),c=dI(a)?a:a.getParent(),d=b&&c?fw(b,c):null;return d?d.commonAncestor:null}is(a){return null!=a&&this.__key===a.__key}isBefore(a){let b=fw(this,a);return null!==b&&("descendant"===b.type||("branch"===b.type?-1===fu(b):("same"!==b.type&&"ancestor"!==b.type&&Y(279),!1)))}isParentOf(a){let b=fw(this,a);return null!==b&&"ancestor"===b.type}getNodesBetween(a){let b=this.isBefore(a),c=[],d=new Set,e=this;for(;null!==e;){let f=e.__key;if(d.has(f)||(d.add(f),c.push(e)),e===a)break;let g=dI(e)?b?e.getFirstChild():e.getLastChild():null;if(null!==g){e=g;continue}let h=b?e.getNextSibling():e.getPreviousSibling();if(null!==h){e=h;continue}let i=e.getParentOrThrow();if(d.has(i.__key)||c.push(i),i===a)break;let j=null,k=i;do{if(null===k&&Y(68),j=b?k.getNextSibling():k.getPreviousSibling(),null===(k=k.getParent()))break;null!==j||d.has(k.__key)||c.push(k)}while(null===j)e=j}return b||c.reverse(),c}isDirty(){let a=dt()._dirtyLeaves;return null!==a&&a.has(this.__key)}getLatest(){if(co(this))return this;let a=ei(this.__key);return null===a&&Y(113),a}getWritable(){if(co(this))return this;dq();let a=ds(),b=dt(),c=a._nodeMap,d=this.__key,e=this.getLatest(),f=b._cloneNotNeeded,g=db();if(null!==g&&g.setCachedNodes(null),f.has(d))return ef(e),e;let h=e1(e);return f.add(d),ef(h),c.set(d,h),h}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(a,b){Y(70)}updateDOM(a,b,c){Y(71)}exportDOM(a){return{element:this.createDOM(a._config,a)}}exportJSON(){let a=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...a}}static importJSON(a){Y(18,this.name)}updateFromJSON(a){return function(a,b){let c,d,e=a.getWritable(),f=b.$,g=f;for(let a of aq(e).flatKeys)a in b&&(void 0!==g&&g!==f||(g={...f}),g[a]=b[a]);return(e.__state||g)&&(d=(c=a.getWritable()).__state?c.__state.getWritable(c):new ap(c,aq(c)),c.__state=d,d).updateFromJSON(g),e}(this,a)}static transform(){return null}remove(a){cm(this,!0,a)}replace(a,b){dq();let c=db();null!==c&&(c=c.clone()),eQ(this,a);let d=this.getLatest(),e=this.__key,f=a.__key,g=a.getWritable(),h=this.getParentOrThrow().getWritable(),i=h.__size;ee(g);let j=d.getPreviousSibling(),k=d.getNextSibling(),l=d.__prev,m=d.__next,n=d.__parent;if((cm(d,!1,!0),null===j)?h.__first=f:j.getWritable().__next=f,(g.__prev=l,null===k)?h.__last=f:k.getWritable().__prev=f,g.__next=m,g.__parent=n,h.__size=i,b&&(dI(this)&&dI(g)||Y(139),this.getChildren().forEach(a=>{g.append(a)})),cW(c)){eq(c);let a=c.anchor,b=c.focus;a.key===e&&cU(a,g),b.key===e&&cU(b,g)}return eh()===e&&eg(f),g}insertAfter(a,b=!0){dq(),eQ(this,a);let c=this.getWritable(),d=a.getWritable(),e=d.getParent(),f=db(),g=!1,h=!1;if(null!==e){let b=a.getIndexWithinParent();if(ee(d),cW(f)){let a=e.__key,c=f.anchor,d=f.focus;g="element"===c.type&&c.key===a&&c.offset===b+1,h="element"===d.type&&d.key===a&&d.offset===b+1}}let i=this.getNextSibling(),j=this.getParentOrThrow().getWritable(),k=d.__key,l=c.__next;if(null===i?j.__last=k:i.getWritable().__prev=k,j.__size++,c.__next=k,d.__next=l,d.__prev=c.__key,d.__parent=c.__parent,b&&cW(f)){let a=this.getIndexWithinParent();dd(f,j,a+1);let b=j.__key;g&&f.anchor.set(b,a+2,"element"),h&&f.focus.set(b,a+2,"element")}return a}insertBefore(a,b=!0){dq(),eQ(this,a);let c=this.getWritable(),d=a.getWritable(),e=d.__key;ee(d);let f=this.getPreviousSibling(),g=this.getParentOrThrow().getWritable(),h=c.__prev,i=this.getIndexWithinParent();null===f?g.__first=e:f.getWritable().__next=e,g.__size++,c.__prev=e,d.__prev=h,d.__next=c.__key,d.__parent=c.__parent;let j=db();return b&&cW(j)&&dd(j,this.getParentOrThrow(),i),a}isParentRequired(){return!1}createParentElementNode(){return dU()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(a,b){dq();let c=this.getPreviousSibling(),d=this.getParentOrThrow();if(null===c)return d.select(0,0);if(dI(c))return c.select();if(!cM(c)){let a=c.getIndexWithinParent()+1;return d.select(a,a)}return c.select(a,b)}selectNext(a,b){dq();let c=this.getNextSibling(),d=this.getParentOrThrow();if(null===c)return d.select();if(dI(c))return c.select(0,0);if(!cM(c)){let a=c.getIndexWithinParent();return d.select(a,a)}return c.select(a,b)}markDirty(){this.getWritable()}reconcileObservedMutation(a,b){this.markDirty()}}let cq="historic",cr="history-merge";class cs extends cp{static getType(){return"linebreak"}static clone(a){return new cs(a.__key)}constructor(a){super(a)}getTextContent(){return"\n"}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:a=>(function(a){let b=a.parentElement;if(null!==b&&eY(b)){let c=b.firstChild;if(c===a||c.nextSibling===a&&cw(c)){let c=b.lastChild;if(c===a||c.previousSibling===a&&cw(c))return!0}}return!1})(a)||function(a){let b=a.parentElement;if(null!==b&&eY(b)){let c=b.firstChild;if(c===a||c.nextSibling===a&&cw(c))return!1;let d=b.lastChild;if(d===a||d.previousSibling===a&&cw(d))return!0}return!1}(a)?null:{conversion:ct,priority:0}}}static importJSON(a){return cu().updateFromJSON(a)}}function ct(a){return{node:cu()}}function cu(){return eP(new cs)}function cv(a){return a instanceof cs}function cw(a){return d9(a)&&/^( |\t|\r?\n)+$/.test(a.textContent||"")}function cx(a,b){return 16&b?"code":128&b?"mark":32&b?"sub":64&b?"sup":null}function cy(a,b){return 1&b?"strong":2&b?"em":"span"}function cz(a,b,c,d,e){let f=d.classList,g=eC(e,"base");void 0!==g&&f.add(...g);let h=!1,i=8&b&&4&b;for(let a in void 0!==(g=eC(e,"underlineStrikethrough"))&&(8&c&&4&c?(h=!0,i||f.add(...g)):i&&f.remove(...g)),ab){let d=ab[a];if(void 0!==(g=eC(e,a)))if(c&d){if(h&&("underline"===a||"strikethrough"===a)){b&d&&f.remove(...g);continue}(0==(b&d)||i&&"underline"===a||"strikethrough"===a)&&f.add(...g)}else b&d&&f.remove(...g)}}function cA(a,b,c){let d=b.firstChild,e=c.isComposing(),f=a+(e?"​":"");if(null==d)b.textContent=f;else{let a=d.nodeValue;if(a!==f)if(e){let[b,c,e]=function(a,b){let c=a.length,d=b.length,e=0,f=0;for(;e<c&&e<d&&a[e]===b[e];)e++;for(;f+e<c&&f+e<d&&a[c-f-1]===b[d-f-1];)f++;return[e,c-e-f,b.slice(e,d-f)]}(a,f);0!==c&&d.deleteData(b,c),d.insertData(b,e)}else d.nodeValue=f}}function cB(a,b,c,d,e,f){cA(e,a,b);let g=f.theme.text;void 0!==g&&cz(0,0,d,a,g)}function cC(a,b){let c=document.createElement(b);return c.appendChild(a),c}class cD extends cp{__text;__format;__style;__mode;__detail;static getType(){return"text"}static clone(a){return new cD(a.__text,a.__key)}afterCloneFrom(a){super.afterCloneFrom(a),this.__text=a.__text,this.__format=a.__format,this.__style=a.__style,this.__mode=a.__mode,this.__detail=a.__detail}constructor(a="",b){super(b),this.__text=a,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){return ag[this.getLatest().__mode]}getStyle(){return this.getLatest().__style}isToken(){return 1===this.getLatest().__mode}isComposing(){return this.__key===eh()}isSegmented(){return 2===this.getLatest().__mode}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(a){let b=ab[a];return 0!=(this.getFormat()&b)}isSimpleText(){return"text"===this.__type&&0===this.__mode}getTextContent(){return this.getLatest().__text}getFormatFlags(a,b){return ec(this.getLatest().__format,a,b)}canHaveFormat(){return!0}isInline(){return!0}createDOM(a,b){let c=this.__format,d=cx(0,c),e=cy(0,c),f=null===d?e:d,g=document.createElement(f),h=g;this.hasFormat("code")&&g.setAttribute("spellcheck","false"),null!==d&&(h=document.createElement(e),g.appendChild(h)),cB(h,this,0,c,this.__text,a);let i=this.__style;return""!==i&&(g.style.cssText=i),g}updateDOM(a,b,c){let d=this.__text,e=a.__format,f=this.__format,g=cx(0,e),h=cx(0,f),i=cy(0,e),j=cy(0,f);if((null===g?i:g)!==(null===h?j:h))return!0;if(g===h&&i!==j){let a=b.firstChild;null==a&&Y(48);let e=document.createElement(j);return cB(e,this,0,f,d,c),b.replaceChild(e,a),!1}let k=b;null!==h&&null!==g&&null==(k=b.firstChild)&&Y(49),cA(d,k,this);let l=c.theme.text;void 0!==l&&e!==f&&cz(0,e,f,k,l);let m=a.__style,n=this.__style;return m!==n&&(b.style.cssText=n),!1}static importDOM(){return{"#text":()=>({conversion:cH,priority:0}),b:()=>({conversion:cF,priority:0}),code:()=>({conversion:cK,priority:0}),em:()=>({conversion:cK,priority:0}),i:()=>({conversion:cK,priority:0}),mark:()=>({conversion:cK,priority:0}),s:()=>({conversion:cK,priority:0}),span:()=>({conversion:cE,priority:0}),strong:()=>({conversion:cK,priority:0}),sub:()=>({conversion:cK,priority:0}),sup:()=>({conversion:cK,priority:0}),u:()=>({conversion:cK,priority:0})}}static importJSON(a){return cL().updateFromJSON(a)}updateFromJSON(a){return super.updateFromJSON(a).setTextContent(a.text).setFormat(a.format).setDetail(a.detail).setMode(a.mode).setStyle(a.style)}exportDOM(a){let{element:b}=super.exportDOM(a);return eU(b)||Y(132),b.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?b.style.textTransform="lowercase":this.hasFormat("uppercase")?b.style.textTransform="uppercase":this.hasFormat("capitalize")&&(b.style.textTransform="capitalize"),this.hasFormat("bold")&&(b=cC(b,"b")),this.hasFormat("italic")&&(b=cC(b,"i")),this.hasFormat("strikethrough")&&(b=cC(b,"s")),this.hasFormat("underline")&&(b=cC(b,"u")),{element:b}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(a,b){}setFormat(a){let b=this.getWritable();return b.__format="string"==typeof a?ab[a]:a,b}setDetail(a){let b=this.getWritable();return b.__detail="string"==typeof a?ac[a]:a,b}setStyle(a){let b=this.getWritable();return b.__style=a,b}toggleFormat(a){let b=ec(this.getFormat(),a,null);return this.setFormat(b)}toggleDirectionless(){let a=this.getWritable();return a.__detail^=1,a}toggleUnmergeable(){let a=this.getWritable();return a.__detail^=2,a}setMode(a){let b=af[a];if(this.__mode===b)return this;let c=this.getWritable();return c.__mode=b,c}setTextContent(a){if(this.__text===a)return this;let b=this.getWritable();return b.__text=a,b}select(a,b){dq();let c=a,d=b,e=db(),f=this.getTextContent(),g=this.__key;if("string"==typeof f){let a=f.length;void 0===c&&(c=a),void 0===d&&(d=a)}else c=0,d=0;if(!cW(e))return c7(g,c,g,d,"text","text");{let a=eh();a!==e.anchor.key&&a!==e.focus.key||eg(g),e.setTextNodeRange(this,c,this,d)}return e}selectStart(){return this.select(0,0)}selectEnd(){let a=this.getTextContentSize();return this.select(a,a)}spliceText(a,b,c,d){let e=this.getWritable(),f=e.__text,g=c.length,h=a;h<0&&(h=g+h)<0&&(h=0);let i=db();if(d&&cW(i)){let b=a+g;i.setTextNodeRange(e,b,e,b)}return e.__text=f.slice(0,h)+c+f.slice(h+b),e}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...a){let b;dq();let c=this.getLatest(),d=c.getTextContent();if(""===d)return[];let e=c.__key,f=eh(),g=d.length;a.sort((a,b)=>a-b),a.push(g);let h=[],i=a.length;for(let b=0,c=0;b<g&&c<=i;c++){let e=a[c];e>b&&(h.push(d.slice(b,e)),b=e)}let j=h.length;if(1===j)return[c];let k=h[0],l=c.getParent(),m=c.getFormat(),n=c.getStyle(),o=c.__detail,p=!1,q=null,r=null,s=db();if(cW(s)){let[a,b]=s.isBackward()?[s.focus,s.anchor]:[s.anchor,s.focus];"text"===a.type&&a.key===e&&(q=a),"text"===b.type&&b.key===e&&(r=b)}c.isSegmented()?((b=cL(k)).__format=m,b.__style=n,b.__detail=o,b.__state=au(c,b),p=!0):b=c.setTextContent(k);let t=[b];for(let a=1;a<j;a++){let b=cL(h[a]);b.__format=m,b.__style=n,b.__detail=o,b.__state=au(c,b);let d=b.__key;f===e&&eg(d),t.push(b)}let u=q?q.offset:null,v=r?r.offset:null,w=0;for(let a of t){if(!q&&!r)break;let b=w+a.getTextContentSize();if(null!==q&&null!==u&&u<=b&&u>=w&&(q.set(a.getKey(),u-w,"text"),u<b&&(q=null)),null!==r&&null!==v&&v<=b&&v>=w){r.set(a.getKey(),v-w,"text");break}w=b}if(null!==l){let a,b;a=this.getPreviousSibling(),b=this.getNextSibling(),null!==a&&ef(a),null!==b&&ef(b);let c=l.getWritable(),d=this.getIndexWithinParent();p?(c.splice(d,0,t),this.remove()):c.splice(d,1,t),cW(s)&&dd(s,l,d,j-1)}return t}mergeWithSibling(a){let b=a===this.getPreviousSibling();b||a===this.getNextSibling()||Y(50);let c=this.__key,d=a.__key,e=this.__text,f=e.length;eh()===d&&eg(c);let g=db();if(cW(g)){let e=g.anchor,h=g.focus;null!==e&&e.key===d&&dg(e,b,c,a,f),null!==h&&h.key===d&&dg(h,b,c,a,f)}let h=a.__text,i=b?h+e:e+h;this.setTextContent(i);let j=this.getWritable();return a.remove(),j}isTextEntity(){return!1}}function cE(a){return{forChild:cN(a.style),node:null}}function cF(a){let b="normal"===a.style.fontWeight;return{forChild:cN(a.style,b?void 0:"bold"),node:null}}let cG=new WeakMap;function cH(a){null===a.parentElement&&Y(129);let b=a.textContent||"";if(null!==function(a){let b,c=a.parentNode,d=[a];for(;null!==c&&void 0===(b=cG.get(c))&&!function(a){if(!eU(a))return!1;if("PRE"===a.nodeName)return!0;let b=a.style.whiteSpace;return"string"==typeof b&&b.startsWith("pre")}(c);)d.push(c),c=c.parentNode;let e=void 0===b?c:b;for(let a=0;a<d.length;a++)cG.set(d[a],e);return e}(a)){let a=b.split(/(\r?\n|\t)/),c=[],d=a.length;for(let b=0;b<d;b++){let d=a[b];"\n"===d||"\r\n"===d?c.push(cu()):"	"===d?c.push(cP()):""!==d&&c.push(cL(d))}return{node:c}}if(""===(b=b.replace(/\r/g,"").replace(/[ \t\n]+/g," ")))return{node:null};if(" "===b[0]){let c=a,d=!0;for(;null!==c&&null!==(c=cI(c,!1));){let a=c.textContent||"";if(a.length>0){/[ \t\n]$/.test(a)&&(b=b.slice(1)),d=!1;break}}d&&(b=b.slice(1))}if(" "===b[b.length-1]){let c=a,d=!0;for(;null!==c&&null!==(c=cI(c,!0));)if((c.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){d=!1;break}d&&(b=b.slice(0,b.length-1))}return""===b?{node:null}:{node:cL(b)}}function cI(a,b){let c=a;for(;;){let a;for(;null===(a=b?c.nextSibling:c.previousSibling);){let a=c.parentElement;if(null===a)return null;c=a}if(eU(c=a)){let a=c.style.display;if(""===a&&!eX(c)||""!==a&&!a.startsWith("inline"))return null}let d=c;for(;null!==(d=b?c.firstChild:c.lastChild);)c=d;if(d9(c))return c;if("BR"===c.nodeName)return null}}let cJ={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function cK(a){let b=cJ[a.nodeName.toLowerCase()];return void 0===b?{node:null}:{forChild:cN(a.style,b),node:null}}function cL(a=""){return eP(new cD(a))}function cM(a){return a instanceof cD}function cN(a,b){let c=a.fontWeight,d=a.textDecoration.split(" "),e="700"===c||"bold"===c,f=d.includes("line-through"),g="italic"===a.fontStyle,h=d.includes("underline"),i=a.verticalAlign;return a=>(cM(a)&&(e&&!a.hasFormat("bold")&&a.toggleFormat("bold"),f&&!a.hasFormat("strikethrough")&&a.toggleFormat("strikethrough"),g&&!a.hasFormat("italic")&&a.toggleFormat("italic"),h&&!a.hasFormat("underline")&&a.toggleFormat("underline"),"sub"!==i||a.hasFormat("subscript")||a.toggleFormat("subscript"),"super"!==i||a.hasFormat("superscript")||a.toggleFormat("superscript"),b&&!a.hasFormat(b)&&a.toggleFormat(b)),a)}class cO extends cD{static getType(){return"tab"}static clone(a){return new cO(a.__key)}constructor(a){super("	",a),this.__detail=2}static importDOM(){return null}createDOM(a){let b=super.createDOM(a),c=eC(a.theme,"tab");return void 0!==c&&b.classList.add(...c),b}static importJSON(a){return cP().updateFromJSON(a)}setTextContent(a){return"	"!==a&&""!==a&&Z(126),super.setTextContent("	")}spliceText(a,b,c,d){return""===c&&0===b||"	"===c&&1===b||Y(286),this}setDetail(a){return 2!==a&&Y(127),this}setMode(a){return"normal"!==a&&Y(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function cP(){return eP(new cO)}function cQ(a){return a instanceof cO}class cR{key;offset;type;_selection;constructor(a,b,c){this._selection=null,this.key=a,this.offset=b,this.type=c}is(a){return this.key===a.key&&this.offset===a.offset&&this.type===a.type}isBefore(a){return this.key===a.key?this.offset<a.offset:0>ft(fE(fx(this,"next")),fE(fx(a,"next")))}getNode(){let a=ei(this.key);return null===a&&Y(20),a}set(a,b,c,d){let e=this._selection,f=this.key;d&&this.key===a&&this.offset===b&&this.type===c||(this.key=a,this.offset=b,this.type=c,dp()||(eh()===f&&eg(a),null!==e&&(e.setCachedNodes(null),e.dirty=!0)))}}function cS(a,b,c){return new cR(a,b,c)}function cT(a,b){let c=b.__key,d=a.offset,e="element";if(cM(b)){e="text";let a=b.getTextContentSize();d>a&&(d=a)}else if(!dI(b)){let a=b.getNextSibling();if(cM(a))c=a.__key,d=0,e="text";else{let a=b.getParent();a&&(c=a.__key,d=b.getIndexWithinParent()+1)}}a.set(c,d,e)}function cU(a,b){if(dI(b)){let c=b.getLastDescendant();dI(c)||cM(c)?cT(a,c):cT(a,b)}else cT(a,b)}class cV{_nodes;_cachedNodes;dirty;constructor(a){this._cachedNodes=null,this._nodes=a,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(a){this._cachedNodes=a}is(a){if(!cY(a))return!1;let b=this._nodes,c=a._nodes;return b.size===c.size&&Array.from(b).every(a=>c.has(a))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(a){this.dirty=!0,this._nodes.add(a),this._cachedNodes=null}delete(a){this.dirty=!0,this._nodes.delete(a),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(a){return this._nodes.has(a)}clone(){return new cV(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(a){}insertText(){}insertNodes(a){let b,c=this.getNodes(),d=c.length,e=c[d-1];if(cM(e))b=e.select();else{let a=e.getIndexWithinParent()+1;b=e.getParentOrThrow().select(a,a)}b.insertNodes(a);for(let a=0;a<d;a++)c[a].remove()}getNodes(){let a=this._cachedNodes;if(null!==a)return a;let b=this._nodes,c=[];for(let a of b){let b=ei(a);null!==b&&c.push(b)}return dp()||(this._cachedNodes=c),c}getTextContent(){let a=this.getNodes(),b="";for(let c=0;c<a.length;c++)b+=a[c].getTextContent();return b}deleteNodes(){let a=this.getNodes();if((db()||dc())===this&&a[0]){var b;let c,d,e=fj(a[0],"next");b=fr(e,e),fz(d=cW(c=db())?c:c8(),b),eq(d)}for(let b of a)b.remove()}}function cW(a){return a instanceof cX}class cX{format;style;anchor;focus;_cachedNodes;dirty;constructor(a,b,c,d){this.anchor=a,this.focus=b,a._selection=this,b._selection=this,this._cachedNodes=null,this.format=c,this.style=d,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(a){this._cachedNodes=a}is(a){return!!cW(a)&&this.anchor.is(a.anchor)&&this.focus.is(a.focus)&&this.format===a.format&&this.style===a.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){let a=this._cachedNodes;if(null!==a)return a;let b=function(a){let b=[],[c,d]=a.getTextSlices();c&&b.push(c.caret.origin);let e=new Set,f=new Set;for(let c of a)if(ff(c)){let{origin:a}=c;0===b.length?e.add(a):(f.add(a),b.push(a))}else{let{origin:a}=c;dI(a)&&f.has(a)||b.push(a)}if(d&&b.push(d.caret.origin),fe(a.focus)&&dI(a.focus.origin)&&null===a.focus.getNodeAtCaret())for(let c=fm(a.focus.origin,"previous");ff(c)&&e.has(c.origin)&&!c.origin.isEmpty()&&c.origin.is(b[b.length-1]);c=fn(c))e.delete(c.origin),b.pop();for(;b.length>1;){let a=b[b.length-1];if(!dI(a)||f.has(a)||a.isEmpty()||e.has(a))break;b.pop()}if(0===b.length&&a.isCollapsed()){let c=fE(a.anchor),d=fE(a.anchor.getFlipped()),e=a=>fd(a)?a.origin:a.getNodeAtCaret(),f=e(c)||e(d)||(a.anchor.getNodeAtCaret()?c.origin:d.origin);b.push(f)}return b}(fH(fA(this),"next"));return dp()||(this._cachedNodes=b),b}setTextNodeRange(a,b,c,d){this.anchor.set(a.__key,b,"text"),this.focus.set(c.__key,d,"text")}getTextContent(){let a=this.getNodes();if(0===a.length)return"";let b=a[0],c=a[a.length-1],d=this.anchor,e=this.focus,f=d.isBefore(e),[g,h]=c$(this),i="",j=!0;for(let k=0;k<a.length;k++){let l=a[k];if(dI(l)&&!l.isInline())j||(i+="\n"),j=!l.isEmpty();else if(j=!1,cM(l)){let a=l.getTextContent();l===b?l===c?"element"===d.type&&"element"===e.type&&e.offset!==d.offset||(a=g<h?a.slice(g,h):a.slice(h,g)):a=f?a.slice(g):a.slice(h):l===c&&(a=f?a.slice(0,h):a.slice(0,g)),i+=a}else!dL(l)&&!cv(l)||l===c&&this.isCollapsed()||(i+=l.getTextContent())}return i}applyDOMRange(a){let b=dt(),c=b.getEditorState()._selection,d=c5(a.startContainer,a.startOffset,a.endContainer,a.endOffset,b,c);if(null===d)return;let[e,f]=d;this.anchor.set(e.key,e.offset,e.type,!0),this.focus.set(f.key,f.offset,f.type,!0),ay(this)}clone(){let a=this.anchor,b=this.focus;return new cX(cS(a.key,a.offset,a.type),cS(b.key,b.offset,b.type),this.format,this.style)}toggleFormat(a){this.format=ec(this.format,a,null),this.dirty=!0}setFormat(a){this.format=a,this.dirty=!0}setStyle(a){this.style=a,this.dirty=!0}hasFormat(a){let b=ab[a];return 0!=(this.format&b)}insertRawText(a){let b=a.split(/(\r?\n|\t)/),c=[],d=b.length;for(let a=0;a<d;a++){let d=b[a];"\n"===d||"\r\n"===d?c.push(cu()):"	"===d?c.push(cP()):c.push(cL(d))}this.insertNodes(c)}insertText(a){let b=this.anchor,c=this.focus,d=this.format,e=this.style,f=b,g=c;!this.isCollapsed()&&c.isBefore(b)&&(f=c,g=b),"element"===f.type&&function(a,b,c,d){let e=a.getNode(),f=e.getChildAtIndex(a.offset),g=cL();if(g.setFormat(c),g.setStyle(d),dV(f))f.splice(0,0,[g]);else{let a=dN(e)?dU().append(g):g;null===f?e.append(a):f.insertBefore(a)}a.is(b)&&b.set(g.__key,0,"text"),a.set(g.__key,0,"text")}(f,g,d,e),"element"===g.type&&fy(g,fE(fx(g,"next")));let h=f.offset,i=g.offset,j=this.getNodes(),k=j.length,l=j[0];cM(l)||Y(26);let m=l.getTextContent().length,n=l.getParentOrThrow(),o=j[k-1];if(1===k&&"element"===g.type&&(i=m,g.set(f.key,i,"text")),this.isCollapsed()&&h===m&&(d8(l)||!l.canInsertTextAfter()||!n.canInsertTextAfter()&&null===l.getNextSibling())){let b=l.getNextSibling();if(cM(b)&&b.canInsertTextBefore()&&!d8(b)||((b=cL()).setFormat(d),b.setStyle(e),n.canInsertTextAfter()?l.insertAfter(b):n.insertAfter(b)),b.select(0,0),l=b,""!==a)return void this.insertText(a)}else if(this.isCollapsed()&&0===h&&(d8(l)||!l.canInsertTextBefore()||!n.canInsertTextBefore()&&null===l.getPreviousSibling())){let b=l.getPreviousSibling();if(cM(b)&&!d8(b)||((b=cL()).setFormat(d),n.canInsertTextBefore()?l.insertBefore(b):n.insertBefore(b)),b.select(),l=b,""!==a)return void this.insertText(a)}else if(l.isSegmented()&&h!==m){let a=cL(l.getTextContent());a.setFormat(d),l.replace(a),l=a}else if(!this.isCollapsed()&&""!==a){let b=o.getParent();if(!n.canInsertTextBefore()||!n.canInsertTextAfter()||dI(b)&&(!b.canInsertTextBefore()||!b.canInsertTextAfter()))return this.insertText(""),c4(this.anchor,this.focus,null),void this.insertText(a)}if(1===k){if(d7(l)){let b=cL(a);return b.select(),void l.replace(b)}let b=l.getFormat(),c=l.getStyle();if(h!==i||b===d&&c===e){if(cQ(l)){let b=cL(a);return b.setFormat(d),b.setStyle(e),b.select(),void l.replace(b)}}else{if(""!==l.getTextContent()){let b=cL(a);if(b.setFormat(d),b.setStyle(e),b.select(),0===h)l.insertBefore(b,!1);else{let[a]=l.splitText(h);a.insertAfter(b,!1)}return void(b.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=a.length))}l.setFormat(d),l.setStyle(e)}let f=i-h;""===(l=l.spliceText(h,f,a,!0)).getTextContent()?l.remove():"text"===this.anchor.type&&(l.isComposing()?this.anchor.offset-=a.length:(this.format=b,this.style=c))}else{let b=new Set([...l.getParentKeys(),...o.getParentKeys()]),c=dI(l)?l:l.getParentOrThrow(),d=dI(o)?o:o.getParentOrThrow(),e=o;if(!c.is(d)&&d.isInline())do e=d,d=d.getParentOrThrow();while(d.isInline())if("text"===g.type&&(0!==i||""===o.getTextContent())||"element"===g.type&&o.getIndexWithinParent()<i)if(cM(o)&&!d7(o)&&i!==o.getTextContentSize()){if(o.isSegmented()){let a=cL(o.getTextContent());o.replace(a),o=a}dN(g.getNode())||"text"!==g.type||(o=o.spliceText(0,i,"")),b.add(o.__key)}else{let a=o.getParentOrThrow();a.canBeEmpty()||1!==a.getChildrenSize()?o.remove():a.remove()}else b.add(o.__key);let f=d.getChildren(),n=new Set(j),p=c.is(d),q=c.isInline()&&null===l.getNextSibling()?c:l;for(let a=f.length-1;a>=0;a--){let b=f[a];if(b.is(l)||dI(b)&&b.isParentOf(l))break;b.isAttached()&&(!n.has(b)||b.is(e)?p||q.insertAfter(b,!1):b.remove())}if(!p){let a=d,c=null;for(;null!==a;){let d=a.getChildren(),e=d.length;(0===e||d[e-1].is(c))&&(b.delete(a.__key),c=a),a=a.getParent()}}if(d7(l))if(h===m)l.select();else{let b=cL(a);b.select(),l.replace(b)}else""===(l=l.spliceText(h,m-h,a,!0)).getTextContent()?l.remove():l.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=a.length);for(let a=1;a<k;a++){let c=j[a],d=c.__key;b.has(d)||c.remove()}}}removeText(){let a=db()===this;fz(this,function(a,b="removeEmptySlices"){let c,d;if(a.isCollapsed())return a;let e="root",f="next",g=b,h=fH(a,f),i=fC(h.anchor,e),j=fC(h.focus.getFlipped(),e),k=new Set,l=[];for(let a of h.iterNodeCarets(e))if(ff(a))k.add(a.origin.getKey());else if(fe(a)){let{origin:b}=a;dI(b)&&!k.has(b.getKey())||l.push(b)}for(let a of l)a.remove();for(let a of h.getTextSlices()){if(!a)continue;let{origin:b}=a.caret,c=b.getTextContentSize(),d=fB(fj(b,f)),e=b.getMode();if(Math.abs(a.distance)===c&&"removeEmptySlices"===g||"token"===e&&0!==a.distance)d.remove();else if(0!==a.distance){g="removeEmptySlices";let b=a.removeTextSlice(),c=a.caret.origin;if("segmented"===e){let a=b.origin,c=cL(a.getTextContent()).setStyle(a.getStyle()).setFormat(a.getFormat());d.replaceOrInsert(c),b=fk(c,f,b.offset)}c.is(i[0].origin)&&(i[0]=b),c.is(j[0].origin)&&(j[0]=b.getFlipped())}}for(let a of i)if(fD(a)){c=fE(a);break}for(let a of j)if(fD(a)){d=fE(a);break}let m=function(a,b,c){let d;if(!a||!b)return null;let e=a.getParentAtCaret(),f=b.getParentAtCaret();if(!e||!f)return null;let g=e.getParents().reverse();g.push(e);let h=f.getParents().reverse();h.push(f);let i=Math.min(g.length,h.length);for(d=0;d<i&&g[d]===h[d];d++);let j=(a,b)=>{let c;for(let e=d;e<a.length;e++){let d=a[e];if(eO(d))return;!c&&b(d)&&(c=d)}return c},k=j(g,eZ),l=k&&j(h,a=>c.has(a.getKey())&&eZ(a));return k&&l?[k,l]:null}(c,d,k);if(m){let[a,b]=m;fm(a,"previous").splice(0,b.getChildren()),b.remove()}let n=[c,d,...i,...j].find(fD);if(n){var o;return fr(o=fG(fE(n),a.direction),o)}Y(269,JSON.stringify(i.map(a=>a.origin.__key)))}(fA(this))),a&&db()!==this&&eq(this)}formatText(a,b=null){if(this.isCollapsed())return this.toggleFormat(a),void eg(null);let c=this.getNodes(),d=[];for(let a of c)cM(a)&&d.push(a);let e=b=>{c.forEach(c=>{if(dI(c)){let d=c.getFormatFlags(a,b);c.setTextFormat(d)}})},f=d.length;if(0===f)return this.toggleFormat(a),eg(null),void e(b);let g=this.anchor,h=this.focus,i=this.isBackward(),j=i?h:g,k=i?g:h,l=0,m=d[0],n="element"===j.type?0:j.offset;if("text"===j.type&&n===m.getTextContentSize()&&(l=1,m=d[1],n=0),null==m)return;let o=m.getFormatFlags(a,b);e(o);let p=f-1,q=d[p],r="text"===k.type?k.offset:q.getTextContentSize();if(m.is(q)){if(n===r)return;if(d8(m)||0===n&&r===m.getTextContentSize())m.setFormat(o);else{let a=m.splitText(n,r),b=0===n?a[0]:a[1];b.setFormat(o),"text"===j.type&&j.set(b.__key,0,"text"),"text"===k.type&&k.set(b.__key,r-n,"text")}return void(this.format=o)}0===n||d8(m)||([,m]=m.splitText(n),n=0),m.setFormat(o);let s=q.getFormatFlags(a,o);r>0&&(r===q.getTextContentSize()||d8(q)||([q]=q.splitText(r)),q.setFormat(s));for(let b=l+1;b<p;b++){let c=d[b],e=c.getFormatFlags(a,s);c.setFormat(e)}"text"===j.type&&j.set(m.__key,n,"text"),"text"===k.type&&k.set(q.__key,r,"text"),this.format=o|s}insertNodes(a){var b;if(0===a.length)return;if(this.isCollapsed()||this.removeText(),"root"===this.anchor.key){this.insertParagraph();let b=db();return cW(b)||Y(134),b.insertNodes(a)}let c=(this.isBackward()?this.focus:this.anchor).getNode(),d=e5(c,eZ),e=a[a.length-1];if(dI(d)&&"__language"in d){if("__language"in a[0])this.insertText(a[0].getTextContent());else{let b=dh(this);d.splice(b,0,a),e.selectEnd()}return}if(!a.some(a=>(dI(a)||dL(a))&&!a.isInline())){dI(d)||Y(211,c.constructor.name,c.getType());let b=dh(this);return d.splice(b,0,a),void e.selectEnd()}let f=function(a){let b=dU(),c=null;for(let d=0;d<a.length;d++){let e=a[d],f=cv(e);if(f||dL(e)&&e.isInline()||dI(e)&&e.isInline()||cM(e)||e.isParentRequired()){if(null===c&&(c=e.createParentElementNode(),b.append(c),f))continue;null!==c&&c.append(e)}else b.append(e),c=null}return b}(a),g=f.getLastDescendant(),h=f.getChildren(),i=dI(d)&&d.isEmpty()?null:this.insertParagraph(),j=h[h.length-1],k=h[0];dI(b=k)&&eZ(b)&&!b.isEmpty()&&dI(d)&&(!d.isEmpty()||d.canMergeWhenEmpty())&&(dI(d)||Y(211,c.constructor.name,c.getType()),d.append(...k.getChildren()),k=h[1]),k&&(null===d&&Y(212,c.constructor.name,c.getType()),function(a,b){let c=b.getParentOrThrow().getLastChild(),d=b,e=[b];for(;d!==c;)d.getNextSibling()||Y(140),e.push(d=d.getNextSibling());let f=a;for(let a of e)f=f.insertAfter(a)}(d,k));let l=e5(g,eZ);i&&dI(l)&&(i.canMergeWhenEmpty()||eZ(j))&&(l.append(...i.getChildren()),i.remove()),dI(d)&&d.isEmpty()&&d.remove(),g.selectEnd();let m=dI(d)?d.getLastChild():null;cv(m)&&l!==d&&m.remove()}insertParagraph(){if("root"===this.anchor.key){let a=dU();return eo().splice(this.anchor.offset,0,[a]),a.select(),a}let a=dh(this),b=e5(this.anchor.getNode(),eZ);dI(b)||Y(213);let c=b.getChildAtIndex(a),d=c?[c,...c.getNextSiblings()]:[],e=b.insertNewAfter(this,!1);return e?(e.append(...d),e.selectStart(),e):null}insertLineBreak(a){let b=cu();if(this.insertNodes([b]),a){let a=b.getParentOrThrow(),c=b.getIndexWithinParent();a.select(c,c)}}extract(){let a=[...this.getNodes()],b=a.length,c=a[0],d=a[b-1],[e,f]=c$(this),g=this.isBackward(),[h,i]=g?[this.focus,this.anchor]:[this.anchor,this.focus],[j,k]=g?[f,e]:[e,f];if(0===b)return[];if(1===b){if(cM(c)&&!this.isCollapsed()){let a=c.splitText(j,k),b=0===j?a[0]:a[1];return b?(h.set(b.getKey(),0,"text"),i.set(b.getKey(),b.getTextContentSize(),"text"),[b]):[]}return[c]}if(cM(c)&&(j===c.getTextContentSize()?a.shift():0!==j&&([,c]=c.splitText(j),a[0]=c,h.set(c.getKey(),0,"text"))),cM(d)){let b=d.getTextContent().length;0===k?a.pop():k!==b&&([d]=d.splitText(k),a[a.length-1]=d,i.set(d.getKey(),d.getTextContentSize(),"text"))}return a}modify(a,b,c){var d;(function(a,b,c,d,e="decorators-and-blocks"){if("move"===b&&"character"===d&&!a.isCollapsed()){let[b,d]=c===a.isBackward()?[a.focus,a.anchor]:[a.anchor,a.focus];return d.set(b.key,b.offset,b.type),!0}let f=fx(a.focus,c?"previous":"next"),g="lineboundary"===d,h="move"===b,i=f,j="decorators-and-blocks"===e;if(!fF(i)){for(let a of i){j=!1;let{origin:b}=a;if(!dL(b)||b.isIsolated()||(i=a,!g||!b.isInline()))break}if(j)for(let a of fq(f).iterNodeCarets("extend"===b?"shadowRoot":"root")){if(ff(a))a.origin.isInline()||(i=a);else{if(dI(a.origin))continue;dL(a.origin)&&!a.origin.isInline()&&(i=a)}break}}if(i===f)return!1;if(h&&!g&&dL(i.origin)&&i.origin.isKeyboardSelectable()){let a=c9();return a.add(i.origin.getKey()),eq(a),!0}return i=fE(i),h&&fy(a.anchor,i),fy(a.focus,i),j||!g})(this,a,b,c)||(d=eN(dt()))}forwardDeletion(a,b,c){if(!c&&("element"===a.type&&dI(b)&&a.offset===b.getChildrenSize()||"text"===a.type&&a.offset===b.getTextContentSize())){let a=b.getParent(),c=b.getNextSibling()||(null===a?null:a.getNextSibling());if(dI(c)&&c.isShadowRoot())return!0}return!1}deleteCharacter(a){let b=this.isCollapsed();if(this.isCollapsed()){let b=this.anchor,c=b.getNode();if(this.forwardDeletion(b,c,a))return;let d=fq(fx(b,a?"previous":"next"));if(d.getTextSlices().every(a=>null===a||0===a.distance)){let a={type:"initial"};for(let b of d.iterNodeCarets("shadowRoot"))if(ff(b))if(b.origin.isInline());else{if(b.origin.isShadowRoot()){if("merge-block"===a.type)break;if(dI(d.anchor.origin)&&d.anchor.origin.isEmpty()){let a=fE(b);fz(this,fr(a,a)),d.anchor.origin.remove()}return}"merge-next-block"!==a.type&&"merge-block"!==a.type||(a={block:a.block,caret:b,type:"merge-block"})}else{if("merge-block"===a.type)break;if(fe(b)){if(dI(b.origin)){if(b.origin.isInline()){if(!b.origin.isParentOf(d.anchor.origin))break}else a={block:b.origin,type:"merge-next-block"};continue}if(dL(b.origin)){if(b.origin.isIsolated());else if("merge-next-block"===a.type&&(b.origin.isKeyboardSelectable()||!b.origin.isInline())&&dI(d.anchor.origin)&&d.anchor.origin.isEmpty()){d.anchor.origin.remove();let a=c9();a.add(b.origin.getKey()),eq(a)}else b.origin.remove();return}break}}if("merge-block"===a.type){let{caret:b,block:c}=a;return fz(this,fr(!b.origin.isEmpty()&&c.isEmpty()?fB(fj(c,b.direction)):d.anchor,b)),this.removeText()}}let e=this.focus;if(this.modify("extend",a,"character"),this.isCollapsed()){if(a&&0===b.offset&&c_(this,b.getNode()))return}else{let d="text"===e.type?e.getNode():null;if(c="text"===b.type?b.getNode():null,null!==d&&d.isSegmented()){let b=e.offset,f=d.getTextContentSize();if(d.is(c)||a&&b!==f||!a&&0!==b)return void c1(d,a,b)}else if(null!==c&&c.isSegmented()){let e=b.offset,f=c.getTextContentSize();if(c.is(d)||a&&0!==e||!a&&e!==f)return void c1(c,a,e)}!function(a,b){let c=a.anchor,d=a.focus,e=c.getNode();if(e===d.getNode()&&"text"===c.type&&"text"===d.type){var f;let a=c.offset,g=d.offset,h=a<g,i=h?a:g,j=h?g:a,k=j-1;i===k||es(f=e.getTextContent().slice(i,j))||c0(f)||(b?d.set(d.key,k,d.type):c.set(c.key,k,c.type))}}(this,a)}}if(this.removeText(),a&&!b&&this.isCollapsed()&&"element"===this.anchor.type&&0===this.anchor.offset){let a=this.anchor.getNode();a.isEmpty()&&dN(a.getParent())&&null===a.getPreviousSibling()&&c_(this,a)}}deleteLine(a){this.isCollapsed()&&this.modify("extend",a,"lineboundary"),this.isCollapsed()?this.deleteCharacter(a):this.removeText()}deleteWord(a){if(this.isCollapsed()){let b=this.anchor,c=b.getNode();if(this.forwardDeletion(b,c,a))return;this.modify("extend",a,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function cY(a){return a instanceof cV}function cZ(a){let b=a.offset;if("text"===a.type)return b;let c=a.getNode();return b===c.getChildrenSize()?c.getTextContent().length:0}function c$(a){let b=a.getStartEndPoints();if(null===b)return[0,0];let[c,d]=b;return"element"===c.type&&"element"===d.type&&c.key===d.key&&c.offset===d.offset?[0,0]:[cZ(c),cZ(d)]}function c_(a,b){for(let c=b;c;c=c.getParent()){if(dI(c)){if(c.collapseAtStart(a))return!0;if(eO(c))break}if(c.getPreviousSibling())break}return!1}let c0=(()=>{try{let a=RegExp("\\p{Emoji}","u"),b=a.test.bind(a);if(b("❤️")&&b("#️⃣")&&b("👍"))return b}catch(a){}return()=>!1})();function c1(a,b,c){let d=a.getTextContent().split(/(?=\s)/g),e=d.length,f=0,g=0;for(let a=0;a<e;a++){let h=a===e-1;if(g=f,f+=d[a].length,b&&f===c||f>c||h){d.splice(a,1),h&&(g=void 0);break}}let h=d.join("").trim();""===h?a.remove():(a.setTextContent(h),a.select(g,g))}function c2(a,b,c,d){let e,f=b;if(eU(a)){let g=!1,h=a.childNodes,i=h.length,j=d._blockCursorElement;f===i&&(g=!0,f=i-1);let k=h[f],l=!1;if(k===j)k=h[f+1],l=!0;else if(null!==j){let c=j.parentNode;a===c&&b>Array.prototype.indexOf.call(c.children,j)&&f--}if(cM(e=er(k)))f=fl(e,g?"next":"previous");else{let h=er(a);if(null===h)return null;if(dI(h)){let i,j=d.getElementByKey(h.getKey());null===j&&Y(214);let k=h.getDOMSlot(j);[h,f]=k.resolveChildIndex(h,j,a,b),dI(h)||Y(215),g&&f>=h.getChildrenSize()&&(f=Math.max(0,h.getChildrenSize()-1));let m=h.getChildAtIndex(f);if(dI(m)&&(i=m.getParent(),null===c||null===i||!i.canBeEmpty()||i!==c.getNode())){let a=g?m.getLastDescendant():m.getFirstDescendant();h=null===a||dI(m=a)?m:m.getParentOrThrow(),f=0}cM(m)?(e=m,h=null,f=fl(m,g?"next":"previous")):m!==h&&g&&!l&&(dI(h)||Y(216),f=Math.min(h.getChildrenSize(),f+1))}else{let c=h.getIndexWithinParent();f=0===b&&dL(h)&&er(a)===h?c:c+1,h=h.getParentOrThrow()}if(dI(h))return cS(h.__key,f,"element")}}else e=er(a);return cM(e)?cS(e.__key,fl(e,f,"clamp"),"text"):null}function c3(a,b,c){let d=a.offset,e=a.getNode();if(0===d){let d=e.getPreviousSibling(),f=e.getParent();if(b){if((c||!b)&&null===d&&dI(f)&&f.isInline()){let b=f.getPreviousSibling();cM(b)&&a.set(b.__key,b.getTextContent().length,"text")}}else dI(d)&&!c&&d.isInline()?a.set(d.__key,d.getChildrenSize(),"element"):cM(d)&&a.set(d.__key,d.getTextContent().length,"text")}else if(d===e.getTextContent().length){let d=e.getNextSibling(),f=e.getParent();if(b&&dI(d)&&d.isInline())a.set(d.__key,0,"element");else if((c||b)&&null===d&&dI(f)&&f.isInline()&&!f.canInsertTextAfter()){let b=f.getNextSibling();cM(b)&&a.set(b.__key,0,"text")}}}function c4(a,b,c){if("text"===a.type&&"text"===b.type){let d=a.isBefore(b),e=a.is(b);c3(a,d,e),c3(b,!d,e),e&&b.set(a.key,a.offset,a.type);let f=dt();if(f.isComposing()&&f._compositionKey!==a.key&&cW(c)){let d=c.anchor,e=c.focus;a.set(d.key,d.offset,d.type,!0),b.set(e.key,e.offset,e.type,!0)}}}function c5(a,b,c,d,e,f){if(null===a||null===c||!d3(e,a,c))return null;let g=c2(a,b,cW(f)?f.anchor:null,e);if(null===g)return null;let h=c2(c,d,cW(f)?f.focus:null,e);if(null===h)return null;if("element"===g.type&&"element"===h.type){let b=er(a),d=er(c);if(dL(b)&&dL(d))return null}return c4(g,h,f),[g,h]}function c6(a){return dI(a)&&!a.isInline()}function c7(a,b,c,d,e,f){let g=ds(),h=new cX(cS(a,b,e),cS(c,d,f),0,"");return h.dirty=!0,g._selection=h,h}function c8(){return new cX(cS("root",0,"element"),cS("root",0,"element"),0,"")}function c9(){return new cV(new Set)}function da(a,b,c,d){let e,f,g,h,i=c._window;if(null===i)return null;let j=d||i.event,k=j?j.type:void 0,l="selectionchange"===k,m=!ai&&(l||"beforeinput"===k||"compositionstart"===k||"compositionend"===k||"click"===k&&j&&3===j.detail||"drop"===k||void 0===k);if(cW(a)&&!m)return a.clone();if(null===b)return null;if(e=b.anchorNode,f=b.focusNode,g=b.anchorOffset,h=b.focusOffset,(l||void 0===k)&&cW(a)&&!d3(c,e,f))return a.clone();let n=c5(e,g,f,h,c,a);if(null===n)return null;let[o,p]=n;return new cX(o,p,cW(a)?a.format:0,cW(a)?a.style:"")}function db(){return ds()._selection}function dc(){return dt()._editorState._selection}function dd(a,b,c,d=1){let e=a.anchor,f=a.focus,g=e.getNode(),h=f.getNode();if(!b.is(g)&&!b.is(h))return;let i=b.__key;if(a.isCollapsed()){let b=e.offset;if(c<=b&&d>0||c<b&&d<0){let c=Math.max(0,b+d);e.set(i,c,"element"),f.set(i,c,"element"),de(a)}}else{let g=a.isBackward(),h=g?f:e,j=h.getNode(),k=g?e:f,l=k.getNode();if(b.is(j)){let a=h.offset;(c<=a&&d>0||c<a&&d<0)&&h.set(i,Math.max(0,a+d),"element")}if(b.is(l)){let a=k.offset;(c<=a&&d>0||c<a&&d<0)&&k.set(i,Math.max(0,a+d),"element")}}de(a)}function de(a){let b=a.anchor,c=b.offset,d=a.focus,e=d.offset,f=b.getNode(),g=d.getNode();if(a.isCollapsed()){if(!dI(f))return;let a=f.getChildrenSize(),e=c>=a,g=e?f.getChildAtIndex(a-1):f.getChildAtIndex(c);if(cM(g)){let a=0;e&&(a=g.getTextContentSize()),b.set(g.__key,a,"text"),d.set(g.__key,a,"text")}return}if(dI(f)){let a=f.getChildrenSize(),d=c>=a,e=d?f.getChildAtIndex(a-1):f.getChildAtIndex(c);if(cM(e)){let a=0;d&&(a=e.getTextContentSize()),b.set(e.__key,a,"text")}}if(dI(g)){let a=g.getChildrenSize(),b=e>=a,c=b?g.getChildAtIndex(a-1):g.getChildAtIndex(e);if(cM(c)){let a=0;b&&(a=c.getTextContentSize()),d.set(c.__key,a,"text")}}}function df(a,b,c,d,e){let f=null,g=0,h=null;null!==d?(f=d.__key,cM(d)?(g=d.getTextContentSize(),h="text"):dI(d)&&(g=d.getChildrenSize(),h="element")):null!==e&&(f=e.__key,cM(e)?h="text":dI(e)&&(h="element")),null!==f&&null!==h?a.set(f,g,h):(-1===(g=b.getIndexWithinParent())&&(g=c.getChildrenSize()),a.set(c.__key,g,"element"))}function dg(a,b,c,d,e){"text"===a.type?a.set(c,a.offset+(b?0:e),"text"):a.offset>d.getIndexWithinParent()&&a.set(a.key,a.offset-1,"element")}function dh(a){let b=a;a.isCollapsed()||b.removeText();let c=db();cW(c)&&(b=c),cW(b)||Y(161);let d=b.anchor,e=d.getNode(),f=d.offset;for(;!eZ(e);){let a=e;if([e,f]=function(a,b){let c=a.getParent();if(!c){let a=dU();return eo().append(a),a.select(),[eo(),0]}if(cM(a)){let d=a.splitText(b);if(0===d.length)return[c,a.getIndexWithinParent()];let e=+(0!==b);return[c,d[0].getIndexWithinParent()+e]}if(!dI(a)||0===b)return[c,a.getIndexWithinParent()];let d=a.getChildAtIndex(b);if(d){let c=new cX(cS(a.__key,b,"element"),cS(a.__key,b,"element"),0,""),e=a.insertNewAfter(c);e&&e.append(d,...d.getNextSiblings())}return[c,a.getIndexWithinParent()+1]}(e,f),a.is(e))break}return f}let di=null,dj=null,dk=!1,dl=!1,dm=0,dn={characterData:!0,childList:!0,subtree:!0};function dp(){return dk||null!==di&&di._readOnly}function dq(){dk&&Y(13)}function dr(){dm>99&&Y(14)}function ds(){return null===di&&Y(195,du()),di}function dt(){return null===dj&&Y(196,du()),dj}function du(){let a=new Set,b=dY.version,c=` Detected on the page: 0 compatible editor(s) with version ${b}`;return a.size&&(c+=` and incompatible editors with versions ${Array.from(a).join(", ")}`),c}function dv(a,b,c){let d=b.__type,e=d_(a,d),f=c.get(d);void 0===f&&(f=Array.from(e.transforms),c.set(d,f));let g=f.length;for(let a=0;a<g&&(f[a](b),b.isAttached());a++);}function dw(a,b){return void 0!==a&&a.__key!==b&&a.isAttached()}function dx(a,b){if(!b)return;let c=a._updateTags,d=b;for(let a of(Array.isArray(b)||(d=[b]),d))c.add(a)}function dy(a,b){let c=a.type,d=b.get(c);void 0===d&&Y(17,c);let e=d.klass;a.type!==e.getType()&&Y(18,e.name);let f=e.importJSON(a),g=a.children;if(dI(f)&&Array.isArray(g))for(let a=0;a<g.length;a++){let c=dy(g[a],b);f.append(c)}return f}function dz(a,b,c){let d=di,e=dk,f=dj;di=b,dk=!0,dj=a;try{return c()}finally{di=d,dk=e,dj=f}}function dA(a,b){var c;let d,e,f=a._pendingEditorState,g=a._rootElement,h=a._headless||null===g;if(null===f)return;let i=a._editorState,j=i._selection,k=f._selection,l=0!==a._dirtyType,m=di,n=dk,o=dj,p=a._updating,q=a._observer,r=null;if(a._pendingEditorState=null,a._editorState=f,!h&&l&&null!==q){dj=a,di=f,dk=!1,a._updating=!0;try{let b,c=a._dirtyType,d=a._dirtyElements,e=a._dirtyLeaves;q.disconnect(),aK="",aN="",aO=2===c,aB=a,aA=a._config,aC=a._nodes,aD=aB._listeners.mutation,aE=d,aF=e,aG=i._nodeMap,aH=f._nodeMap,aP=f._readOnly,aI=new Map(a._keyToDOMMap),aJ=b=new Map,function a(b,c){let d=aG.get(b),e=aH.get(b);void 0!==d&&void 0!==e||Y(61);let f=aO||aF.has(b)||aE.has(b),g=eI(aB,b);if(d===e&&!f){if(dI(d)){let a=g.__lexicalTextContent;void 0!==a&&(aK+=a,aN+=a)}else{let a=d.getTextContent();aN+=a,aK+=a}return g}if(d!==e&&f&&eD(aJ,aC,aD,e,"updated"),e.updateDOM(d,g,aA)){let a=aW(b,null);return null===c&&Y(62),c.replaceChild(a,g),aQ(b,null),a}if(dI(d)&&dI(e)){let b=e.__indent;(aO||b!==d.__indent)&&aT(g,b);let c=e.__format;if((aO||c!==d.__format)&&aU(g,c),f&&(function(b,c,d){aL=null,aM=null,function(b,c,d){let e=aK,f=b.__size,g=c.__size;aK="";let h=d.element;if(1===f&&1===g){let d=b.__first,e=c.__first;if(d===e)a(d,h);else{let a=a1(d),b=aW(e,null);try{h.replaceChild(b,a)}catch(c){if("object"==typeof c&&null!=c)throw Error(`${c.toString()} Parent: ${h.tagName}, new child: {tag: ${b.tagName} key: ${e}}, old child: {tag: ${a.tagName}, key: ${d}}.`);throw c}aQ(d,null)}let f=aH.get(e);cM(f)&&null===aL&&(aL=f.getFormat(),aM=f.getStyle())}else{let e=a$(b,aG),i=a$(c,aH);if(e.length!==f&&Y(227),i.length!==g&&Y(228),0===f)0!==g&&aX(i,c,0,g-1,d);else if(0===g){if(0!==f){let a=null==d.after&&null==d.before&&null==d.element.__lexicalLineBreak;aR(e,0,f-1,a?null:h),a&&(h.textContent="")}}else!function(b,c,d,e,f,g){let h=e-1,i=f-1,j,k,l=g.getFirstChild(),m=0,n=0;for(;m<=h&&n<=i;){let b=c[m],e=d[n];if(b===e)l=a0(a(e,g.element)),m++,n++;else{void 0===j&&(j=new Set(c)),void 0===k&&(k=new Set(d));let f=k.has(b),h=j.has(e);if(f)if(h){let b=eI(aB,e);b===l?l=a0(a(e,g.element)):(g.withBefore(l).insertChild(b),a(e,g.element)),m++,n++}else aW(e,g.withBefore(l)),n++;else l=a0(a1(b)),aQ(b,g.element),m++}let f=aH.get(e);null!==f&&cM(f)&&null===aL&&(aL=f.getFormat(),aM=f.getStyle())}let o=m>h,p=n>i;if(o&&!p){let a=d[i+1],c=void 0===a?null:aB.getElementByKey(a);aX(d,b,n,i,g.withBefore(c))}else p&&!o&&aR(c,m,h,g.element)}(c,e,i,f,g,d)}eH(c)&&(aK+="\n\n"),h.__lexicalTextContent=aK,aK=e+aK}(b,c,c.getDOMSlot(d)),null==aL||aL===c.__textFormat||aP||c.setTextFormat(aL),null==aM||aM===c.__textStyle||aP||c.setTextStyle(aM)}(d,e,g),dN(e)||e.isInline()||aZ(d,e,g)),eH(e)&&(aK+="\n\n",aN+="\n\n"),(aO||e.__dir!==d.__dir)&&(aV(g,e),dN(e)&&!aO))for(let a of e.getChildren())dI(a)&&aV(eI(aB,a.getKey()),a)}else{let a=e.getTextContent();if(dL(e)){let a=e.decorate(aB,aA);null!==a&&a_(b,a)}aK+=a,aN+=a}if(!aP&&dN(e)&&e.__cachedText!==aN){let a=e.getWritable();a.__cachedText=aN,e=a}return g}("root",null),aB=void 0,aC=void 0,aE=void 0,aF=void 0,aG=void 0,aH=void 0,aA=void 0,aI=void 0,aJ=void 0,r=b}catch(b){if(b instanceof Error&&a._onError(b),dl)throw b;return dW(a,null,g,f),ao(a),a._dirtyType=2,dl=!0,dA(a,i),void(dl=!1)}finally{q.observe(g,dn),a._updating=p,di=m,dk=n,dj=o}}f._readOnly||(f._readOnly=!0);let s=a._dirtyLeaves,t=a._dirtyElements,u=a._normalizedNodes,v=a._updateTags,w=a._deferred;l&&(a._dirtyType=0,a._cloneNotNeeded.clear(),a._dirtyLeaves=new Set,a._dirtyElements=new Map,a._normalizedNodes=new Set,a._updateTags=new Set),function(a,b){let c,d=a._decorators,e=a._pendingDecorators||d,f=b._nodeMap;for(c in e)f.has(c)||(e===d&&(e=em(a)),delete e[c])}(a,f);let x=(h||(c=eN(a)),null);if(a._editable&&null!==x&&(l||null===k||k.dirty||!k.is(j))&&null!==g&&!v.has("skip-dom-selection")){dj=a,di=f;try{if(null!==q&&q.disconnect(),l||null===k||k.dirty){let b=a._blockCursorElement;null!==b&&eS(b,a,g),function(a,b,c,d,e,f,g){let h=d.anchorNode,i=d.focusNode,j=d.anchorOffset,k=d.focusOffset,l=document.activeElement;if(e.has("collaboration")&&l!==f||null!==l&&d2(l))return;if(!cW(b))return null!==a&&d3(c,h,i)&&d.removeAllRanges();let m=b.anchor,n=b.focus,o=m.key,p=n.key,q=eI(c,o),r=eI(c,p),s=m.offset,t=n.offset,u=b.format,v=b.style,w=b.isCollapsed(),x=q,y=r,z=!1;if("text"===m.type){x=eb(q);let a=m.getNode();z=a.getFormat()!==u||a.getStyle()!==v}else cW(a)&&"text"===a.anchor.type&&(z=!0);if("text"===n.type&&(y=eb(r)),null!==x&&null!==y&&(w&&(null===a||z||cW(a)&&(a.format!==u||a.style!==v))&&(b3=[u,v,s,o,performance.now()]),j!==s||k!==t||h!==x||i!==y||"Range"===d.type&&w||(null!==l&&f.contains(l)||e.has("skip-selection-focus")||f.focus({preventScroll:!0}),"element"===m.type))){if(function(a,b,c,d,e){try{a.setBaseAndExtent(b,c,d,e)}catch(a){}}(d,x,s,y,t),!e.has("skip-scroll-into-view")&&b.isCollapsed()&&null!==f&&f===document.activeElement){let a=cW(b)&&"element"===b.anchor.type?x.childNodes[s]||null:d.rangeCount>0?d.getRangeAt(0):null;if(null!==a){let b;if(a instanceof Text){let c=document.createRange();c.selectNode(a),b=c.getBoundingClientRect()}else b=a.getBoundingClientRect();!function(a,b,c){let d=eK(c),e=eM(d);if(null===d||null===e)return;let{top:f,bottom:g}=b,h=0,i=0,j=c;for(;null!==j;){let b=j===d.body;if(b)h=0,i=eN(a).innerHeight;else{let a=j.getBoundingClientRect();h=a.top,i=a.bottom}let c=0;if(f<h?c=-(h-f):g>i&&(c=g-i),0!==c)if(b)e.scrollBy(0,c);else{let a=j.scrollTop;j.scrollTop+=c;let b=j.scrollTop-a;f-=b,g-=b}if(b)break;j=eJ(j)}}(c,b,f)}}bY=!0}}(j,k,a,x,v,g)}!function(a,b,c){let d=a._blockCursorElement;if(cW(c)&&c.isCollapsed()&&"element"===c.anchor.type&&b.contains(document.activeElement)){let e=c.anchor,f=e.getNode(),g=e.offset,h=!1,i=null;if(g===f.getChildrenSize())eR(f.getChildAtIndex(g-1))&&(h=!0);else{let b=f.getChildAtIndex(g);if(null!==b&&eR(b)){let c=b.getPreviousSibling();(null===c||eR(c))&&(h=!0,i=a.getElementByKey(b.__key))}}if(h){let c,e,g,h=a.getElementByKey(f.__key);return null===d&&(c=a._config.theme,(e=document.createElement("div")).contentEditable="false",e.setAttribute("data-lexical-cursor","true"),g=c.blockCursor,void 0!==g&&("string"==typeof g&&(g=c.blockCursor=$(g)),void 0!==g&&e.classList.add(...g)),a._blockCursorElement=d=e),b.style.caretColor="transparent",null===i?h.appendChild(d):h.insertBefore(d,i)}}null!==d&&eS(d,a,b)}(a,g,k)}finally{null!==q&&q.observe(g,dn),dj=o,di=m}}null!==r&&function(a,b,c,d,e){let f=Array.from(a._listeners.mutation),g=f.length;for(let a=0;a<g;a++){let[g,h]=f[a];for(let a of h){let f=b.get(a);void 0!==f&&g(f,{dirtyLeaves:d,prevEditorState:e,updateTags:c})}}}(a,r,v,s,i),cW(k)||null===k||null!==j&&j.is(k)||a.dispatchCommand(a3,void 0);let y=a._pendingDecorators;null!==y&&(a._decorators=y,a._pendingDecorators=null,dB("decorator",a,!0,y)),d=en(b||i),d!==(e=en(f))&&dB("textcontent",a,!0,e),dB("update",a,!0,{dirtyElements:t,dirtyLeaves:s,editorState:f,mutatedNodes:r,normalizedNodes:u,prevEditorState:b||i,tags:v}),function(a,b){if(a._deferred=[],0!==b.length){let c=a._updating;a._updating=!0;try{for(let a=0;a<b.length;a++)b[a]()}finally{a._updating=c}}}(a,w),function(a){let b=a._updates;if(0!==b.length){let c=b.shift();if(c){let[b,d]=c;dD(a,b,d)}}}(a)}function dB(a,b,c,...d){let e=b._updating;b._updating=c;try{let c=Array.from(b._listeners[a]);for(let a=0;a<c.length;a++)c[a].apply(null,d)}finally{b._updating=e}}function dC(a,b){let c=a._updates,d=b||!1;for(;0!==c.length;){let b=c.shift();if(b){let c,[e,f]=b,g=a._pendingEditorState;void 0!==f&&(c=f.onUpdate,f.skipTransforms&&(d=!0),f.discrete&&(null===g&&Y(191),g._flushSync=!0),c&&a._deferred.push(c),dx(a,f.tag)),null==g?dD(a,e,f):e()}}return d}function dD(a,b,c){let d=a._updateTags,e,f=!1,g=!1;void 0!==c&&(e=c.onUpdate,dx(a,c.tag),f=c.skipTransforms||!1,g=c.discrete||!1),e&&a._deferred.push(e);let h=a._editorState,i=a._pendingEditorState,j=!1;(null===i||i._readOnly)&&(i=a._pendingEditorState=dO(i||h),j=!0),i._flushSync=g;let k=di,l=dk,m=dj,n=a._updating;di=i,dk=!1,a._updating=!0,dj=a;let o=a._headless||null===a.getRootElement();dZ=null;try{var p,q;let d,e;j&&(o?null!==h._selection&&(i._selection=h._selection.clone()):i._selection=(p=c&&c.event||null,d=a.getEditorState()._selection,q=eN(a),e=null,cW(d)||null==d?da(d,e,a,p):d.clone()));let g=a._compositionKey;b(),f=dC(a,f),function(a,b){let c=b.getEditorState()._selection,d=a._selection;if(cW(d)){let a,b=d.anchor,e=d.focus;if("text"===b.type&&(a=b.getNode()).selectionTransform(c,d),"text"===e.type){let b=e.getNode();a!==b&&b.selectionTransform(c,d)}}}(i,a),0!==a._dirtyType&&(f?function(a,b){let c=b._dirtyLeaves,d=a._nodeMap;for(let a of c){let b=d.get(a);cM(b)&&b.isAttached()&&b.isSimpleText()&&!b.isUnmergeable()&&ax(b)}}(i,a):function(a,b){let c=b._dirtyLeaves,d=b._dirtyElements,e=a._nodeMap,f=eh(),g=new Map,h=c,i=h.size,j=d,k=j.size;for(;i>0||k>0;){if(i>0){for(let a of(b._dirtyLeaves=new Set,h)){let d=e.get(a);cM(d)&&d.isAttached()&&d.isSimpleText()&&!d.isUnmergeable()&&ax(d),void 0!==d&&dw(d,f)&&dv(b,d,g),c.add(a)}if((i=(h=b._dirtyLeaves).size)>0){dm++;continue}}for(let a of(b._dirtyLeaves=new Set,b._dirtyElements=new Map,j.delete("root")&&j.set("root",!0),j)){let c=a[0],h=a[1];if(d.set(c,h),!h)continue;let i=e.get(c);void 0!==i&&dw(i,f)&&dv(b,i,g)}i=(h=b._dirtyLeaves).size,k=(j=b._dirtyElements).size,dm++}b._dirtyLeaves=c,b._dirtyElements=d}(i,a),dC(a),function(a,b,c,d){let e=a._nodeMap,f=b._nodeMap,g=[];for(let[a]of d){let b=f.get(a);void 0!==b&&(b.isAttached()||(dI(b)&&function a(b,c,d,e,f,g){let h=b.getFirstChild();for(;null!==h;){let b=h.__key;h.__parent===c&&(dI(h)&&a(h,b,d,e,f,g),d.has(b)||g.delete(b),f.push(b)),h=h.getNextSibling()}}(b,a,e,f,g,d),e.has(a)||d.delete(a),g.push(a)))}for(let a of g)f.delete(a);for(let a of c){let b=f.get(a);void 0===b||b.isAttached()||(e.has(a)||c.delete(a),f.delete(a))}}(h,i,a._dirtyLeaves,a._dirtyElements)),g!==a._compositionKey&&(i._flushSync=!0);let k=i._selection;if(cW(k)){let a=i._nodeMap,b=k.anchor.key,c=k.focus.key;void 0!==a.get(b)&&void 0!==a.get(c)||Y(19)}else cY(k)&&0===k._nodes.size&&(i._selection=null)}catch(b){return b instanceof Error&&a._onError(b),a._pendingEditorState=h,a._dirtyType=2,a._cloneNotNeeded.clear(),a._dirtyLeaves=new Set,a._dirtyElements.clear(),void dA(a)}finally{di=k,dk=l,dj=m,a._updating=n,dm=0}0!==a._dirtyType||a._deferred.length>0||function(a,b){let c=b.getEditorState()._selection,d=a._selection;if(null!==d){if(d.dirty||!d.is(c))return!0}else if(null!==c)return!0;return!1}(i,a)?i._flushSync?(i._flushSync=!1,dA(a)):j&&d1(()=>{dA(a)}):(i._flushSync=!1,j&&(d.clear(),a._deferred=[],a._pendingEditorState=null))}function dE(a,b,c){dj===a&&void 0===c?b():dD(a,b,c)}class dF{element;before;after;constructor(a,b,c){this.element=a,this.before=b||null,this.after=c||null}withBefore(a){return new dF(this.element,a,this.after)}withAfter(a){return new dF(this.element,this.before,a)}withElement(a){return this.element===a?this:new dF(a,this.before,this.after)}insertChild(a){let b=this.before||this.getManagedLineBreak();return null!==b&&b.parentElement!==this.element&&Y(222),this.element.insertBefore(a,b),this}removeChild(a){return a.parentElement!==this.element&&Y(223),this.element.removeChild(a),this}replaceChild(a,b){return b.parentElement!==this.element&&Y(224),this.element.replaceChild(a,b),this}getFirstChild(){let a=this.after?this.after.nextSibling:this.element.firstChild;return a===this.before||a===this.getManagedLineBreak()?null:a}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(a){null===a?this.removeManagedLineBreak():this.insertManagedLineBreak("decorator"===a&&!1)}removeManagedLineBreak(){let a=this.getManagedLineBreak();if(a){let b=this.element,c="IMG"===a.nodeName?a.nextSibling:null;c&&b.removeChild(c),b.removeChild(a),b.__lexicalLineBreak=void 0}}insertManagedLineBreak(a){let b=this.getManagedLineBreak();if(b){if(a===("IMG"===b.nodeName))return;this.removeManagedLineBreak()}let c=this.element,d=this.before,e=document.createElement("br");if(c.insertBefore(e,d),a){let a=document.createElement("img");a.setAttribute("data-lexical-linebreak","true"),a.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",a.alt="",c.insertBefore(a,e),c.__lexicalLineBreak=a}else c.__lexicalLineBreak=e}getFirstChildOffset(){let a=0;for(let b=this.after;null!==b;b=b.previousSibling)a++;return a}resolveChildIndex(a,b,c,d){if(c===this.element){let b=this.getFirstChildOffset();return[a,Math.min(b+a.getChildrenSize(),Math.max(b,d))]}let e=dG(b,c);e.push(d);let f=dG(b,this.element),g=a.getIndexWithinParent();for(let a=0;a<f.length;a++){let b=e[a],c=f[a];if(void 0===b||b<c)break;if(b>c){g+=1;break}}return[a.getParentOrThrow(),g]}}function dG(a,b){let c=[],d=b;for(;d!==a&&null!==d;d=d.parentNode){let a=0;for(let b=d.previousSibling;null!==b;b=b.previousSibling)a++;c.push(a)}return d!==a&&Y(225),c.reverse()}class dH extends cp{__first;__last;__size;__format;__style;__indent;__dir;__textFormat;__textStyle;constructor(a){super(a),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(a){super.afterCloneFrom(a),this.__key===a.__key&&(this.__first=a.__first,this.__last=a.__last,this.__size=a.__size),this.__indent=a.__indent,this.__format=a.__format,this.__style=a.__style,this.__dir=a.__dir,this.__textFormat=a.__textFormat,this.__textStyle=a.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){return ae[this.getFormat()]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){let a=[],b=this.getFirstChild();for(;null!==b;)a.push(b),b=b.getNextSibling();return a}getChildrenKeys(){let a=[],b=this.getFirstChild();for(;null!==b;)a.push(b.__key),b=b.getNextSibling();return a}getChildrenSize(){return this.getLatest().__size}isEmpty(){return 0===this.getChildrenSize()}isDirty(){let a=dt()._dirtyElements;return null!==a&&a.has(this.__key)}isLastChild(){let a=this.getLatest(),b=this.getParentOrThrow().getLastChild();return null!==b&&b.is(a)}getAllTextNodes(){let a=[],b=this.getFirstChild();for(;null!==b;){if(cM(b)&&a.push(b),dI(b)){let c=b.getAllTextNodes();a.push(...c)}b=b.getNextSibling()}return a}getFirstDescendant(){let a=this.getFirstChild();for(;dI(a);){let b=a.getFirstChild();if(null===b)break;a=b}return a}getLastDescendant(){let a=this.getLastChild();for(;dI(a);){let b=a.getLastChild();if(null===b)break;a=b}return a}getDescendantByIndex(a){let b=this.getChildren(),c=b.length;if(a>=c){let a=b[c-1];return dI(a)&&a.getLastDescendant()||a||null}let d=b[a];return dI(d)&&d.getFirstDescendant()||d||null}getFirstChild(){let a=this.getLatest().__first;return null===a?null:ei(a)}getFirstChildOrThrow(){let a=this.getFirstChild();return null===a&&Y(45,this.__key),a}getLastChild(){let a=this.getLatest().__last;return null===a?null:ei(a)}getLastChildOrThrow(){let a=this.getLastChild();return null===a&&Y(96,this.__key),a}getChildAtIndex(a){let b,c,d=this.getChildrenSize();if(a<d/2){for(b=this.getFirstChild(),c=0;null!==b&&c<=a;){if(c===a)return b;b=b.getNextSibling(),c++}return null}for(b=this.getLastChild(),c=d-1;null!==b&&c>=a;){if(c===a)return b;b=b.getPreviousSibling(),c--}return null}getTextContent(){let a="",b=this.getChildren(),c=b.length;for(let d=0;d<c;d++){let e=b[d];a+=e.getTextContent(),dI(e)&&d!==c-1&&!e.isInline()&&(a+="\n\n")}return a}getTextContentSize(){let a=0,b=this.getChildren(),c=b.length;for(let d=0;d<c;d++){let e=b[d];a+=e.getTextContentSize(),dI(e)&&d!==c-1&&!e.isInline()&&(a+=2)}return a}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(a){if(""!==a){let b=ad[a];return 0!=(this.getFormat()&b)}return!1}hasTextFormat(a){let b=ab[a];return 0!=(this.getTextFormat()&b)}getFormatFlags(a,b){return ec(this.getLatest().__textFormat,a,b)}getTextStyle(){return this.getLatest().__textStyle}select(a,b){dq();let c=db(),d=a,e=b,f=this.getChildrenSize();if(!this.canBeEmpty()){if(0===a&&0===b){let a=this.getFirstChild();if(cM(a)||dI(a))return a.select(0,0)}else if((void 0===a||a===f)&&(void 0===b||b===f)){let a=this.getLastChild();if(cM(a)||dI(a))return a.select()}}void 0===d&&(d=f),void 0===e&&(e=f);let g=this.__key;return cW(c)?(c.anchor.set(g,d,"element"),c.focus.set(g,e,"element"),c.dirty=!0,c):c7(g,d,g,e,"element","element")}selectStart(){let a=this.getFirstDescendant();return a?a.selectStart():this.select()}selectEnd(){let a=this.getLastDescendant();return a?a.selectEnd():this.select()}clear(){let a=this.getWritable();return this.getChildren().forEach(a=>a.remove()),a}append(...a){return this.splice(this.getChildrenSize(),0,a)}setDirection(a){let b=this.getWritable();return b.__dir=a,b}setFormat(a){return this.getWritable().__format=""!==a?ad[a]:0,this}setStyle(a){return this.getWritable().__style=a||"",this}setTextFormat(a){let b=this.getWritable();return b.__textFormat=a,b}setTextStyle(a){let b=this.getWritable();return b.__textStyle=a,b}setIndent(a){return this.getWritable().__indent=a,this}splice(a,b,c){co(this)&&Y(324,this.__key,this.__type);let d=this.getChildrenSize(),e=this.getWritable();a+b<=d||Y(226,String(a),String(b),String(d));let f=e.__key,g=[],h=[],i=this.getChildAtIndex(a+b),j=null,k=d-b+c.length;if(0!==a)if(a===d)j=this.getLastChild();else{let b=this.getChildAtIndex(a);null!==b&&(j=b.getPreviousSibling())}if(b>0){let a=null===j?this.getFirstChild():j.getNextSibling();for(let c=0;c<b;c++){null===a&&Y(100);let b=a.getNextSibling(),c=a.__key;ee(a.getWritable()),h.push(c),a=b}}let l=j;for(let a of c){null!==l&&a.is(l)&&(j=l=l.getPreviousSibling());let b=a.getWritable();b.__parent===f&&k--,ee(b);let c=a.__key;if(null===l)e.__first=c,b.__prev=null;else{let a=l.getWritable();a.__next=c,b.__prev=a.__key}a.__key===f&&Y(76),b.__parent=f,g.push(c),l=a}if(a+b===d)null!==l&&(l.getWritable().__next=null,e.__last=l.__key);else if(null!==i){let a=i.getWritable();if(null!==l){let b=l.getWritable();a.__prev=l.__key,b.__next=i.__key}else a.__prev=null}if(e.__size=k,h.length){let a=db();if(cW(a)){let b=new Set(h),c=new Set(g),{anchor:d,focus:e}=a;dJ(d,b,c)&&df(d,d.getNode(),this,j,i),dJ(e,b,c)&&df(e,e.getNode(),this,j,i),0!==k||this.canBeEmpty()||eO(this)||this.remove()}}return e}getDOMSlot(a){return new dF(a)}exportDOM(a){let{element:b}=super.exportDOM(a);if(eU(b)){let a=this.getIndent();a>0&&(b.style.paddingInlineStart=40*a+"px");let c=this.getDirection();c&&(b.dir=c)}return{element:b}}exportJSON(){let a={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},b=this.getTextFormat(),c=this.getTextStyle();return 0===b&&""===c||eO(this)||this.getChildren().some(cM)||(0!==b&&(a.textFormat=b),""!==c&&(a.textStyle=c)),a}updateFromJSON(a){return super.updateFromJSON(a).setFormat(a.format).setIndent(a.indent).setDirection(a.direction).setTextFormat(a.textFormat||0).setTextStyle(a.textStyle||"")}insertNewAfter(a,b){return null}canIndent(){return!0}collapseAtStart(a){return!1}excludeFromCopy(a){return!1}canReplaceWith(a){return!0}canInsertAfter(a){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(a){return!1}extractWithChild(a,b,c){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(a,b){let c=this.getDOMSlot(a),d=c.getFirstChild();for(let a=this.getFirstChild();a;a=a.getNextSibling()){let e=b.getElementByKey(a.getKey());null!==e&&(null==d?(c.insertChild(e),d=e):d!==e&&c.replaceChild(e,d),d=d.nextSibling)}}}function dI(a){return a instanceof dH}function dJ(a,b,c){let d=a.getNode();for(;d;){let a=d.__key;if(b.has(a)&&!c.has(a))return!0;d=d.getParent()}return!1}class dK extends cp{decorate(a,b){return null}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function dL(a){return a instanceof dK}class dM extends dH{__cachedText;static getType(){return"root"}static clone(){return new dM}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){Y(51)}getTextContent(){let a=this.__cachedText;return(dp()||0===dt()._dirtyType)&&null!==a?a:super.getTextContent()}remove(){Y(52)}replace(a){Y(53)}insertBefore(a){Y(54)}insertAfter(a){Y(55)}updateDOM(a,b){return!1}splice(a,b,c){for(let a of c)dI(a)||dL(a)||Y(282);return super.splice(a,b,c)}static importJSON(a){return eo().updateFromJSON(a)}collapseAtStart(){return!0}}function dN(a){return a instanceof dM}function dO(a){return new dQ(new Map(a._nodeMap))}function dP(){return new dQ(new Map([["root",new dM]]))}class dQ{_nodeMap;_selection;_flushSync;_readOnly;constructor(a,b){this._nodeMap=a,this._selection=b||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return 1===this._nodeMap.size&&null===this._selection}read(a,b){return dz(b&&b.editor||null,this,a)}clone(a){let b=new dQ(this._nodeMap,void 0===a?this._selection:a);return b._readOnly=!0,b}toJSON(){return dz(null,this,()=>({root:function a(b){let c=b.exportJSON(),d=b.constructor;if(c.type!==d.getType()&&Y(130,d.name),dI(b)){let e=c.children;Array.isArray(e)||Y(59,d.name);let f=b.getChildren();for(let b=0;b<f.length;b++){let c=a(f[b]);e.push(c)}}return c}(eo())}))}}class dR extends dH{static getType(){return"artificial"}createDOM(a){return document.createElement("div")}}class dS extends dH{static getType(){return"paragraph"}static clone(a){return new dS(a.__key)}createDOM(a){let b=document.createElement("p"),c=eC(a.theme,"paragraph");return void 0!==c&&b.classList.add(...c),b}updateDOM(a,b,c){return!1}static importDOM(){return{p:a=>({conversion:dT,priority:0})}}exportDOM(a){let{element:b}=super.exportDOM(a);if(eU(b)){this.isEmpty()&&b.append(document.createElement("br"));let a=this.getFormatType();a&&(b.style.textAlign=a)}return{element:b}}static importJSON(a){return dU().updateFromJSON(a)}exportJSON(){let a=super.exportJSON();if(void 0===a.textFormat||void 0===a.textStyle){let b=this.getChildren().find(cM);b?(a.textFormat=b.getFormat(),a.textStyle=b.getStyle()):(a.textFormat=this.getTextFormat(),a.textStyle=this.getTextStyle())}return a}insertNewAfter(a,b){let c=dU();c.setTextFormat(a.format),c.setTextStyle(a.style);let d=this.getDirection();return c.setDirection(d),c.setFormat(this.getFormatType()),c.setStyle(this.getStyle()),this.insertAfter(c,b),c}collapseAtStart(){let a=this.getChildren();if(0===a.length||cM(a[0])&&""===a[0].getTextContent().trim()){if(null!==this.getNextSibling())return this.selectNext(),this.remove(),!0;if(null!==this.getPreviousSibling())return this.selectPrevious(),this.remove(),!0}return!1}}function dT(a){let b=dU();return a.style&&(b.setFormat(a.style.textAlign),e2(a,b)),{node:b}}function dU(){return eP(new dS)}function dV(a){return a instanceof dS}function dW(a,b,c,d){let e=a._keyToDOMMap;e.clear(),a._editorState=dP(),a._pendingEditorState=d,a._compositionKey=null,a._dirtyType=0,a._cloneNotNeeded.clear(),a._dirtyLeaves=new Set,a._dirtyElements.clear(),a._normalizedNodes=new Set,a._updateTags=new Set,a._updates=[],a._blockCursorElement=null;let f=a._observer;null!==f&&(f.disconnect(),a._observer=null),null!==b&&(b.textContent=""),null!==c&&(c.textContent="",e.set("root",c))}function dX(a){var b,c;let d,e,f,g,h=a||{},i=dj,j=h.theme||{},k=void 0===a?i:h.parentEditor||null,l=h.disableEvents||!1,m=dP(),n=h.namespace||(null!==k?k._config.namespace:eu()),o=h.editorState,p=[dM,cD,cs,cO,dS,dR,...h.nodes||[]],{onError:q,html:r}=h,s=void 0===h.editable||h.editable;if(void 0===a&&null!==i)d=i._nodes;else{d=new Map;for(let a=0;a<p.length;a++){let b=p[a],c=null,e=null;if("function"!=typeof b){let a=b;b=a.replace,c=a.with,e=a.withKlass||null}e4(b);let f=b.getType(),g=function(a){let b=new Set,c=new Set,d=a;for(;d;){let{ownNodeConfig:a}=e4(d),e=d.transform;if(!c.has(e)){c.add(e);let a=d.transform();a&&b.add(a)}if(a){let c=a.$transform;c&&b.add(c),d=a.extends}else{let a=Object.getPrototypeOf(d);d=a.prototype instanceof cp&&a!==cp?a:void 0}}return b}(b);d.set(f,{exportDOM:r&&r.export?r.export.get(b):void 0,klass:b,replace:c,replaceWithKlass:e,sharedNodeState:function(a){let b=new Map,c=new Set;for(let d="function"==typeof a?a:a.replace;d.prototype&&void 0!==d.prototype.getType;d=Object.getPrototypeOf(d)){let{ownNodeConfig:a}=e4(d);if(a&&a.stateConfigs)for(let d of a.stateConfigs){let a;"stateConfig"in d?(a=d.stateConfig,d.flat&&c.add(a.key)):a=d,b.set(a.key,a)}}return{flatKeys:c,sharedConfigMap:b}}(p[a]),transforms:g})}}let t=new dY(m,k,d,{disableEvents:l,namespace:n,theme:j},q||console.error,(b=d,c=r?r.import:void 0,e=new Map,f=new Set,g=a=>{Object.keys(a).forEach(b=>{let c=e.get(b);void 0===c&&(c=[],e.set(b,c)),c.push(a[b])})},b.forEach(a=>{let b=a.klass.importDOM;if(null==b||f.has(b))return;f.add(b);let c=b.call(a.klass);null!==c&&g(c)}),c&&g(c),e),s,a);return void 0!==o&&(t._pendingEditorState=o,t._dirtyType=2),t.registerCommand(a6,ca,0),t.registerCommand(a7,cb,0),t.registerCommand(a8,cc,0),t.registerCommand(a9,cd,0),t.registerCommand(bl,cf,0),t}class dY{static version;_headless;_parentEditor;_rootElement;_editorState;_pendingEditorState;_compositionKey;_deferred;_keyToDOMMap;_updates;_updating;_listeners;_commands;_nodes;_decorators;_pendingDecorators;_config;_dirtyType;_cloneNotNeeded;_dirtyLeaves;_dirtyElements;_normalizedNodes;_updateTags;_observer;_key;_onError;_htmlConversions;_window;_editable;_blockCursorElement;_createEditorArgs;constructor(a,b,c,d,e,f,g,h){this._createEditorArgs=h,this._parentEditor=b,this._rootElement=null,this._editorState=a,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=d,this._nodes=c,this._decorators={},this._pendingDecorators=null,this._dirtyType=0,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=eu(),this._onError=e,this._htmlConversions=f,this._editable=g,this._headless=null!==b&&b._headless,this._window=null,this._blockCursorElement=null}isComposing(){return null!=this._compositionKey}registerUpdateListener(a){let b=this._listeners.update;return b.add(a),()=>{b.delete(a)}}registerEditableListener(a){let b=this._listeners.editable;return b.add(a),()=>{b.delete(a)}}registerDecoratorListener(a){let b=this._listeners.decorator;return b.add(a),()=>{b.delete(a)}}registerTextContentListener(a){let b=this._listeners.textcontent;return b.add(a),()=>{b.delete(a)}}registerRootListener(a){let b=this._listeners.root;return a(this._rootElement,null),b.add(a),()=>{a(null,this._rootElement),b.delete(a)}}registerCommand(a,b,c){void 0===c&&Y(35);let d=this._commands;d.has(a)||d.set(a,[new Set,new Set,new Set,new Set,new Set]);let e=d.get(a);void 0===e&&Y(36,String(a));let f=e[c];return f.add(b),()=>{f.delete(b),e.every(a=>0===a.size)&&d.delete(a)}}registerMutationListener(a,b,c){let d=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(a)).klass,e=this._listeners.mutation,f=e.get(b);void 0===f&&(f=new Set,e.set(b,f)),f.add(d);let g=c&&c.skipInitialization;return void 0!==g&&g||this.initializeMutationListener(b,d),()=>{f.delete(d),0===f.size&&e.delete(b)}}getRegisteredNode(a){let b=this._nodes.get(a.getType());return void 0===b&&Y(37,a.name),b}resolveRegisteredNodeAfterReplacements(a){for(;a.replaceWithKlass;)a=this.getRegisteredNode(a.replaceWithKlass);return a}initializeMutationListener(a,b){let c=this._editorState,d=e0(c).get(b.getType());if(!d)return;let e=new Map;for(let a of d.keys())e.set(a,"created");e.size>0&&a(e,{dirtyLeaves:new Set,prevEditorState:c,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(a,b){let c=this.getRegisteredNode(a);return c.transforms.add(b),c}registerNodeTransform(a,b){let c=this.registerNodeTransformToKlass(a,b),d=[c],e=c.replaceWithKlass;if(null!=e){let a=this.registerNodeTransformToKlass(e,b);d.push(a)}return function(a,b){let c=e0(a.getEditorState()),d=[];for(let a of b){let b=c.get(a);b&&d.push(b)}0!==d.length&&a.update(()=>{for(let a of d)for(let b of a.keys()){let a=ei(b);a&&a.markDirty()}},null===a._pendingEditorState?{tag:cr}:void 0)}(this,d.map(a=>a.klass.getType())),()=>{d.forEach(a=>a.transforms.delete(b))}}hasNode(a){return this._nodes.has(a.getType())}hasNodes(a){return a.every(this.hasNode.bind(this))}dispatchCommand(a,b){return eG(this,a,b)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(a){let b=this._rootElement;if(a!==b){let c=eC(this._config.theme,"root"),d=this._pendingEditorState||this._editorState;if(this._rootElement=a,dW(this,b,a,d),null!==b&&(this._config.disableEvents||function(a){let b=bW.get(a);if(void 0===b)return cl();let c=bX.get(b);if(void 0===c)return cl();let d=c-1;d>=0||Y(164),bW.delete(a),bX.set(b,d),0===d&&b.removeEventListener("selectionchange",ci);let e=d6(a);d4(e)?(!function(a){if(null!==a._parentEditor){let b=et(a),c=b[b.length-1]._key;ch.get(c)===a&&ch.delete(c)}else ch.delete(a._key)}(e),a.__lexicalEditor=null):e&&Y(198);let f=cg(a);for(let a=0;a<f.length;a++)f[a]();a.__lexicalEventHandles=[]}(b),null!=c&&b.classList.remove(...c)),null!==a){let b=eM(a),d=a.style;d.userSelect="text",d.whiteSpace="pre-wrap",d.wordBreak="break-word",a.setAttribute("data-lexical-editor","true"),this._window=b,this._dirtyType=2,ao(this),this._updateTags.add(cr),dA(this),this._config.disableEvents||function(a,b){let c=a.ownerDocument;bW.set(a,c);let d=bX.get(c)??0;d<1&&c.addEventListener("selectionchange",ci),bX.set(c,d+1),a.__lexicalEditor=b;let e=cg(a);for(let c=0;c<bR.length;c++){let[d,f]=bR[c],g="function"==typeof f?a=>{ck(a)||(cj(a),(b.isEditable()||"click"===d)&&f(a,b))}:a=>{if(ck(a))return;cj(a);let c=b.isEditable();switch(d){case"cut":return c&&eG(b,bH,a);case"copy":return eG(b,bG,a);case"paste":return c&&eG(b,be,a);case"dragstart":return c&&eG(b,bD,a);case"dragover":return c&&eG(b,bE,a);case"dragend":return c&&eG(b,bF,a);case"focus":return c&&eG(b,bN,a);case"blur":return c&&eG(b,bO,a);case"drop":return c&&eG(b,bB,a)}};a.addEventListener(d,g),e.push(()=>{a.removeEventListener(d,g)})}}(a,this),null!=c&&a.classList.add(...c)}else this._window=null,this._updateTags.add(cr),dA(this);dB("root",this,!1,a,b)}}getElementByKey(a){return this._keyToDOMMap.get(a)||null}getEditorState(){return this._editorState}setEditorState(a,b){a.isEmpty()&&Y(38);let c=a;c._readOnly&&((c=dO(a))._selection=a._selection?a._selection.clone():null),an(this);let d=this._pendingEditorState,e=this._updateTags,f=void 0!==b?b.tag:null;null===d||d.isEmpty()||(null!=f&&e.add(f),dA(this)),this._pendingEditorState=c,this._dirtyType=2,this._dirtyElements.set("root",!1),this._compositionKey=null,null!=f&&e.add(f),this._updating||dA(this)}parseEditorState(a,b){return function(a,b,c){let d=dP(),e=di,f=dk,g=dj,h=b._dirtyElements,i=b._dirtyLeaves,j=b._cloneNotNeeded,k=b._dirtyType;b._dirtyElements=new Map,b._dirtyLeaves=new Set,b._cloneNotNeeded=new Set,b._dirtyType=0,di=d,dk=!1,dj=b,dZ=null;try{let e=b._nodes;dy(a.root,e),c&&c(),d._readOnly=!0}catch(a){a instanceof Error&&b._onError(a)}finally{b._dirtyElements=h,b._dirtyLeaves=i,b._cloneNotNeeded=j,b._dirtyType=k,di=e,dk=f,dj=g}return d}("string"==typeof a?JSON.parse(a):a,this,b)}read(a){return dA(this),this.getEditorState().read(a,{editor:this})}update(a,b){this._updating?this._updates.push([a,b]):dD(this,a,b)}focus(a,b={}){let c=this._rootElement;null!==c&&(c.setAttribute("autocapitalize","off"),dE(this,()=>{var d,e;let f=db(),g=eo();null!==f?f.dirty||eq(f.clone()):0!==g.getChildrenSize()&&("rootStart"===b.defaultSelection?g.selectStart():g.selectEnd()),d="focus",dq(),dt()._updateTags.add(d),e=()=>{c.removeAttribute("autocapitalize"),a&&a()},dq(),dt()._deferred.push(e)}),null===this._pendingEditorState&&c.removeAttribute("autocapitalize"))}blur(){var a;let b=this._rootElement;null!==b&&b.blur();let c=(a=this._window,null);null!==c&&c.removeAllRanges()}isEditable(){return this._editable}setEditable(a){this._editable!==a&&(this._editable=a,dB("editable",this,!0,a))}toJSON(){return{editorState:this._editorState.toJSON()}}}dY.version="0.39.0+prod.esm";let dZ=null,d$=1;function d_(a,b){let c=d0(a,b);return void 0===c&&Y(30,b),c}function d0(a,b){return a._nodes.get(b)}let d1="function"==typeof queueMicrotask?queueMicrotask:a=>{Promise.resolve().then(a)};function d2(a){let b=document.activeElement;if(!eU(b))return!1;let c=b.nodeName;return dL(el(a))&&("INPUT"===c||"TEXTAREA"===c||"true"===b.contentEditable&&null==d6(b))}function d3(a,b,c){let d=a.getRootElement();try{return null!==d&&d.contains(b)&&d.contains(c)&&null!==b&&!d2(b)&&d5(b)===a}catch(a){return!1}}function d4(a){return a instanceof dY}function d5(a){let b=a;for(;null!=b;){let a=d6(b);if(d4(a))return a;b=eJ(b)}return null}function d6(a){return a?a.__lexicalEditor:null}function d7(a){return cQ(a)||a.isToken()}function d8(a){return d7(a)||a.isSegmented()}function d9(a){return eV(a)&&3===a.nodeType}function ea(a){return eV(a)&&9===a.nodeType}function eb(a){let b=a;for(;null!=b;){if(d9(b))return b;b=b.firstChild}return null}function ec(a,b,c){let d=ab[b];if(null!==c&&(a&d)==(c&d))return a;let e=a^d;return"subscript"===b?e&=~ab.superscript:"superscript"===b?e&=~ab.subscript:"lowercase"===b?(e&=~ab.uppercase,e&=~ab.capitalize):"uppercase"===b?(e&=~ab.lowercase,e&=~ab.capitalize):"capitalize"===b&&(e&=~ab.lowercase,e&=~ab.uppercase),e}function ed(a){return cM(a)||cv(a)||dL(a)}function ee(a){let b=a.getParent();if(null!==b){let c=a.getWritable(),d=b.getWritable(),e=a.getPreviousSibling(),f=a.getNextSibling(),g=null!==f?f.__key:null,h=null!==e?e.__key:null,i=null!==e?e.getWritable():null,j=null!==f?f.getWritable():null;null===e&&(d.__first=g),null===f&&(d.__last=h),null!==i&&(i.__next=g),null!==j&&(j.__prev=h),c.__prev=null,c.__next=null,c.__parent=null,d.__size--}}function ef(a){dr(),co(a)&&Y(323,a.__key,a.__type);let b=a.getLatest(),c=b.__parent,d=ds(),e=dt(),f=d._nodeMap,g=e._dirtyElements;null!==c&&function(a,b,c){let d=a;for(;null!==d;){if(c.has(d))return;let a=b.get(d);if(void 0===a)break;c.set(d,!1),d=a.__parent}}(c,f,g);let h=b.__key;e._dirtyType=1,dI(a)?g.set(h,!0):e._dirtyLeaves.add(h)}function eg(a){dq();let b=dt(),c=b._compositionKey;if(a!==c){if(b._compositionKey=a,null!==c){let a=ei(c);null!==a&&a.getWritable()}if(null!==a){let b=ei(a);null!==b&&b.getWritable()}}}function eh(){return dp()?null:dt()._compositionKey}function ei(a,b){let c=(b||ds())._nodeMap.get(a);return void 0===c?null:c}function ej(a,b){let c=ek(a,dt());return void 0!==c?ei(c,b):null}function ek(a,b){return a[`__lexicalKey_${b._key}`]}function el(a,b){let c=a;for(;null!=c;){let a=ej(c,b);if(null!==a)return a;c=eJ(c)}return null}function em(a){let b=Object.assign({},a._decorators);return a._pendingDecorators=b,b}function en(a){return a.read(()=>eo().getTextContent())}function eo(){return ep(ds())}function ep(a){return a._nodeMap.get("root")}function eq(a){dq();let b=ds();null!==a&&(a.dirty=!0,a.setCachedNodes(null)),b._selection=a}function er(a){let b=dt(),c=function(a,b){let c=a;for(;null!=c;){let a=ek(c,b);if(void 0!==a)return a;c=eJ(c)}return null}(a,b);return null===c?a===b.getRootElement()?ei("root"):null:ei(c)}function es(a){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(a)}function et(a){let b=[],c=a;for(;null!==c;)b.push(c),c=c._parentEditor;return b}function eu(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function ev(a,b,c,d,e){let f=a;if(f.isAttached()&&(e||!f.isDirty())){let g=f.isComposing(),h=b;(g||e)&&"​"===b[b.length-1]&&(h=b.slice(0,-1));let i=f.getTextContent();if(e||h!==i){if(""===h){eg(null),1;{let a=dt();setTimeout(()=>{a.update(()=>{f.isAttached()&&f.remove()})},20)}return}let b=f.getParent(),e=dc(),i=f.getTextContentSize(),j=eh(),k=f.getKey();if(f.isToken()||null!==j&&k===j&&!g||cW(e)&&(null!==b&&!b.canInsertTextBefore()&&0===e.anchor.offset||e.anchor.key===a.__key&&0===e.anchor.offset&&!f.canInsertTextBefore()&&!g||e.focus.key===a.__key&&e.focus.offset===i&&!f.canInsertTextAfter()&&!g))return void f.markDirty();let l=db();if(!cW(l)||null===c||null===d)return void ew(f,h,l);if(l.setTextNodeRange(f,c,f,d),f.isSegmented()){let a=cL(f.getTextContent());f.replace(a),f=a}ew(f,h,l)}}}function ew(a,b,c){if(a.setTextContent(b),cW(c)){let b=a.getKey();for(let d of["anchor","focus"]){let e=c[d];"text"===e.type&&e.key===b&&(e.offset=fl(a,e.offset,"clamp"))}}}function ex(a,b,c){let d=b[c]||!1;return"any"===d||d===a[c]}function ey(a,b,c){return ex(a,c,"altKey")&&ex(a,c,"ctrlKey")&&ex(a,c,"shiftKey")&&ex(a,c,"metaKey")&&a.key.toLowerCase()===b.toLowerCase()}let ez={ctrlKey:!0,metaKey:!1},eA={altKey:!1,ctrlKey:!0};function eB(a){return"Backspace"===a.key}function eC(a,b){void 0===a.__lexicalClassNameCache&&(a.__lexicalClassNameCache={});let c=a.__lexicalClassNameCache,d=c[b];if(void 0!==d)return d;let e=a[b];if("string"==typeof e){let a=$(e);return c[b]=a,a}return e}function eD(a,b,c,d,e){if(0===c.size)return;let f=d.__type,g=d.__key,h=b.get(f);void 0===h&&Y(33,f);let i=h.klass,j=a.get(i);void 0===j&&(j=new Map,a.set(i,j));let k=j.get(g),l="destroyed"===k&&"created"===e;(void 0===k||l)&&j.set(g,l?"updated":e)}function eE(a,b,c){let d=a.getParent(),e=c,f=a;return null!==d&&(b&&0===c?(e=f.getIndexWithinParent(),f=d):b||c!==f.getChildrenSize()||(e=f.getIndexWithinParent()+1,f=d)),f.getChildAtIndex(b?e-1:e)}function eF(a,b){let c=a.offset;if("element"===a.type)return eE(a.getNode(),b,c);{let d=a.getNode();if(b&&0===c||!b&&c===d.getTextContentSize()){let a=b?d.getPreviousSibling():d.getNextSibling();return null===a?eE(d.getParentOrThrow(),b,d.getIndexWithinParent()+ +!b):a}}return null}function eG(a,b,c){return function(a,b,c){let d=et(a);for(let e=4;e>=0;e--)for(let f=0;f<d.length;f++){let g=d[f],h=g._commands.get(b);if(void 0!==h){let b=h[e];if(void 0!==b){let d=Array.from(b),e=d.length,f=!1;if(dE(g,()=>{for(let b=0;b<e;b++)if(d[b](c,a))return void(f=!0)}),f)return f}}}return!1}(a,b,c)}function eH(a){return!dN(a)&&!a.isLastChild()&&!a.isInline()}function eI(a,b){let c=a._keyToDOMMap.get(b);return void 0===c&&Y(75,b),c}function eJ(a){let b=a.assignedSlot||a.parentElement;return eW(b)?b.host:b}function eK(a){return ea(a)?a:eU(a)?a.ownerDocument:null}function eL(a,b){let c=a.getParent();for(;null!==c;){if(c.is(b))return!0;c=c.getParent()}return!1}function eM(a){let b=eK(a);return b?b.defaultView:null}function eN(a){let b=a._window;return null===b&&Y(78),b}function eO(a){return dN(a)||dI(a)&&a.isShadowRoot()}function eP(a){let b=dt(),c=a.getType(),d=d0(b,c);void 0===d&&Y(200,a.constructor.name,c);let{replace:e,replaceWithKlass:f}=d;if(null!==e){let b=e(a),d=b.constructor;return null!==f?b instanceof f||Y(201,f.name,f.getType(),d.name,d.getType(),a.constructor.name,c):b instanceof a.constructor&&d!==a.constructor||Y(202,d.name,d.getType(),a.constructor.name,c),b.__key===a.__key&&Y(203,a.constructor.name,c,d.name,d.getType()),b}return a}function eQ(a,b){!dN(a.getParent())||dI(b)||dL(b)||Y(99)}function eR(a){return(dL(a)||dI(a)&&!a.canBeEmpty())&&!a.isInline()}function eS(a,b,c){c.style.removeProperty("caret-color"),b._blockCursorElement=null;let d=a.parentElement;null!==d&&d.removeChild(a)}function eT(a){return eU(a)&&"A"===a.tagName}function eU(a){return eV(a)&&1===a.nodeType}function eV(a){return"object"==typeof a&&null!==a&&"nodeType"in a&&"number"==typeof a.nodeType}function eW(a){return eV(a)&&11===a.nodeType}function eX(a){let b=RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return null!==a.nodeName.match(b)}function eY(a){let b=RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return null!==a.nodeName.match(b)}function eZ(a){if(dL(a)&&!a.isInline())return!0;if(!dI(a)||eO(a))return!1;let b=a.getFirstChild(),c=null===b||cv(b)||cM(b)||b.isInline();return!a.isInline()&&!1!==a.canBeEmpty()&&c}let e$=new WeakMap,e_=new Map;function e0(a){if(!a._readOnly&&a.isEmpty())return e_;a._readOnly||Y(192);let b=e$.get(a);return b||(b=function(a){let b=new Map;for(let[c,d]of a._nodeMap){let a=d.__type,e=b.get(a);e||(e=new Map,b.set(a,e)),e.set(c,d)}return b}(a),e$.set(a,b)),b}function e1(a){let b=a.constructor.clone(a);return b.afterCloneFrom(a),b}function e2(a,b){let c=Math.round((parseInt(a.style.paddingInlineStart,10)||0)/40);b.setIndent(c)}function e3(a,b){return Object.prototype.hasOwnProperty.call(a,b)&&a[b]!==cp[b]}function e4(a){let b=ah in a.prototype?a.prototype[ah]():void 0,c=function(a){if(!(a===cp||a.prototype instanceof cp)){let b="<unknown>",c="<unknown>";try{b=a.getType()}catch(a){}try{dY.version&&(c=JSON.parse(dY.version))}catch(a){}Y(290,a.name,b,c)}return a===dK||a===dH||a===cp}(a),d=!c&&e3(a,"getType")?a.getType():void 0,e,f=d;if(b)if(d)e=b[d];else for(let[a,c]of Object.entries(b))f=a,e=c;if(!c&&f&&(e3(a,"getType")||(a.getType=()=>f),e3(a,"clone")||(a.clone=b=>(dZ=b,new a)),e3(a,"importJSON")||(a.importJSON=e&&e.$importJSON||(b=>(new a).updateFromJSON(b))),!e3(a,"importDOM")&&e)){let{importDOM:b}=e;b&&(a.importDOM=()=>b)}return{ownNodeConfig:e,ownNodeType:f}}let e5=(a,b)=>{let c=a;for(;null!=c&&!dN(c);){if(b(c))return c;c=c.getParent()}return null},e6={next:"previous",previous:"next"};class e7{origin;constructor(a){this.origin=a}[Symbol.iterator](){return fs({hasNext:fe,initial:this.getAdjacentCaret(),map:a=>a,step:a=>a.getAdjacentCaret()})}getAdjacentCaret(){return fj(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return fj(this.origin,this.direction)}remove(){let a=this.getNodeAtCaret();return a&&a.remove(),this}replaceOrInsert(a,b){let c=this.getNodeAtCaret();return a.is(this.origin)||a.is(c)||(null===c?this.insert(a):c.replace(a,b)),this}splice(a,b,c="next"){let d=c===this.direction?b:Array.from(b).reverse(),e=this,f=this.getParentAtCaret(),g=new Map;for(let b=e.getAdjacentCaret();null!==b&&g.size<a;b=b.getAdjacentCaret()){let a=b.origin.getWritable();g.set(a.getKey(),a)}for(let a of d){if(g.size>0){let b=e.getNodeAtCaret();if(b)if(g.delete(b.getKey()),g.delete(a.getKey()),b.is(a)||e.origin.is(a));else{let c=a.getParent();c&&c.is(f)&&a.remove(),b.replace(a)}else null===b&&Y(263,Array.from(g).join(" "))}else e.insert(a);e=fj(a,this.direction)}for(let a of g.values())a.remove();return this}}class e8 extends e7{type="child";getLatest(){let a=this.origin.getLatest();return a===this.origin?this:fm(a,this.direction)}getParentCaret(a="root"){return fj(fa(this.getParentAtCaret(),a),this.direction)}getFlipped(){let a=e6[this.direction];return fj(this.getNodeAtCaret(),a)||fm(this.origin,a)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(a){return a instanceof e8&&this.direction===a.direction&&this.origin.is(a.origin)}isSamePointCaret(a){return this.isSameNodeCaret(a)}}let e9={root:dN,shadowRoot:eO};function fa(a,b="root"){return e9[b](a)?null:a}class fb extends e7{type="sibling";getLatest(){let a=this.origin.getLatest();return a===this.origin?this:fj(a,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return dI(this.origin)?fm(this.origin,this.direction):null}getParentCaret(a="root"){return fj(fa(this.getParentAtCaret(),a),this.direction)}getFlipped(){let a=e6[this.direction];return fj(this.getNodeAtCaret(),a)||fm(this.origin.getParentOrThrow(),a)}isSamePointCaret(a){return a instanceof fb&&this.direction===a.direction&&this.origin.is(a.origin)}isSameNodeCaret(a){return(a instanceof fb||a instanceof fc)&&this.direction===a.direction&&this.origin.is(a.origin)}}class fc extends e7{type="text";offset;constructor(a,b){super(a),this.offset=b}getLatest(){let a=this.origin.getLatest();return a===this.origin?this:fk(a,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(a="root"){return fj(fa(this.getParentAtCaret(),a),this.direction)}getFlipped(){return fk(this.origin,e6[this.direction],this.offset)}isSamePointCaret(a){return a instanceof fc&&this.direction===a.direction&&this.origin.is(a.origin)&&this.offset===a.offset}isSameNodeCaret(a){return(a instanceof fb||a instanceof fc)&&this.direction===a.direction&&this.origin.is(a.origin)}getSiblingCaret(){return fj(this.origin,this.direction)}}function fd(a){return a instanceof fc}function fe(a){return a instanceof fb}function ff(a){return a instanceof e8}let fg={next:class extends fc{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(a){return this.origin.insertAfter(a),this}},previous:class extends fc{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(a){return this.origin.insertBefore(a),this}}},fh={next:class extends fb{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(a){return this.origin.insertAfter(a),this}},previous:class extends fb{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(a){return this.origin.insertBefore(a),this}}},fi={next:class extends e8{direction="next";getNodeAtCaret(){return this.origin.getFirstChild()}insert(a){return this.origin.splice(0,0,[a]),this}},previous:class extends e8{direction="previous";getNodeAtCaret(){return this.origin.getLastChild()}insert(a){return this.origin.splice(this.origin.getChildrenSize(),0,[a]),this}}};function fj(a,b){return a?new fh[b](a):null}function fk(a,b,c){return a?new fg[b](a,fl(a,c)):null}function fl(a,b,c="error"){let d=a.getTextContentSize(),e="next"===b?d:"previous"===b?0:b;return(e<0||e>d)&&("clamp"!==c&&Z(284,String(b),String(d),a.getKey()),e=e<0?0:d),e}function fm(a,b){return dI(a)?new fi[b](a):null}function fn(a){var b;return a&&((b=a.getAdjacentCaret())&&b.getChildCaret()||b)}class fo{type="node-caret-range";direction;anchor;focus;constructor(a,b,c){this.anchor=a,this.focus=b,this.direction=c}getLatest(){let a=this.anchor.getLatest(),b=this.focus.getLatest();return a===this.anchor&&b===this.focus?this:new fo(a,b,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){let a=a=>{let b=this[a].getLatest();return fd(b)?function(a,b){let{direction:c,origin:d}=a;return new fp(a,fl(d,"focus"===b?e6[c]:c)-a.offset)}(b,a):null},b=a("anchor"),c=a("focus");if(b&&c){let{caret:a}=b,{caret:d}=c;if(a.isSameNodeCaret(d))return[new fp(a,d.offset-a.offset),null]}return[b,c]}iterNodeCarets(a="root"){let b=fd(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),c=this.focus.getLatest(),d=fd(c),e=b=>b.isSameNodeCaret(c)?null:fn(b)||b.getParentCaret(a);return fs({hasNext:a=>null!==a&&!(d&&c.isSameNodeCaret(a)),initial:b.isSameNodeCaret(c)?null:e(b),map:a=>a,step:e})}[Symbol.iterator](){return this.iterNodeCarets("root")}}class fp{type="slice";caret;distance;constructor(a,b){this.caret=a,this.distance=b}getSliceIndices(){let{distance:a,caret:{offset:b}}=this,c=b+a;return c<b?[c,b]:[b,c]}getTextContent(){let[a,b]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(a,b)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){let{caret:{origin:a,direction:b}}=this,[c,d]=this.getSliceIndices(),e=a.getTextContent();return fk(a.setTextContent(e.slice(0,c)+e.slice(d)),b,c)}}function fq(a){return fr(a,fj(eo(),a.direction))}function fr(a,b){return a.direction!==b.direction&&Y(265),new fo(a,b,a.direction)}function fs(a){let{initial:b,hasNext:c,step:d,map:e}=a,f=b;return{[Symbol.iterator](){return this},next(){if(!c(f))return{done:!0,value:void 0};let a={done:!1,value:e(f)};return f=d(f),a}}}function ft(a,b){let c=fw(a.origin,b.origin);switch(null===c&&Y(275,a.origin.getKey(),b.origin.getKey()),c.type){case"same":{let c="text"===a.type,d="text"===b.type;return c&&d?Math.sign(a.offset-b.offset):a.type===b.type?0:c?-1:d?1:"child"===a.type?-1:1}case"ancestor":return"child"===a.type?-1:1;case"descendant":return"child"===b.type?1:-1;case"branch":return fu(c)}}function fu(a){let{a:b,b:c}=a,d=b.__key,e=c.__key,f=b,g=c;for(;f&&g;f=f.getNextSibling(),g=g.getNextSibling()){if(f.__key===e)return -1;if(g.__key===d)return 1}return null===f?1:-1}function fv(a){return dI(a)?[a.getLatest(),null]:[a.getParent(),a.getLatest()]}function fw(a,b){if(a.is(b))return{commonAncestor:a,type:"same"};let c=new Map;for(let[b,d]=fv(a);b;d=b,b=b.getParent())c.set(b,d);for(let[d,e]=fv(b);d;e=d,d=d.getParent()){let f=c.get(d);if(void 0!==f)return null===f?(d.is(a)||Y(276),{commonAncestor:d,type:"ancestor"}):null===e?(d.is(b)||Y(277),{commonAncestor:d,type:"descendant"}):((dI(f)||f.is(a))&&(dI(e)||e.is(b))&&d.is(f.getParent())&&d.is(e.getParent())||Y(278),{a:f,b:e,commonAncestor:d,type:"branch"})}return null}function fx(a,b){var c;let d,{type:e,key:f,offset:g}=a,h=(null===(d=ei(c=a.key))&&Y(63,c),d);return"text"===e?(cM(h)||Y(266,h.getType(),f),fk(h,b,g)):(dI(h)||Y(267,h.getType(),f),function(a,b,c){let d=fm(a,"next");for(let a=0;a<b;a++){let a=d.getAdjacentCaret();if(null===a)break;d=a}return fG(d,c)}(h,a.offset,b))}function fy(a,b){let{origin:c,direction:d}=b,e="next"===d;fd(b)?a.set(c.getKey(),b.offset,"text"):fe(b)?cM(c)?a.set(c.getKey(),fl(c,d),"text"):a.set(c.getParentOrThrow().getKey(),c.getIndexWithinParent()+ +!!e,"element"):(ff(b)&&dI(c)||Y(268),a.set(c.getKey(),e?0:c.getChildrenSize(),"element"))}function fz(a,b){fy(a.anchor,b.anchor),fy(a.focus,b.focus)}function fA(a){let{anchor:b,focus:c}=a,d=fx(b,"next"),e=fx(c,"next"),f=0>=ft(d,e)?"next":"previous";return fr(fG(d,f),fG(e,f))}function fB(a){let{direction:b,origin:c}=a,d=fj(c,e6[b]).getNodeAtCaret();return d?fj(d,b):fm(c.getParentOrThrow(),b)}function fC(a,b="root"){let c=[a];for(let d=ff(a)?a.getParentCaret(b):a.getSiblingCaret();null!==d;d=d.getParentCaret(b))c.push(fB(d));return c}function fD(a){return!!a&&a.origin.isAttached()}function fE(a){let b=function(a){let b=a;for(;ff(b);){let a=fn(b);if(!ff(a))break;b=a}return b}(a.getLatest()),{direction:c}=b;if(cM(b.origin))return fd(b)?b:fk(b.origin,c,c);let d=b.getAdjacentCaret();return fe(d)&&cM(d.origin)?fk(d.origin,c,e6[c]):b}function fF(a){return fd(a)&&a.offset!==fl(a.origin,a.direction)}function fG(a,b){return a.direction===b?a:a.getFlipped()}function fH(a,b){return a.direction===b?a:fr(fG(a.focus,b),fG(a.anchor,b))}function fI(a,b){if(!b||a===b)return a;for(let c in b)if(a[c]!==b[c])return{...a,...b};return a}let fJ=e.useEffect,fK={tag:cr};function fL({initialConfig:a,children:b}){let c=(0,e.useMemo)(()=>{let{theme:b,namespace:c,nodes:d,onError:e,editorState:f,html:g}=a,h={getTheme:function(){return null!=b?b:null}},i=dX({editable:a.editable,html:g,namespace:c,nodes:d,onError:a=>e(a,i),theme:b});return function(a,b){if(null!==b){if(void 0===b)a.update(()=>{let a=eo();if(a.isEmpty()){let b=dU();a.append(b),null!==db()&&b.select()}},fK);else if(null!==b)switch(typeof b){case"string":{let c=a.parseEditorState(b);a.setEditorState(c,fK);break}case"object":a.setEditorState(b,fK);break;case"function":a.update(()=>{eo().isEmpty()&&b(a)},fK)}}}(i,f),[i,h]},[]);return fJ(()=>{let b=a.editable,[d]=c;d.setEditable(void 0===b||b)},[]),(0,d.jsx)(W.Provider,{value:c,children:b})}let fM=e.useEffect;function fN(a){return{initialValueFn:()=>a.isEditable(),subscribe:b=>a.registerEditableListener(b)}}let fO=new Map;function fP(a){let b={};if(!a)return b;for(let c of a.split(";"))if(""!==c){let[a,d]=c.split(/:([^]+)/);a&&d&&(b[a.trim()]=d.trim())}return b}function fQ(a){let b=fO.get(a);return void 0===b&&(b=fP(a),fO.set(a,b)),b}function fR(a){let b=dt().getElementByKey(a.getKey());if(null===b)return null;let c=b.ownerDocument.defaultView;return null===c?null:c.getComputedStyle(b)}function fS(a){return fR(dN(a)?a:a.getParentOrThrow())}function fT(a){let b=fS(a);return null!==b&&"rtl"===b.direction}function fU(a,b,c="self"){let d=a.getStartEndPoints();if(b.isSelected(a)&&!d8(b)&&null!==d){let[f,g]=d,h=a.isBackward(),i=f.getNode(),j=g.getNode(),k=b.is(i),l=b.is(j);if(k||l){var e;let[d,f]=c$(a),g=i.is(j),k=b.is(h?j:i),l=b.is(h?i:j),m,n=0;g?(n=d>f?f:d,m=d>f?d:f):k?(n=h?f:d,m=void 0):l&&(n=0,m=h?d:f);let o=b.__text.slice(n,m);o!==b.__text&&("clone"===c&&((e=e1(b))[cn]=!0,b=e),b.__text=o)}}return b}function fV(a){let b=fW(a);return null!==b&&"vertical-rl"===b.writingMode}function fW(a){let b=a.anchor.getNode();return dI(b)?fR(b):fS(b)}function fX(a,b){let c=fV(a)?!b:b;fY(a)&&(c=!c);let d=fx(a.focus,c?"previous":"next");if(fF(d))return!1;for(let a of fq(d)){if(ff(a))return!a.origin.isInline();if(!dI(a.origin)){if(dL(a.origin))return!0;break}}return!1}function fY(a){let b=fW(a);return null!==b&&"rtl"===b.direction}function fZ(a,b,c){let d,e=fY(a);d=fV(a)||e?!c:c,a.modify(b?"extend":"move",d,"character")}function f$(...a){let b=[];for(let c of a)if(c&&"string"==typeof c)for(let[a]of c.matchAll(/\S+/g))b.push(a);return b}function f_(...a){return()=>{for(let b=a.length-1;b>=0;b--)a[b]();a.length=0}}function f0(a,...b){let c=f$(...b);c.length>0&&a.classList.add(...c)}function f1(a,...b){let c=f$(...b);c.length>0&&a.classList.remove(...c)}function f2(a,b){return null!==a&&Object.getPrototypeOf(a).constructor.name===b.name}let f3=!1,f4=Symbol.for("preact-signals");function f5(){if(f7>1)return void f7--;let a,b=!1;for(;void 0!==c;){let d=c;for(c=void 0,f8++;void 0!==d;){let c=d.o;if(d.o=void 0,d.f&=-3,!(8&d.f)&&gc(d))try{d.c()}catch(c){b||(a=c,b=!0)}d=c}}if(f8=0,f7--,b)throw a}function f6(a){let c=b;b=void 0;try{return a()}finally{b=c}}let f7=0,f8=0,f9=0;function ga(a){if(void 0===b)return;let c=a.n;return void 0===c||c.t!==b?(c={i:0,S:a,p:b.s,n:void 0,t:b,e:void 0,x:void 0,r:c},void 0!==b.s&&(b.s.n=c),b.s=c,a.n=c,32&b.f&&a.S(c),c):-1===c.i?(c.i=0,void 0!==c.n&&(c.n.p=c.p,void 0!==c.p&&(c.p.n=c.n),c.p=b.s,c.n=void 0,b.s.n=c,b.s=c),c):void 0}function gb(a,b){this.v=a,this.i=0,this.n=void 0,this.t=void 0,this.W=null==b?void 0:b.watched,this.Z=null==b?void 0:b.unwatched,this.name=null==b?void 0:b.name}function gc(a){for(let b=a.s;void 0!==b;b=b.n)if(b.S.i!==b.i||!b.S.h()||b.S.i!==b.i)return!0;return!1}function gd(a){for(let b=a.s;void 0!==b;b=b.n){let c=b.S.n;if(void 0!==c&&(b.r=c),b.S.n=b,b.i=-1,void 0===b.n){a.s=b;break}}}function ge(a){let b,c=a.s;for(;void 0!==c;){let a=c.p;-1===c.i?(c.S.U(c),void 0!==a&&(a.n=c.n),void 0!==c.n&&(c.n.p=a)):b=c,c.S.n=c.r,void 0!==c.r&&(c.r=void 0),c=a}a.s=b}function gf(a,b){gb.call(this,void 0),this.x=a,this.s=void 0,this.g=f9-1,this.f=4,this.W=null==b?void 0:b.watched,this.Z=null==b?void 0:b.unwatched,this.name=null==b?void 0:b.name}function gg(a){let c=a.u;if(a.u=void 0,"function"==typeof c){f7++;let d=b;b=void 0;try{c()}catch(b){throw a.f&=-2,a.f|=8,gh(a),b}finally{b=d,f5()}}}function gh(a){for(let b=a.s;void 0!==b;b=b.n)b.S.U(b);a.x=void 0,a.s=void 0,gg(a)}function gi(a){if(b!==this)throw Error("Out-of-order effect");ge(this),b=a,this.f&=-2,8&this.f&&gh(this),f5()}function gj(a,b){this.x=a,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=null==b?void 0:b.name}function gk(a,b){let c=new gj(a,b);try{c.c()}catch(a){throw c.d(),a}let d=c.d.bind(c);return d[Symbol.dispose]=d,d}function gl(a,b={}){let c={};for(let d in a){let e=b[d],f=new gb(void 0===e?a[d]:e,void 0);c[d]=f}return c}gb.prototype.brand=f4,gb.prototype.h=function(){return!0},gb.prototype.S=function(a){let b=this.t;b!==a&&void 0===a.e&&(a.x=b,this.t=a,void 0!==b?b.e=a:f6(()=>{var a;null==(a=this.W)||a.call(this)}))},gb.prototype.U=function(a){if(void 0!==this.t){let b=a.e,c=a.x;void 0!==b&&(b.x=c,a.e=void 0),void 0!==c&&(c.e=b,a.x=void 0),a===this.t&&(this.t=c,void 0===c&&f6(()=>{var a;null==(a=this.Z)||a.call(this)}))}},gb.prototype.subscribe=function(a){return gk(()=>{let c=this.value,d=b;b=void 0;try{a(c)}finally{b=d}},{name:"sub"})},gb.prototype.valueOf=function(){return this.value},gb.prototype.toString=function(){return this.value+""},gb.prototype.toJSON=function(){return this.value},gb.prototype.peek=function(){let a=b;b=void 0;try{return this.value}finally{b=a}},Object.defineProperty(gb.prototype,"value",{get(){let a=ga(this);return void 0!==a&&(a.i=this.i),this.v},set(a){if(a!==this.v){if(f8>100)throw Error("Cycle detected");this.v=a,this.i++,f9++,f7++;try{for(let a=this.t;void 0!==a;a=a.x)a.t.N()}finally{f5()}}}}),gf.prototype=new gb,gf.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if(32==(36&this.f)||(this.f&=-5,this.g===f9))return!0;if(this.g=f9,this.f|=1,this.i>0&&!gc(this))return this.f&=-2,!0;let a=b;try{gd(this),b=this;let a=this.x();(16&this.f||this.v!==a||0===this.i)&&(this.v=a,this.f&=-17,this.i++)}catch(a){this.v=a,this.f|=16,this.i++}return b=a,ge(this),this.f&=-2,!0},gf.prototype.S=function(a){if(void 0===this.t){this.f|=36;for(let a=this.s;void 0!==a;a=a.n)a.S.S(a)}gb.prototype.S.call(this,a)},gf.prototype.U=function(a){if(void 0!==this.t&&(gb.prototype.U.call(this,a),void 0===this.t)){this.f&=-33;for(let a=this.s;void 0!==a;a=a.n)a.S.U(a)}},gf.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(let a=this.t;void 0!==a;a=a.x)a.t.N()}},Object.defineProperty(gf.prototype,"value",{get(){if(1&this.f)throw Error("Cycle detected");let a=ga(this);if(this.h(),void 0!==a&&(a.i=this.i),16&this.f)throw this.v;return this.v}}),gj.prototype.c=function(){let a=this.S();try{if(8&this.f||void 0===this.x)return;let a=this.x();"function"==typeof a&&(this.u=a)}finally{a()}},gj.prototype.S=function(){if(1&this.f)throw Error("Cycle detected");this.f|=1,this.f&=-9,gg(this),gd(this),f7++;let a=b;return b=this,gi.bind(this,a)},gj.prototype.N=function(){2&this.f||(this.f|=2,this.o=c,c=this)},gj.prototype.d=function(){this.f|=8,1&this.f||gh(this)},gj.prototype.dispose=function(){this.d()},(a,b,c)=>gl(b);function gm(a,...b){let c=new URL("https://lexical.dev/docs/error"),d=new URLSearchParams;for(let c of(d.append("code",a),b))d.append("v",c);throw c.search=d.toString(),Error(`Minified Lexical error #${a}; visit ${c.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let gn=new Set;class go{builder;configs;_dependency;_peerNameSet;extension;state;_signal;constructor(a,b){this.builder=a,this.extension=b,this.configs=new Set,this.state={id:0}}mergeConfigs(){let a=this.extension.config||{},b=this.extension.mergeConfig?this.extension.mergeConfig.bind(this.extension):fI;for(let c of this.configs)a=b(a,c);return a}init(a){let b,c=this.state;2===c.id||gm(306,String(c.id));let d={getDependency:this.getInitDependency.bind(this),getDirectDependentNames:this.getDirectDependentNames.bind(this),getPeer:this.getInitPeer.bind(this),getPeerNameSet:this.getPeerNameSet.bind(this)},e={...d,getDependency:this.getDependency.bind(this),getInitResult:this.getInitResult.bind(this),getPeer:this.getPeer.bind(this)},f=Object.assign(c,{config:this.mergeConfigs(),id:3,registerState:d});this.state=f,this.extension.init&&(b=this.extension.init(a,f.config,d)),this.state=Object.assign(f,{id:4,initResult:b,registerState:e})}build(a){let b,c=this.state;4!==c.id&&gm(307,String(c.id),String(5)),this.extension.build&&(b=this.extension.build(a,c.config,c.registerState));let d={...c.registerState,getOutput:()=>b,getSignal:this.getSignal.bind(this)};this.state=Object.assign(c,{id:5,output:b,registerState:d})}register(a,b){this._signal=b;let c=this.state;5!==c.id&&gm(308,String(c.id),String(5));let d=this.extension.register&&this.extension.register(a,c.config,c.registerState);return this.state=Object.assign(c,{id:6}),()=>{let a=this.state;7!==a.id&&gm(309,String(c.id),String(7)),this.state=Object.assign(a,{id:5}),d&&d()}}afterRegistration(a){let b,c=this.state;return 6!==c.id&&gm(310,String(c.id),String(6)),this.extension.afterRegistration&&(b=this.extension.afterRegistration(a,c.config,c.registerState)),this.state=Object.assign(c,{id:7}),b}getSignal(){return void 0===this._signal&&gm(311),this._signal}getInitResult(){void 0===this.extension.init&&gm(312,this.extension.name);let a=this.state;return a.id>=4||gm(313,String(a.id),String(4)),a.initResult}getInitPeer(a){let b=this.builder.extensionNameMap.get(a);return b?b.getExtensionInitDependency():void 0}getExtensionInitDependency(){let a=this.state;return a.id>=3||gm(314,String(a.id),String(3)),{config:a.config}}getPeer(a){let b=this.builder.extensionNameMap.get(a);return b?b.getExtensionDependency():void 0}getInitDependency(a){let b=this.builder.getExtensionRep(a);return void 0===b&&gm(315,this.extension.name,a.name),b.getExtensionInitDependency()}getDependency(a){let b=this.builder.getExtensionRep(a);return void 0===b&&gm(315,this.extension.name,a.name),b.getExtensionDependency()}getState(){let a=this.state;return a.id>=7||gm(316,String(a.id),String(7)),a}getDirectDependentNames(){return this.builder.incomingEdges.get(this.extension.name)||gn}getPeerNameSet(){let a=this._peerNameSet;return a||(a=new Set((this.extension.peerDependencies||[]).map(([a])=>a)),this._peerNameSet=a),a}getExtensionDependency(){if(!this._dependency){let a=this.state;a.id>=5||gm(317,this.extension.name),this._dependency={config:a.config,init:a.initResult,output:a.output}}return this._dependency}}let gp={tag:cr};function gq(){let a=eo();a.isEmpty()&&a.append(dU())}let gr={config:{setOptions:gp,updateOptions:gp},init:({$initialEditorState:a=gq})=>({$initialEditorState:a,initialized:!1}),afterRegistration(a,{updateOptions:b,setOptions:c},d){let e=d.getInitResult();if(!e.initialized){e.initialized=!0;let{$initialEditorState:d}=e;if(d instanceof dQ)a.setEditorState(d,c);else if("function"==typeof d)a.update(()=>{d(a)},b);else if(d&&("string"==typeof d||"object"==typeof d)){let b=a.parseEditorState(d);a.setEditorState(b,c)}}return()=>{}},name:"@lexical/extension/InitialState",nodes:[dM,cD,cs,cO,dS]},gs=Symbol.for("@lexical/extension/LexicalBuilder");function gt(){}function gu(a){throw a}function gv(a){return Array.isArray(a)?a:[a]}let gw="0.39.0+prod.esm";class gx{roots;extensionNameMap;outgoingConfigEdges;incomingEdges;conflicts;_sortedExtensionReps;PACKAGE_VERSION;constructor(a){for(const b of(this.outgoingConfigEdges=new Map,this.incomingEdges=new Map,this.extensionNameMap=new Map,this.conflicts=new Map,this.PACKAGE_VERSION=gw,this.roots=a,a))this.addExtension(b)}static fromExtensions(a){let b=[gv(gr)];for(let c of a)b.push(gv(c));return new gx(b)}static maybeFromEditor(a){let b=a[gs];return b&&(b.PACKAGE_VERSION!==gw&&gm(292,b.PACKAGE_VERSION,gw),b instanceof gx||gm(293)),b}static fromEditor(a){let b=gx.maybeFromEditor(a);return void 0===b&&gm(294),b}constructEditor(){let{$initialEditorState:a,onError:b,...c}=this.buildCreateEditorArgs(),d=Object.assign(dX({...c,...b?{onError:a=>{b(a,d)}}:{}}),{[gs]:this});for(let a of this.sortedExtensionReps())a.build(d);return d}buildEditor(){let a=gt;function b(){try{a()}finally{a=gt}}let c=Object.assign(this.constructEditor(),{dispose:b,[Symbol.dispose]:b});return a=f_(this.registerEditor(c),()=>c.setRootElement(null)),c}hasExtensionByName(a){return this.extensionNameMap.has(a)}getExtensionRep(a){let b=this.extensionNameMap.get(a.name);if(b)return b.extension!==a&&gm(295,a.name),b}addEdge(a,b,c){let d=this.outgoingConfigEdges.get(a);d?d.set(b,c):this.outgoingConfigEdges.set(a,new Map([[b,c]]));let e=this.incomingEdges.get(b);e?e.add(a):this.incomingEdges.set(b,new Set([a]))}addExtension(a){void 0!==this._sortedExtensionReps&&gm(296);let[b]=gv(a);"string"!=typeof b.name&&gm(297,typeof b.name);let c=this.extensionNameMap.get(b.name);if(void 0!==c&&c.extension!==b&&gm(298,b.name),!c){c=new go(this,b),this.extensionNameMap.set(b.name,c);let a=this.conflicts.get(b.name);for(let c of("string"==typeof a&&gm(299,b.name,a),b.conflictsWith||[]))this.extensionNameMap.has(c)&&gm(299,b.name,c),this.conflicts.set(c,b.name);for(let a of b.dependencies||[]){let c=gv(a);this.addEdge(b.name,c[0].name,c.slice(1)),this.addExtension(c)}for(let[a,c]of b.peerDependencies||[])this.addEdge(b.name,a,c?[c]:[])}}sortedExtensionReps(){if(this._sortedExtensionReps)return this._sortedExtensionReps;let a=[],b=(c,d)=>{var e,f;let g=c.state;if(2===g.id)return;let h=c.extension.name;0===g.id||gm(300,h,d||"[unknown]"),0===(e=g).id||gm(304,String(e.id),String(0)),c.state=g=Object.assign(e,{id:1});let i=this.outgoingConfigEdges.get(h);if(i)for(let a of i.keys()){let c=this.extensionNameMap.get(a);c&&b(c,h)}1===(f=g).id||gm(305,String(f.id),String(1)),c.state=g=Object.assign(f,{id:2}),a.push(c)};for(let a of this.extensionNameMap.values())0===a.state.id&&b(a);for(let b of a)for(let[a,c]of this.outgoingConfigEdges.get(b.extension.name)||[])if(c.length>0){let b=this.extensionNameMap.get(a);if(b)for(let a of c)b.configs.add(a)}for(let[a,...b]of this.roots)if(b.length>0){let c=this.extensionNameMap.get(a.name);for(let d of(void 0===c&&gm(301,a.name),b))c.configs.add(d)}return this._sortedExtensionReps=a,this._sortedExtensionReps}registerEditor(a){let b=this.sortedExtensionReps(),c=new AbortController,d=[()=>c.abort()],e=c.signal;for(let c of b){let b=c.register(a,e);b&&d.push(b)}for(let c of b){let b=c.afterRegistration(a);b&&d.push(b)}return f_(...d)}buildCreateEditorArgs(){let a={},b=new Set,c=new Map,d=new Map,e={},f={},g=this.sortedExtensionReps();for(let h of g){let{extension:g}=h;if(void 0!==g.onError&&(a.onError=g.onError),void 0!==g.disableEvents&&(a.disableEvents=g.disableEvents),void 0!==g.parentEditor&&(a.parentEditor=g.parentEditor),void 0!==g.editable&&(a.editable=g.editable),void 0!==g.namespace&&(a.namespace=g.namespace),void 0!==g.$initialEditorState&&(a.$initialEditorState=g.$initialEditorState),g.nodes){for(let a of("function"==typeof g.nodes?g.nodes():g.nodes)||[]){if("function"!=typeof a){let b=c.get(a.replace);b&&gm(302,g.name,a.replace.name,b.extension.name),c.set(a.replace,h)}b.add(a)}}if(g.html){if(g.html.export)for(let[a,b]of g.html.export.entries())d.set(a,b);g.html.import&&Object.assign(e,g.html.import)}g.theme&&function a(b,c){if(b&&c&&!Array.isArray(c)&&"object"==typeof b&&"object"==typeof c){for(let d in c)b[d]=a(b[d],c[d]);return b}return c}(f,g.theme)}Object.keys(f).length>0&&(a.theme=f),b.size&&(a.nodes=[...b]);let h=Object.keys(e).length>0,i=d.size>0;for(let b of((h||i)&&(a.html={},h&&(a.html.import=e),i&&(a.html.export=d)),g))b.init(a);return a.onError||(a.onError=gu),a}}a2("INSERT_HORIZONTAL_RULE_COMMAND");var gy=a.i(51498);function gz(a){return()=>(function(a){if(!function(a,b=!0){if(a)return!1;let c=eo().getTextContent();return b&&(c=c.trim()),""===c}(a,!1))return!1;let b=eo().getChildren(),c=b.length;if(c>1)return!1;for(let a=0;a<c;a++){let c=b[a];if(dL(c))return!1;if(dI(c)){if(!dV(c)||0!==c.__indent)return!1;let b=c.getChildren(),d=b.length;for(let c=0;c<d;c++)if(!cM(b[a]))return!1}}return!0})(a)}function gA(a){let b=window.location.origin,c=c=>{if(c.origin!==b)return;let d=a.getRootElement();if(document.activeElement!==d)return;let e=c.data;if("string"==typeof e){let b;try{b=JSON.parse(e)}catch(a){return}if(b&&"nuanria_messaging"===b.protocol&&"request"===b.type){let d=b.payload;if(d&&"makeChanges"===d.functionId){let b=d.args;if(b){let[d,e,f,g,h]=b;a.update(()=>{let a=db();if(cW(a)){let b=a.anchor,i=b.getNode(),j=0,k=0;if(cM(i)&&d>=0&&e>=0&&(j=d,k=d+e,a.setTextNodeRange(i,j,i,k)),j===k&&""===f||(a.insertRawText(f),i=b.getNode()),cM(i)){j=g,k=g+h;let b=i.getTextContentSize();j=j>b?b:j,k=k>b?b:k,a.setTextNodeRange(i,j,i,k)}c.stopImmediatePropagation()}})}}}}};return window.addEventListener("message",c,!0),()=>{window.removeEventListener("message",c,!0)}}let gB=new Set(["STYLE","SCRIPT"]);function gC(a,...b){let c=new URL("https://lexical.dev/docs/error"),d=new URLSearchParams;for(let c of(d.append("code",a),b))d.append("v",c);throw c.search=d.toString(),Error(`Minified Lexical error #${a}; visit ${c.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function gD(a,b,c){let d=a.getData("application/x-lexical-editor");if(d)try{let a=JSON.parse(d);if(a.namespace===c._config.namespace&&Array.isArray(a.nodes))return gE(c,function(a){let b=[];for(let c=0;c<a.length;c++){let d=dy(a[c],dt()._nodes);cM(d)&&function(a){let b=a.getStyle(),c=fP(b);fO.set(b,c)}(d),b.push(d)}return b}(a.nodes),b)}catch(a){console.error(a)}let e=a.getData("text/html"),f=a.getData("text/plain");if(e&&f!==e)try{let a=(new DOMParser).parseFromString(window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("lexical",{createHTML:a=>a}).createHTML(e):e,"text/html");return gE(c,function(a,b){let c=ea(b)?b.body.childNodes:b.childNodes,d=[],e=[];for(let b of c)if(!gB.has(b.nodeName)){let c=function a(b,c,d,e,f=new Map,g){let h=[];if(gB.has(b.nodeName))return h;let i=null,j=function(a,b){let{nodeName:c}=a,d=b._htmlConversions.get(c.toLowerCase()),e=null;if(void 0!==d)for(let b of d){let c=b(a);null!==c&&(null===e||(e.priority||0)<=(c.priority||0))&&(e=c)}return null!==e?e.conversion:null}(b,c),k=j?j(b):null,l=null;if(null!==k){l=k.after;let a=k.node;if(null!==(i=Array.isArray(a)?a[a.length-1]:a)){for(let[,a]of f)if(!(i=a(i,g)))break;i&&h.push(...Array.isArray(a)?a:[i])}null!=k.forChild&&f.set(b.nodeName,k.forChild)}let m=b.childNodes,n=[],o=(null==i||!eO(i))&&(null!=i&&c6(i)||e);for(let b=0;b<m.length;b++)n.push(...a(m[b],c,d,o,new Map(f),i));return null!=l&&(n=l(n)),eY(b)&&(n=function(a,b,c){let d=a.style.textAlign,e=[],f=[];for(let a=0;a<b.length;a++){let g=b[a];if(c6(g))d&&!g.getFormat()&&g.setFormat(d),e.push(g);else if(f.push(g),a===b.length-1||a<b.length-1&&c6(b[a+1])){let a=c();a.setFormat(d),a.append(...f),e.push(a),f=[]}}return e}(b,n,o?()=>{let a=new dR;return d.push(a),a}:dU)),null==i?n.length>0?h=h.concat(n):eY(b)&&null!=b.nextSibling&&null!=b.previousSibling&&eX(b.nextSibling)&&eX(b.previousSibling)&&(h=h.concat(cu())):dI(i)&&i.append(...n),h}(b,a,e,!1);null!==c&&(d=d.concat(c))}return function(a){for(let b of a)b.getNextSibling()instanceof dR&&b.insertAfter(cu());for(let b of a){for(let a of b.getChildren())b.insertBefore(a);b.remove()}}(e),d}(c,a),b)}catch(a){console.error(a)}let g=f||a.getData("text/uri-list");if(null!=g)if(cW(b)){let a=g.split(/(\r?\n|\t)/);""===a[a.length-1]&&a.pop();for(let b=0;b<a.length;b++){let c=db();if(cW(c)){let d=a[b];"\n"===d||"\r\n"===d?c.insertParagraph():"	"===d?c.insertNodes([cP()]):c.insertText(d)}}}else b.insertRawText(g)}function gE(a,b,c){a.dispatchCommand(a4,{nodes:b,selection:c})||(c.insertNodes(b),function(a){if(cW(a)&&a.isCollapsed()){let b=a.anchor,c=null,d=fx(b,"previous");if(d)if(fd(d))c=d.origin;else for(let a of fr(d,fm(eo(),"next").getFlipped())){if(cM(a.origin)){c=a.origin;break}if(dI(a.origin)&&!a.origin.isInline())break}if(c&&cM(c)){let b=c.getFormat(),d=c.getStyle();a.format===b&&a.style===d||(a.format=b,a.style=d,a.dirty=!0)}}}(c))}let gF=null;async function gG(a,b,c){if(null!==gF)return!1;if(null!==b)return new Promise((d,e)=>{a.update(()=>{d(gH(a,b,c))})});let d=a.getRootElement(),e=a._window||window,f=e.document,g=null;if(null===d||null===g)return!1;let h=f.createElement("span");h.style.cssText="position: fixed; top: -1000px;",h.append(f.createTextNode("#")),d.append(h);let i=new Range;return i.setStart(h,0),i.setEnd(h,1),g.removeAllRanges(),g.addRange(i),new Promise((b,d)=>{let g=a.registerCommand(bG,d=>(f2(d,ClipboardEvent)&&(g(),null!==gF&&(e.clearTimeout(gF),gF=null),b(gH(a,d,c))),!0),4);gF=e.setTimeout(()=>{g(),gF=null,b(!1)},50),f.execCommand("copy"),h.remove()})}function gH(a,b,c){if(void 0===c){let b=(a._window,null),d=db();if(!d||d.isCollapsed()||!b)return!1;let e=b.anchorNode,f=b.focusNode;if(null!==e&&null!==f&&!d3(a,e,f))return!1;c=function(a=db()){let b={"text/plain":a?a.getTextContent():""};if(a){let c=dt();for(let[d,e]of gI){let f=e(c,a);null!==f&&(b[d]=f)}}return b}(d)}b.preventDefault();let d=b.clipboardData;return null!==d&&(function(a,b){for(let[c]of gI)void 0===b[c]&&a.setData(c,"");for(let c in b){let d=b[c];void 0!==d&&a.setData(c,d)}}(d,c),!0)}let gI=[["text/html",function(b,c=db()){return null==c&&gC(166),cW(c)&&c.isCollapsed()||0===c.getNodes().length?"":function(b,c){if("undefined"==typeof document||void 0===a.g.window)throw Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");let d=document.createElement("div"),e=eo().getChildren();for(let a=0;a<e.length;a++)!function a(b,c,d,e=null){let f=null===e||c.isSelected(e),g=dI(c)&&c.excludeFromCopy("html"),h=c;null!==e&&cM(c)&&(h=fU(e,c,"clone"));let i=dI(h)?h.getChildren():[],j=d0(b,h.getType()),{element:k,after:l}=j&&void 0!==j.exportDOM?j.exportDOM(b,h):h.exportDOM(b);if(!k)return!1;let m=document.createDocumentFragment();for(let d=0;d<i.length;d++){let g=i[d],h=a(b,g,m,e);!f&&dI(c)&&h&&c.extractWithChild(g,e,"html")&&(f=!0)}if(f&&!g){if((eU(k)||eW(k))&&k.append(m),d.append(k),l){let a=l.call(h,k);a&&(eW(k)?k.replaceChildren(a):k.replaceWith(a))}}else d.append(m);return f}(b,e[a],d,c);return d.innerHTML}(b,c)}],["application/x-lexical-editor",function(a,b=db()){return null==b&&gC(166),cW(b)&&b.isCollapsed()||0===b.getNodes().length?null:JSON.stringify(function(a,b){let c=[],d=eo().getChildren();for(let e=0;e<d.length;e++)!function a(b,c,d,e=[]){var f;let g,h,i=null===c||d.isSelected(c),j=dI(d)&&d.excludeFromCopy("html"),k=d;null!==c&&cM(k)&&(k=fU(c,k,"clone"));let l=dI(k)?k.getChildren():[],m=(g=(f=k).exportJSON(),h=f.constructor,g.type!==h.getType()&&gC(58,h.name),dI(f)&&(Array.isArray(g.children)||gC(59,h.name)),g);cM(k)&&0===k.getTextContentSize()&&(i=!1);for(let e=0;e<l.length;e++){let f=l[e],g=a(b,c,f,m.children);!i&&dI(d)&&g&&d.extractWithChild(f,c,"clone")&&(i=!0)}if(i&&!j)e.push(m);else if(Array.isArray(m.children))for(let a=0;a<m.children.length;a++){let b=m.children[a];e.push(b)}return i}(a,b,d[e],c);return{namespace:a._config.namespace,nodes:c}}(a,b))}]];function gJ(a,b){if(void 0!==document.caretRangeFromPoint){let c=document.caretRangeFromPoint(a,b);return null===c?null:{node:c.startContainer,offset:c.startOffset}}if("undefined"!==document.caretPositionFromPoint){let c=document.caretPositionFromPoint(a,b);return null===c?null:{node:c.offsetNode,offset:c.offset}}return null}let gK=a2("DRAG_DROP_PASTE_FILE");class gL extends dH{static getType(){return"quote"}static clone(a){return new gL(a.__key)}createDOM(a){let b=document.createElement("blockquote");return f0(b,a.theme.quote),b}updateDOM(a,b){return!1}static importDOM(){return{blockquote:a=>({conversion:gQ,priority:0})}}exportDOM(a){let{element:b}=super.exportDOM(a);if(eU(b)){this.isEmpty()&&b.append(document.createElement("br"));let a=this.getFormatType();a&&(b.style.textAlign=a);let c=this.getDirection();c&&(b.dir=c)}return{element:b}}static importJSON(a){return gM().updateFromJSON(a)}insertNewAfter(a,b){let c=dU(),d=this.getDirection();return c.setDirection(d),this.insertAfter(c,b),c}collapseAtStart(){let a=dU();return this.getChildren().forEach(b=>a.append(b)),this.replace(a),!0}canMergeWhenEmpty(){return!0}}function gM(){return eP(new gL)}class gN extends dH{__tag;static getType(){return"heading"}static clone(a){return new gN(a.__tag,a.__key)}constructor(a,b){super(b),this.__tag=a}getTag(){return this.__tag}setTag(a){let b=this.getWritable();return this.__tag=a,b}createDOM(a){let b=this.__tag,c=document.createElement(b),d=a.theme.heading;return void 0!==d&&f0(c,d[b]),c}updateDOM(a,b,c){return a.__tag!==this.__tag}static importDOM(){return{h1:a=>({conversion:gP,priority:0}),h2:a=>({conversion:gP,priority:0}),h3:a=>({conversion:gP,priority:0}),h4:a=>({conversion:gP,priority:0}),h5:a=>({conversion:gP,priority:0}),h6:a=>({conversion:gP,priority:0}),p:a=>{let b=a.firstChild;return null!==b&&gO(b)?{conversion:()=>({node:null}),priority:3}:null},span:a=>gO(a)?{conversion:a=>({node:gR("h1")}),priority:3}:null}}exportDOM(a){let{element:b}=super.exportDOM(a);if(eU(b)){this.isEmpty()&&b.append(document.createElement("br"));let a=this.getFormatType();a&&(b.style.textAlign=a);let c=this.getDirection();c&&(b.dir=c)}return{element:b}}static importJSON(a){return gR(a.tag).updateFromJSON(a)}updateFromJSON(a){return super.updateFromJSON(a).setTag(a.tag)}exportJSON(){return{...super.exportJSON(),tag:this.getTag()}}insertNewAfter(a,b=!0){let c=a?a.anchor.offset:0,d=this.getLastDescendant(),e=d&&(!a||a.anchor.key!==d.getKey()||c!==d.getTextContentSize())&&a?gR(this.getTag()):dU(),f=this.getDirection();if(e.setDirection(f),this.insertAfter(e,b),0===c&&!this.isEmpty()&&a){let a=dU();a.select(),this.replace(a,!0)}return e}collapseAtStart(){let a=this.isEmpty()?dU():gR(this.getTag());return this.getChildren().forEach(b=>a.append(b)),this.replace(a),!0}extractWithChild(){return!0}}function gO(a){return"span"===a.nodeName.toLowerCase()&&"26pt"===a.style.fontSize}function gP(a){let b=a.nodeName.toLowerCase(),c=null;return"h1"!==b&&"h2"!==b&&"h3"!==b&&"h4"!==b&&"h5"!==b&&"h6"!==b||(c=gR(b),null!==a.style&&(e2(a,c),c.setFormat(a.style.textAlign))),{node:c}}function gQ(a){let b=gM();return null!==a.style&&(b.setFormat(a.style.textAlign),e2(a,b)),{node:b}}function gR(a="h1"){return eP(new gN(a))}function gS(a){let b=null;if(f2(a,DragEvent)?b=a.dataTransfer:f2(a,ClipboardEvent)&&(b=a.clipboardData),null===b)return[!1,[],!1];let c=b.types,d=c.includes("Files"),e=c.includes("text/html")||c.includes("text/plain");return[d,Array.from(b.files),e]}function gT(a){let b=db();if(!cW(b))return!1;let c=new Set,d=b.getNodes();for(let b=0;b<d.length;b++){let e=d[b],f=e.getKey();if(c.has(f))continue;let g=e5(e,a=>dI(a)&&!a.isInline());if(null===g)continue;let h=g.getKey();g.canIndent()&&!c.has(h)&&(c.add(h),a(g))}return c.size>0}function gU(a){for(let b of["lowercase","uppercase","capitalize"])a.hasFormat(b)&&a.toggleFormat(b)}let gV=e.useEffect;function gW({editor:a,ErrorBoundary:b}){return function(a,b){let[c,f]=(0,e.useState)(()=>a.getDecorators());return gV(()=>a.registerDecoratorListener(a=>{(0,gy.flushSync)(()=>{f(a)})}),[a]),(0,e.useEffect)(()=>{f(a.getDecorators())},[a]),(0,e.useMemo)(()=>{let f=[],g=Object.keys(c);for(let h=0;h<g.length;h++){let i=g[h],j=(0,d.jsx)(b,{onError:b=>a._onError(b),children:(0,d.jsx)(e.Suspense,{fallback:null,children:c[i]})}),k=a.getElementByKey(i);null!==k&&f.push((0,gy.createPortal)(j,k,i))}return f},[b,c,a])}(a,b)}function gX({editor:a,ErrorBoundary:b}){return!function(a){let b=gx.maybeFromEditor(a);if(b&&b.hasExtensionByName("@lexical/react/ReactProvider")){for(let a of["@lexical/plain-text","@lexical/rich-text"])b.hasExtensionByName(a)&&function(a,...b){let c=new URL("https://lexical.dev/docs/error"),d=new URLSearchParams;for(let a of(d.append("code",320),b))d.append("v",a);throw c.search=d.toString(),Error(`Minified Lexical error #320; visit ${c.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(0,a);return!0}return!1}(a)?(0,d.jsx)(gW,{editor:a,ErrorBoundary:b}):null}function gY(a){return a.getEditorState().read(gz(a.isComposing()))}function gZ({contentEditable:a,placeholder:b=null,ErrorBoundary:c}){var e;let[f]=X();return gV(()=>{var a;return f_(f_((a=e).registerCommand(a5,a=>{let b=db();return!!cY(b)&&(b.clear(),!0)},0),a.registerCommand(ba,a=>{let b=db();return cW(b)?(b.deleteCharacter(a),!0):!!cY(b)&&(b.deleteNodes(),!0)},0),a.registerCommand(bg,a=>{let b=db();return!!cW(b)&&(b.deleteWord(a),!0)},0),a.registerCommand(bh,a=>{let b=db();return!!cW(b)&&(b.deleteLine(a),!0)},0),a.registerCommand(bd,b=>{let c=db();if("string"==typeof b)null!==c&&c.insertText(b);else{if(null===c)return!1;let d=b.dataTransfer;if(null!=d)gD(d,c,a);else if(cW(c)){let a=b.data;return a&&c.insertText(a),!0}}return!0},0),a.registerCommand(bf,()=>{let a=db();return!!cW(a)&&(a.removeText(),!0)},0),a.registerCommand(bi,a=>{let b=db();return!!cW(b)&&(b.formatText(a),!0)},0),a.registerCommand(bC,a=>{let b=db();if(!cW(b)&&!cY(b))return!1;for(let c of b.getNodes()){let b=e5(c,a=>dI(a)&&!a.isInline());null!==b&&b.setFormat(a)}return!0},0),a.registerCommand(bb,a=>{let b=db();return!!cW(b)&&(b.insertLineBreak(a),!0)},0),a.registerCommand(bc,()=>{let a=db();return!!cW(a)&&(a.insertParagraph(),!0)},0),a.registerCommand(by,()=>{var a;let b;return a=[cP()],null===(b=db()||dc())&&(b=eo().selectEnd()),b.insertNodes(a),!0},0),a.registerCommand(bz,()=>gT(a=>{let b=a.getIndent();a.setIndent(b+1)}),0),a.registerCommand(bA,()=>gT(a=>{let b=a.getIndent();b>0&&a.setIndent(Math.max(0,b-1))}),0),a.registerCommand(bq,a=>{let b=db();if(cY(b)){let c=b.getNodes();if(c.length>0)return a.preventDefault(),c[0].selectPrevious(),!0}else if(cW(b)){let c=eF(b.focus,!0);if(!a.shiftKey&&dL(c)&&!c.isIsolated()&&!c.isInline())return c.selectPrevious(),a.preventDefault(),!0}return!1},0),a.registerCommand(br,a=>{let b=db();if(cY(b)){let c=b.getNodes();if(c.length>0)return a.preventDefault(),c[0].selectNext(0,0),!0}else if(cW(b)){let c;if("root"===(c=b.focus).key&&c.offset===eo().getChildrenSize())return a.preventDefault(),!0;let d=eF(b.focus,!1);if(!a.shiftKey&&dL(d)&&!d.isIsolated()&&!d.isInline())return d.selectNext(),a.preventDefault(),!0}return!1},0),a.registerCommand(bo,a=>{let b=db();if(cY(b)){let c=b.getNodes();if(c.length>0)return a.preventDefault(),fT(c[0])?c[0].selectNext(0,0):c[0].selectPrevious(),!0}if(!cW(b))return!1;if(fX(b,!0)){let c=a.shiftKey;return a.preventDefault(),fZ(b,c,!0),!0}return!1},0),a.registerCommand(bm,a=>{let b=db();if(cY(b)){let c=b.getNodes();if(c.length>0)return a.preventDefault(),fT(c[0])?c[0].selectPrevious():c[0].selectNext(0,0),!0}if(!cW(b))return!1;let c=a.shiftKey;return!!fX(b,!1)&&(a.preventDefault(),fZ(b,c,!1),!0)},0),a.registerCommand(bu,b=>{if(dL(el(b.target)))return!1;let c=db();if(cW(c)){if(function(a){var b;let c;if(!a.isCollapsed())return!1;let{anchor:d}=a;if(0!==d.offset)return!1;let e=d.getNode();if(dN(e))return!1;let f=(c=e5(b=e,a=>dI(a)&&!a.isInline()),dI(c)||function(a,...b){let c=new URL("https://lexical.dev/docs/error"),d=new URLSearchParams;for(let a of(d.append("code",4),b))d.append("v",a);throw c.search=d.toString(),Error(`Minified Lexical error #4; visit ${c.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(0,b.__key),c);return f.getIndent()>0&&(f.is(e)||e.is(f.getFirstDescendant()))}(c))return b.preventDefault(),a.dispatchCommand(bA,void 0)}else if(!cY(c))return!1;return b.preventDefault(),a.dispatchCommand(ba,!0)},0),a.registerCommand(bw,b=>{if(dL(el(b.target)))return!1;let c=db();return!(!cW(c)&&!cY(c))&&(b.preventDefault(),a.dispatchCommand(ba,!1))},0),a.registerCommand(bs,b=>{let c=db();return!!cW(c)&&((gU(c),null!==b&&(b.preventDefault(),b.shiftKey))?a.dispatchCommand(bb,!1):a.dispatchCommand(bc,void 0))},0),a.registerCommand(bv,()=>!!cW(db())&&(a.blur(),!0),0),a.registerCommand(bB,b=>{let[,c]=gS(b);if(c.length>0){let d=gJ(b.clientX,b.clientY);if(null!==d){let{offset:b,node:e}=d,f=el(e);if(null!==f){let a=c8();if(cM(f))a.anchor.set(f.getKey(),b,"text"),a.focus.set(f.getKey(),b,"text");else{let b=f.getParentOrThrow().getKey(),c=f.getIndexWithinParent()+1;a.anchor.set(b,c,"element"),a.focus.set(b,c,"element")}eq(ay(a))}a.dispatchCommand(gK,c)}return b.preventDefault(),!0}return!!cW(db())},0),a.registerCommand(bD,a=>{let[b]=gS(a),c=db();return!(b&&!cW(c))},0),a.registerCommand(bE,a=>{let[b]=gS(a),c=db();if(b&&!cW(c))return!1;let d=gJ(a.clientX,a.clientY);return null!==d&&dL(el(d.node))&&a.preventDefault(),!0},0),a.registerCommand(bI,()=>((function(a){let b=eo();if(cW(void 0)){let a=(void 0).anchor,b=(void 0).focus,c=a.getNode().getTopLevelElementOrThrow().getParentOrThrow();return a.set(c.getKey(),0,"element"),b.set(c.getKey(),c.getChildrenSize(),"element"),ay(void 0)}eq(ay(b.select(0,b.getChildrenSize())))})(),!0),0),a.registerCommand(bG,b=>(gG(a,f2(b,ClipboardEvent)?b:null),!0),0),a.registerCommand(bH,b=>((async function(a,b){await gG(b,f2(a,ClipboardEvent)?a:null),b.update(()=>{let a=db();cW(a)?a.removeText():cY(a)&&a.getNodes().forEach(a=>a.remove())})})(b,a),!0),0),a.registerCommand(be,b=>{let[,c,d]=gS(b);return c.length>0&&!d?(a.dispatchCommand(gK,c),!0):!(eV(b.target)&&d2(b.target))&&null!==db()&&(b.preventDefault(),a.update(()=>{let c=db(),d=f2(b,InputEvent)||f2(b,KeyboardEvent)?null:b.clipboardData;null!=d&&null!==c&&gD(d,c,a)},{tag:"paste"}),!0)},0),a.registerCommand(bt,a=>{let b=db();return cW(b)&&gU(b),!1},0),a.registerCommand(bx,a=>{let b=db();return cW(b)&&gU(b),!1},0)),gA(e))},[e=f]),(0,d.jsxs)(d.Fragment,{children:[a,(0,d.jsx)(g$,{content:b}),(0,d.jsx)(gX,{editor:f,ErrorBoundary:c})]})}function g$({content:a}){let[b]=X(),c=function(a){let[b,c]=(0,e.useState)(()=>gY(a));return gV(()=>{function b(){c(gY(a))}return b(),f_(a.registerUpdateListener(()=>{b()}),a.registerEditableListener(()=>{b()}))},[a]),b}(b),d=function(a){let[b]=X(),c=(0,e.useMemo)(()=>a(b),[b,a]),[d,f]=(0,e.useState)(()=>c.initialValueFn()),g=(0,e.useRef)(d);return fM(()=>{let{initialValueFn:a,subscribe:b}=c,d=a();return g.current!==d&&(g.current=d,f(d)),b(a=>{g.current=a,f(a)})},[c,a]),d}(fN);return c?"function"==typeof a?a(d):a:null}let g_=e.useEffect,g0=(0,e.forwardRef)(function({editor:a,ariaActiveDescendant:b,ariaAutoComplete:c,ariaControls:f,ariaDescribedBy:g,ariaErrorMessage:h,ariaExpanded:i,ariaInvalid:j,ariaLabel:k,ariaLabelledBy:l,ariaMultiline:m,ariaOwns:n,ariaRequired:o,autoCapitalize:p,className:q,id:r,role:s="textbox",spellCheck:t=!0,style:u,tabIndex:v,"data-testid":w,...x},y){let[z,A]=(0,e.useState)(a.isEditable()),B=(0,e.useCallback)(b=>{b&&b.ownerDocument&&b.ownerDocument.defaultView?a.setRootElement(b):a.setRootElement(null)},[a]),C=(0,e.useMemo)(()=>(function(...a){return b=>{for(let c of a)"function"==typeof c?c(b):null!=c&&(c.current=b)}})(y,B),[B,y]);return g_(()=>(A(a.isEditable()),a.registerEditableListener(a=>{A(a)})),[a]),(0,d.jsx)("div",{"aria-activedescendant":z?b:void 0,"aria-autocomplete":z?c:"none","aria-controls":z?f:void 0,"aria-describedby":g,...null!=h?{"aria-errormessage":h}:{},"aria-expanded":z&&"combobox"===s?!!i:void 0,...null!=j?{"aria-invalid":j}:{},"aria-label":k,"aria-labelledby":l,"aria-multiline":m,"aria-owns":z?n:void 0,"aria-readonly":!z||void 0,"aria-required":o,autoCapitalize:p,className:q,contentEditable:z,"data-testid":w,id:r,ref:C,role:s,spellCheck:t,style:u,tabIndex:v,...x})});function g1(a){return a.getEditorState().read(gz(a.isComposing()))}let g2=(0,e.forwardRef)(function(a,b){let{placeholder:c,...e}=a,[f]=X();return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g0,{editor:f,...e,ref:b}),null!=c&&(0,d.jsx)(g3,{editor:f,content:c})]})});function g3({content:a,editor:b}){let c=function(a){let[b,c]=(0,e.useState)(()=>g1(a));return g_(()=>{function b(){c(g1(a))}return b(),f_(a.registerUpdateListener(()=>{b()}),a.registerEditableListener(()=>{b()}))},[a]),b}(b),[f,g]=(0,e.useState)(b.isEditable());if((0,e.useLayoutEffect)(()=>(g(b.isEditable()),b.registerEditableListener(a=>{g(a)})),[b]),!c)return null;let h=null;return"function"==typeof a?h=a(f):null!==a&&(h=a),null===h?null:(0,d.jsx)("div",{"aria-hidden":!0,children:h})}function g4(a){a.undoStack=[],a.redoStack=[],a.current=null}function g5(a,b,c){let d,e,f=(d=Date.now(),e=0,(b,f,g,h,i,j)=>{let k=Date.now();if(j.has(cq))return e=0,d=k,2;let l=function(a,b,c,d,e){if(null===a||0===c.size&&0===d.size&&!e)return 0;let f=b._selection,g=a._selection;if(e)return 1;if(!(cW(f)&&cW(g)&&g.isCollapsed()&&f.isCollapsed()))return 0;let h=function(a,b,c){let d=a._nodeMap,e=[];for(let a of b){let b=d.get(a);void 0!==b&&e.push(b)}for(let[a,b]of c){if(!b)continue;let c=d.get(a);void 0===c||dN(c)||e.push(c)}return e}(b,c,d);if(0===h.length)return 0;if(h.length>1){let c=b._nodeMap,d=c.get(f.anchor.key),e=c.get(g.anchor.key);return d&&e&&!a._nodeMap.has(d.__key)&&cM(d)&&1===d.__text.length&&1===f.anchor.offset?2:0}let i=h[0],j=a._nodeMap.get(i.__key);if(!cM(j)||!cM(i)||j.__mode!==i.__mode)return 0;let k=j.__text,l=i.__text;if(k===l)return 0;let m=f.anchor,n=g.anchor;if(m.key!==n.key||"text"!==m.type)return 0;let o=m.offset,p=n.offset,q=l.length-k.length;return 1===q&&p===o-1?2:-1===q&&p===o+1?3:4*(-1===q&&p===o)}(b,f,h,i,a.isComposing()),m=(()=>{var m;let n,o,p,q,r=null===g||g.editor===a,s=j.has("history-push");if(!s&&r&&j.has(cr))return 0;if(null===b)return 1;let t=f._selection;if(!(h.size>0||i.size>0))return 2*(null===t);let u="number"==typeof c?c:c.peek();return!1===s&&0!==l&&l===e&&k<d+u&&r?0:1!==h.size||(m=Array.from(h)[0],n=b._nodeMap.get(m),o=f._nodeMap.get(m),p=b._selection,q=f._selection,cW(p)&&cW(q)&&"element"===p.anchor.type&&"element"===p.focus.type&&"text"===q.anchor.type&&"text"===q.focus.type||!cM(n)||!cM(o)||n.__parent!==o.__parent||JSON.stringify(b.read(()=>n.exportJSON()))!==JSON.stringify(f.read(()=>o.exportJSON())))?1:0})();return d=k,e=l,m});return f_(a.registerCommand(bj,()=>((function(a,b){let c=b.redoStack,d=b.undoStack;if(0!==d.length){let e=b.current,f=d.pop();null!==e&&(c.push(e),a.dispatchCommand(bL,!0)),0===d.length&&a.dispatchCommand(bM,!1),b.current=f||null,f&&f.editor.setEditorState(f.editorState,{tag:cq})}})(a,b),!0),0),a.registerCommand(bk,()=>((function(a,b){let c=b.redoStack,d=b.undoStack;if(0!==c.length){let e=b.current;null!==e&&(d.push(e),a.dispatchCommand(bM,!0));let f=c.pop();0===c.length&&a.dispatchCommand(bL,!1),b.current=f||null,f&&f.editor.setEditorState(f.editorState,{tag:cq})}})(a,b),!0),0),a.registerCommand(bJ,()=>(g4(b),!1),0),a.registerCommand(bK,()=>(g4(b),a.dispatchCommand(bL,!1),a.dispatchCommand(bM,!1),!0),0),a.registerUpdateListener(({editorState:c,prevEditorState:d,dirtyLeaves:e,dirtyElements:g,tags:h})=>{let i=b.current,j=b.redoStack,k=b.undoStack,l=null===i?null:i.editorState;if(null!==i&&c===l)return;let m=f(d,c,i,e,g,h);if(1===m)0!==j.length&&(b.redoStack=[],a.dispatchCommand(bL,!1)),null!==i&&(k.push({...i}),a.dispatchCommand(bM,!0));else if(2===m)return;b.current={editor:a,editorState:c}}))}function g6(){return{current:null,redoStack:[],undoStack:[]}}function g7({delay:a,externalHistoryState:b}){let[c]=X();return function(a,b,c=1e3){let d=(0,e.useMemo)(()=>b||g6(),[b]);(0,e.useEffect)(()=>g5(a,d,c),[c,a,d])}(c,b,a),null}let g8=new Set(["http:","https:","mailto:","sms:","tel:"]);class g9 extends dH{__url;__target;__rel;__title;static getType(){return"link"}static clone(a){return new g9(a.__url,{rel:a.__rel,target:a.__target,title:a.__title},a.__key)}constructor(a="",b={},c){super(c);const{target:d=null,rel:e=null,title:f=null}=b;this.__url=a,this.__target=d,this.__rel=e,this.__title=f}createDOM(a){let b=document.createElement("a");return this.updateLinkDOM(null,b,a),f0(b,a.theme.link),b}updateLinkDOM(a,b,c){if(eT(b))for(let c of(a&&a.__url===this.__url||(b.href=this.sanitizeUrl(this.__url)),["target","rel","title"])){let d=`__${c}`,e=this[d];a&&a[d]===e||(e?b[c]=e:b.removeAttribute(c))}}updateDOM(a,b,c){return this.updateLinkDOM(a,b,c),!1}static importDOM(){return{a:a=>({conversion:ha,priority:1})}}static importJSON(a){return hb().updateFromJSON(a)}updateFromJSON(a){return super.updateFromJSON(a).setURL(a.url).setRel(a.rel||null).setTarget(a.target||null).setTitle(a.title||null)}sanitizeUrl(a){a=hk(a);try{let b=new URL(hk(a));if(!g8.has(b.protocol))return"about:blank"}catch(a){}return a}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()}}getURL(){return this.getLatest().__url}setURL(a){let b=this.getWritable();return b.__url=a,b}getTarget(){return this.getLatest().__target}setTarget(a){let b=this.getWritable();return b.__target=a,b}getRel(){return this.getLatest().__rel}setRel(a){let b=this.getWritable();return b.__rel=a,b}getTitle(){return this.getLatest().__title}setTitle(a){let b=this.getWritable();return b.__title=a,b}insertNewAfter(a,b=!0){let c=hb(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(c,b),c}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(a,b,c){if(!cW(b))return!1;let d=b.anchor.getNode(),e=b.focus.getNode();return this.isParentOf(d)&&this.isParentOf(e)&&b.getTextContent().length>0}isEmailURI(){return this.__url.startsWith("mailto:")}isWebSiteURI(){return this.__url.startsWith("https://")||this.__url.startsWith("http://")}}function ha(a){let b=null;if(eT(a)){let c=a.textContent;(null!==c&&""!==c||a.children.length>0)&&(b=hb(a.getAttribute("href")||"",{rel:a.getAttribute("rel"),target:a.getAttribute("target"),title:a.getAttribute("title")}))}return{node:b}}function hb(a="",b){return eP(new g9(a,b))}function hc(a){return a instanceof g9}class hd extends g9{__isUnlinked;constructor(a="",b={},c){super(a,b,c),this.__isUnlinked=void 0!==b.isUnlinked&&null!==b.isUnlinked&&b.isUnlinked}static getType(){return"autolink"}static clone(a){return new hd(a.__url,{isUnlinked:a.__isUnlinked,rel:a.__rel,target:a.__target,title:a.__title},a.__key)}getIsUnlinked(){return this.__isUnlinked}setIsUnlinked(a){let b=this.getWritable();return b.__isUnlinked=a,b}createDOM(a){return this.__isUnlinked?document.createElement("span"):super.createDOM(a)}updateDOM(a,b,c){return super.updateDOM(a,b,c)||a.__isUnlinked!==this.__isUnlinked}static importJSON(a){return he().updateFromJSON(a)}updateFromJSON(a){return super.updateFromJSON(a).setIsUnlinked(a.isUnlinked||!1)}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),isUnlinked:this.__isUnlinked}}insertNewAfter(a,b=!0){let c=this.getParentOrThrow().insertNewAfter(a,b);if(dI(c)){let a=he(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,target:this.__target,title:this.__title});return c.append(a),a}return null}}function he(a="",b){return eP(new hd(a,b))}function hf(a){return a instanceof hd}let hg=a2("TOGGLE_LINK_COMMAND");function hh(a,b){if("element"===a.type){let c=a.getNode();return dI(c)||function(a,...b){let c=new URL("https://lexical.dev/docs/error"),d=new URLSearchParams;for(let a of(d.append("code",252),b))d.append("v",a);throw c.search=d.toString(),Error(`Minified Lexical error #252; visit ${c.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(0),c.getChildren()[a.offset+b]||null}return null}function hi(a,b={}){let c;if(a&&"object"==typeof a){let{url:d,...e}=a;c=d,b={...e,...b}}else c=a;let{target:d,title:e}=b,f=void 0===b.rel?"noreferrer":b.rel,g=db();if(null===g||!cW(g)&&!cY(g))return;if(cY(g)){let a=g.getNodes();if(0===a.length)return;return void a.forEach(a=>{if(null===c){let b=e5(a,a=>!hf(a)&&hc(a));b&&(b.insertBefore(a),0===b.getChildren().length&&b.remove())}else{let b=e5(a,a=>!hf(a)&&hc(a));if(b)b.setURL(c),void 0!==d&&b.setTarget(d),void 0!==f&&b.setRel(f);else{let b=hb(c,{rel:f,target:d});a.insertBefore(b),b.append(a)}}})}let h=g.extract();if(null===c){let a=new Set;return void h.forEach(b=>{let c=b.getParent();if(hc(c)&&!hf(c)){let b=c.getKey();if(a.has(b))return;!function(a,b){let c=new Set(b.filter(b=>a.isParentOf(b)).map(a=>a.getKey())),d=a.getChildren(),e=d.filter(a=>c.has(a.getKey()));if(e.length===d.length)return d.forEach(b=>a.insertBefore(b)),a.remove();let f=d.findIndex(a=>c.has(a.getKey())),g=d.findLastIndex(a=>c.has(a.getKey())),h=g===d.length-1;if(0===f)e.forEach(b=>a.insertBefore(b));else if(h)for(let b=e.length-1;b>=0;b--)a.insertAfter(e[b]);else{for(let b=e.length-1;b>=0;b--)a.insertAfter(e[b]);let b=d.slice(g+1);if(b.length>0){let c=hb(a.getURL(),{rel:a.getRel(),target:a.getTarget(),title:a.getTitle()});e[e.length-1].insertAfter(c),b.forEach(a=>c.append(a))}}}(c,h),a.add(b)}})}let i=new Set,j=a=>{i.has(a.getKey())||(i.add(a.getKey()),a.setURL(c),void 0!==d&&a.setTarget(d),void 0!==f&&a.setRel(f),void 0!==e&&a.setTitle(e))};if(1===h.length){let a=e5(h[0],hc);if(null!==a)return j(a)}!function(a){let b=db();if(!cW(b))return a();let c=ay(b),d=c.isBackward(),e=hh(c.anchor,d?-1:0),f=hh(c.focus,d?0:-1);if(a(),e||f){let a=db();if(cW(a)){let b=a.clone();if(e){let a=e.getParent();a&&b.anchor.set(a.getKey(),e.getIndexWithinParent()+ +!!d,"element")}if(f){let a=f.getParent();a&&b.focus.set(a.getKey(),f.getIndexWithinParent()+ +!d,"element")}eq(ay(b))}}}(()=>{let a=null;for(let b of h){if(!b.isAttached())continue;let g=e5(b,hc);if(g){j(g);continue}if(dI(b)){if(!b.isInline())continue;if(hc(b)){if(!(hf(b)||null!==a&&a.getParentOrThrow().isParentOf(b))){j(b),a=b;continue}for(let a of b.getChildren())b.insertBefore(a);b.remove();continue}}let h=b.getPreviousSibling();hc(h)&&h.is(a)?h.append(b):(a=hb(c,{rel:f,target:d,title:e}),b.insertAfter(a),a.append(b))}})}let hj=/^\+?[0-9\s()-]{5,}$/;function hk(a){return a.match(/^[a-z][a-z0-9+.-]*:/i)||a.match(/^[/#.]/)?a:a.includes("@")?`mailto:${a}`:hj.test(a)?`tel:${a}`:`https://${a}`}function hl(a,b){return f_(gk(()=>a.registerCommand(hg,a=>{let c=b.validateUrl.peek(),d=b.attributes.peek();if(null===a)return hi(null),!0;if("string"==typeof a)return!(void 0!==c&&!c(a))&&(hi(a,d),!0);{let{url:b,target:c,rel:e,title:f}=a;return hi(b,{...d,rel:e,target:c,title:f}),!0}},1)),gk(()=>{let c=b.validateUrl.value;if(!c)return;let d=b.attributes.value;return a.registerCommand(be,b=>{let e=db();if(!cW(e)||e.isCollapsed()||!f2(b,ClipboardEvent)||null===b.clipboardData)return!1;let f=b.clipboardData.getData("text");return!!c(f)&&!e.getNodes().some(a=>dI(a))&&(a.dispatchCommand(hg,{...d,url:f}),b.preventDefault(),!0)},1)}))}function hm({validateUrl:a,attributes:b}){let[c]=X();return(0,e.useEffect)(()=>{if(!c.hasNodes([g9]))throw Error("LinkPlugin: LinkNode not registered on editor")}),(0,e.useEffect)(()=>hl(c,gl({attributes:b,validateUrl:a})),[c,a,b]),null}function hn(a,...b){let c=new URL("https://lexical.dev/docs/error"),d=new URLSearchParams;for(let c of(d.append("code",a),b))d.append("v",c);throw c.search=d.toString(),Error(`Minified Lexical error #${a}; visit ${c.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function ho(a){let b=1,c=a.getParent();for(;null!=c;){if(hD(c)){let a=c.getParent();if(hK(a)){b++,c=a.getParent();continue}hn(40)}break}return b}function hp(a){let b=a.getParent();hK(b)||hn(40);let c=b;for(;null!==c;)hK(c=c.getParent())&&(b=c);return b}function hq(a){return hD(a)&&hK(a.getFirstChild())}function hr(a){return hC().append(a)}function hs(a,b){return hD(a)&&(0===b.length||1===b.length&&a.is(b[0])&&0===a.getChildrenSize())}function ht(a){let b=db();if(null!==b){let c=b.getNodes();if(cW(b)){let d=b.getStartEndPoints();null===d&&hn(143);let[e]=d,f=e.getNode(),g=f.getParent();if(eO(f)){let a=f.getFirstChild();if(a)c=a.selectStart().getNodes();else{let a=dU();f.append(a),c=a.select().getNodes()}}else if(hs(f,c)){let b=hJ(a);if(eO(g)){f.replace(b);let a=hC();dI(f)&&(a.setFormat(f.getFormatType()),a.setIndent(f.getIndent())),b.append(a)}else if(hD(f)){let a=f.getParentOrThrow();hu(b,a.getChildren()),a.replace(b)}return}}let d=new Set;for(let b=0;b<c.length;b++){let e=c[b];if(dI(e)&&e.isEmpty()&&!hD(e)&&!d.has(e.getKey())){hv(e,a);continue}let f=ed(e)?e.getParent():hD(e)&&e.isEmpty()?e:null;for(;null!=f;){let b=f.getKey();if(hK(f)){if(!d.has(b)){let c=hJ(a);hu(c,f.getChildren()),f.replace(c),d.add(b)}break}{let c=f.getParent();if(eO(c)&&!d.has(b)){d.add(b),hv(f,a);break}f=c}}}}}function hu(a,b){a.splice(a.getChildrenSize(),0,b)}function hv(a,b){let c;if(hK(a))return a;let d=a.getPreviousSibling(),e=a.getNextSibling(),f=hC();if(hu(f,a.getChildren()),hK(d)&&b===d.getListType())d.append(f),hK(e)&&b===e.getListType()&&(hu(d,e.getChildren()),e.remove()),c=d;else if(hK(e)&&b===e.getListType())e.getFirstChildOrThrow().insertBefore(f),c=e;else{let d=hJ(b);d.append(f),a.replace(d),c=d}return f.setFormat(a.getFormatType()),f.setIndent(a.getIndent()),a.remove(),c}function hw(a,b){let c=a.getLastChild(),d=b.getFirstChild();c&&d&&hq(c)&&hq(d)&&(hw(c.getFirstChild(),d.getFirstChild()),d.remove());let e=b.getChildren();e.length>0&&a.append(...e),b.remove()}function hx(a){let b="check"!==a.getListType(),c=a.getStart();for(let d of a.getChildren())hD(d)&&(d.getValue()!==c&&d.setValue(c),b&&null!=d.getLatest().__checked&&d.setChecked(void 0),hK(d.getFirstChild())||c++)}function hy(...a){let b=[];for(let c of a)if(c&&"string"==typeof c)for(let[a]of c.matchAll(/\S+/g))b.push(a);return b}class hz extends dH{__value;__checked;$config(){return this.config("listitem",{$transform:a=>{if(null==a.__checked)return;let b=a.getParent();hK(b)&&"check"!==b.getListType()&&null!=a.getChecked()&&a.setChecked(void 0)},extends:dH,importDOM:{li:()=>({conversion:hA,priority:0})}})}constructor(a=1,b,c){super(c),this.__value=void 0===a?1:a,this.__checked=b}afterCloneFrom(a){super.afterCloneFrom(a),this.__value=a.__value,this.__checked=a.__checked}createDOM(a){let b=document.createElement("li");return this.updateListItemDOM(null,b,a),b}updateListItemDOM(a,b,c){let d;!hK(d=this.getParent())||"check"!==d.getListType()||hK(this.getFirstChild())?(b.removeAttribute("role"),b.removeAttribute("tabIndex"),b.removeAttribute("aria-checked")):(b.setAttribute("role","checkbox"),b.setAttribute("tabIndex","-1"),a&&this.__checked===a.__checked||b.setAttribute("aria-checked",this.getChecked()?"true":"false")),b.value=this.__value,function(a,b,c){let d,e=[],f=[],g=b.list,h=g?g.listitem:void 0;if(g&&g.nested&&(d=g.nested.listitem),void 0!==h&&e.push(...hy(h)),g){let a=c.getParent(),b=hK(a)&&"check"===a.getListType(),d=c.getChecked();b&&!d||f.push(g.listitemUnchecked),b&&d||f.push(g.listitemChecked),b&&e.push(d?g.listitemChecked:g.listitemUnchecked)}if(void 0!==d){let a=hy(d);c.getChildren().some(a=>hK(a))?e.push(...a):f.push(...a)}f.length>0&&f1(a,...f),e.length>0&&f0(a,...e)}(b,c.theme,this);let e=a?a.__style:"",f=this.__style;e!==f&&(""===f?b.removeAttribute("style"):b.style.cssText=f),function(a,b,c){let d=fQ(b.__textStyle);for(let b in d)a.style.setProperty(`--listitem-marker-${b}`,d[b]);if(c)for(let b in fQ(c.__textStyle))b in d||a.style.removeProperty(`--listitem-marker-${b}`)}(b,this,a)}updateDOM(a,b,c){return this.updateListItemDOM(a,b,c),!1}updateFromJSON(a){return super.updateFromJSON(a).setValue(a.value).setChecked(a.checked)}exportDOM(a){let b=this.createDOM(a._config),c=this.getFormatType();c&&(b.style.textAlign=c);let d=this.getDirection();return d&&(b.dir=d),{element:b}}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),value:this.getValue()}}append(...a){for(let b=0;b<a.length;b++){let c=a[b];if(dI(c)&&this.canMergeWith(c)){let a=c.getChildren();this.append(...a),c.remove()}else super.append(c)}return this}replace(a,b){if(hD(a))return super.replace(a);this.setIndent(0);let c=this.getParentOrThrow();if(!hK(c))return a;if(c.__first===this.getKey())c.insertBefore(a);else if(c.__last===this.getKey())c.insertAfter(a);else{let b=hJ(c.getListType()),d=this.getNextSibling();for(;d;){let a=d;d=d.getNextSibling(),b.append(a)}c.insertAfter(a),a.insertAfter(b)}return b&&(dI(a)||hn(139),this.getChildren().forEach(b=>{a.append(b)})),this.remove(),0===c.getChildrenSize()&&c.remove(),a}insertAfter(a,b=!0){let c=this.getParentOrThrow();if(hK(c)||hn(39),hD(a))return super.insertAfter(a,b);let d=this.getNextSiblings();if(c.insertAfter(a,b),0!==d.length){let e=hJ(c.getListType());d.forEach(a=>e.append(a)),a.insertAfter(e,b)}return a}remove(a){let b=this.getPreviousSibling(),c=this.getNextSibling();super.remove(a),b&&c&&hq(b)&&hq(c)&&(hw(b.getFirstChild(),c.getFirstChild()),c.remove())}insertNewAfter(a,b=!0){let c=hC().updateFromJSON(this.exportJSON()).setChecked(!this.getChecked()&&void 0);return this.insertAfter(c,b),c}collapseAtStart(a){let b=dU();this.getChildren().forEach(a=>b.append(a));let c=this.getParentOrThrow(),d=c.getParentOrThrow(),e=hD(d);if(1===c.getChildrenSize())if(e)c.remove(),d.select();else{c.insertBefore(b),c.remove();let d=a.anchor,e=a.focus,f=b.getKey();"element"===d.type&&d.getNode().is(this)&&d.set(f,d.offset,"element"),"element"===e.type&&e.getNode().is(this)&&e.set(f,e.offset,"element")}else c.insertBefore(b),this.remove();return!0}getValue(){return this.getLatest().__value}setValue(a){let b=this.getWritable();return b.__value=a,b}getChecked(){let a,b=this.getLatest(),c=this.getParent();return hK(c)&&(a=c.getListType()),"check"===a?!!b.__checked:void 0}setChecked(a){let b=this.getWritable();return b.__checked=a,b}toggleChecked(){let a=this.getWritable();return a.setChecked(!a.__checked)}getIndent(){let a=this.getParent();if(null===a||!this.isAttached())return this.getLatest().__indent;let b=a.getParentOrThrow(),c=0;for(;hD(b);)b=b.getParentOrThrow().getParentOrThrow(),c++;return c}setIndent(a){"number"!=typeof a&&hn(117),(a=Math.floor(a))>=0||hn(199);let b=this.getIndent();for(;b!==a;)b<a?(function(a){let b=new Set;if(hq(a)||b.has(a.getKey()))return;let c=a.getParent(),d=a.getNextSibling(),e=a.getPreviousSibling();if(hq(d)&&hq(e)){let c=e.getFirstChild();if(hK(c)){c.append(a);let e=d.getFirstChild();hK(e)&&(hu(c,e.getChildren()),d.remove(),b.add(d.getKey()))}}else if(hq(d)){let b=d.getFirstChild();if(hK(b)){let c=b.getFirstChild();null!==c&&c.insertBefore(a)}}else if(hq(e)){let b=e.getFirstChild();hK(b)&&b.append(a)}else if(hK(c)){let b=hC().setTextFormat(a.getTextFormat()).setTextStyle(a.getTextStyle()),f=hJ(c.getListType()).setTextFormat(c.getTextFormat()).setTextStyle(c.getTextStyle());b.append(f),f.append(a),e?e.insertAfter(b):d?d.insertBefore(b):c.append(b)}}(this),b++):(function(a){if(hq(a))return;let b=a.getParent(),c=b?b.getParent():void 0;if(hK(c?c.getParent():void 0)&&hD(c)&&hK(b)){let d=b?b.getFirstChild():void 0,e=b?b.getLastChild():void 0;if(a.is(d))c.insertBefore(a),b.isEmpty()&&c.remove();else if(a.is(e))c.insertAfter(a),b.isEmpty()&&c.remove();else{let d=b.getListType(),e=hC(),f=hJ(d);e.append(f),a.getPreviousSiblings().forEach(a=>f.append(a));let g=hC(),h=hJ(d);g.append(h),hu(h,a.getNextSiblings()),c.insertBefore(e),c.insertAfter(g),c.replace(a)}}}(this),b--);return this}canInsertAfter(a){return hD(a)}canReplaceWith(a){return hD(a)}canMergeWith(a){return hD(a)||dV(a)}extractWithChild(a,b){if(!cW(b))return!1;let c=b.anchor.getNode(),d=b.focus.getNode();return this.isParentOf(c)&&this.isParentOf(d)&&this.getTextContent().length===b.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return hJ("bullet")}canMergeWhenEmpty(){return!0}}function hA(a){if(a.classList.contains("task-list-item")){for(let b of a.children)if("INPUT"===b.tagName)return hB(b)}if(a.classList.contains("joplin-checkbox")){for(let b of a.children)if(b.classList.contains("checkbox-wrapper")&&b.children.length>0&&"INPUT"===b.children[0].tagName)return hB(b.children[0])}let b=a.getAttribute("aria-checked");return{node:hC("true"===b||"false"!==b&&void 0)}}function hB(a){return"checkbox"!==a.getAttribute("type")?{node:null}:{node:hC(a.hasAttribute("checked"))}}function hC(a){return eP(new hz(void 0,a))}function hD(a){return a instanceof hz}class hE extends dH{__tag;__start;__listType;$config(){return this.config("list",{$transform:a=>{let b;hK(b=a.getNextSibling())&&a.getListType()===b.getListType()&&hw(a,b),hx(a)},extends:dH,importDOM:{ol:()=>({conversion:hH,priority:0}),ul:()=>({conversion:hH,priority:0})}})}constructor(a="number",b=1,c){super(c);const d=hI[a]||a;this.__listType=d,this.__tag="number"===d?"ol":"ul",this.__start=b}afterCloneFrom(a){super.afterCloneFrom(a),this.__listType=a.__listType,this.__tag=a.__tag,this.__start=a.__start}getTag(){return this.getLatest().__tag}setListType(a){let b=this.getWritable();return b.__listType=a,b.__tag="number"===a?"ol":"ul",b}getListType(){return this.getLatest().__listType}getStart(){return this.getLatest().__start}setStart(a){let b=this.getWritable();return b.__start=a,b}createDOM(a,b){let c=this.__tag,d=document.createElement(c);return 1!==this.__start&&d.setAttribute("start",String(this.__start)),d.__lexicalListType=this.__listType,hF(d,a.theme,this),d}updateDOM(a,b,c){return a.__tag!==this.__tag||a.__listType!==this.__listType||(hF(b,c.theme,this),!1)}updateFromJSON(a){return super.updateFromJSON(a).setListType(a.listType).setStart(a.start)}exportDOM(a){let b=this.createDOM(a._config,a);return eU(b)&&(1!==this.__start&&b.setAttribute("start",String(this.__start)),"check"===this.__listType&&b.setAttribute("__lexicalListType","check")),{element:b}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag()}}canBeEmpty(){return!1}canIndent(){return!1}splice(a,b,c){let d=c;for(let a=0;a<c.length;a++){let b=c[a];hD(b)||(d===c&&(d=[...c]),d[a]=hC().append(!dI(b)||hK(b)||b.isInline()?b:cL(b.getTextContent())))}return super.splice(a,b,d)}extractWithChild(a){return hD(a)}}function hF(a,b,c){let d=[],e=[],f=b.list;if(void 0!==f){let a,b=f[`${c.__tag}Depth`]||[],g=ho(c)-1,h=g%b.length,i=b[h],j=f[c.__tag],k=f.nested,l=f.checklist;if(void 0!==k&&k.list&&(a=k.list),void 0!==j&&d.push(j),void 0!==l&&"check"===c.__listType&&d.push(l),void 0!==i){d.push(...hy(i));for(let a=0;a<b.length;a++)a!==h&&e.push(c.__tag+a)}if(void 0!==a){let b=hy(a);g>1?d.push(...b):e.push(...b)}}e.length>0&&f1(a,...e),d.length>0&&f0(a,...d)}function hG(a){let b=[];for(let c=0;c<a.length;c++){let d=a[c];if(hD(d)){b.push(d);let a=d.getChildren();a.length>1&&a.forEach(a=>{hK(a)&&b.push(hr(a))})}else b.push(hr(d))}return b}function hH(a){let b=a.nodeName.toLowerCase(),c=null;return"ol"===b?c=hJ("number",a.start):"ul"===b&&(c=!function(a){if("check"===a.getAttribute("__lexicallisttype")||a.classList.contains("contains-task-list")||"1"===a.getAttribute("data-is-checklist"))return!0;for(let b of a.childNodes)if(eU(b)&&b.hasAttribute("aria-checked"))return!0;return!1}(a)?hJ("bullet"):hJ("check")),{after:hG,node:c}}let hI={ol:"number",ul:"bullet"};function hJ(a="number",b=1){return eP(new hE(a,b))}function hK(a){return a instanceof hE}a2("INSERT_CHECK_LIST_COMMAND");let hL=a2("UPDATE_LIST_START_COMMAND"),hM=a2("INSERT_UNORDERED_LIST_COMMAND"),hN=a2("INSERT_ORDERED_LIST_COMMAND"),hO=a2("REMOVE_LIST_COMMAND");function hP({hasStrictIndent:a=!1}){let[b]=X();return(0,e.useEffect)(()=>{if(!b.hasNodes([hE,hz]))throw Error("ListPlugin: ListNode and/or ListItemNode not registered on editor")},[b]),(0,e.useEffect)(()=>{if(a){var c;let a;return c=b,a=a=>{let b=a.getParent();if(hK(a.getFirstChild())||!hK(b))return;let c=e5(a,a=>hD(a)&&hK(a.getParent())&&hD(a.getPreviousSibling()));if(null===c&&a.getIndent()>0)a.setIndent(0);else if(hD(c)){let d=c.getPreviousSibling();if(hD(d)){let c=(function(a){let b=a,c=b.getFirstChild();for(;hK(c);){let a=c.getLastChild();if(!hD(a))break;c=(b=a).getFirstChild()}return b})(d).getParent();if(hK(c)){let d=ho(c);d+1<ho(b)&&a.setIndent(d)}}}},c.registerNodeTransform(hE,b=>{let c=[b];for(;c.length>0;){let b=c.shift();if(hK(b)){for(let d of b.getChildren())if(hD(d)){a(d);let b=d.getFirstChild();hK(b)&&c.push(b)}}}})}},[b,a]),(0,e.useEffect)(()=>{var a;return f_((a=b).registerCommand(hN,()=>(ht("number"),!0),1),a.registerCommand(hL,a=>{let{listNodeKey:b,newStart:c}=a,d=ei(b);return!!hK(d)&&("number"===d.getListType()&&(d.setStart(c),hx(d)),!0)},1),a.registerCommand(hM,()=>(ht("bullet"),!0),1),a.registerCommand(hO,()=>((function(){let a=db();if(cW(a)){let b=new Set,c=a.getNodes(),d=a.anchor.getNode();if(hs(d,c))b.add(hp(d));else for(let a=0;a<c.length;a++){let d=c[a];if(ed(d)){let a=function(a,b){let c=a;for(;null!=c;){if(c instanceof b)return c;c=c.getParent()}return null}(d,hz);null!=a&&b.add(hp(a))}}for(let c of b){let b=c;for(let d of function a(b){let c=[],d=b.getChildren().filter(hD);for(let b=0;b<d.length;b++){let e=d[b],f=e.getFirstChild();hK(f)?c=c.concat(a(f)):c.push(e)}return c}(c)){let c=dU().setTextStyle(a.style).setTextFormat(a.format);hu(c,d.getChildren()),b.insertAfter(c),b=c,d.__key===a.anchor.key&&fy(a.anchor,fE(fm(c,"next"))),d.__key===a.focus.key&&fy(a.focus,fE(fm(c,"next"))),d.remove()}c.remove()}}})(),!0),1),a.registerCommand(bc,()=>(function(){let a,b=db();if(!cW(b)||!b.isCollapsed())return!1;let c=b.anchor.getNode();if(!hD(c)||0!==c.getChildrenSize())return!1;let d=hp(c),e=c.getParent();hK(e)||hn(40);let f=e.getParent();if(eO(f))a=dU(),d.insertAfter(a);else{if(!hD(f))return!1;a=hC(),f.insertAfter(a)}a.setTextStyle(b.style).setTextFormat(b.format).select();let g=c.getNextSiblings();if(g.length>0){let b=hJ(e.getListType());if(hD(a)){let c=hC();c.append(b),a.insertAfter(c)}else a.insertAfter(b);b.append(...g)}return function(a){let b=a;for(;null==b.getNextSibling()&&null==b.getPreviousSibling();){let a=b.getParent();if(null==a||!hD(a)&&!hK(a))break;b=a}b.remove()}(c),!0})(),1),a.registerNodeTransform(hz,a=>{let b=a.getFirstChild();if(b){if(cM(b)){let c=b.getStyle(),d=b.getFormat();a.getTextStyle()!==c&&a.setTextStyle(c),a.getTextFormat()!==d&&a.setTextFormat(d)}}else{let b=db();cW(b)&&(b.style!==a.getTextStyle()||b.format!==a.getTextFormat())&&b.isCollapsed()&&a.is(b.anchor.getNode())&&a.setTextStyle(b.style).setTextFormat(b.format)}}),a.registerNodeTransform(cD,a=>{let b=a.getParent();if(hD(b)&&a.is(b.getFirstChild())){let c=a.getStyle(),d=a.getFormat();c===b.getTextStyle()&&d===b.getTextFormat()||b.setTextStyle(c).setTextFormat(d)}}))},[b]),null}let hQ=(0,p.default)("bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]),hR=(0,p.default)("italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]),hS=(0,p.default)("underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]),hT=(0,p.default)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]),hU=(0,p.default)("list-ordered",[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]]),hV=(0,p.default)("quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]),hW=(0,p.default)("heading-1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]),hX=(0,p.default)("heading-2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]),hY=(0,p.default)("heading-3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);var hZ=a.i(24259),h$=a.i(99097);function h_(){let[a]=X(),[b,c]=e.useState(!1),[f,i]=e.useState(!1),[j,k]=e.useState(!1),l=e.useCallback(()=>{let a=db();cW(a)&&(c(a.hasFormat("bold")),i(a.hasFormat("italic")),k(a.hasFormat("underline")))},[]);e.useEffect(()=>a.registerUpdateListener(({editorState:a})=>{a.read(()=>{l()})}),[a,l]);let m=b=>{a.update(()=>{let a=db();if(cW(a)){let c=gR(b);a.insertNodes([c])}})},[o,p]=e.useState(!1),[q,r]=e.useState(""),[s,t]=e.useState("");return(0,d.jsxs)("div",{className:"flex items-center gap-1 border-b p-2",children:[(0,d.jsx)(n.Button,{variant:"ghost",size:"icon",onClick:()=>a.dispatchCommand(bi,"bold"),className:b?"bg-muted":"",children:(0,d.jsx)(hQ,{className:"size-4"})}),(0,d.jsx)(n.Button,{variant:"ghost",size:"icon",onClick:()=>a.dispatchCommand(bi,"italic"),className:f?"bg-muted":"",children:(0,d.jsx)(hR,{className:"size-4"})}),(0,d.jsx)(n.Button,{variant:"ghost",size:"icon",onClick:()=>a.dispatchCommand(bi,"underline"),className:j?"bg-muted":"",children:(0,d.jsx)(hS,{className:"size-4"})}),(0,d.jsx)("div",{className:"mx-1 h-6 w-px bg-border"}),(0,d.jsx)(n.Button,{variant:"ghost",size:"icon",onClick:()=>m("h1"),title:"Heading 1",children:(0,d.jsx)(hW,{className:"size-4"})}),(0,d.jsx)(n.Button,{variant:"ghost",size:"icon",onClick:()=>m("h2"),title:"Heading 2",children:(0,d.jsx)(hX,{className:"size-4"})}),(0,d.jsx)(n.Button,{variant:"ghost",size:"icon",onClick:()=>m("h3"),title:"Heading 3",children:(0,d.jsx)(hY,{className:"size-4"})}),(0,d.jsx)("div",{className:"mx-1 h-6 w-px bg-border"}),(0,d.jsx)(n.Button,{variant:"ghost",size:"icon",onClick:()=>a.dispatchCommand(hM,void 0),title:"Bullet List",children:(0,d.jsx)(hT,{className:"size-4"})}),(0,d.jsx)(n.Button,{variant:"ghost",size:"icon",onClick:()=>a.dispatchCommand(hN,void 0),title:"Numbered List",children:(0,d.jsx)(hU,{className:"size-4"})}),(0,d.jsx)(n.Button,{variant:"ghost",size:"icon",onClick:()=>{a.update(()=>{let a=db();if(cW(a)){let b=gM();a.insertNodes([b])}})},title:"Quote",children:(0,d.jsx)(hV,{className:"size-4"})}),(0,d.jsx)("div",{className:"mx-1 h-6 w-px bg-border"}),(0,d.jsxs)(P.Dialog,{open:o,onOpenChange:p,children:[(0,d.jsx)(P.DialogTrigger,{asChild:!0,children:(0,d.jsx)(n.Button,{variant:"ghost",size:"icon",title:"Insert Link",children:(0,d.jsx)(hZ.Link,{className:"size-4"})})}),(0,d.jsxs)(P.DialogContent,{children:[(0,d.jsx)(P.DialogHeader,{children:(0,d.jsx)(P.DialogTitle,{children:"Insert Link"})}),(0,d.jsxs)("div",{className:"space-y-4 py-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(h.Label,{htmlFor:"link-url",children:"URL"}),(0,d.jsx)(g.Input,{id:"link-url",type:"url",placeholder:"https://example.com",value:q,onChange:a=>r(a.target.value)})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(h.Label,{htmlFor:"link-text",children:"Link Text (optional)"}),(0,d.jsx)(g.Input,{id:"link-text",placeholder:"Link text",value:s,onChange:a=>t(a.target.value)})]}),(0,d.jsx)(n.Button,{onClick:()=>{a.update(()=>{let b=db();if(cW(b))if(b.isCollapsed()){let a=hb(q||"https://",{target:"_blank"});dU(),b.insertNodes([a])}else{let b=q||"https://";a.dispatchCommand(hg,b)}p(!1),r(""),t("")})},className:"w-full",children:"Insert Link"})]})]})]}),(0,d.jsx)(n.Button,{variant:"ghost",size:"icon",onClick:()=>{a.update(()=>{let a=eo(),b=dU();a.append(b);let c=dU();c.setFormat("center"),a.append(c)})},title:"Divider",children:(0,d.jsx)(h$.Minus,{className:"size-4"})})]})}let h0={namespace:"ProsFinEditor",theme:{paragraph:"mb-2",heading:{h1:"text-4xl font-bold mb-4",h2:"text-3xl font-bold mb-3",h3:"text-2xl font-bold mb-2"},quote:"border-l-4 border-gray-300 pl-4 italic my-4",list:{nested:{listitem:"ml-4"},ol:"list-decimal ml-6 my-2",ul:"list-disc ml-6 my-2",listitem:"my-1"},link:"text-blue-600 underline hover:text-blue-800",text:{bold:"font-bold",italic:"italic",underline:"underline"}},nodes:[gN,gL,hE,hz,g9],onError:a=>{console.error("Lexical error:",a)}};function h1({placeholder:a}){let b=a||"Start writing...";return(0,d.jsx)(g2,{className:"min-h-[600px] outline-none prose prose-lg max-w-none","aria-placeholder":b,placeholder:(0,d.jsx)("div",{className:"absolute top-0 left-0 text-muted-foreground pointer-events-none",children:b})})}function h2({onChange:a}){let[b]=X();return e.useEffect(()=>b.registerUpdateListener(({editorState:b})=>{b.read(()=>{let c=b.toJSON();a?.(c)})}),[b,a]),null}function h3({initialContent:a}){let[b]=X(),[c,d]=e.useState(!1);return e.useEffect(()=>{if(a&&!c&&b)try{let c=b.parseEditorState(a);b.setEditorState(c),d(!0)}catch(a){console.error("Failed to parse initial content:",a)}},[b,a,c]),null}function h4({initialContent:a,onChange:b,placeholder:c="Start writing...",className:e}){return(0,d.jsx)(fL,{initialConfig:h0,children:(0,d.jsxs)("div",{className:`flex flex-col border rounded-lg ${e}`,children:[(0,d.jsx)(h_,{}),(0,d.jsxs)("div",{className:"p-4",children:[(0,d.jsx)(gZ,{contentEditable:(0,d.jsx)(h1,{placeholder:c}),placeholder:null,ErrorBoundary:({children:a})=>(0,d.jsx)(d.Fragment,{children:a})}),(0,d.jsx)(g7,{}),(0,d.jsx)(hm,{}),(0,d.jsx)(hP,{}),(0,d.jsx)(h2,{onChange:b}),a&&(0,d.jsx)(h3,{initialContent:a})]})]})})}function h5({content:a,onChange:b}){return(0,d.jsx)("div",{className:"space-y-4",children:(0,d.jsx)(h4,{initialContent:a,onChange:b,placeholder:"Start writing your post...",className:"min-h-[600px]"})})}function h6({params:b}){let{slug:c}=(0,e.use)(b),[f,g]=e.useState(null),[h,i]=e.useState(!0),[j,k]=e.useState(null);e.useEffect(()=>{if("new"===c){i(!1),k({title:"",slug:"",bucket:"insights",excerpt:"",cover:"",tags:[],content:{root:{children:[],direction:"ltr",format:"",indent:0,type:"root",version:1}},status:"draft"});return}(async()=>{try{let{listPosts:b}=await a.A(80439),d=(await b()).find(a=>a.slug===c);if(d){let{getPostById:b}=await a.A(80439),c=await b(d.id);g(c),c&&k({title:c.title,slug:c.slug,bucket:c.bucket,excerpt:c.excerpt,cover:c.cover,tags:c.tags,content:c.content,seoTitle:c.seoTitle,seoDescription:c.seoDescription,canonical:c.canonical,noindex:c.noindex,status:c.status,scheduledFor:c.scheduledFor})}}catch(a){console.error("Failed to load post:",a)}finally{i(!1)}})()},[c]);let l=async a=>{await (0,u.saveDraft)(a,f?.id),f&&g(await (0,u.getPostById)(f.id))},m=async a=>{if(f)await (0,u.publish)(f.id);else{let b=await (0,u.saveDraft)(a);await (0,u.publish)(b.id)}};return h?(0,d.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,d.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})}):j?(0,d.jsx)(V,{post:f||void 0,onSave:l,onPublish:m,formData:j,onFormDataChange:k,children:(0,d.jsx)(h5,{content:j.content,onChange:a=>{k({...j,content:a})}})}):(0,d.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,d.jsx)("p",{className:"text-muted-foreground",children:"Post not found"})})}a.s(["default",()=>h6],3221)}];

//# sourceMappingURL=apps_admin_src_app_%28app%29_content_%5Bslug%5D_page_tsx_3f5ccc98._.js.map