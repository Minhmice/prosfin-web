{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/minhmice/Documents/projects/prosfin-web/apps/admin/src/components/shared/switch.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { cn } from \"@prosfin/ui\";\r\n\r\ninterface SwitchProps {\r\n  checked?: boolean;\r\n  onCheckedChange?: (checked: boolean) => void;\r\n  id?: string;\r\n  className?: string;\r\n  disabled?: boolean;\r\n}\r\n\r\nexport function Switch({ checked = false, onCheckedChange, id, className, disabled }: SwitchProps) {\r\n  return (\r\n    <button\r\n      type=\"button\"\r\n      role=\"switch\"\r\n      aria-checked={checked}\r\n      id={id}\r\n      disabled={disabled}\r\n      onClick={() => !disabled && onCheckedChange?.(!checked)}\r\n      className={cn(\r\n        \"peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50\",\r\n        checked ? \"bg-primary\" : \"bg-input\",\r\n        className\r\n      )}\r\n    >\r\n      <span\r\n        className={cn(\r\n          \"pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform\",\r\n          checked ? \"translate-x-4\" : \"translate-x-0\"\r\n        )}\r\n      />\r\n    </button>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAGA;AAAA;AAHA;;;AAaO,SAAS,OAAO,EAAE,UAAU,KAAK,EAAE,eAAe,EAAE,EAAE,EAAE,SAAS,EAAE,QAAQ,EAAe;IAC/F,qBACE,6VAAC;QACC,MAAK;QACL,MAAK;QACL,gBAAc;QACd,IAAI;QACJ,UAAU;QACV,SAAS,IAAM,CAAC,YAAY,kBAAkB,CAAC;QAC/C,WAAW,IAAA,oIAAE,EACX,qTACA,UAAU,eAAe,YACzB;kBAGF,cAAA,6VAAC;YACC,WAAW,IAAA,oIAAE,EACX,sGACA,UAAU,kBAAkB;;;;;;;;;;;AAKtC"}},
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/minhmice/Documents/projects/prosfin-web/apps/admin/src/hooks/use-url-state.ts"],"sourcesContent":["/**\r\n * URL State Management Hook\r\n * \r\n * Syncs component state with URL searchParams for deep-linkable state.\r\n * Supports debounce for search inputs and replace vs push for history.\r\n */\r\n\r\n\"use client\";\r\n\r\nimport { useSearchParams, useRouter, usePathname } from \"next/navigation\";\r\nimport { useCallback, useEffect, useRef } from \"react\";\r\n\r\ninterface UseUrlStateOptions {\r\n  replace?: boolean; // Use router.replace vs router.push\r\n  debounce?: number; // Debounce delay in ms (for search inputs)\r\n}\r\n\r\n/**\r\n * Hook to sync state with URL searchParams\r\n * \r\n * @param key - URL search param key\r\n * @param defaultValue - Default value if not in URL\r\n * @param options - Configuration options\r\n * @returns [value, setValue] tuple\r\n */\r\nexport function useUrlState<T extends string | number | boolean>(\r\n  key: string,\r\n  defaultValue: T,\r\n  options?: UseUrlStateOptions\r\n): [T, (value: T) => void] {\r\n  const searchParams = useSearchParams();\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n  const debounceTimerRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n  // Parse value from URL\r\n  const urlValue = searchParams.get(key);\r\n  const value: T = urlValue\r\n    ? (parseValue(urlValue, defaultValue) as T)\r\n    : defaultValue;\r\n\r\n  // Update URL with new value\r\n  const setValue = useCallback(\r\n    (newValue: T) => {\r\n      // Don't update if value hasn't changed\r\n      const currentValue = urlValue ? (parseValue(urlValue, defaultValue) as T) : defaultValue;\r\n      if (currentValue === newValue) {\r\n        return;\r\n      }\r\n\r\n      // Clear existing debounce timer\r\n      if (debounceTimerRef.current) {\r\n        clearTimeout(debounceTimerRef.current);\r\n      }\r\n\r\n      const updateUrl = () => {\r\n        const params = new URLSearchParams(searchParams.toString());\r\n        \r\n        // Remove param if value equals default\r\n        if (newValue === defaultValue) {\r\n          params.delete(key);\r\n        } else {\r\n          params.set(key, String(newValue));\r\n        }\r\n\r\n        const queryString = params.toString();\r\n        const url = queryString ? `${pathname}?${queryString}` : pathname;\r\n        const method = options?.replace ? router.replace : router.push;\r\n        method(url);\r\n      };\r\n\r\n      // Apply debounce if specified\r\n      if (options?.debounce && options.debounce > 0) {\r\n        debounceTimerRef.current = setTimeout(updateUrl, options.debounce);\r\n      } else {\r\n        updateUrl();\r\n      }\r\n    },\r\n    [key, defaultValue, urlValue, searchParams, pathname, router, options]\r\n  );\r\n\r\n  // Cleanup debounce timer on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (debounceTimerRef.current) {\r\n        clearTimeout(debounceTimerRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  return [value, setValue];\r\n}\r\n\r\n/**\r\n * Parse string value to appropriate type based on default value\r\n */\r\nfunction parseValue(value: string, defaultValue: string | number | boolean): string | number | boolean {\r\n  if (typeof defaultValue === \"number\") {\r\n    const parsed = Number(value);\r\n    return isNaN(parsed) ? defaultValue : parsed;\r\n  }\r\n  if (typeof defaultValue === \"boolean\") {\r\n    return value === \"true\";\r\n  }\r\n  return value;\r\n}\r\n\r\n/**\r\n * Hook for array values (e.g., multiple filters)\r\n */\r\nexport function useUrlStateArray(\r\n  key: string,\r\n  defaultValue: string[] = [],\r\n  options?: UseUrlStateOptions\r\n): [string[], (value: string[]) => void] {\r\n  const searchParams = useSearchParams();\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n  const debounceTimerRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n  // Parse array from URL (comma-separated)\r\n  const urlValue = searchParams.get(key);\r\n  const value: string[] = urlValue\r\n    ? urlValue.split(\",\").filter(Boolean)\r\n    : defaultValue;\r\n\r\n  const setValue = useCallback(\r\n    (newValue: string[]) => {\r\n      // Don't update if value hasn't changed\r\n      const currentValue = urlValue ? urlValue.split(\",\").filter(Boolean) : defaultValue;\r\n      if (JSON.stringify(currentValue) === JSON.stringify(newValue)) {\r\n        return;\r\n      }\r\n\r\n      if (debounceTimerRef.current) {\r\n        clearTimeout(debounceTimerRef.current);\r\n      }\r\n\r\n      const updateUrl = () => {\r\n        const params = new URLSearchParams(searchParams.toString());\r\n        \r\n        if (newValue.length === 0 || JSON.stringify(newValue) === JSON.stringify(defaultValue)) {\r\n          params.delete(key);\r\n        } else {\r\n          params.set(key, newValue.join(\",\"));\r\n        }\r\n\r\n        const queryString = params.toString();\r\n        const url = queryString ? `${pathname}?${queryString}` : pathname;\r\n        const method = options?.replace ? router.replace : router.push;\r\n        method(url);\r\n      };\r\n\r\n      if (options?.debounce && options.debounce > 0) {\r\n        debounceTimerRef.current = setTimeout(updateUrl, options.debounce);\r\n      } else {\r\n        updateUrl();\r\n      }\r\n    },\r\n    [key, defaultValue, urlValue, searchParams, pathname, router, options]\r\n  );\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (debounceTimerRef.current) {\r\n        clearTimeout(debounceTimerRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  return [value, setValue];\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 187, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/minhmice/Documents/projects/prosfin-web/apps/admin/src/components/dashboard/dashboard-control-bar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { format, startOfDay, subDays, startOfWeek, startOfMonth, parseISO } from \"date-fns\";\r\nimport {\r\n  Button,\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n  Label,\r\n} from \"@prosfin/ui\";\r\nimport { Switch } from \"@/components/shared/switch\";\r\nimport { Calendar, ChevronDown, Clock } from \"lucide-react\";\r\nimport { useUrlState } from \"@/hooks/use-url-state\";\r\nimport type { DateRange } from \"@/lib/data/dashboard\";\r\n\r\nfunction LastUpdatedTime() {\r\n  const [time, setTime] = React.useState<string>(\"--:--\");\r\n  \r\n  React.useEffect(() => {\r\n    // Only set time after mount to avoid hydration mismatch\r\n    setTime(format(new Date(), \"HH:mm\"));\r\n    \r\n    // Update every minute\r\n    const interval = setInterval(() => {\r\n      setTime(format(new Date(), \"HH:mm\"));\r\n    }, 60000);\r\n    \r\n    return () => clearInterval(interval);\r\n  }, []);\r\n  \r\n  return (\r\n    <div className=\"flex items-center gap-2 text-xs text-muted-foreground\" suppressHydrationWarning>\r\n      <Clock className=\"size-3\" />\r\n      Last updated: {time}\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface DashboardControlBarProps {\r\n  onDateRangeChange?: (range: DateRange) => void;\r\n  onCompareChange?: (enabled: boolean) => void;\r\n}\r\n\r\ntype DatePreset = \"today\" | \"last7\" | \"last14\" | \"last30\" | \"thisWeek\" | \"thisMonth\" | \"custom\";\r\n\r\nexport function DashboardControlBar({\r\n  onDateRangeChange,\r\n  onCompareChange,\r\n}: DashboardControlBarProps) {\r\n  const [fromStr, setFromStr] = useUrlState<string>(\"from\", \"\");\r\n  const [toStr, setToStr] = useUrlState<string>(\"to\", \"\");\r\n  const [compareEnabled, setCompareEnabled] = useUrlState<boolean>(\"compare\", false, { replace: true });\r\n  const [compareMode, setCompareMode] = useUrlState<string>(\"compare_mode\", \"prev\", { replace: true });\r\n\r\n  // Initialize with default range (last 30 days) - only once on mount\r\n  const hasInitialized = React.useRef(false);\r\n  React.useEffect(() => {\r\n    // Only initialize if both are empty and we haven't initialized yet\r\n    if (!hasInitialized.current && !fromStr && !toStr) {\r\n      hasInitialized.current = true;\r\n      const to = startOfDay(new Date());\r\n      const from = startOfDay(subDays(to, 30));\r\n      const fromFormatted = format(from, \"yyyy-MM-dd\");\r\n      const toFormatted = format(to, \"yyyy-MM-dd\");\r\n      \r\n      // Only set if different from current values to avoid infinite loop\r\n      if (fromStr !== fromFormatted) {\r\n        setFromStr(fromFormatted);\r\n      }\r\n      if (toStr !== toFormatted) {\r\n        setToStr(toFormatted);\r\n      }\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []); // Only run once on mount\r\n\r\n  const currentRange: DateRange | null = React.useMemo(() => {\r\n    if (!fromStr || !toStr) return null;\r\n    try {\r\n      return {\r\n        from: startOfDay(parseISO(fromStr)),\r\n        to: startOfDay(parseISO(toStr)),\r\n      };\r\n    } catch {\r\n      return null;\r\n    }\r\n  }, [fromStr, toStr]);\r\n\r\n  const handlePreset = (preset: DatePreset) => {\r\n    const today = startOfDay(new Date());\r\n    let from: Date;\r\n    let to: Date = today;\r\n\r\n    switch (preset) {\r\n      case \"today\":\r\n        from = today;\r\n        to = today;\r\n        break;\r\n      case \"last7\":\r\n        from = startOfDay(subDays(today, 6));\r\n        break;\r\n      case \"last14\":\r\n        from = startOfDay(subDays(today, 13));\r\n        break;\r\n      case \"last30\":\r\n        from = startOfDay(subDays(today, 29));\r\n        break;\r\n      case \"thisWeek\":\r\n        from = startOfWeek(today, { weekStartsOn: 1 });\r\n        break;\r\n      case \"thisMonth\":\r\n        from = startOfMonth(today);\r\n        break;\r\n      default:\r\n        return;\r\n    }\r\n\r\n    setFromStr(format(from, \"yyyy-MM-dd\"));\r\n    setToStr(format(to, \"yyyy-MM-dd\"));\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (currentRange) {\r\n      onDateRangeChange?.(currentRange);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [currentRange]);\r\n\r\n  React.useEffect(() => {\r\n    onCompareChange?.(compareEnabled);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [compareEnabled]);\r\n\r\n  const rangeLabel = React.useMemo(() => {\r\n    if (!currentRange) return \"Select range\";\r\n    if (format(currentRange.from, \"yyyy-MM-dd\") === format(currentRange.to, \"yyyy-MM-dd\")) {\r\n      return format(currentRange.from, \"MMM dd, yyyy\");\r\n    }\r\n    return `${format(currentRange.from, \"MMM dd\")} - ${format(currentRange.to, \"MMM dd, yyyy\")}`;\r\n  }, [currentRange]);\r\n\r\n  return (\r\n    <div className=\"sticky top-0 z-10 flex items-center justify-between gap-4 border-b bg-background px-4 py-3\">\r\n      <div className=\"flex items-center gap-4\">\r\n        {/* Date Range Picker */}\r\n        <DropdownMenu>\r\n          <DropdownMenuTrigger asChild>\r\n            <Button variant=\"outline\" size=\"sm\" className=\"h-8\" suppressHydrationWarning>\r\n              <Calendar className=\"mr-2 size-4\" />\r\n              {rangeLabel}\r\n              <ChevronDown className=\"ml-2 size-4\" />\r\n            </Button>\r\n          </DropdownMenuTrigger>\r\n          <DropdownMenuContent align=\"start\" className=\"w-48\">\r\n            <DropdownMenuItem onClick={() => handlePreset(\"today\")}>Today</DropdownMenuItem>\r\n            <DropdownMenuItem onClick={() => handlePreset(\"last7\")}>Last 7 days</DropdownMenuItem>\r\n            <DropdownMenuItem onClick={() => handlePreset(\"last14\")}>Last 14 days</DropdownMenuItem>\r\n            <DropdownMenuItem onClick={() => handlePreset(\"last30\")}>Last 30 days</DropdownMenuItem>\r\n            <DropdownMenuItem onClick={() => handlePreset(\"thisWeek\")}>This week</DropdownMenuItem>\r\n            <DropdownMenuItem onClick={() => handlePreset(\"thisMonth\")}>This month</DropdownMenuItem>\r\n            <DropdownMenuItem disabled className=\"text-muted-foreground text-xs\">\r\n              Custom range (coming soon)\r\n            </DropdownMenuItem>\r\n          </DropdownMenuContent>\r\n        </DropdownMenu>\r\n\r\n        {/* Compare Toggle */}\r\n        <div className=\"flex items-center gap-2\">\r\n          <Switch\r\n            checked={compareEnabled}\r\n            onCheckedChange={setCompareEnabled}\r\n            id=\"compare\"\r\n          />\r\n          <Label htmlFor=\"compare\" className=\"text-sm font-normal cursor-pointer\">\r\n            Compare\r\n          </Label>\r\n        </div>\r\n\r\n        {/* Compare Mode */}\r\n        {compareEnabled && (\r\n          <DropdownMenu>\r\n            <DropdownMenuTrigger asChild>\r\n              <Button variant=\"outline\" size=\"sm\" className=\"h-8\" suppressHydrationWarning>\r\n                {compareMode === \"prev\" ? \"Previous period\" : compareMode === \"month\" ? \"Previous month\" : \"Custom\"}\r\n                <ChevronDown className=\"ml-2 size-4\" />\r\n              </Button>\r\n            </DropdownMenuTrigger>\r\n            <DropdownMenuContent align=\"start\">\r\n              <DropdownMenuItem onClick={() => setCompareMode(\"prev\")}>\r\n                Previous period\r\n              </DropdownMenuItem>\r\n              <DropdownMenuItem onClick={() => setCompareMode(\"month\")}>\r\n                Previous month\r\n              </DropdownMenuItem>\r\n              <DropdownMenuItem disabled className=\"text-muted-foreground text-xs\">\r\n                Custom range (coming soon)\r\n              </DropdownMenuItem>\r\n            </DropdownMenuContent>\r\n          </DropdownMenu>\r\n        )}\r\n      </div>\r\n\r\n      {/* Last Updated */}\r\n      <LastUpdatedTime />\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 578, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/minhmice/Documents/projects/prosfin-web/apps/admin/src/components/dashboard/chart-container.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { cn } from \"@prosfin/ui\";\r\n\r\ninterface ChartContainerProps {\r\n  children: React.ReactNode;\r\n  className?: string;\r\n  config?: {\r\n    [key: string]: {\r\n      label?: string;\r\n      color?: string;\r\n    };\r\n  };\r\n}\r\n\r\n/**\r\n * ChartContainer wrapper for Recharts\r\n * Ensures proper sizing and responsive behavior\r\n * Based on shadcn chart pattern\r\n */\r\nexport function ChartContainer({ children, className, config }: ChartContainerProps) {\r\n  return (\r\n    <div className={cn(\"w-full\", className)}>\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAGA;AAAA;AAHA;;;AAqBO,SAAS,eAAe,EAAE,QAAQ,EAAE,SAAS,EAAE,MAAM,EAAuB;IACjF,qBACE,6VAAC;QAAI,WAAW,IAAA,oIAAE,EAAC,UAAU;kBAC1B;;;;;;AAGP"}},
    {"offset": {"line": 602, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/minhmice/Documents/projects/prosfin-web/apps/admin/src/lib/data/dashboard.ts"],"sourcesContent":["/**\r\n * Dashboard Mock Data Layer\r\n * \r\n * Generates realistic mock data for dashboard metrics, time series, and breakdowns.\r\n * All data is deterministic based on date ranges for consistent testing.\r\n */\r\n\r\nimport { format, startOfDay, subDays, eachDayOfInterval, parseISO } from \"date-fns\";\r\nimport type { Lead, Campaign } from \"@/types/admin\";\r\n\r\nexport interface DateRange {\r\n  from: Date;\r\n  to: Date;\r\n}\r\n\r\nexport interface DashboardKPIs {\r\n  newLeads: number;\r\n  qualifiedLeads: number;\r\n  meetingsScheduled: number;\r\n  won: number;\r\n  cvrLeadToQualified: number; // %\r\n  cvrQualifiedToMeeting: number; // %\r\n}\r\n\r\nexport interface DailySeriesPoint {\r\n  date: string; // ISO date string\r\n  sessions: number;\r\n  leads: number;\r\n  qualified: number;\r\n  meetings: number;\r\n  won: number;\r\n}\r\n\r\nexport interface ChannelBreakdown {\r\n  channel: string;\r\n  leads: number;\r\n  qualified: number;\r\n  meetings: number;\r\n  won: number;\r\n  cvr: number;\r\n}\r\n\r\nexport interface CampaignPerformance {\r\n  campaignId: string;\r\n  campaignName: string;\r\n  utm_campaign: string;\r\n  channel: string;\r\n  leads: number;\r\n  qualified: number;\r\n  cvr: number;\r\n}\r\n\r\nexport interface LandingPathPerformance {\r\n  path: string;\r\n  sessions: number;\r\n  leads: number;\r\n  cvr: number;\r\n}\r\n\r\nexport interface PipelineSnapshot {\r\n  stage: string;\r\n  count: number;\r\n  percentage: number;\r\n}\r\n\r\nexport interface ActivityEvent {\r\n  id: string;\r\n  type: \"status_changed\" | \"converted\" | \"campaign_created\" | \"note_added\";\r\n  title: string;\r\n  timestamp: string;\r\n  actor?: string;\r\n  metadata?: Record<string, any>;\r\n}\r\n\r\nexport interface DashboardData {\r\n  kpis: DashboardKPIs;\r\n  kpisCompare?: DashboardKPIs;\r\n  dailySeries: DailySeriesPoint[];\r\n  dailySeriesCompare?: DailySeriesPoint[];\r\n  channelBreakdown: ChannelBreakdown[];\r\n  campaignPerformance: CampaignPerformance[];\r\n  landingPathPerformance: LandingPathPerformance[];\r\n  pipelineSnapshot: PipelineSnapshot[];\r\n  recentActivity: ActivityEvent[];\r\n  sparklineData: number[]; // Last 7 days for sparkline\r\n}\r\n\r\n// Deterministic random seed based on date\r\nfunction seededRandom(seed: number): number {\r\n  const x = Math.sin(seed) * 10000;\r\n  return x - Math.floor(x);\r\n}\r\n\r\n// Generate daily series with realistic trends\r\nfunction generateDailySeries(range: DateRange, baseTrend: number = 1): DailySeriesPoint[] {\r\n  const days = eachDayOfInterval({ start: range.from, end: range.to });\r\n  const series: DailySeriesPoint[] = [];\r\n  \r\n  days.forEach((day, index) => {\r\n    const seed = day.getTime();\r\n    const dayOfWeek = day.getDay(); // 0 = Sunday, 6 = Saturday\r\n    \r\n    // Weekend effect (lower traffic)\r\n    const weekendFactor = dayOfWeek === 0 || dayOfWeek === 6 ? 0.6 : 1.0;\r\n    \r\n    // Base values with trend\r\n    const baseSessions = 150 + (index * baseTrend * 0.5);\r\n    const sessions = Math.round(baseSessions * weekendFactor * (0.8 + seededRandom(seed) * 0.4));\r\n    \r\n    // Conversion rates\r\n    const sessionToLeadRate = 0.15 + seededRandom(seed + 1) * 0.1; // 15-25%\r\n    const leadToQualifiedRate = 0.3 + seededRandom(seed + 2) * 0.2; // 30-50%\r\n    const qualifiedToMeetingRate = 0.4 + seededRandom(seed + 3) * 0.2; // 40-60%\r\n    const meetingToWonRate = 0.5 + seededRandom(seed + 4) * 0.3; // 50-80%\r\n    \r\n    const leads = Math.round(sessions * sessionToLeadRate);\r\n    const qualified = Math.round(leads * leadToQualifiedRate);\r\n    const meetings = Math.round(qualified * qualifiedToMeetingRate);\r\n    const won = Math.round(meetings * meetingToWonRate);\r\n    \r\n    series.push({\r\n      date: format(day, \"yyyy-MM-dd\"),\r\n      sessions,\r\n      leads,\r\n      qualified,\r\n      meetings,\r\n      won,\r\n    });\r\n  });\r\n  \r\n  return series;\r\n}\r\n\r\n// Generate channel breakdown\r\nfunction generateChannelBreakdown(series: DailySeriesPoint[]): ChannelBreakdown[] {\r\n  const channels = [\"Facebook\", \"Google\", \"LinkedIn\", \"Direct\", \"Email\", \"TikTok\"];\r\n  const breakdown: ChannelBreakdown[] = [];\r\n  \r\n  channels.forEach((channel, index) => {\r\n    const seed = channel.charCodeAt(0) * 1000;\r\n    const share = [0.25, 0.20, 0.15, 0.15, 0.15, 0.10][index]; // Distribution\r\n    \r\n    const totalLeads = series.reduce((sum, d) => sum + d.leads, 0);\r\n    const leads = Math.round(totalLeads * share * (0.9 + seededRandom(seed) * 0.2));\r\n    \r\n    const qualifiedRate = 0.3 + seededRandom(seed + 1) * 0.2;\r\n    const meetingRate = 0.4 + seededRandom(seed + 2) * 0.2;\r\n    const wonRate = 0.5 + seededRandom(seed + 3) * 0.3;\r\n    \r\n    const qualified = Math.round(leads * qualifiedRate);\r\n    const meetings = Math.round(qualified * meetingRate);\r\n    const won = Math.round(meetings * wonRate);\r\n    const cvr = leads > 0 ? (won / leads) * 100 : 0;\r\n    \r\n    breakdown.push({\r\n      channel,\r\n      leads,\r\n      qualified,\r\n      meetings,\r\n      won,\r\n      cvr: Math.round(cvr * 10) / 10,\r\n    });\r\n  });\r\n  \r\n  return breakdown.sort((a, b) => b.leads - a.leads);\r\n}\r\n\r\n// Generate campaign performance\r\nfunction generateCampaignPerformance(series: DailySeriesPoint[]): CampaignPerformance[] {\r\n  const campaigns = [\r\n    { name: \"Summer 2024 Campaign\", utm: \"summer-2024\", channel: \"Facebook\" },\r\n    { name: \"Facebook Q1 2024\", utm: \"fb-q1-2024\", channel: \"Facebook\" },\r\n    { name: \"LinkedIn B2B\", utm: \"linkedin-b2b\", channel: \"LinkedIn\" },\r\n    { name: \"Google Ads Audit\", utm: \"google-audit\", channel: \"Google\" },\r\n    { name: \"Email Newsletter\", utm: \"newsletter-jan\", channel: \"Email\" },\r\n  ];\r\n  \r\n  const totalLeads = series.reduce((sum, d) => sum + d.leads, 0);\r\n  \r\n  return campaigns.map((campaign, index) => {\r\n    const seed = campaign.utm.charCodeAt(0) * 1000;\r\n    const share = [0.3, 0.25, 0.2, 0.15, 0.1][index];\r\n    \r\n    const leads = Math.round(totalLeads * share * (0.9 + seededRandom(seed) * 0.2));\r\n    const qualified = Math.round(leads * (0.35 + seededRandom(seed + 1) * 0.15));\r\n    const cvr = leads > 0 ? (qualified / leads) * 100 : 0;\r\n    \r\n    return {\r\n      campaignId: `campaign-${index + 1}`,\r\n      campaignName: campaign.name,\r\n      utm_campaign: campaign.utm,\r\n      channel: campaign.channel,\r\n      leads,\r\n      qualified,\r\n      cvr: Math.round(cvr * 10) / 10,\r\n    };\r\n  }).sort((a, b) => b.leads - a.leads);\r\n}\r\n\r\n// Generate landing path performance\r\nfunction generateLandingPathPerformance(series: DailySeriesPoint[]): LandingPathPerformance[] {\r\n  const paths = [\r\n    { path: \"/\", sessions: 0.4 },\r\n    { path: \"/services\", sessions: 0.25 },\r\n    { path: \"/contact\", sessions: 0.15 },\r\n    { path: \"/about\", sessions: 0.1 },\r\n    { path: \"/insights\", sessions: 0.1 },\r\n  ];\r\n  \r\n  const totalSessions = series.reduce((sum, d) => sum + d.sessions, 0);\r\n  \r\n  return paths.map((p) => {\r\n    const seed = p.path.charCodeAt(0) * 1000;\r\n    const sessions = Math.round(totalSessions * p.sessions * (0.9 + seededRandom(seed) * 0.2));\r\n    const leadRate = 0.15 + seededRandom(seed + 1) * 0.1;\r\n    const leads = Math.round(sessions * leadRate);\r\n    const cvr = sessions > 0 ? (leads / sessions) * 100 : 0;\r\n    \r\n    return {\r\n      path: p.path,\r\n      sessions,\r\n      leads,\r\n      cvr: Math.round(cvr * 10) / 10,\r\n    };\r\n  }).sort((a, b) => b.sessions - a.sessions);\r\n}\r\n\r\n// Generate pipeline snapshot\r\nfunction generatePipelineSnapshot(series: DailySeriesPoint[]): PipelineSnapshot[] {\r\n  const total = series.reduce((sum, d) => sum + d.leads, 0);\r\n  const qualified = series.reduce((sum, d) => sum + d.qualified, 0);\r\n  const meetings = series.reduce((sum, d) => sum + d.meetings, 0);\r\n  const won = series.reduce((sum, d) => sum + d.won, 0);\r\n  \r\n  const newLeads = total - qualified;\r\n  \r\n  return [\r\n    { stage: \"New\", count: newLeads, percentage: total > 0 ? (newLeads / total) * 100 : 0 },\r\n    { stage: \"Qualified\", count: qualified, percentage: total > 0 ? (qualified / total) * 100 : 0 },\r\n    { stage: \"Meeting Scheduled\", count: meetings, percentage: total > 0 ? (meetings / total) * 100 : 0 },\r\n    { stage: \"Won\", count: won, percentage: total > 0 ? (won / total) * 100 : 0 },\r\n  ];\r\n}\r\n\r\n// Generate recent activity\r\nfunction generateRecentActivity(range: DateRange): ActivityEvent[] {\r\n  const events: ActivityEvent[] = [];\r\n  const days = eachDayOfInterval({ start: range.from, end: range.to });\r\n  \r\n  days.forEach((day, dayIndex) => {\r\n    const seed = day.getTime();\r\n    const eventCount = Math.floor(2 + seededRandom(seed) * 3); // 2-5 events per day\r\n    \r\n    for (let i = 0; i < eventCount; i++) {\r\n      const eventSeed = seed + i * 1000;\r\n      const types: ActivityEvent[\"type\"][] = [\"status_changed\", \"converted\", \"campaign_created\", \"note_added\"];\r\n      const type = types[Math.floor(seededRandom(eventSeed) * types.length)];\r\n      \r\n      const hour = Math.floor(seededRandom(eventSeed + 1) * 24);\r\n      const minute = Math.floor(seededRandom(eventSeed + 2) * 60);\r\n      const timestamp = new Date(day);\r\n      timestamp.setHours(hour, minute);\r\n      \r\n      const actors = [\"You\", \"Admin\", \"Editor A\", \"System\"];\r\n      const actor = actors[Math.floor(seededRandom(eventSeed + 3) * actors.length)];\r\n      \r\n      let title = \"\";\r\n      if (type === \"status_changed\") {\r\n        title = \"Lead status changed\";\r\n      } else if (type === \"converted\") {\r\n        title = \"Lead converted to client\";\r\n      } else if (type === \"campaign_created\") {\r\n        title = \"New campaign created\";\r\n      } else {\r\n        title = \"Note added to lead\";\r\n      }\r\n      \r\n      events.push({\r\n        id: `event-${dayIndex}-${i}`,\r\n        type,\r\n        title,\r\n        timestamp: timestamp.toISOString(),\r\n        actor: type === \"campaign_created\" ? actor : undefined,\r\n      });\r\n    }\r\n  });\r\n  \r\n  return events.sort((a, b) => parseISO(b.timestamp).getTime() - parseISO(a.timestamp).getTime()).slice(0, 20);\r\n}\r\n\r\n// Calculate KPIs from series\r\nfunction calculateKPIs(series: DailySeriesPoint[]): DashboardKPIs {\r\n  const newLeads = series.reduce((sum, d) => sum + d.leads, 0);\r\n  const qualified = series.reduce((sum, d) => sum + d.qualified, 0);\r\n  const meetings = series.reduce((sum, d) => sum + d.meetings, 0);\r\n  const won = series.reduce((sum, d) => sum + d.won, 0);\r\n  \r\n  const cvrLeadToQualified = newLeads > 0 ? (qualified / newLeads) * 100 : 0;\r\n  const cvrQualifiedToMeeting = qualified > 0 ? (meetings / qualified) * 100 : 0;\r\n  \r\n  return {\r\n    newLeads,\r\n    qualifiedLeads: qualified,\r\n    meetingsScheduled: meetings,\r\n    won,\r\n    cvrLeadToQualified: Math.round(cvrLeadToQualified * 10) / 10,\r\n    cvrQualifiedToMeeting: Math.round(cvrQualifiedToMeeting * 10) / 10,\r\n  };\r\n}\r\n\r\n// Main function to get dashboard data\r\nexport async function getDashboardData(\r\n  dateRange: DateRange,\r\n  compareRange?: DateRange\r\n): Promise<DashboardData> {\r\n  // Simulate API delay\r\n  await new Promise((resolve) => setTimeout(resolve, 200));\r\n  \r\n  // Generate current period data\r\n  const dailySeries = generateDailySeries(dateRange, 1.0);\r\n  const kpis = calculateKPIs(dailySeries);\r\n  \r\n  // Generate compare period data if provided\r\n  let dailySeriesCompare: DailySeriesPoint[] | undefined;\r\n  let kpisCompare: DashboardKPIs | undefined;\r\n  \r\n  if (compareRange) {\r\n    dailySeriesCompare = generateDailySeries(compareRange, 0.95); // Slightly lower trend\r\n    kpisCompare = calculateKPIs(dailySeriesCompare);\r\n  }\r\n  \r\n  // Generate breakdowns\r\n  const channelBreakdown = generateChannelBreakdown(dailySeries);\r\n  const campaignPerformance = generateCampaignPerformance(dailySeries);\r\n  const landingPathPerformance = generateLandingPathPerformance(dailySeries);\r\n  const pipelineSnapshot = generatePipelineSnapshot(dailySeries);\r\n  const recentActivity = generateRecentActivity(dateRange);\r\n  \r\n  // Generate sparkline data (last 7 days)\r\n  const sparklineDays = Math.min(7, dailySeries.length);\r\n  const sparklineData = dailySeries.slice(-sparklineDays).map((d) => d.leads);\r\n  \r\n  return {\r\n    kpis,\r\n    kpisCompare,\r\n    dailySeries,\r\n    dailySeriesCompare,\r\n    channelBreakdown,\r\n    campaignPerformance,\r\n    landingPathPerformance,\r\n    pipelineSnapshot,\r\n    recentActivity,\r\n    sparklineData,\r\n  };\r\n}\r\n\r\n// Helper to calculate delta\r\nexport function calculateDelta(current: number, previous: number): {\r\n  absolute: number;\r\n  percent: number | null;\r\n  isPositive: boolean;\r\n} {\r\n  const absolute = current - previous;\r\n  const percent = previous !== 0 ? (absolute / previous) * 100 : null;\r\n  const isPositive = absolute >= 0;\r\n  \r\n  return {\r\n    absolute: Math.round(absolute),\r\n    percent: percent !== null ? Math.round(percent * 10) / 10 : null,\r\n    isPositive,\r\n  };\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 937, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/minhmice/Documents/projects/prosfin-web/apps/admin/src/components/dashboard/kpi-card.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { format } from \"date-fns\";\r\nimport { AdminSectionCard } from \"@prosfin/ui\";\r\nimport { TrendingUp, TrendingDown, Minus, Info } from \"lucide-react\";\r\nimport { LineChart, Line, ResponsiveContainer } from \"recharts\";\r\nimport { ChartContainer } from \"./chart-container\";\r\nimport { calculateDelta } from \"@/lib/data/dashboard\";\r\nimport { cn } from \"@prosfin/ui\";\r\n\r\ninterface KPICardProps {\r\n  title: string;\r\n  value: number;\r\n  compareValue?: number;\r\n  sparklineData: number[];\r\n  tooltip?: string;\r\n  drillDownPath?: string;\r\n  drillDownParams?: Record<string, string>;\r\n  formatValue?: (value: number) => string;\r\n  className?: string;\r\n}\r\n\r\nexport function KPICard({\r\n  title,\r\n  value,\r\n  compareValue,\r\n  sparklineData,\r\n  tooltip,\r\n  drillDownPath,\r\n  drillDownParams,\r\n  formatValue = (v) => v.toLocaleString(),\r\n  className,\r\n}: KPICardProps) {\r\n  const router = useRouter();\r\n  \r\n  const delta = compareValue !== undefined ? calculateDelta(value, compareValue) : null;\r\n  \r\n  const handleClick = () => {\r\n    if (drillDownPath) {\r\n      const params = new URLSearchParams(drillDownParams);\r\n      const url = params.toString() ? `${drillDownPath}?${params.toString()}` : drillDownPath;\r\n      router.push(url);\r\n    }\r\n  };\r\n\r\n  // Prepare sparkline chart data\r\n  const sparklineChartData = sparklineData.map((v, i) => ({\r\n    value: v,\r\n    index: i,\r\n  }));\r\n\r\n  return (\r\n    <AdminSectionCard\r\n      title={title}\r\n      className={cn(\"cursor-pointer transition-shadow hover:shadow-md\", className)}\r\n      onClick={handleClick}\r\n    >\r\n      <div className=\"space-y-3\">\r\n        {/* Main Value */}\r\n        <div className=\"flex items-baseline justify-between\">\r\n          <div className=\"text-3xl font-bold\">{formatValue(value)}</div>\r\n          {tooltip && (\r\n            <div className=\"group relative\">\r\n              <Info className=\"size-4 text-muted-foreground\" />\r\n              <div className=\"invisible absolute bottom-full right-0 mb-2 w-48 rounded-md border bg-popover p-2 text-xs group-hover:visible z-10\">\r\n                {tooltip}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Delta */}\r\n        {delta && (\r\n          <div className=\"flex items-center gap-2\">\r\n            {delta.absolute === 0 ? (\r\n              <div className=\"flex items-center gap-1 text-sm text-muted-foreground\">\r\n                <Minus className=\"size-3\" />\r\n                <span>No change</span>\r\n              </div>\r\n            ) : (\r\n              <div\r\n                className={cn(\r\n                  \"flex items-center gap-1 text-sm font-medium\",\r\n                  delta.isPositive ? \"text-green-600\" : \"text-red-600\"\r\n                )}\r\n              >\r\n                {delta.isPositive ? (\r\n                  <TrendingUp className=\"size-4\" />\r\n                ) : (\r\n                  <TrendingDown className=\"size-4\" />\r\n                )}\r\n                <span>\r\n                  {delta.isPositive ? \"+\" : \"\"}\r\n                  {delta.absolute}\r\n                </span>\r\n                {delta.percent !== null && (\r\n                  <span className=\"text-muted-foreground\">\r\n                    ({delta.isPositive ? \"+\" : \"\"}\r\n                    {delta.percent}%)\r\n                  </span>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Sparkline */}\r\n        {sparklineData.length > 0 && (\r\n          <div className=\"h-[60px] w-full\">\r\n            <ChartContainer className=\"min-h-[60px]\">\r\n              <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                <LineChart data={sparklineChartData}>\r\n                  <Line\r\n                    type=\"monotone\"\r\n                    dataKey=\"value\"\r\n                    stroke=\"hsl(var(--chart-1))\"\r\n                    strokeWidth={2}\r\n                    dot={false}\r\n                    isAnimationActive={false}\r\n                  />\r\n                </LineChart>\r\n              </ResponsiveContainer>\r\n            </ChartContainer>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </AdminSectionCard>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAVA;;;;;;;;;AAwBO,SAAS,QAAQ,EACtB,KAAK,EACL,KAAK,EACL,YAAY,EACZ,aAAa,EACb,OAAO,EACP,aAAa,EACb,eAAe,EACf,cAAc,CAAC,IAAM,EAAE,cAAc,EAAE,EACvC,SAAS,EACI;IACb,MAAM,SAAS,IAAA,8PAAS;IAExB,MAAM,QAAQ,iBAAiB,YAAY,IAAA,kKAAc,EAAC,OAAO,gBAAgB;IAEjF,MAAM,cAAc;QAClB,IAAI,eAAe;YACjB,MAAM,SAAS,IAAI,gBAAgB;YACnC,MAAM,MAAM,OAAO,QAAQ,KAAK,GAAG,cAAc,CAAC,EAAE,OAAO,QAAQ,IAAI,GAAG;YAC1E,OAAO,IAAI,CAAC;QACd;IACF;IAEA,+BAA+B;IAC/B,MAAM,qBAAqB,cAAc,GAAG,CAAC,CAAC,GAAG,IAAM,CAAC;YACtD,OAAO;YACP,OAAO;QACT,CAAC;IAED,qBACE,6VAAC,6LAAgB;QACf,OAAO;QACP,WAAW,IAAA,oIAAE,EAAC,oDAAoD;QAClE,SAAS;kBAET,cAAA,6VAAC;YAAI,WAAU;;8BAEb,6VAAC;oBAAI,WAAU;;sCACb,6VAAC;4BAAI,WAAU;sCAAsB,YAAY;;;;;;wBAChD,yBACC,6VAAC;4BAAI,WAAU;;8CACb,6VAAC,8RAAI;oCAAC,WAAU;;;;;;8CAChB,6VAAC;oCAAI,WAAU;8CACZ;;;;;;;;;;;;;;;;;;gBAOR,uBACC,6VAAC;oBAAI,WAAU;8BACZ,MAAM,QAAQ,KAAK,kBAClB,6VAAC;wBAAI,WAAU;;0CACb,6VAAC,iSAAK;gCAAC,WAAU;;;;;;0CACjB,6VAAC;0CAAK;;;;;;;;;;;6CAGR,6VAAC;wBACC,WAAW,IAAA,oIAAE,EACX,+CACA,MAAM,UAAU,GAAG,mBAAmB;;4BAGvC,MAAM,UAAU,iBACf,6VAAC,oTAAU;gCAAC,WAAU;;;;;qDAEtB,6VAAC,0TAAY;gCAAC,WAAU;;;;;;0CAE1B,6VAAC;;oCACE,MAAM,UAAU,GAAG,MAAM;oCACzB,MAAM,QAAQ;;;;;;;4BAEhB,MAAM,OAAO,KAAK,sBACjB,6VAAC;gCAAK,WAAU;;oCAAwB;oCACpC,MAAM,UAAU,GAAG,MAAM;oCAC1B,MAAM,OAAO;oCAAC;;;;;;;;;;;;;;;;;;gBAS1B,cAAc,MAAM,GAAG,mBACtB,6VAAC;oBAAI,WAAU;8BACb,cAAA,6VAAC,wLAAc;wBAAC,WAAU;kCACxB,cAAA,6VAAC,6TAAmB;4BAAC,OAAM;4BAAO,QAAO;sCACvC,cAAA,6VAAC,qSAAS;gCAAC,MAAM;0CACf,cAAA,6VAAC,+RAAI;oCACH,MAAK;oCACL,SAAQ;oCACR,QAAO;oCACP,aAAa;oCACb,KAAK;oCACL,mBAAmB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUvC"}},
    {"offset": {"line": 1158, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/minhmice/Documents/projects/prosfin-web/apps/admin/src/components/dashboard/trend-chart.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { format, parseISO } from \"date-fns\";\r\nimport { AdminSectionCard } from \"@prosfin/ui\";\r\nimport {\r\n  AreaChart,\r\n  Area,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  ResponsiveContainer,\r\n  Legend,\r\n} from \"recharts\";\r\nimport { ChartContainer } from \"./chart-container\";\r\nimport type { DailySeriesPoint } from \"@/lib/data/dashboard\";\r\n\r\ninterface TrendChartProps {\r\n  title: string;\r\n  data: DailySeriesPoint[];\r\n  compareData?: DailySeriesPoint[];\r\n  metric: \"sessions\" | \"leads\" | \"qualified\" | \"meetings\" | \"won\";\r\n  onBarClick?: (date: string) => void;\r\n}\r\n\r\nconst metricLabels: Record<TrendChartProps[\"metric\"], string> = {\r\n  sessions: \"Sessions\",\r\n  leads: \"Leads\",\r\n  qualified: \"Qualified\",\r\n  meetings: \"Meetings\",\r\n  won: \"Won\",\r\n};\r\n\r\nexport function TrendChart({ title, data, compareData, metric, onBarClick }: TrendChartProps) {\r\n  // Combine data for chart\r\n  const chartData = React.useMemo(() => {\r\n    return data.map((point) => {\r\n      const comparePoint = compareData?.find((p) => p.date === point.date);\r\n      return {\r\n        date: format(parseISO(point.date), \"MMM dd\"),\r\n        current: point[metric],\r\n        previous: comparePoint?.[metric] ?? null,\r\n      };\r\n    });\r\n  }, [data, compareData, metric]);\r\n\r\n  return (\r\n    <AdminSectionCard title={title}>\r\n      <ChartContainer className=\"min-h-[300px]\">\r\n        <ResponsiveContainer width=\"100%\" height={300}>\r\n          <AreaChart data={chartData} margin={{ top: 10, right: 10, left: 0, bottom: 0 }}>\r\n            <defs>\r\n              <linearGradient id=\"colorCurrent\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                <stop offset=\"5%\" stopColor=\"hsl(var(--chart-1))\" stopOpacity={0.3} />\r\n                <stop offset=\"95%\" stopColor=\"hsl(var(--chart-1))\" stopOpacity={0} />\r\n              </linearGradient>\r\n              {compareData && (\r\n                <linearGradient id=\"colorPrevious\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                  <stop offset=\"5%\" stopColor=\"hsl(var(--chart-2))\" stopOpacity={0.2} />\r\n                  <stop offset=\"95%\" stopColor=\"hsl(var(--chart-2))\" stopOpacity={0} />\r\n                </linearGradient>\r\n              )}\r\n            </defs>\r\n            <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-muted\" />\r\n            <XAxis\r\n              dataKey=\"date\"\r\n              tick={{ fontSize: 12 }}\r\n              tickLine={false}\r\n              axisLine={false}\r\n            />\r\n            <YAxis\r\n              tick={{ fontSize: 12 }}\r\n              tickLine={false}\r\n              axisLine={false}\r\n            />\r\n            <Tooltip\r\n              contentStyle={{\r\n                backgroundColor: \"hsl(var(--background))\",\r\n                border: \"1px solid hsl(var(--border))\",\r\n                borderRadius: \"var(--radius)\",\r\n              }}\r\n            />\r\n            {compareData && (\r\n              <Legend\r\n                formatter={(value) => (value === \"current\" ? \"Current Period\" : \"Previous Period\")}\r\n              />\r\n            )}\r\n            <Area\r\n              type=\"monotone\"\r\n              dataKey=\"current\"\r\n              stroke=\"hsl(var(--chart-1))\"\r\n              fill=\"url(#colorCurrent)\"\r\n              name=\"current\"\r\n            />\r\n            {compareData && (\r\n              <Area\r\n                type=\"monotone\"\r\n                dataKey=\"previous\"\r\n                stroke=\"hsl(var(--chart-2))\"\r\n                fill=\"url(#colorPrevious)\"\r\n                strokeDasharray=\"5 5\"\r\n                name=\"previous\"\r\n              />\r\n            )}\r\n          </AreaChart>\r\n        </ResponsiveContainer>\r\n      </ChartContainer>\r\n    </AdminSectionCard>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAfA;;;;;;;AA0BA,MAAM,eAA0D;IAC9D,UAAU;IACV,OAAO;IACP,WAAW;IACX,UAAU;IACV,KAAK;AACP;AAEO,SAAS,WAAW,EAAE,KAAK,EAAE,IAAI,EAAE,WAAW,EAAE,MAAM,EAAE,UAAU,EAAmB;IAC1F,yBAAyB;IACzB,MAAM,YAAY,+TAAa,CAAC;QAC9B,OAAO,KAAK,GAAG,CAAC,CAAC;YACf,MAAM,eAAe,aAAa,KAAK,CAAC,IAAM,EAAE,IAAI,KAAK,MAAM,IAAI;YACnE,OAAO;gBACL,MAAM,IAAA,wNAAM,EAAC,IAAA,4MAAQ,EAAC,MAAM,IAAI,GAAG;gBACnC,SAAS,KAAK,CAAC,OAAO;gBACtB,UAAU,cAAc,CAAC,OAAO,IAAI;YACtC;QACF;IACF,GAAG;QAAC;QAAM;QAAa;KAAO;IAE9B,qBACE,6VAAC,6LAAgB;QAAC,OAAO;kBACvB,cAAA,6VAAC,wLAAc;YAAC,WAAU;sBACxB,cAAA,6VAAC,6TAAmB;gBAAC,OAAM;gBAAO,QAAQ;0BACxC,cAAA,6VAAC,qSAAS;oBAAC,MAAM;oBAAW,QAAQ;wBAAE,KAAK;wBAAI,OAAO;wBAAI,MAAM;wBAAG,QAAQ;oBAAE;;sCAC3E,6VAAC;;8CACC,6VAAC;oCAAe,IAAG;oCAAe,IAAG;oCAAI,IAAG;oCAAI,IAAG;oCAAI,IAAG;;sDACxD,6VAAC;4CAAK,QAAO;4CAAK,WAAU;4CAAsB,aAAa;;;;;;sDAC/D,6VAAC;4CAAK,QAAO;4CAAM,WAAU;4CAAsB,aAAa;;;;;;;;;;;;gCAEjE,6BACC,6VAAC;oCAAe,IAAG;oCAAgB,IAAG;oCAAI,IAAG;oCAAI,IAAG;oCAAI,IAAG;;sDACzD,6VAAC;4CAAK,QAAO;4CAAK,WAAU;4CAAsB,aAAa;;;;;;sDAC/D,6VAAC;4CAAK,QAAO;4CAAM,WAAU;4CAAsB,aAAa;;;;;;;;;;;;;;;;;;sCAItE,6VAAC,iTAAa;4BAAC,iBAAgB;4BAAM,WAAU;;;;;;sCAC/C,6VAAC,iSAAK;4BACJ,SAAQ;4BACR,MAAM;gCAAE,UAAU;4BAAG;4BACrB,UAAU;4BACV,UAAU;;;;;;sCAEZ,6VAAC,iSAAK;4BACJ,MAAM;gCAAE,UAAU;4BAAG;4BACrB,UAAU;4BACV,UAAU;;;;;;sCAEZ,6VAAC,qSAAO;4BACN,cAAc;gCACZ,iBAAiB;gCACjB,QAAQ;gCACR,cAAc;4BAChB;;;;;;wBAED,6BACC,6VAAC,mSAAM;4BACL,WAAW,CAAC,QAAW,UAAU,YAAY,mBAAmB;;;;;;sCAGpE,6VAAC,+RAAI;4BACH,MAAK;4BACL,SAAQ;4BACR,QAAO;4BACP,MAAK;4BACL,MAAK;;;;;;wBAEN,6BACC,6VAAC,+RAAI;4BACH,MAAK;4BACL,SAAQ;4BACR,QAAO;4BACP,MAAK;4BACL,iBAAgB;4BAChB,MAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQrB"}},
    {"offset": {"line": 1391, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/minhmice/Documents/projects/prosfin-web/apps/admin/src/components/dashboard/breakdown-charts.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { AdminSectionCard } from \"@prosfin/ui\";\r\nimport {\r\n  BarChart,\r\n  Bar,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  ResponsiveContainer,\r\n  PieChart,\r\n  Pie,\r\n  Cell,\r\n} from \"recharts\";\r\nimport { ChartContainer } from \"./chart-container\";\r\nimport type { ChannelBreakdown, PipelineSnapshot } from \"@/lib/data/dashboard\";\r\n\r\ninterface ChannelChartProps {\r\n  data: ChannelBreakdown[];\r\n  onBarClick?: (channel: string) => void;\r\n}\r\n\r\nexport function ChannelChart({ data, onBarClick }: ChannelChartProps) {\r\n  const router = useRouter();\r\n\r\n  const handleBarClick = (entry: any) => {\r\n    if (onBarClick) {\r\n      onBarClick(entry.channel);\r\n    } else {\r\n      // Default drill-down\r\n      router.push(`/leads?source=${entry.channel.toLowerCase()}`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <AdminSectionCard title=\"Leads by Channel\">\r\n      <ChartContainer className=\"min-h-[300px]\">\r\n        <ResponsiveContainer width=\"100%\" height={300}>\r\n          <BarChart data={data} margin={{ top: 10, right: 10, left: 0, bottom: 0 }}>\r\n            <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-muted\" />\r\n            <XAxis\r\n              dataKey=\"channel\"\r\n              tick={{ fontSize: 12 }}\r\n              tickLine={false}\r\n              axisLine={false}\r\n            />\r\n            <YAxis\r\n              tick={{ fontSize: 12 }}\r\n              tickLine={false}\r\n              axisLine={false}\r\n            />\r\n            <Tooltip\r\n              contentStyle={{\r\n                backgroundColor: \"hsl(var(--background))\",\r\n                border: \"1px solid hsl(var(--border))\",\r\n                borderRadius: \"var(--radius)\",\r\n              }}\r\n            />\r\n            <Bar\r\n              dataKey=\"leads\"\r\n              fill=\"hsl(var(--chart-1))\"\r\n              radius={[4, 4, 0, 0]}\r\n              onClick={handleBarClick}\r\n              style={{ cursor: \"pointer\" }}\r\n            />\r\n          </BarChart>\r\n        </ResponsiveContainer>\r\n      </ChartContainer>\r\n    </AdminSectionCard>\r\n  );\r\n}\r\n\r\ninterface PipelineChartProps {\r\n  data: PipelineSnapshot[];\r\n}\r\n\r\nconst CHART_COLORS = [\r\n  \"hsl(var(--chart-1))\",\r\n  \"hsl(var(--chart-2))\",\r\n  \"hsl(var(--chart-3))\",\r\n  \"hsl(var(--chart-4))\",\r\n];\r\n\r\nexport function PipelineChart({ data }: PipelineChartProps) {\r\n  return (\r\n    <AdminSectionCard title=\"Pipeline Snapshot\">\r\n      <div className=\"grid gap-6 md:grid-cols-2\">\r\n        {/* Stacked Bar */}\r\n        <div>\r\n          <ChartContainer className=\"min-h-[300px]\">\r\n            <ResponsiveContainer width=\"100%\" height={300}>\r\n              <BarChart data={data} layout=\"vertical\" margin={{ top: 10, right: 10, left: 60, bottom: 0 }}>\r\n                <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-muted\" />\r\n                <XAxis type=\"number\" tick={{ fontSize: 12 }} tickLine={false} axisLine={false} />\r\n                <YAxis\r\n                  dataKey=\"stage\"\r\n                  type=\"category\"\r\n                  tick={{ fontSize: 12 }}\r\n                  tickLine={false}\r\n                  axisLine={false}\r\n                />\r\n                <Tooltip\r\n                  contentStyle={{\r\n                    backgroundColor: \"hsl(var(--background))\",\r\n                    border: \"1px solid hsl(var(--border))\",\r\n                    borderRadius: \"var(--radius)\",\r\n                  }}\r\n                />\r\n                <Bar dataKey=\"count\" radius={[0, 4, 4, 0]}>\r\n                  {data.map((entry, index) => (\r\n                    <Cell key={`cell-${index}`} fill={CHART_COLORS[index % CHART_COLORS.length]} />\r\n                  ))}\r\n                </Bar>\r\n              </BarChart>\r\n            </ResponsiveContainer>\r\n          </ChartContainer>\r\n        </div>\r\n\r\n        {/* Pie Chart */}\r\n        <div>\r\n          <ChartContainer className=\"min-h-[300px]\">\r\n            <ResponsiveContainer width=\"100%\" height={300}>\r\n              <PieChart>\r\n                <Pie\r\n                  data={data}\r\n                  cx=\"50%\"\r\n                  cy=\"50%\"\r\n                  labelLine={false}\r\n                  label={({ stage, percentage }) => `${stage}: ${percentage.toFixed(1)}%`}\r\n                  outerRadius={100}\r\n                  fill=\"#8884d8\"\r\n                  dataKey=\"count\"\r\n                >\r\n                  {data.map((entry, index) => (\r\n                    <Cell key={`cell-${index}`} fill={CHART_COLORS[index % CHART_COLORS.length]} />\r\n                  ))}\r\n                </Pie>\r\n                <Tooltip\r\n                  contentStyle={{\r\n                    backgroundColor: \"hsl(var(--background))\",\r\n                    border: \"1px solid hsl(var(--border))\",\r\n                    borderRadius: \"var(--radius)\",\r\n                  }}\r\n                />\r\n              </PieChart>\r\n            </ResponsiveContainer>\r\n          </ChartContainer>\r\n        </div>\r\n      </div>\r\n    </AdminSectionCard>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1716, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/minhmice/Documents/projects/prosfin-web/apps/admin/src/components/dashboard/top-performers.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { AdminSectionCard } from \"@prosfin/ui\";\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from \"@prosfin/ui\";\r\nimport { ArrowRight } from \"lucide-react\";\r\nimport type { CampaignPerformance, LandingPathPerformance } from \"@/lib/data/dashboard\";\r\n\r\ninterface TopCampaignsProps {\r\n  data: CampaignPerformance[];\r\n  dateRange?: { from: string; to: string };\r\n}\r\n\r\nexport function TopCampaigns({ data, dateRange }: TopCampaignsProps) {\r\n  const router = useRouter();\r\n\r\n  const handleRowClick = (campaign: CampaignPerformance) => {\r\n    const params = new URLSearchParams();\r\n    params.set(\"utm_campaign\", campaign.utm_campaign);\r\n    if (dateRange) {\r\n      params.set(\"from\", dateRange.from);\r\n      params.set(\"to\", dateRange.to);\r\n    }\r\n    router.push(`/leads?${params.toString()}`);\r\n  };\r\n\r\n  return (\r\n    <AdminSectionCard title=\"Top Campaigns\">\r\n      <Table>\r\n        <TableHeader>\r\n          <TableRow>\r\n            <TableHead>Campaign</TableHead>\r\n            <TableHead>Channel</TableHead>\r\n            <TableHead className=\"text-right\">Leads</TableHead>\r\n            <TableHead className=\"text-right\">Qualified</TableHead>\r\n            <TableHead className=\"text-right\">CVR</TableHead>\r\n          </TableRow>\r\n        </TableHeader>\r\n        <TableBody>\r\n          {data.length === 0 ? (\r\n            <TableRow>\r\n              <TableCell colSpan={5} className=\"text-center text-muted-foreground text-sm py-8\">\r\n                No data available\r\n              </TableCell>\r\n            </TableRow>\r\n          ) : (\r\n            data.map((campaign) => (\r\n              <TableRow\r\n                key={campaign.campaignId}\r\n                className=\"cursor-pointer hover:bg-muted/50\"\r\n                onClick={() => handleRowClick(campaign)}\r\n              >\r\n                <TableCell className=\"font-medium\">{campaign.campaignName}</TableCell>\r\n                <TableCell>{campaign.channel}</TableCell>\r\n                <TableCell className=\"text-right\">{campaign.leads.toLocaleString()}</TableCell>\r\n                <TableCell className=\"text-right\">{campaign.qualified.toLocaleString()}</TableCell>\r\n                <TableCell className=\"text-right\">\r\n                  <div className=\"flex items-center justify-end gap-1\">\r\n                    <span>{campaign.cvr}%</span>\r\n                    <ArrowRight className=\"size-3 text-muted-foreground\" />\r\n                  </div>\r\n                </TableCell>\r\n              </TableRow>\r\n            ))\r\n          )}\r\n        </TableBody>\r\n      </Table>\r\n    </AdminSectionCard>\r\n  );\r\n}\r\n\r\ninterface TopLandingPathsProps {\r\n  data: LandingPathPerformance[];\r\n  dateRange?: { from: string; to: string };\r\n}\r\n\r\nexport function TopLandingPaths({ data, dateRange }: TopLandingPathsProps) {\r\n  const router = useRouter();\r\n\r\n  const handleRowClick = (path: LandingPathPerformance) => {\r\n    const params = new URLSearchParams();\r\n    // Note: In Phase 1, we don't have landing path filter yet, so we'll just show all leads\r\n    // In Phase 3, this would filter by landing path\r\n    if (dateRange) {\r\n      params.set(\"from\", dateRange.from);\r\n      params.set(\"to\", dateRange.to);\r\n    }\r\n    router.push(`/leads?${params.toString()}`);\r\n  };\r\n\r\n  return (\r\n    <AdminSectionCard title=\"Top Landing Paths\">\r\n      <Table>\r\n        <TableHeader>\r\n          <TableRow>\r\n            <TableHead>Path</TableHead>\r\n            <TableHead className=\"text-right\">Sessions</TableHead>\r\n            <TableHead className=\"text-right\">Leads</TableHead>\r\n            <TableHead className=\"text-right\">CVR</TableHead>\r\n          </TableRow>\r\n        </TableHeader>\r\n        <TableBody>\r\n          {data.length === 0 ? (\r\n            <TableRow>\r\n              <TableCell colSpan={4} className=\"text-center text-muted-foreground text-sm py-8\">\r\n                No data available\r\n              </TableCell>\r\n            </TableRow>\r\n          ) : (\r\n            data.map((path, index) => (\r\n              <TableRow\r\n                key={index}\r\n                className=\"cursor-pointer hover:bg-muted/50\"\r\n                onClick={() => handleRowClick(path)}\r\n              >\r\n                <TableCell className=\"font-medium font-mono text-sm\">{path.path}</TableCell>\r\n                <TableCell className=\"text-right\">{path.sessions.toLocaleString()}</TableCell>\r\n                <TableCell className=\"text-right\">{path.leads.toLocaleString()}</TableCell>\r\n                <TableCell className=\"text-right\">\r\n                  <div className=\"flex items-center justify-end gap-1\">\r\n                    <span>{path.cvr}%</span>\r\n                    <ArrowRight className=\"size-3 text-muted-foreground\" />\r\n                  </div>\r\n                </TableCell>\r\n              </TableRow>\r\n            ))\r\n          )}\r\n        </TableBody>\r\n      </Table>\r\n    </AdminSectionCard>\r\n  );\r\n}\r\n\r\ninterface RecentActivityProps {\r\n  data: Array<{\r\n    id: string;\r\n    type: string;\r\n    title: string;\r\n    timestamp: string;\r\n    actor?: string;\r\n  }>;\r\n}\r\n\r\nexport function RecentActivity({ data }: RecentActivityProps) {\r\n  return (\r\n    <AdminSectionCard title=\"Recent Activity\">\r\n      <div className=\"space-y-3\">\r\n        {data.length === 0 ? (\r\n          <p className=\"text-center text-muted-foreground text-sm py-8\">No recent activity</p>\r\n        ) : (\r\n          data.slice(0, 10).map((event) => (\r\n            <div key={event.id} className=\"flex items-start gap-3 text-sm border-b pb-3 last:border-0\">\r\n              <div className=\"flex-1\">\r\n                <p className=\"font-medium\">{event.title}</p>\r\n                <p className=\"text-muted-foreground text-xs mt-1\">\r\n                  {event.actor && `${event.actor}  `}\r\n                  {new Date(event.timestamp).toLocaleString()}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n    </AdminSectionCard>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2131, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/minhmice/Documents/projects/prosfin-web/apps/admin/src/app/%28app%29/dashboard/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { Suspense } from \"react\";\r\nimport { useSearchParams } from \"next/navigation\";\r\nimport { format, parseISO, subDays, differenceInDays } from \"date-fns\";\r\nimport { AdminPageShell, AdminSkeleton } from \"@prosfin/ui\";\r\nimport { DashboardControlBar } from \"@/components/dashboard/dashboard-control-bar\";\r\nimport { KPICard } from \"@/components/dashboard/kpi-card\";\r\nimport { TrendChart } from \"@/components/dashboard/trend-chart\";\r\nimport {\r\n  ChannelChart,\r\n  PipelineChart,\r\n} from \"@/components/dashboard/breakdown-charts\";\r\nimport {\r\n  TopCampaigns,\r\n  TopLandingPaths,\r\n  RecentActivity,\r\n} from \"@/components/dashboard/top-performers\";\r\nimport { getDashboardData, type DateRange } from \"@/lib/data/dashboard\";\r\nimport type { DashboardData } from \"@/lib/data/dashboard\";\r\n\r\nexport const dynamic = \"force-dynamic\";\r\n\r\nfunction SearchParamsReader({\r\n  children,\r\n}: {\r\n  children: (params: {\r\n    from: string | null;\r\n    to: string | null;\r\n    compareMode: string;\r\n  }) => React.ReactNode;\r\n}) {\r\n  const searchParams = useSearchParams();\r\n  const fromStr = searchParams.get(\"from\");\r\n  const toStr = searchParams.get(\"to\");\r\n  const compareMode = searchParams.get(\"compare_mode\") || \"prev\";\r\n\r\n  return <>{children({ from: fromStr, to: toStr, compareMode })}</>;\r\n}\r\n\r\n// Wrap SearchParamsReader in Suspense for Next.js\r\nfunction SearchParamsReaderWrapper({\r\n  children,\r\n}: {\r\n  children: (params: {\r\n    from: string | null;\r\n    to: string | null;\r\n    compareMode: string;\r\n  }) => React.ReactNode;\r\n}) {\r\n  return (\r\n    <Suspense fallback={null}>\r\n      <SearchParamsReader>{children}</SearchParamsReader>\r\n    </Suspense>\r\n  );\r\n}\r\n\r\nfunction DashboardContentWithParams({\r\n  params,\r\n}: {\r\n  params: { from: string | null; to: string | null; compareMode: string };\r\n}) {\r\n  const [dashboardData, setDashboardData] =\r\n    React.useState<DashboardData | null>(null);\r\n  const [isLoading, setIsLoading] = React.useState(true);\r\n  const [dateRange, setDateRange] = React.useState<DateRange | null>(null);\r\n  const [compareEnabled, setCompareEnabled] = React.useState(false);\r\n  const [compareRange, setCompareRange] = React.useState<DateRange | null>(\r\n    null\r\n  );\r\n\r\n  // Get date range from URL or default\r\n  const fromStr = params.from;\r\n  const toStr = params.to;\r\n  const compareMode = params.compareMode || \"prev\";\r\n\r\n  React.useEffect(() => {\r\n    if (fromStr && toStr) {\r\n      try {\r\n        const from = parseISO(fromStr);\r\n        const to = parseISO(toStr);\r\n        setDateRange({ from, to });\r\n      } catch {\r\n        // Invalid date, use default\r\n        const to = new Date();\r\n        const from = subDays(to, 30);\r\n        setDateRange({ from, to });\r\n      }\r\n    } else {\r\n      // Default: last 30 days\r\n      const to = new Date();\r\n      const from = subDays(to, 30);\r\n      setDateRange({ from, to });\r\n    }\r\n  }, [fromStr, toStr]);\r\n\r\n  // Calculate compare range\r\n  React.useEffect(() => {\r\n    if (dateRange && compareEnabled) {\r\n      if (compareMode === \"prev\") {\r\n        const days = differenceInDays(dateRange.to, dateRange.from);\r\n        const compareTo = subDays(dateRange.from, 1);\r\n        const compareFrom = subDays(compareTo, days);\r\n        setCompareRange({ from: compareFrom, to: compareTo });\r\n      } else if (compareMode === \"month\") {\r\n        // Previous month (simplified)\r\n        const compareTo = subDays(dateRange.from, 1);\r\n        const days = differenceInDays(dateRange.to, dateRange.from);\r\n        const compareFrom = subDays(compareTo, days);\r\n        setCompareRange({ from: compareFrom, to: compareTo });\r\n      }\r\n    } else {\r\n      setCompareRange(null);\r\n    }\r\n  }, [dateRange, compareEnabled, compareMode]);\r\n\r\n  // Fetch dashboard data\r\n  React.useEffect(() => {\r\n    if (!dateRange) return;\r\n\r\n    let cancelled = false;\r\n    setIsLoading(true);\r\n    getDashboardData(dateRange, compareRange || undefined)\r\n      .then((data) => {\r\n        if (!cancelled) {\r\n          setDashboardData(data);\r\n          setIsLoading(false);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        if (!cancelled) {\r\n          console.error(\"Failed to load dashboard data:\", error);\r\n          setIsLoading(false);\r\n        }\r\n      });\r\n\r\n    return () => {\r\n      cancelled = true;\r\n    };\r\n  }, [dateRange, compareRange]);\r\n\r\n  // Build drill-down params with date range\r\n  const buildDrillDownParams = React.useCallback(\r\n    (additionalParams: Record<string, string> = {}) => {\r\n      const params: Record<string, string> = { ...additionalParams };\r\n      if (dateRange) {\r\n        params.from = format(dateRange.from, \"yyyy-MM-dd\");\r\n        params.to = format(dateRange.to, \"yyyy-MM-dd\");\r\n      }\r\n      return params;\r\n    },\r\n    [dateRange]\r\n  );\r\n\r\n  if (isLoading || !dashboardData || !dateRange) {\r\n    return (\r\n      <AdminPageShell\r\n        title=\"Dashboard\"\r\n        description=\"Overview of your business metrics\"\r\n      >\r\n        <DashboardControlBar />\r\n        <div className=\"space-y-6 p-4\">\r\n          <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6\">\r\n            {Array.from({ length: 6 }).map((_, i) => (\r\n              <AdminSkeleton key={i} variant=\"rectangular\" className=\"h-32\" />\r\n            ))}\r\n          </div>\r\n          <div className=\"grid gap-6 md:grid-cols-2\">\r\n            <AdminSkeleton variant=\"rectangular\" className=\"h-80\" />\r\n            <AdminSkeleton variant=\"rectangular\" className=\"h-80\" />\r\n          </div>\r\n        </div>\r\n      </AdminPageShell>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <AdminPageShell\r\n      title=\"Dashboard\"\r\n      description=\"Overview of your business metrics\"\r\n    >\r\n      <DashboardControlBar\r\n        onDateRangeChange={setDateRange}\r\n        onCompareChange={setCompareEnabled}\r\n      />\r\n\r\n      <div className=\"space-y-6 p-4\">\r\n        {/* KPI Strip */}\r\n        <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 overflow-x-auto snap-x snap-mandatory\">\r\n          <KPICard\r\n            title=\"New Leads\"\r\n            value={dashboardData.kpis.newLeads}\r\n            compareValue={dashboardData.kpisCompare?.newLeads}\r\n            sparklineData={dashboardData.sparklineData}\r\n            tooltip=\"Total new leads in the selected period\"\r\n            drillDownPath=\"/leads\"\r\n            drillDownParams={buildDrillDownParams({ status: \"new\" })}\r\n          />\r\n          <KPICard\r\n            title=\"Qualified\"\r\n            value={dashboardData.kpis.qualifiedLeads}\r\n            compareValue={dashboardData.kpisCompare?.qualifiedLeads}\r\n            sparklineData={dashboardData.sparklineData}\r\n            tooltip=\"Leads that have been qualified\"\r\n            drillDownPath=\"/leads\"\r\n            drillDownParams={buildDrillDownParams({ status: \"qualified\" })}\r\n          />\r\n          <KPICard\r\n            title=\"Meetings\"\r\n            value={dashboardData.kpis.meetingsScheduled}\r\n            compareValue={dashboardData.kpisCompare?.meetingsScheduled}\r\n            sparklineData={dashboardData.sparklineData}\r\n            tooltip=\"Meetings scheduled with leads\"\r\n            drillDownPath=\"/leads\"\r\n            drillDownParams={buildDrillDownParams({\r\n              status: \"meeting_scheduled\",\r\n            })}\r\n          />\r\n          <KPICard\r\n            title=\"Won\"\r\n            value={dashboardData.kpis.won}\r\n            compareValue={dashboardData.kpisCompare?.won}\r\n            sparklineData={dashboardData.sparklineData}\r\n            tooltip=\"Converted leads / clients\"\r\n            drillDownPath=\"/clients\"\r\n            drillDownParams={buildDrillDownParams({ status: \"active\" })}\r\n          />\r\n          <KPICard\r\n            title=\"CVR: LeadQualified\"\r\n            value={dashboardData.kpis.cvrLeadToQualified}\r\n            compareValue={dashboardData.kpisCompare?.cvrLeadToQualified}\r\n            sparklineData={dashboardData.sparklineData}\r\n            tooltip=\"Conversion rate from new leads to qualified\"\r\n            formatValue={(v) => `${v}%`}\r\n          />\r\n          <KPICard\r\n            title=\"CVR: QualifiedMeeting\"\r\n            value={dashboardData.kpis.cvrQualifiedToMeeting}\r\n            compareValue={dashboardData.kpisCompare?.cvrQualifiedToMeeting}\r\n            sparklineData={dashboardData.sparklineData}\r\n            tooltip=\"Conversion rate from qualified to meeting scheduled\"\r\n            formatValue={(v) => `${v}%`}\r\n          />\r\n        </div>\r\n\r\n        {/* Core Charts */}\r\n        <div className=\"grid gap-6 md:grid-cols-2\">\r\n          <TrendChart\r\n            title=\"Acquisition Trend\"\r\n            data={dashboardData.dailySeries}\r\n            compareData={dashboardData.dailySeriesCompare}\r\n            metric=\"leads\"\r\n          />\r\n          <ChannelChart\r\n            data={dashboardData.channelBreakdown}\r\n            onBarClick={(channel) => {\r\n              const params = new URLSearchParams(\r\n                buildDrillDownParams({ source: channel })\r\n              );\r\n              window.location.href = `/leads?${params.toString()}`;\r\n            }}\r\n          />\r\n        </div>\r\n\r\n        <PipelineChart data={dashboardData.pipelineSnapshot} />\r\n\r\n        {/* Operational Tables */}\r\n        <div className=\"grid gap-6 md:grid-cols-2\">\r\n          <TopCampaigns\r\n            data={dashboardData.campaignPerformance}\r\n            dateRange={\r\n              dateRange\r\n                ? {\r\n                    from: format(dateRange.from, \"yyyy-MM-dd\"),\r\n                    to: format(dateRange.to, \"yyyy-MM-dd\"),\r\n                  }\r\n                : undefined\r\n            }\r\n          />\r\n          <TopLandingPaths\r\n            data={dashboardData.landingPathPerformance}\r\n            dateRange={\r\n              dateRange\r\n                ? {\r\n                    from: format(dateRange.from, \"yyyy-MM-dd\"),\r\n                    to: format(dateRange.to, \"yyyy-MM-dd\"),\r\n                  }\r\n                : undefined\r\n            }\r\n          />\r\n        </div>\r\n\r\n        {/* Recent Activity */}\r\n        <RecentActivity data={dashboardData.recentActivity} />\r\n      </div>\r\n    </AdminPageShell>\r\n  );\r\n}\r\n\r\nexport default function DashboardPage() {\r\n  return (\r\n    <Suspense\r\n      fallback={\r\n        <AdminPageShell\r\n          title=\"Dashboard\"\r\n          description=\"Overview of your business metrics\"\r\n        >\r\n          <DashboardControlBar />\r\n          <div className=\"space-y-6 p-4\">\r\n            <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6\">\r\n              {Array.from({ length: 6 }).map((_, i) => (\r\n                <AdminSkeleton key={i} variant=\"rectangular\" className=\"h-32\" />\r\n              ))}\r\n            </div>\r\n            <div className=\"grid gap-6 md:grid-cols-2\">\r\n              <AdminSkeleton variant=\"rectangular\" className=\"h-80\" />\r\n              <AdminSkeleton variant=\"rectangular\" className=\"h-80\" />\r\n            </div>\r\n          </div>\r\n        </AdminPageShell>\r\n      }\r\n    >\r\n      <SearchParamsReaderWrapper>\r\n        {(params) => <DashboardContentWithParams params={params} />}\r\n      </SearchParamsReaderWrapper>\r\n    </Suspense>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}