{"version":3,"sources":["../../../../../../apps/admin/src/app/%28app%29/campaigns/page.tsx","../../../../../../apps/admin/src/components/campaigns/utm-builder.tsx","../../../../../../apps/admin/src/components/campaigns/inline-status-edit.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { format } from \"date-fns\";\r\nimport {\r\n  AdminPageShell,\r\n  Badge,\r\n  Button,\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n} from \"@prosfin/ui\";\r\nimport { AppDataTable } from \"@/components/admin/data-table/app-data-table\";\r\nimport { TableRowActions, type RowAction } from \"@/components/admin/data-table/table-row-actions\";\r\nimport { UTMBuilder } from \"@/components/campaigns/utm-builder\";\r\nimport { CopyFlows } from \"@/components/campaigns/copy-flows\";\r\nimport { InlineStatusEdit } from \"@/components/campaigns/inline-status-edit\";\r\nimport { StatusChangeDialog } from \"@/components/campaigns/status-change-dialog\";\r\nimport { Filter, X } from \"lucide-react\";\r\nimport {\r\n  listCampaigns,\r\n  createCampaign,\r\n  updateCampaignStatus,\r\n  duplicateCampaign,\r\n  type CreateCampaignInput,\r\n} from \"@/lib/data/campaigns\";\r\nimport { useUrlState, useUrlStateArray } from \"@/hooks/use-url-state\";\r\nimport { showToast } from \"@/lib/toast\";\r\nimport type { Campaign, CampaignStatus, ChannelPreset } from \"@/types/admin\";\r\nimport type { DataTableColumn } from \"@/components/admin/data-table/types\";\r\n\r\nconst statusColors: Record<CampaignStatus, string> = {\r\n  active: \"bg-green-100 text-green-800\",\r\n  paused: \"bg-yellow-100 text-yellow-800\",\r\n  archived: \"bg-gray-100 text-gray-800\",\r\n};\r\n\r\nconst channelLabels: Record<ChannelPreset, string> = {\r\n  facebook: \"Facebook\",\r\n  youtube: \"YouTube\",\r\n  tiktok: \"TikTok\",\r\n  linkedin: \"LinkedIn\",\r\n  email: \"Email\",\r\n  other: \"Other\",\r\n};\r\n\r\nexport default function CampaignsPage() {\r\n  const router = useRouter();\r\n  const [campaigns, setCampaigns] = React.useState<Campaign[]>([]);\r\n  const [isLoading, setIsLoading] = React.useState(true);\r\n\r\n  // Status change dialog\r\n  const [statusDialogOpen, setStatusDialogOpen] = React.useState(false);\r\n  const [statusDialogCampaign, setStatusDialogCampaign] = React.useState<Campaign | null>(null);\r\n  const [statusDialogTarget, setStatusDialogTarget] = React.useState<CampaignStatus | null>(null);\r\n\r\n  // URL state sync\r\n  const [search, setSearch] = useUrlState<string>(\"q\", \"\", { debounce: 300, replace: true });\r\n  const [statusFilter, setStatusFilter] = useUrlStateArray(\"status\", []);\r\n  const [channelFilter, setChannelFilter] = useUrlState<string>(\"channel\", \"\");\r\n  const [pageIndexStr, setPageIndexStr] = useUrlState<string>(\"page\", \"0\");\r\n  const pageIndex = React.useMemo(() => {\r\n    const parsed = parseInt(pageIndexStr, 10);\r\n    return isNaN(parsed) || parsed < 0 ? 0 : parsed;\r\n  }, [pageIndexStr]);\r\n  const setPageIndex = React.useCallback((index: number) => {\r\n    setPageIndexStr(String(index));\r\n  }, [setPageIndexStr]);\r\n\r\n  React.useEffect(() => {\r\n    listCampaigns().then((data) => {\r\n      setCampaigns(data);\r\n      setIsLoading(false);\r\n    });\r\n  }, []);\r\n\r\n  // Filter campaigns\r\n  const filteredCampaigns = React.useMemo(() => {\r\n    let filtered = [...campaigns];\r\n\r\n    // Exclude archived by default unless explicitly filtered\r\n    if (statusFilter.length === 0) {\r\n      filtered = filtered.filter((c) => c.status !== \"archived\");\r\n    } else {\r\n      filtered = filtered.filter((c) => statusFilter.includes(c.status));\r\n    }\r\n\r\n    // Search filter\r\n    if (search) {\r\n      const searchLower = search.toLowerCase();\r\n      filtered = filtered.filter(\r\n        (c) =>\r\n          c.name.toLowerCase().includes(searchLower) ||\r\n          c.utm_campaign.toLowerCase().includes(searchLower)\r\n      );\r\n    }\r\n\r\n    // Channel filter\r\n    if (channelFilter) {\r\n      filtered = filtered.filter((c) => c.channelPreset === channelFilter);\r\n    }\r\n\r\n    return filtered;\r\n  }, [campaigns, search, statusFilter, channelFilter]);\r\n\r\n  const handleSaveCampaign = async (input: CreateCampaignInput) => {\r\n    try {\r\n      const newCampaign = await createCampaign(input);\r\n      setCampaigns((prev) => [...prev, newCampaign]);\r\n      showToast.success(\"Campaign saved successfully\");\r\n    } catch (error) {\r\n      showToast.error(\"Failed to save campaign\");\r\n    }\r\n  };\r\n\r\n  const handleStatusChange = async (campaignId: string, status: CampaignStatus) => {\r\n    try {\r\n      await updateCampaignStatus(campaignId, status);\r\n      setCampaigns((prev) =>\r\n        prev.map((c) => (c.id === campaignId ? { ...c, status } : c))\r\n      );\r\n      showToast.success(`Campaign ${status}`);\r\n    } catch (error) {\r\n      showToast.error(\"Failed to update status\");\r\n    }\r\n  };\r\n\r\n  const handleNeedsNotes = (campaignId: string, status: CampaignStatus) => {\r\n    const campaign = campaigns.find((c) => c.id === campaignId);\r\n    if (campaign) {\r\n      setStatusDialogCampaign(campaign);\r\n      setStatusDialogTarget(status);\r\n      setStatusDialogOpen(true);\r\n    }\r\n  };\r\n\r\n  const handleDuplicate = async (campaign: Campaign) => {\r\n    try {\r\n      const newCampaign = await duplicateCampaign(campaign.id);\r\n      setCampaigns((prev) => [...prev, newCampaign]);\r\n      showToast.success(\"Campaign duplicated\");\r\n    } catch (error) {\r\n      showToast.error(\"Failed to duplicate campaign\");\r\n    }\r\n  };\r\n\r\n  const rowActions: RowAction<Campaign>[] = [\r\n    { label: \"View Details\", onClick: (row) => router.push(`/campaigns/${row.id}`) },\r\n    { label: \"Duplicate\", onClick: (row) => handleDuplicate(row) },\r\n    { label: \"Pause\", onClick: (row) => handleNeedsNotes(row.id, \"paused\") },\r\n    { label: \"Archive\", onClick: (row) => handleNeedsNotes(row.id, \"archived\"), variant: \"destructive\" },\r\n  ];\r\n\r\n  // Truncate URL for display\r\n  const truncateUrl = (url: string, maxLength = 40) => {\r\n    try {\r\n      const parsed = new URL(url);\r\n      const display = parsed.hostname + parsed.pathname;\r\n      return display.length > maxLength ? display.substring(0, maxLength) + \"...\" : display;\r\n    } catch {\r\n      return url.length > maxLength ? url.substring(0, maxLength) + \"...\" : url;\r\n    }\r\n  };\r\n\r\n  const columns: DataTableColumn<Campaign>[] = [\r\n    { id: \"name\", header: \"Name\", accessorKey: \"name\", enableSorting: true },\r\n    {\r\n      id: \"status\",\r\n      header: \"Status\",\r\n      accessorKey: \"status\",\r\n      cell: ({ row }) => (\r\n        <InlineStatusEdit\r\n          campaign={row.original}\r\n          onUpdate={handleStatusChange}\r\n          onNeedsNotes={handleNeedsNotes}\r\n        />\r\n      ),\r\n    },\r\n    {\r\n      id: \"channel\",\r\n      header: \"Channel\",\r\n      accessorKey: \"channelPreset\",\r\n      cell: ({ row }) =>\r\n        row.original.channelPreset ? (\r\n          <Badge variant=\"outline\">{channelLabels[row.original.channelPreset]}</Badge>\r\n        ) : (\r\n          <span className=\"text-muted-foreground text-sm\">â€”</span>\r\n        ),\r\n    },\r\n    {\r\n      id: \"destination\",\r\n      header: \"Destination\",\r\n      accessorKey: \"destinationUrl\",\r\n      cell: ({ row }) => (\r\n        <span className=\"text-sm text-muted-foreground\">{truncateUrl(row.original.destinationUrl)}</span>\r\n      ),\r\n    },\r\n    { id: \"utm_campaign\", header: \"Campaign\", accessorKey: \"utm_campaign\" },\r\n    { id: \"utm_source\", header: \"Source\", accessorKey: \"utm_source\" },\r\n    { id: \"utm_medium\", header: \"Medium\", accessorKey: \"utm_medium\" },\r\n    {\r\n      id: \"updatedAt\",\r\n      header: \"Updated\",\r\n      accessorKey: \"updatedAt\",\r\n      cell: ({ row }) => format(new Date(row.original.updatedAt), \"MMM dd, yyyy\"),\r\n    },\r\n    {\r\n      id: \"copy\",\r\n      header: \"\",\r\n      cell: ({ row }) => <CopyFlows campaign={row.original} variant=\"icons\" />,\r\n    },\r\n    {\r\n      id: \"actions\",\r\n      header: \"\",\r\n      cell: ({ row }) => <TableRowActions row={row.original} actions={rowActions} />,\r\n    },\r\n  ];\r\n\r\n  const filters = (\r\n    <div className=\"flex items-center gap-2\">\r\n      <DropdownMenu>\r\n        <DropdownMenuTrigger asChild>\r\n          <Button variant=\"outline\" size=\"sm\" className=\"h-8\">\r\n            <Filter className=\"mr-2 size-3\" />\r\n            Status\r\n            {statusFilter.length > 0 && (\r\n              <span className=\"ml-2 rounded-full bg-primary px-1.5 py-0.5 text-xs text-primary-foreground\">\r\n                {statusFilter.length}\r\n              </span>\r\n            )}\r\n          </Button>\r\n        </DropdownMenuTrigger>\r\n        <DropdownMenuContent align=\"start\" className=\"w-48\">\r\n          {([\"active\", \"paused\", \"archived\"] as CampaignStatus[]).map((status) => (\r\n            <DropdownMenuItem\r\n              key={status}\r\n              onClick={() => {\r\n                const newFilter = statusFilter.includes(status)\r\n                  ? statusFilter.filter((s) => s !== status)\r\n                  : [...statusFilter, status];\r\n                setStatusFilter(newFilter);\r\n              }}\r\n            >\r\n              <input type=\"checkbox\" checked={statusFilter.includes(status)} onChange={() => {}} className=\"mr-2\" />\r\n              <Badge className={statusColors[status]}>{status}</Badge>\r\n            </DropdownMenuItem>\r\n          ))}\r\n        </DropdownMenuContent>\r\n      </DropdownMenu>\r\n\r\n      <DropdownMenu>\r\n        <DropdownMenuTrigger asChild>\r\n          <Button variant=\"outline\" size=\"sm\" className=\"h-8\">\r\n            <Filter className=\"mr-2 size-3\" />\r\n            Channel\r\n            {channelFilter && (\r\n              <X className=\"ml-2 size-3\" onClick={(e) => { e.stopPropagation(); setChannelFilter(\"\"); }} />\r\n            )}\r\n          </Button>\r\n        </DropdownMenuTrigger>\r\n        <DropdownMenuContent align=\"start\" className=\"w-48\">\r\n          {(Object.keys(channelLabels) as ChannelPreset[]).map((channel) => (\r\n            <DropdownMenuItem key={channel} onClick={() => setChannelFilter(channel)}>\r\n              {channelLabels[channel]}\r\n            </DropdownMenuItem>\r\n          ))}\r\n        </DropdownMenuContent>\r\n      </DropdownMenu>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <AdminPageShell title=\"Campaigns\" description=\"Create and manage UTM campaign links\">\r\n      <div className=\"grid gap-6 lg:grid-cols-2\">\r\n        <UTMBuilder onSave={handleSaveCampaign} />\r\n        <div className=\"space-y-4\">\r\n          <h3 className=\"text-lg font-semibold\">Campaign History</h3>\r\n          <AppDataTable\r\n            columns={columns}\r\n            data={filteredCampaigns}\r\n            isLoading={isLoading}\r\n            searchPlaceholder=\"Search campaigns...\"\r\n            emptyMessage=\"No campaigns found\"\r\n            searchValue={search}\r\n            onSearchChange={setSearch}\r\n            pageIndex={pageIndex}\r\n            onPageChange={setPageIndex}\r\n            filters={filters}\r\n            onRowClick={(campaign) => router.push(`/campaigns/${campaign.id}`)}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <StatusChangeDialog\r\n        campaign={statusDialogCampaign}\r\n        targetStatus={statusDialogTarget}\r\n        open={statusDialogOpen}\r\n        onOpenChange={setStatusDialogOpen}\r\n        onStatusChanged={(id, status) => {\r\n          setCampaigns((prev) => prev.map((c) => (c.id === id ? { ...c, status } : c)));\r\n        }}\r\n      />\r\n    </AdminPageShell>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport {\r\n  AdminSectionCard,\r\n  Button,\r\n  Input,\r\n  Label,\r\n  Textarea,\r\n} from \"@prosfin/ui\";\r\nimport { Switch } from \"@/components/shared/switch\";\r\nimport { Copy, Check, Save, AlertCircle } from \"lucide-react\";\r\nimport {\r\n  generateUTMLink,\r\n  normalizeUTMValue,\r\n  isValidUrl,\r\n  generateShortLabel,\r\n  type CreateCampaignInput,\r\n} from \"@/lib/data/campaigns\";\r\nimport { showToast } from \"@/lib/toast\";\r\nimport type { ChannelPreset } from \"@/types/admin\";\r\n\r\ninterface UTMBuilderProps {\r\n  onSave: (input: CreateCampaignInput) => Promise<void>;\r\n}\r\n\r\nconst CHANNEL_PRESETS: { label: string; value: ChannelPreset; source: string; medium: string }[] = [\r\n  { label: \"Facebook\", value: \"facebook\", source: \"facebook\", medium: \"paid_social\" },\r\n  { label: \"YouTube\", value: \"youtube\", source: \"youtube\", medium: \"video\" },\r\n  { label: \"TikTok\", value: \"tiktok\", source: \"tiktok\", medium: \"paid_social\" },\r\n  { label: \"LinkedIn\", value: \"linkedin\", source: \"linkedin\", medium: \"paid_social\" },\r\n  { label: \"Email\", value: \"email\", source: \"newsletter\", medium: \"email\" },\r\n  { label: \"Other\", value: \"other\", source: \"\", medium: \"\" },\r\n];\r\n\r\nexport function UTMBuilder({ onSave }: UTMBuilderProps) {\r\n  const [formData, setFormData] = React.useState({\r\n    name: \"\",\r\n    destinationUrl: \"https://prosfin.vn\",\r\n    utm_source: \"\",\r\n    utm_medium: \"\",\r\n    utm_campaign: \"\",\r\n    utm_content: \"\",\r\n    utm_term: \"\",\r\n    notes: \"\",\r\n    tags: \"\",\r\n  });\r\n  const [channelPreset, setChannelPreset] = React.useState<ChannelPreset | null>(null);\r\n  const [keepExistingParams, setKeepExistingParams] = React.useState(true);\r\n  const [generatedUrl, setGeneratedUrl] = React.useState(\"\");\r\n  const [copied, setCopied] = React.useState<\"url\" | \"short\" | \"utm\" | null>(null);\r\n  const [urlError, setUrlError] = React.useState(\"\");\r\n  const [isSaving, setIsSaving] = React.useState(false);\r\n\r\n  // Auto-generate URL when params change\r\n  React.useEffect(() => {\r\n    if (formData.destinationUrl && formData.utm_source && formData.utm_medium && formData.utm_campaign) {\r\n      if (!isValidUrl(formData.destinationUrl)) {\r\n        setUrlError(\"Invalid URL format\");\r\n        setGeneratedUrl(\"\");\r\n        return;\r\n      }\r\n      setUrlError(\"\");\r\n      const url = generateUTMLink({\r\n        destinationUrl: formData.destinationUrl,\r\n        utm_source: normalizeUTMValue(formData.utm_source),\r\n        utm_medium: normalizeUTMValue(formData.utm_medium),\r\n        utm_campaign: normalizeUTMValue(formData.utm_campaign),\r\n        utm_content: formData.utm_content ? normalizeUTMValue(formData.utm_content) : undefined,\r\n        utm_term: formData.utm_term ? normalizeUTMValue(formData.utm_term) : undefined,\r\n        keepExistingParams,\r\n      });\r\n      setGeneratedUrl(url);\r\n    } else {\r\n      setGeneratedUrl(\"\");\r\n    }\r\n  }, [formData, keepExistingParams]);\r\n\r\n  const handlePreset = (preset: typeof CHANNEL_PRESETS[0]) => {\r\n    setChannelPreset(preset.value);\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      utm_source: preset.source,\r\n      utm_medium: preset.medium,\r\n    }));\r\n  };\r\n\r\n  const handleCopy = async (type: \"url\" | \"short\" | \"utm\") => {\r\n    let text = \"\";\r\n    if (type === \"url\") {\r\n      text = generatedUrl;\r\n    } else if (type === \"short\") {\r\n      text = generateShortLabel({\r\n        channelPreset: channelPreset || undefined,\r\n        utm_campaign: normalizeUTMValue(formData.utm_campaign),\r\n        destinationUrl: formData.destinationUrl,\r\n      });\r\n    } else {\r\n      const url = new URL(generatedUrl);\r\n      text = url.search.substring(1); // Remove leading \"?\"\r\n    }\r\n    await navigator.clipboard.writeText(text);\r\n    setCopied(type);\r\n    showToast.success(`Copied ${type === \"url\" ? \"URL\" : type === \"short\" ? \"short label\" : \"UTM params\"}`);\r\n    setTimeout(() => setCopied(null), 2000);\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!formData.name || !generatedUrl) {\r\n      showToast.error(\"Please fill in required fields\");\r\n      return;\r\n    }\r\n    setIsSaving(true);\r\n    try {\r\n      await onSave({\r\n        name: formData.name,\r\n        destinationUrl: formData.destinationUrl,\r\n        utm_source: normalizeUTMValue(formData.utm_source),\r\n        utm_medium: normalizeUTMValue(formData.utm_medium),\r\n        utm_campaign: normalizeUTMValue(formData.utm_campaign),\r\n        utm_content: formData.utm_content ? normalizeUTMValue(formData.utm_content) : undefined,\r\n        utm_term: formData.utm_term ? normalizeUTMValue(formData.utm_term) : undefined,\r\n        channelPreset: channelPreset || undefined,\r\n        notes: formData.notes || undefined,\r\n        tags: formData.tags ? formData.tags.split(\",\").map((t) => t.trim()) : undefined,\r\n        keepExistingParams,\r\n      });\r\n      // Reset form\r\n      setFormData({\r\n        name: \"\", destinationUrl: \"https://prosfin.vn\", utm_source: \"\", utm_medium: \"\",\r\n        utm_campaign: \"\", utm_content: \"\", utm_term: \"\", notes: \"\", tags: \"\",\r\n      });\r\n      setChannelPreset(null);\r\n      setGeneratedUrl(\"\");\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  const isValid = formData.name && formData.destinationUrl && formData.utm_source && \r\n                  formData.utm_medium && formData.utm_campaign && !urlError;\r\n\r\n  return (\r\n    <AdminSectionCard title=\"UTM Builder\">\r\n      <div className=\"space-y-6\">\r\n        {/* Section 1: Destination URL */}\r\n        <div className=\"space-y-3\">\r\n          <h4 className=\"text-sm font-medium\">Destination URL</h4>\r\n          <div>\r\n            <Label htmlFor=\"destinationUrl\">URL *</Label>\r\n            <Input\r\n              id=\"destinationUrl\"\r\n              value={formData.destinationUrl}\r\n              onChange={(e) => setFormData((prev) => ({ ...prev, destinationUrl: e.target.value }))}\r\n              placeholder=\"https://prosfin.vn/services\"\r\n              className={urlError ? \"border-destructive\" : \"\"}\r\n            />\r\n            {urlError && (\r\n              <p className=\"text-xs text-destructive mt-1 flex items-center gap-1\">\r\n                <AlertCircle className=\"size-3\" /> {urlError}\r\n              </p>\r\n            )}\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <Switch checked={keepExistingParams} onCheckedChange={setKeepExistingParams} id=\"keepParams\" />\r\n            <Label htmlFor=\"keepParams\" className=\"text-sm font-normal\">Keep existing query params</Label>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Section 2: Channel Presets */}\r\n        <div className=\"space-y-3\">\r\n          <h4 className=\"text-sm font-medium\">Channel Preset</h4>\r\n          <div className=\"flex flex-wrap gap-2\">\r\n            {CHANNEL_PRESETS.map((preset) => (\r\n              <Button\r\n                key={preset.value}\r\n                variant={channelPreset === preset.value ? \"default\" : \"outline\"}\r\n                size=\"sm\"\r\n                onClick={() => handlePreset(preset)}\r\n              >\r\n                {preset.label}\r\n              </Button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Section 3: Campaign Parameters */}\r\n        <div className=\"space-y-3\">\r\n          <h4 className=\"text-sm font-medium\">Campaign Parameters</h4>\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div>\r\n              <Label htmlFor=\"utm_source\">UTM Source * <span className=\"text-muted-foreground text-xs\">(referrer)</span></Label>\r\n              <Input id=\"utm_source\" value={formData.utm_source}\r\n                onChange={(e) => setFormData((prev) => ({ ...prev, utm_source: e.target.value }))}\r\n                placeholder=\"facebook, google, newsletter\" />\r\n            </div>\r\n            <div>\r\n              <Label htmlFor=\"utm_medium\">UTM Medium * <span className=\"text-muted-foreground text-xs\">(marketing medium)</span></Label>\r\n              <Input id=\"utm_medium\" value={formData.utm_medium}\r\n                onChange={(e) => setFormData((prev) => ({ ...prev, utm_medium: e.target.value }))}\r\n                placeholder=\"paid_social, email, cpc\" />\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <Label htmlFor=\"utm_campaign\">UTM Campaign * <span className=\"text-muted-foreground text-xs\">(campaign name)</span></Label>\r\n            <Input id=\"utm_campaign\" value={formData.utm_campaign}\r\n              onChange={(e) => setFormData((prev) => ({ ...prev, utm_campaign: e.target.value }))}\r\n              placeholder=\"prosfin_audit_2024w01\" />\r\n          </div>\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div>\r\n              <Label htmlFor=\"utm_content\">UTM Content <span className=\"text-muted-foreground text-xs\">(creative variant)</span></Label>\r\n              <Input id=\"utm_content\" value={formData.utm_content}\r\n                onChange={(e) => setFormData((prev) => ({ ...prev, utm_content: e.target.value }))}\r\n                placeholder=\"hookA_reel_v1\" />\r\n            </div>\r\n            <div>\r\n              <Label htmlFor=\"utm_term\">UTM Term <span className=\"text-muted-foreground text-xs\">(keyword)</span></Label>\r\n              <Input id=\"utm_term\" value={formData.utm_term}\r\n                onChange={(e) => setFormData((prev) => ({ ...prev, utm_term: e.target.value }))}\r\n                placeholder=\"finance_tips\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Section 4: Internal Label & Notes */}\r\n        <div className=\"space-y-3\">\r\n          <h4 className=\"text-sm font-medium\">Internal Label & Notes</h4>\r\n          <div>\r\n            <Label htmlFor=\"name\">Name * <span className=\"text-muted-foreground text-xs\">(internal label)</span></Label>\r\n            <Input id=\"name\" value={formData.name}\r\n              onChange={(e) => setFormData((prev) => ({ ...prev, name: e.target.value }))}\r\n              placeholder=\"FB | Summer 2024 | Audit Service | W01\" />\r\n          </div>\r\n          <div>\r\n            <Label htmlFor=\"notes\">Notes</Label>\r\n            <Textarea id=\"notes\" value={formData.notes}\r\n              onChange={(e) => setFormData((prev) => ({ ...prev, notes: e.target.value }))}\r\n              placeholder=\"Campaign notes...\" rows={2} />\r\n          </div>\r\n          <div>\r\n            <Label htmlFor=\"tags\">Tags <span className=\"text-muted-foreground text-xs\">(comma-separated)</span></Label>\r\n            <Input id=\"tags\" value={formData.tags}\r\n              onChange={(e) => setFormData((prev) => ({ ...prev, tags: e.target.value }))}\r\n              placeholder=\"summer, audit, facebook\" />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Section 5: Output Preview */}\r\n        {generatedUrl && (\r\n          <div className=\"space-y-3\">\r\n            <h4 className=\"text-sm font-medium\">Generated URL</h4>\r\n            <div className=\"rounded-md border bg-muted p-3\">\r\n              <p className=\"break-all text-sm font-mono\">{generatedUrl}</p>\r\n            </div>\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              <Button variant=\"outline\" size=\"sm\" onClick={() => handleCopy(\"url\")}>\r\n                {copied === \"url\" ? <Check className=\"mr-2 size-4\" /> : <Copy className=\"mr-2 size-4\" />}\r\n                Copy URL\r\n              </Button>\r\n              <Button variant=\"outline\" size=\"sm\" onClick={() => handleCopy(\"short\")}>\r\n                {copied === \"short\" ? <Check className=\"mr-2 size-4\" /> : <Copy className=\"mr-2 size-4\" />}\r\n                Copy Short Label\r\n              </Button>\r\n              <Button variant=\"outline\" size=\"sm\" onClick={() => handleCopy(\"utm\")}>\r\n                {copied === \"utm\" ? <Check className=\"mr-2 size-4\" /> : <Copy className=\"mr-2 size-4\" />}\r\n                Copy UTM Only\r\n              </Button>\r\n              <Button onClick={handleSave} disabled={!isValid || isSaving}>\r\n                <Save className=\"mr-2 size-4\" />\r\n                {isSaving ? \"Saving...\" : \"Save to History\"}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </AdminSectionCard>\r\n  );\r\n}\r\n\r\n","\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport {\r\n  Badge,\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n} from \"@prosfin/ui\";\r\nimport { ChevronDown } from \"lucide-react\";\r\nimport type { Campaign, CampaignStatus } from \"@/types/admin\";\r\n\r\ninterface InlineStatusEditProps {\r\n  campaign: Campaign;\r\n  onUpdate: (campaignId: string, status: CampaignStatus) => void;\r\n  onNeedsNotes?: (campaignId: string, status: CampaignStatus) => void;\r\n}\r\n\r\nconst statusColors: Record<CampaignStatus, string> = {\r\n  active: \"bg-green-100 text-green-800\",\r\n  paused: \"bg-yellow-100 text-yellow-800\",\r\n  archived: \"bg-gray-100 text-gray-800\",\r\n};\r\n\r\nconst statusOptions: { value: CampaignStatus; label: string; needsNotes: boolean }[] = [\r\n  { value: \"active\", label: \"Active\", needsNotes: false },\r\n  { value: \"paused\", label: \"Paused\", needsNotes: true },\r\n  { value: \"archived\", label: \"Archived\", needsNotes: true },\r\n];\r\n\r\nexport function InlineStatusEdit({ campaign, onUpdate, onNeedsNotes }: InlineStatusEditProps) {\r\n  const [isOpen, setIsOpen] = React.useState(false);\r\n\r\n  const handleStatusChange = (newStatus: CampaignStatus, needsNotes: boolean) => {\r\n    if (newStatus === campaign.status) {\r\n      setIsOpen(false);\r\n      return;\r\n    }\r\n\r\n    if (needsNotes && onNeedsNotes) {\r\n      onNeedsNotes(campaign.id, newStatus);\r\n    } else {\r\n      onUpdate(campaign.id, newStatus);\r\n    }\r\n\r\n    setIsOpen(false);\r\n  };\r\n\r\n  return (\r\n    <DropdownMenu open={isOpen} onOpenChange={setIsOpen}>\r\n      <DropdownMenuTrigger asChild>\r\n        <button\r\n          className=\"flex items-center gap-1 hover:opacity-80 transition-opacity\"\r\n          onClick={(e) => e.stopPropagation()}\r\n          suppressHydrationWarning\r\n        >\r\n          <Badge className={statusColors[campaign.status]}>\r\n            {campaign.status}\r\n          </Badge>\r\n          <ChevronDown className=\"size-3 text-muted-foreground\" />\r\n        </button>\r\n      </DropdownMenuTrigger>\r\n      <DropdownMenuContent align=\"start\">\r\n        {statusOptions.map((option) => (\r\n          <DropdownMenuItem\r\n            key={option.value}\r\n            onClick={(e) => {\r\n              e.stopPropagation();\r\n              handleStatusChange(option.value, option.needsNotes);\r\n            }}\r\n            className={option.value === campaign.status ? \"bg-muted\" : \"\"}\r\n          >\r\n            <Badge className={`mr-2 ${statusColors[option.value]}`}>\r\n              {option.label}\r\n            </Badge>\r\n            {option.needsNotes && option.value !== campaign.status && (\r\n              <span className=\"text-xs text-muted-foreground\">(requires note)</span>\r\n            )}\r\n          </DropdownMenuItem>\r\n        ))}\r\n      </DropdownMenuContent>\r\n    </DropdownMenu>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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"}