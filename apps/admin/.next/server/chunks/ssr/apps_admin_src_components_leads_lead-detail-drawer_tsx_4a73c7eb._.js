module.exports=[1054,a=>{"use strict";var b=a.i(42093),c=a.i(85455),d=a.i(99026);a.i(56120);var e=a.i(5542),f=a.i(86945),g=a.i(40780),h=a.i(37717),i=a.i(27725),j=a.i(27976),k=a.i(62584),l=a.i(56545),m=a.i(9843),n=a.i(33548),o=a.i(64964);let p=(0,a.i(28761).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),q={new:"bg-blue-100 text-blue-800",contacted:"bg-yellow-100 text-yellow-800",qualified:"bg-green-100 text-green-800",meeting_scheduled:"bg-purple-100 text-purple-800",converted:"bg-gray-100 text-gray-800",lost:"bg-red-100 text-red-800"},r={low:"bg-gray-100 text-gray-800",medium:"bg-yellow-100 text-yellow-800",high:"bg-red-100 text-red-800"};function s({lead:a}){let c=!a.email||""===a.email.trim(),d=!a.phone||""===a.phone.trim();return(0,b.jsxs)("div",{className:"space-y-6",children:[(c||d)&&(0,b.jsx)("div",{className:"rounded-lg border border-destructive/50 bg-destructive/10 p-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(p,{className:"size-4 text-destructive"}),(0,b.jsx)("span",{className:"text-sm text-destructive",children:c&&d?"Email and phone are missing":c?"Email is missing":"Phone is missing"})]}),(0,b.jsx)(i.Button,{variant:"outline",size:"sm",className:"h-7",onClick:()=>{console.log("Request info")},children:"Request Info"})]})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Contact Information"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Name"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:a.name})]}),a.company&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Company"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:a.company})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Email"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:a.email||"—"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Phone"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:a.phone||"—"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Interest & Priority"}),(0,b.jsxs)("div",{className:"space-y-3",children:[a.interest&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Service Interest"}),(0,b.jsx)("div",{className:"mt-1",children:(0,b.jsx)(h.Badge,{variant:"outline",children:a.interest})})]}),a.urgency&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Urgency"}),(0,b.jsx)("div",{className:"mt-1",children:(0,b.jsx)(h.Badge,{className:r[a.urgency],children:a.urgency})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Status"}),(0,b.jsx)("div",{className:"mt-1",children:(0,b.jsx)(h.Badge,{className:q[a.status],children:a.status})})]}),a.owner&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Owner"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:a.owner})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Dates"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Created"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:(0,o.format)(new Date(a.createdAt),"MMM dd, yyyy HH:mm")})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Last Updated"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:(0,o.format)(new Date(a.updatedAt),"MMM dd, yyyy HH:mm")})]})]})]})]})}var t=a.i(48016);function u({lead:a}){let c=a.timeline||[];return(0,b.jsx)(t.ActivityTimeline,{events:c})}var v=a.i(72962),w=a.i(27965);function x({lead:a}){let c=async b=>{try{await (0,w.addLeadNote)(a.id,b)}catch(a){console.error("Failed to add note:",a)}};return(0,b.jsx)(v.NotesSection,{lead:a,onNoteAdded:c})}function y({lead:a}){let c=a.attribution;return c?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Landing Information"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Landing Path"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:c.landingPath})]}),c.referrer&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Referrer"}),(0,b.jsx)("p",{className:"text-sm font-medium break-all",children:c.referrer})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Timestamp"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:(0,o.format)(new Date(c.timestamp),"MMM dd, yyyy HH:mm")})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:"UTM Parameters"}),(0,b.jsxs)("div",{className:"space-y-3",children:[c.utm_source&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"UTM Source"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:c.utm_source})]}),c.utm_medium&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"UTM Medium"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:c.utm_medium})]}),c.utm_campaign&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"UTM Campaign"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:c.utm_campaign})]}),c.utm_content&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"UTM Content"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:c.utm_content})]}),c.utm_term&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"UTM Term"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:c.utm_term})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Source"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Source"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:a.source})]}),a.utm_campaign&&(0,b.jsxs)("div",{className:"mt-3",children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Campaign"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:a.utm_campaign})]})]})]}):(0,b.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:(0,b.jsx)("p",{className:"text-sm",children:"No attribution data available"})})}var z=a.i(77979),A=a.i(29695),B=a.i(18416),C=a.i(69708);let D=[{value:"new",label:"New"},{value:"contacted",label:"Contacted"},{value:"qualified",label:"Qualified"},{value:"meeting_scheduled",label:"Meeting Scheduled"},{value:"converted",label:"Converted"},{value:"lost",label:"Lost"}];function E({lead:a,open:d,onOpenChange:e,onStatusChanged:g}){let[h,j]=c.useState(a.status),[k,l]=c.useState(!1);c.useEffect(()=>{d&&j(a.status)},[d,a.status]);let m=async()=>{if(h===a.status)return void e(!1);l(!0);try{await (0,w.updateLeadStatus)(a.id,h),g?.(a.id,h),C.showToast.success(`Status updated to ${h}`),e(!1)}catch(a){C.showToast.error("Failed to update status")}finally{l(!1)}};return(0,b.jsx)(f.Dialog,{open:d,onOpenChange:e,children:(0,b.jsxs)(f.DialogContent,{className:"sm:max-w-[400px]",children:[(0,b.jsxs)(f.DialogHeader,{children:[(0,b.jsx)(f.DialogTitle,{children:"Change Status"}),(0,b.jsxs)(f.DialogDescription,{children:["Update the status for ",a.name]})]}),(0,b.jsx)("div",{className:"py-4",children:(0,b.jsx)(A.RadioGroup,{value:h,onValueChange:a=>j(a),children:D.map(a=>(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(A.RadioGroupItem,{value:a.value,id:a.value}),(0,b.jsx)(B.Label,{htmlFor:a.value,className:"font-normal cursor-pointer",children:a.label})]},a.value))})}),(0,b.jsxs)(f.DialogFooter,{children:[(0,b.jsx)(i.Button,{variant:"outline",onClick:()=>e(!1),disabled:k,children:"Cancel"}),(0,b.jsx)(i.Button,{onClick:m,disabled:k,children:k?"Updating...":"Update Status"})]})]})})}let F={new:"bg-blue-100 text-blue-800",contacted:"bg-yellow-100 text-yellow-800",qualified:"bg-green-100 text-green-800",meeting_scheduled:"bg-purple-100 text-purple-800",converted:"bg-gray-100 text-gray-800",lost:"bg-red-100 text-red-800"};function G({lead:a,open:o,onOpenChange:p}){let q=(0,d.useRouter)(),r=function(){let[a,b]=c.useState(!1);return c.useEffect(()=>{let a=()=>{b(window.innerWidth<768)};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),a}(),[t,v]=c.useState(!1),[w,A]=c.useState(!1),B=c.useCallback(()=>{q.push("/leads"),p(!1)},[q,p]);if(c.useEffect(()=>{let a=a=>{"Escape"===a.key&&o&&B()};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[o,B]),!a)return null;let D=(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"sticky top-0 bg-background z-10 pb-4 border-b",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold mb-2",children:a.name}),(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[a.company&&(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:a.company}),(0,b.jsx)(h.Badge,{className:F[a.status],children:a.status}),a.owner&&(0,b.jsxs)(h.Badge,{variant:"outline",className:"flex items-center gap-1",children:[(0,b.jsx)(l.User,{className:"size-3"}),a.owner]})]})]}),(0,b.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:B,className:"h-8 w-8",children:(0,b.jsx)(j.X,{className:"size-4"})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-4",children:[(0,b.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>A(!0),children:[(0,b.jsx)(m.Tag,{className:"mr-2 size-3"}),"Change Status"]}),(0,b.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>v(!0),children:[(0,b.jsx)(n.ArrowRight,{className:"mr-2 size-3"}),"Convert to Client"]}),(0,b.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:()=>{navigator.clipboard.writeText(a.email),C.showToast.success("Email copied to clipboard")},className:"h-8 w-8",title:"Copy email",children:(0,b.jsx)(k.Copy,{className:"size-4"})}),a.phone&&(0,b.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:()=>{a.phone&&(navigator.clipboard.writeText(a.phone),C.showToast.success("Phone copied to clipboard"))},className:"h-8 w-8",title:"Copy phone",children:(0,b.jsx)(k.Copy,{className:"size-4"})})]})]}),(0,b.jsx)("div",{className:"mt-6",children:(0,b.jsxs)(g.Tabs,{defaultValue:"overview",className:"w-full",children:[(0,b.jsxs)(g.TabsList,{className:"grid w-full grid-cols-4",children:[(0,b.jsx)(g.TabsTrigger,{value:"overview",children:"Overview"}),(0,b.jsx)(g.TabsTrigger,{value:"activity",children:"Activity"}),(0,b.jsx)(g.TabsTrigger,{value:"notes",children:"Notes"}),(0,b.jsx)(g.TabsTrigger,{value:"attribution",children:"Attribution"})]}),(0,b.jsx)(g.TabsContent,{value:"overview",className:"mt-4",children:(0,b.jsx)(s,{lead:a})}),(0,b.jsx)(g.TabsContent,{value:"activity",className:"mt-4",children:(0,b.jsx)(u,{lead:a})}),(0,b.jsx)(g.TabsContent,{value:"notes",className:"mt-4",children:(0,b.jsx)(x,{lead:a})}),(0,b.jsx)(g.TabsContent,{value:"attribution",className:"mt-4",children:(0,b.jsx)(y,{lead:a})})]})})]});return(0,b.jsxs)(b.Fragment,{children:[r?(0,b.jsx)(e.Sheet,{open:o,onOpenChange:B,children:(0,b.jsx)(e.SheetContent,{className:"w-full sm:max-w-2xl overflow-y-auto",children:D})}):(0,b.jsx)(f.Dialog,{open:o,onOpenChange:B,children:(0,b.jsx)(f.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:D})}),(0,b.jsx)(E,{lead:a,open:w,onOpenChange:A,onStatusChanged:(a,b)=>{}}),(0,b.jsx)(z.ConvertLeadDialog,{lead:a,open:t,onOpenChange:v,onConverted:a=>{C.showToast.success("Lead converted successfully")}})]})}a.s(["LeadDetailDrawer",()=>G],1054)}];

//# sourceMappingURL=apps_admin_src_components_leads_lead-detail-drawer_tsx_4a73c7eb._.js.map