{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/minhmice/Documents/projects/prosfin-web/apps/admin/src/components/content/post-editor/activity-log.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport type { PostActivityEvent } from \"@/types/content\";\r\n\r\ninterface ActivityLogProps {\r\n  events: PostActivityEvent[];\r\n}\r\n\r\nexport function ActivityLog({ events }: ActivityLogProps) {\r\n  if (events.length === 0) {\r\n    return (\r\n      <div className=\"text-center text-muted-foreground text-sm py-8\">\r\n        No activity yet\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {events.map((event) => (\r\n        <div key={event.id} className=\"flex items-start gap-3 border-b pb-4 last:border-0\">\r\n          <div className=\"flex-1\">\r\n            <p className=\"font-medium text-sm\">{event.title}</p>\r\n            {event.description && (\r\n              <p className=\"text-muted-foreground text-xs mt-1\">{event.description}</p>\r\n            )}\r\n            <div className=\"flex items-center gap-2 mt-2\">\r\n              {event.actor && (\r\n                <span className=\"text-muted-foreground text-xs\">{event.actor}</span>\r\n              )}\r\n              <span className=\"text-muted-foreground text-xs\">•</span>\r\n              <span className=\"text-muted-foreground text-xs\">\r\n                {format(new Date(event.timestamp), \"MMM dd, yyyy HH:mm\")}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAGA;AAHA;;;AAUO,SAAS,YAAY,EAAE,MAAM,EAAoB;IACtD,IAAI,OAAO,MAAM,KAAK,GAAG;QACvB,qBACE,6VAAC;YAAI,WAAU;sBAAiD;;;;;;IAIpE;IAEA,qBACE,6VAAC;QAAI,WAAU;kBACZ,OAAO,GAAG,CAAC,CAAC,sBACX,6VAAC;gBAAmB,WAAU;0BAC5B,cAAA,6VAAC;oBAAI,WAAU;;sCACb,6VAAC;4BAAE,WAAU;sCAAuB,MAAM,KAAK;;;;;;wBAC9C,MAAM,WAAW,kBAChB,6VAAC;4BAAE,WAAU;sCAAsC,MAAM,WAAW;;;;;;sCAEtE,6VAAC;4BAAI,WAAU;;gCACZ,MAAM,KAAK,kBACV,6VAAC;oCAAK,WAAU;8CAAiC,MAAM,KAAK;;;;;;8CAE9D,6VAAC;oCAAK,WAAU;8CAAgC;;;;;;8CAChD,6VAAC;oCAAK,WAAU;8CACb,IAAA,wNAAM,EAAC,IAAI,KAAK,MAAM,SAAS,GAAG;;;;;;;;;;;;;;;;;;eAZjC,MAAM,EAAE;;;;;;;;;;AAoB1B"}},
    {"offset": {"line": 101, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/minhmice/Documents/projects/prosfin-web/apps/admin/src/mocks/posts.ts"],"sourcesContent":["import type { Post, PostStatus, ContentBucket } from \"@/types/content\";\r\n\r\n/**\r\n * Mock posts data\r\n * \r\n * Sample posts across all buckets and statuses for testing\r\n */\r\n\r\nconst mockAuthor = {\r\n  id: \"user-1\",\r\n  name: \"Admin User\",\r\n  email: \"admin@prosfin.vn\",\r\n};\r\n\r\n// Helper to create a simple Lexical editor state\r\nfunction createEditorState(text: string): Post[\"content\"] {\r\n  return {\r\n    root: {\r\n      children: [\r\n        {\r\n          children: [\r\n            {\r\n              detail: 0,\r\n              format: 0,\r\n              mode: \"normal\",\r\n              style: \"\",\r\n              text,\r\n              type: \"text\",\r\n              version: 1,\r\n            },\r\n          ],\r\n          direction: \"ltr\",\r\n          format: \"\",\r\n          indent: 0,\r\n          type: \"paragraph\",\r\n          version: 1,\r\n        },\r\n      ],\r\n      direction: \"ltr\",\r\n      format: \"\",\r\n      indent: 0,\r\n      type: \"root\",\r\n      version: 1,\r\n    },\r\n  };\r\n}\r\n\r\n// Base mock posts\r\nconst baseMockPosts: Post[] = [\r\n  // Insights - Published\r\n  {\r\n    id: \"post-1\",\r\n    bucket: \"insights\",\r\n    title: \"5 Cách Tối Ưu Tài Chính Doanh Nghiệp Năm 2024\",\r\n    slug: \"5-cach-toi-uu-tai-chinh-doanh-nghiep-nam-2024\",\r\n    excerpt: \"Khám phá các chiến lược tài chính hiệu quả giúp doanh nghiệp tăng trưởng bền vững trong năm 2024.\",\r\n    cover: \"/brand/prosfin-logo.svg\",\r\n    tags: [\"tài chính\", \"doanh nghiệp\", \"tối ưu\"],\r\n    content: createEditorState(\r\n      \"Trong bối cảnh kinh tế đầy biến động, việc tối ưu tài chính doanh nghiệp trở nên quan trọng hơn bao giờ hết. Bài viết này sẽ giúp bạn khám phá 5 cách hiệu quả để quản lý tài chính tốt hơn.\"\r\n    ),\r\n    seoTitle: \"5 Cách Tối Ưu Tài Chính Doanh Nghiệp 2024 | ProsFin\",\r\n    seoDescription: \"Khám phá các chiến lược tài chính hiệu quả giúp doanh nghiệp tăng trưởng bền vững trong năm 2024.\",\r\n    publishedAt: \"2024-01-15T10:00:00Z\",\r\n    updatedAt: \"2024-01-15T10:00:00Z\",\r\n    createdAt: \"2024-01-10T08:00:00Z\",\r\n    author: mockAuthor,\r\n    status: \"published\",\r\n  },\r\n  // Insights - Draft (missing cover - for \"Needs attention\" filter)\r\n  {\r\n    id: \"post-2\",\r\n    bucket: \"insights\",\r\n    title: \"Xu Hướng Đầu Tư Bất Động Sản 2024\",\r\n    slug: \"xu-huong-dau-tu-bat-dong-san-2024\",\r\n    excerpt: \"Phân tích các xu hướng đầu tư bất động sản đáng chú ý trong năm 2024.\",\r\n    tags: [\"đầu tư\", \"bất động sản\", \"xu hướng\"],\r\n    content: createEditorState(\r\n      \"Thị trường bất động sản năm 2024 đang có nhiều biến động thú vị. Các nhà đầu tư cần nắm bắt các xu hướng mới để đưa ra quyết định đúng đắn.\"\r\n    ),\r\n    // Missing cover - for testing \"Needs attention\" filter\r\n    updatedAt: \"2024-01-20T14:30:00Z\",\r\n    createdAt: \"2024-01-18T09:00:00Z\",\r\n    author: mockAuthor,\r\n    status: \"draft\",\r\n  },\r\n  // Insights - Scheduled (future date)\r\n  {\r\n    id: \"post-3\",\r\n    bucket: \"insights\",\r\n    title: \"Hướng Dẫn Quản Lý Dòng Tiền Cho Startup\",\r\n    slug: \"huong-dan-quan-ly-dong-tien-cho-startup\",\r\n    excerpt: \"Các bước cơ bản để quản lý dòng tiền hiệu quả cho các startup mới thành lập.\",\r\n    cover: \"/brand/prosfin-logo.svg\",\r\n    tags: [\"startup\", \"quản lý dòng tiền\", \"tài chính\"],\r\n    content: createEditorState(\r\n      \"Quản lý dòng tiền là một trong những thách thức lớn nhất đối với các startup. Bài viết này sẽ hướng dẫn bạn các phương pháp quản lý dòng tiền hiệu quả.\"\r\n    ),\r\n    seoTitle: \"Hướng Dẫn Quản Lý Dòng Tiền Cho Startup | ProsFin\",\r\n    seoDescription: \"Các bước cơ bản để quản lý dòng tiền hiệu quả cho các startup mới thành lập.\",\r\n    updatedAt: \"2024-01-25T16:00:00Z\",\r\n    createdAt: \"2024-01-25T16:00:00Z\",\r\n    author: mockAuthor,\r\n    status: \"scheduled\",\r\n    scheduledFor: new Date(Date.now() + 2 * 24 * 60 * 60 * 1000).toISOString(), // 2 days from now\r\n  },\r\n  // Insights - Scheduled (near future)\r\n  {\r\n    id: \"post-9\",\r\n    bucket: \"insights\",\r\n    title: \"Chiến Lược Tài Chính Cho Doanh Nghiệp Vừa Và Nhỏ\",\r\n    slug: \"chien-luoc-tai-chinh-cho-doanh-nghiep-vua-va-nho\",\r\n    excerpt: \"Khám phá các chiến lược tài chính phù hợp cho doanh nghiệp vừa và nhỏ.\",\r\n    tags: [\"chiến lược\", \"tài chính\", \"SME\"],\r\n    content: createEditorState(\r\n      \"Doanh nghiệp vừa và nhỏ cần có chiến lược tài chính riêng phù hợp với quy mô và nguồn lực của mình.\"\r\n    ),\r\n    updatedAt: new Date().toISOString(),\r\n    createdAt: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString(), // 3 days ago\r\n    author: mockAuthor,\r\n    status: \"scheduled\",\r\n    scheduledFor: new Date(Date.now() + 5 * 24 * 60 * 60 * 1000).toISOString(), // 5 days from now\r\n  },\r\n  // Resources - Published\r\n  {\r\n    id: \"post-4\",\r\n    bucket: \"resources\",\r\n    title: \"Template Báo Cáo Tài Chính Miễn Phí\",\r\n    slug: \"template-bao-cao-tai-chinh-mien-phi\",\r\n    excerpt: \"Tải xuống template báo cáo tài chính chuyên nghiệp, sẵn sàng sử dụng.\",\r\n    cover: \"/brand/prosfin-logo.svg\",\r\n    tags: [\"template\", \"báo cáo\", \"tài chính\"],\r\n    content: createEditorState(\r\n      \"Chúng tôi cung cấp template báo cáo tài chính miễn phí, được thiết kế chuyên nghiệp và dễ sử dụng. Template này phù hợp cho mọi loại hình doanh nghiệp.\"\r\n    ),\r\n    seoTitle: \"Template Báo Cáo Tài Chính Miễn Phí | ProsFin\",\r\n    seoDescription: \"Tải xuống template báo cáo tài chính chuyên nghiệp, sẵn sàng sử dụng cho doanh nghiệp của bạn.\",\r\n    publishedAt: \"2024-01-12T10:00:00Z\",\r\n    updatedAt: \"2024-01-12T10:00:00Z\",\r\n    createdAt: \"2024-01-08T08:00:00Z\",\r\n    author: mockAuthor,\r\n    status: \"published\",\r\n  },\r\n  // Resources - Draft (missing SEO - for \"Needs attention\" filter)\r\n  {\r\n    id: \"post-5\",\r\n    bucket: \"resources\",\r\n    title: \"Checklist Kiểm Tra Tài Chính Định Kỳ\",\r\n    slug: \"checklist-kiem-tra-tai-chinh-dinh-ky\",\r\n    excerpt: \"Danh sách kiểm tra toàn diện để đánh giá tình hình tài chính doanh nghiệp.\",\r\n    cover: \"/brand/prosfin-logo.svg\",\r\n    tags: [\"checklist\", \"kiểm tra\", \"tài chính\"],\r\n    content: createEditorState(\r\n      \"Kiểm tra tài chính định kỳ là việc làm cần thiết để đảm bảo doanh nghiệp hoạt động hiệu quả. Checklist này sẽ giúp bạn không bỏ sót bất kỳ yếu tố quan trọng nào.\"\r\n    ),\r\n    // Missing seoTitle and seoDescription - for testing \"Needs attention\" filter\r\n    updatedAt: \"2024-01-22T11:00:00Z\",\r\n    createdAt: \"2024-01-20T10:00:00Z\",\r\n    author: mockAuthor,\r\n    status: \"draft\",\r\n  },\r\n  // Knowledge - Published\r\n  {\r\n    id: \"post-6\",\r\n    bucket: \"knowledge\",\r\n    title: \"Hiểu Về Thuế VAT: Hướng Dẫn Cho Doanh Nghiệp\",\r\n    slug: \"hieu-ve-thue-vat-huong-dan-cho-doanh-nghiep\",\r\n    excerpt: \"Tổng quan về thuế VAT và cách áp dụng đúng cho doanh nghiệp Việt Nam.\",\r\n    cover: \"/brand/prosfin-logo.svg\",\r\n    tags: [\"thuế\", \"VAT\", \"kiến thức\"],\r\n    content: createEditorState(\r\n      \"Thuế VAT là một trong những loại thuế quan trọng nhất mà doanh nghiệp cần nắm vững. Bài viết này sẽ giải thích chi tiết về thuế VAT và cách áp dụng.\"\r\n    ),\r\n    seoTitle: \"Hiểu Về Thuế VAT: Hướng Dẫn Cho Doanh Nghiệp | ProsFin\",\r\n    seoDescription: \"Tổng quan về thuế VAT và cách áp dụng đúng cho doanh nghiệp Việt Nam.\",\r\n    publishedAt: \"2024-01-10T09:00:00Z\",\r\n    updatedAt: \"2024-01-10T09:00:00Z\",\r\n    createdAt: \"2024-01-05T08:00:00Z\",\r\n    author: mockAuthor,\r\n    status: \"published\",\r\n  },\r\n  // Knowledge - Archived\r\n  {\r\n    id: \"post-7\",\r\n    bucket: \"knowledge\",\r\n    title: \"Quy Trình Kế Toán Cơ Bản (Cũ)\",\r\n    slug: \"quy-trinh-ke-toan-co-ban-cu\",\r\n    excerpt: \"Bài viết cũ về quy trình kế toán cơ bản - đã được thay thế bằng phiên bản mới.\",\r\n    tags: [\"kế toán\", \"quy trình\", \"cũ\"],\r\n    content: createEditorState(\r\n      \"Bài viết này đã được lưu trữ và thay thế bằng phiên bản mới cập nhật hơn.\"\r\n    ),\r\n    publishedAt: \"2023-12-01T10:00:00Z\",\r\n    updatedAt: \"2024-01-01T10:00:00Z\",\r\n    createdAt: \"2023-11-15T08:00:00Z\",\r\n    author: mockAuthor,\r\n    status: \"archived\",\r\n  },\r\n  // Resources - Published\r\n  {\r\n    id: \"post-8\",\r\n    bucket: \"resources\",\r\n    title: \"Ebook: Hướng Dẫn Quản Lý Tài Chính Doanh Nghiệp\",\r\n    slug: \"ebook-huong-dan-quan-ly-tai-chinh-doanh-nghiep\",\r\n    excerpt: \"Tải xuống ebook miễn phí với hướng dẫn chi tiết về quản lý tài chính doanh nghiệp.\",\r\n    cover: \"/brand/prosfin-logo.svg\",\r\n    tags: [\"ebook\", \"tài chính\", \"tài liệu\"],\r\n    content: createEditorState(\r\n      \"Ebook này cung cấp hướng dẫn toàn diện về quản lý tài chính doanh nghiệp, từ cơ bản đến nâng cao. Phù hợp cho các doanh nghiệp vừa và nhỏ.\"\r\n    ),\r\n    seoTitle: \"Ebook: Hướng Dẫn Quản Lý Tài Chính Doanh Nghiệp | ProsFin\",\r\n    seoDescription: \"Tải xuống ebook miễn phí với hướng dẫn chi tiết về quản lý tài chính doanh nghiệp.\",\r\n    publishedAt: \"2024-01-08T10:00:00Z\",\r\n    updatedAt: \"2024-01-08T10:00:00Z\",\r\n    createdAt: \"2024-01-01T08:00:00Z\",\r\n    author: mockAuthor,\r\n    status: \"published\",\r\n  },\r\n];\r\n\r\n// Generate additional mock posts for performance testing (200+ total)\r\nfunction generateMockPosts(): Post[] {\r\n  const buckets: ContentBucket[] = [\"insights\", \"resources\", \"knowledge\"];\r\n  const statuses: PostStatus[] = [\"draft\", \"published\", \"scheduled\", \"archived\"];\r\n  const topics = [\r\n    \"Tài chính\", \"Kế toán\", \"Thuế\", \"Đầu tư\", \"Quản lý\", \"Kinh doanh\",\r\n    \"Marketing\", \"Bán hàng\", \"Nhân sự\", \"Công nghệ\", \"Pháp lý\", \"Chiến lược\"\r\n  ];\r\n  const adjectives = [\r\n    \"Hiệu quả\", \"Tối ưu\", \"Chuyên nghiệp\", \"Toàn diện\", \"Chi tiết\", \"Thực tế\",\r\n    \"Mới nhất\", \"Cập nhật\", \"Chuyên sâu\", \"Cơ bản\", \"Nâng cao\", \"Thực hành\"\r\n  ];\r\n\r\n  const generated: Post[] = [];\r\n  const now = Date.now();\r\n  \r\n  for (let i = 9; i <= 250; i++) {\r\n    const bucket = buckets[Math.floor(Math.random() * buckets.length)];\r\n    const status = statuses[Math.floor(Math.random() * statuses.length)];\r\n    const topic = topics[Math.floor(Math.random() * topics.length)];\r\n    const adj = adjectives[Math.floor(Math.random() * adjectives.length)];\r\n    const title = `${adj} ${topic} ${i}`;\r\n    const slug = `${adj.toLowerCase()}-${topic.toLowerCase()}-${i}`.replace(/\\s+/g, \"-\");\r\n    \r\n    const daysAgo = Math.floor(Math.random() * 365);\r\n    const createdAt = new Date(now - daysAgo * 24 * 60 * 60 * 1000).toISOString();\r\n    const updatedAt = new Date(now - Math.floor(Math.random() * daysAgo) * 24 * 60 * 60 * 1000).toISOString();\r\n    let publishedAt: string | undefined;\r\n    let scheduledFor: string | undefined;\r\n    \r\n    if (status === \"published\") {\r\n      publishedAt = new Date(now - Math.floor(Math.random() * daysAgo) * 24 * 60 * 60 * 1000).toISOString();\r\n    } else if (status === \"scheduled\") {\r\n      // Scheduled posts should have future dates\r\n      const daysInFuture = Math.floor(Math.random() * 30) + 1; // 1-30 days from now\r\n      scheduledFor = new Date(now + daysInFuture * 24 * 60 * 60 * 1000).toISOString();\r\n      publishedAt = scheduledFor; // For scheduled posts, publishedAt = scheduledFor\r\n    }\r\n    \r\n    const tags = [\r\n      topic.toLowerCase(),\r\n      ...topics.slice(0, Math.floor(Math.random() * 3) + 1).map(t => t.toLowerCase())\r\n    ].slice(0, Math.min(5, Math.floor(Math.random() * 4) + 1));\r\n\r\n    generated.push({\r\n      id: `post-${i}`,\r\n      bucket,\r\n      title,\r\n      slug,\r\n      excerpt: `Bài viết về ${topic.toLowerCase()} - ${adj.toLowerCase()}`,\r\n      cover: Math.random() > 0.5 ? \"/brand/prosfin-logo.svg\" : undefined,\r\n      tags: Array.from(new Set(tags)),\r\n      content: createEditorState(`Nội dung bài viết về ${topic.toLowerCase()}. ${adj} hướng dẫn và thông tin chi tiết.`),\r\n      seoTitle: status === \"published\" ? `${title} | ProsFin` : undefined,\r\n      seoDescription: status === \"published\" ? `Bài viết về ${topic.toLowerCase()}` : undefined,\r\n      publishedAt,\r\n      updatedAt,\r\n      createdAt,\r\n      author: mockAuthor,\r\n      status,\r\n      scheduledFor,\r\n    });\r\n  }\r\n  \r\n  return generated;\r\n}\r\n\r\nexport const mockPosts: Post[] = [\r\n  ...baseMockPosts,\r\n  ...generateMockPosts(),\r\n];\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 432, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/minhmice/Documents/projects/prosfin-web/apps/admin/src/lib/data/posts.ts"],"sourcesContent":["import type {\r\n  Post,\r\n  PostFilters,\r\n  PostFormData,\r\n  ContentBucket,\r\n  PostStatus,\r\n  PostRevision,\r\n  PostActivityEvent,\r\n} from \"@/types/content\";\r\nimport { mockPosts } from \"@/mocks/posts\";\r\n\r\n/**\r\n * Data adapter cho Posts\r\n * \r\n * UI components chỉ import từ đây, không import mocks trực tiếp.\r\n * Có thể swap sang API calls trong Phase 3.\r\n */\r\n\r\nlet postsData: Post[] = [...mockPosts];\r\n\r\n/**\r\n * List posts with optional filters\r\n */\r\nexport async function listPosts(\r\n  bucket?: ContentBucket,\r\n  filters?: PostFilters\r\n): Promise<Post[]> {\r\n  // Simulate API delay\r\n  await new Promise((resolve) => setTimeout(resolve, 100));\r\n\r\n  let filtered = [...postsData];\r\n\r\n  // Filter by bucket\r\n  if (bucket) {\r\n    filtered = filtered.filter((post) => post.bucket === bucket);\r\n  }\r\n\r\n  // Apply filters\r\n  if (filters) {\r\n    if (filters.status && filters.status.length > 0) {\r\n      filtered = filtered.filter((post) => filters.status!.includes(post.status));\r\n    }\r\n\r\n    if (filters.bucket && filters.bucket.length > 0) {\r\n      filtered = filtered.filter((post) => filters.bucket!.includes(post.bucket));\r\n    }\r\n\r\n    if (filters.tags && filters.tags.length > 0) {\r\n      filtered = filtered.filter((post) =>\r\n        filters.tags!.some((tag) => post.tags.includes(tag))\r\n      );\r\n    }\r\n\r\n    if (filters.search) {\r\n      const searchLower = filters.search.toLowerCase();\r\n      filtered = filtered.filter(\r\n        (post) =>\r\n          post.title.toLowerCase().includes(searchLower) ||\r\n          post.excerpt?.toLowerCase().includes(searchLower) ||\r\n          post.slug.toLowerCase().includes(searchLower) ||\r\n          post.tags.some((tag) => tag.toLowerCase().includes(searchLower))\r\n      );\r\n    }\r\n\r\n    if (filters.dateFrom) {\r\n      filtered = filtered.filter(\r\n        (post) => post.updatedAt >= filters.dateFrom! || post.createdAt >= filters.dateFrom!\r\n      );\r\n    }\r\n\r\n    if (filters.dateTo) {\r\n      filtered = filtered.filter(\r\n        (post) => post.updatedAt <= filters.dateTo! || post.createdAt <= filters.dateTo!\r\n      );\r\n    }\r\n  }\r\n\r\n  return filtered;\r\n}\r\n\r\n/**\r\n * Get post by slug and bucket\r\n */\r\nexport async function getPost(slug: string, bucket: ContentBucket): Promise<Post | null> {\r\n  await new Promise((resolve) => setTimeout(resolve, 50));\r\n  return postsData.find((post) => post.slug === slug && post.bucket === bucket) || null;\r\n}\r\n\r\n/**\r\n * Get post by ID\r\n */\r\nexport async function getPostById(id: string): Promise<Post | null> {\r\n  await new Promise((resolve) => setTimeout(resolve, 50));\r\n  return postsData.find((post) => post.id === id) || null;\r\n}\r\n\r\n/**\r\n * Check if slug is unique within bucket\r\n */\r\nexport async function isSlugUnique(\r\n  slug: string,\r\n  bucket: ContentBucket,\r\n  excludeId?: string\r\n): Promise<boolean> {\r\n  await new Promise((resolve) => setTimeout(resolve, 20));\r\n  const existing = postsData.find(\r\n    (post) => post.slug === slug && post.bucket === bucket && post.id !== excludeId\r\n  );\r\n  return !existing;\r\n}\r\n\r\n/**\r\n * Save draft (create or update)\r\n */\r\nexport async function saveDraft(postData: PostFormData, existingId?: string): Promise<Post> {\r\n  await new Promise((resolve) => setTimeout(resolve, 200));\r\n\r\n  const now = new Date().toISOString();\r\n\r\n  if (existingId) {\r\n    // Update existing\r\n    const existing = postsData.find((p) => p.id === existingId);\r\n    if (!existing) {\r\n      throw new Error(`Post with id ${existingId} not found`);\r\n    }\r\n\r\n    const updated: Post = {\r\n      ...existing,\r\n      ...postData,\r\n      id: existingId,\r\n      updatedAt: now,\r\n      // Preserve createdAt and author\r\n      createdAt: existing.createdAt,\r\n      author: existing.author,\r\n    };\r\n\r\n    postsData = postsData.map((p) => (p.id === existingId ? updated : p));\r\n    return updated;\r\n  } else {\r\n    // Create new\r\n    const newPost: Post = {\r\n      ...postData,\r\n      id: `post-${Date.now()}`,\r\n      createdAt: now,\r\n      updatedAt: now,\r\n      author: {\r\n        id: \"user-1\",\r\n        name: \"Admin User\",\r\n        email: \"admin@prosfin.vn\",\r\n      },\r\n    };\r\n\r\n    postsData = [...postsData, newPost];\r\n    return newPost;\r\n  }\r\n}\r\n\r\n/**\r\n * Publish post\r\n */\r\nexport async function publish(id: string, scheduledFor?: string): Promise<Post> {\r\n  await new Promise((resolve) => setTimeout(resolve, 200));\r\n\r\n  const post = postsData.find((p) => p.id === id);\r\n  if (!post) {\r\n    throw new Error(`Post with id ${id} not found`);\r\n  }\r\n\r\n  const now = new Date().toISOString();\r\n  const publishedAt = scheduledFor || now;\r\n\r\n  const updated: Post = {\r\n    ...post,\r\n    status: scheduledFor ? \"scheduled\" : \"published\",\r\n    publishedAt,\r\n    scheduledFor: scheduledFor || undefined,\r\n    updatedAt: now,\r\n  };\r\n\r\n  postsData = postsData.map((p) => (p.id === id ? updated : p));\r\n  return updated;\r\n}\r\n\r\n/**\r\n * Unpublish post (set to draft)\r\n */\r\nexport async function unpublish(id: string): Promise<Post> {\r\n  await new Promise((resolve) => setTimeout(resolve, 200));\r\n\r\n  const post = postsData.find((p) => p.id === id);\r\n  if (!post) {\r\n    throw new Error(`Post with id ${id} not found`);\r\n  }\r\n\r\n  const updated: Post = {\r\n    ...post,\r\n    status: \"draft\",\r\n    updatedAt: new Date().toISOString(),\r\n  };\r\n\r\n  postsData = postsData.map((p) => (p.id === id ? updated : p));\r\n  return updated;\r\n}\r\n\r\n/**\r\n * Duplicate post\r\n */\r\nexport async function duplicatePost(slug: string, bucket: ContentBucket): Promise<Post> {\r\n  await new Promise((resolve) => setTimeout(resolve, 200));\r\n\r\n  const original = await getPost(slug, bucket);\r\n  if (!original) {\r\n    throw new Error(`Post with slug ${slug} in bucket ${bucket} not found`);\r\n  }\r\n\r\n  const now = new Date().toISOString();\r\n  const newSlug = `${original.slug}-copy-${Date.now()}`;\r\n\r\n  const duplicated: Post = {\r\n    ...original,\r\n    id: `post-${Date.now()}`,\r\n    slug: newSlug,\r\n    title: `${original.title} (Copy)`,\r\n    status: \"draft\",\r\n    publishedAt: undefined,\r\n    scheduledFor: undefined,\r\n    createdAt: now,\r\n    updatedAt: now,\r\n  };\r\n\r\n  postsData = [...postsData, duplicated];\r\n  return duplicated;\r\n}\r\n\r\n/**\r\n * Delete post\r\n */\r\nexport async function deletePost(id: string): Promise<void> {\r\n  await new Promise((resolve) => setTimeout(resolve, 100));\r\n\r\n  const post = postsData.find((p) => p.id === id);\r\n  if (!post) {\r\n    throw new Error(`Post with id ${id} not found`);\r\n  }\r\n\r\n  postsData = postsData.filter((p) => p.id !== id);\r\n}\r\n\r\n/**\r\n * Update post status\r\n */\r\nexport async function updatePostStatus(id: string, status: PostStatus): Promise<Post> {\r\n  await new Promise((resolve) => setTimeout(resolve, 100));\r\n\r\n  const post = postsData.find((p) => p.id === id);\r\n  if (!post) {\r\n    throw new Error(`Post with id ${id} not found`);\r\n  }\r\n\r\n  const updated: Post = {\r\n    ...post,\r\n    status,\r\n    updatedAt: new Date().toISOString(),\r\n  };\r\n\r\n  postsData = postsData.map((p) => (p.id === id ? updated : p));\r\n  return updated;\r\n}\r\n\r\n/**\r\n * Get all unique tags\r\n */\r\nexport async function getAllTags(): Promise<string[]> {\r\n  await new Promise((resolve) => setTimeout(resolve, 50));\r\n  const allTags = postsData.flatMap((post) => post.tags);\r\n  return Array.from(new Set(allTags)).sort();\r\n}\r\n\r\n/**\r\n * Archive post\r\n */\r\nexport async function archivePost(id: string): Promise<Post> {\r\n  await new Promise((resolve) => setTimeout(resolve, 200));\r\n\r\n  const post = postsData.find((p) => p.id === id);\r\n  if (!post) {\r\n    throw new Error(`Post with id ${id} not found`);\r\n  }\r\n\r\n  const updated: Post = {\r\n    ...post,\r\n    status: \"archived\",\r\n    updatedAt: new Date().toISOString(),\r\n  };\r\n\r\n  postsData = postsData.map((p) => (p.id === id ? updated : p));\r\n  return updated;\r\n}\r\n\r\n/**\r\n * Restore archived post to draft\r\n */\r\nexport async function restorePost(id: string): Promise<Post> {\r\n  await new Promise((resolve) => setTimeout(resolve, 200));\r\n\r\n  const post = postsData.find((p) => p.id === id);\r\n  if (!post) {\r\n    throw new Error(`Post with id ${id} not found`);\r\n  }\r\n\r\n  if (post.status !== \"archived\") {\r\n    throw new Error(`Post with id ${id} is not archived`);\r\n  }\r\n\r\n  const updated: Post = {\r\n    ...post,\r\n    status: \"draft\",\r\n    updatedAt: new Date().toISOString(),\r\n  };\r\n\r\n  postsData = postsData.map((p) => (p.id === id ? updated : p));\r\n  return updated;\r\n}\r\n\r\n/**\r\n * Reschedule post\r\n */\r\nexport async function reschedulePost(id: string, scheduledFor: string): Promise<Post> {\r\n  await new Promise((resolve) => setTimeout(resolve, 200));\r\n\r\n  const post = postsData.find((p) => p.id === id);\r\n  if (!post) {\r\n    throw new Error(`Post with id ${id} not found`);\r\n  }\r\n\r\n  const updated: Post = {\r\n    ...post,\r\n    status: \"scheduled\",\r\n    scheduledFor,\r\n    updatedAt: new Date().toISOString(),\r\n  };\r\n\r\n  postsData = postsData.map((p) => (p.id === id ? updated : p));\r\n  return updated;\r\n}\r\n\r\n/**\r\n * Cancel schedule (scheduled → draft)\r\n */\r\nexport async function cancelSchedule(id: string): Promise<Post> {\r\n  await new Promise((resolve) => setTimeout(resolve, 200));\r\n\r\n  const post = postsData.find((p) => p.id === id);\r\n  if (!post) {\r\n    throw new Error(`Post with id ${id} not found`);\r\n  }\r\n\r\n  if (post.status !== \"scheduled\") {\r\n    throw new Error(`Post with id ${id} is not scheduled`);\r\n  }\r\n\r\n  const updated: Post = {\r\n    ...post,\r\n    status: \"draft\",\r\n    scheduledFor: undefined,\r\n    updatedAt: new Date().toISOString(),\r\n  };\r\n\r\n  postsData = postsData.map((p) => (p.id === id ? updated : p));\r\n  return updated;\r\n}\r\n\r\n/**\r\n * Publish now (scheduled → published)\r\n */\r\nexport async function publishNow(id: string): Promise<Post> {\r\n  await new Promise((resolve) => setTimeout(resolve, 200));\r\n\r\n  const post = postsData.find((p) => p.id === id);\r\n  if (!post) {\r\n    throw new Error(`Post with id ${id} not found`);\r\n  }\r\n\r\n  if (post.status !== \"scheduled\") {\r\n    throw new Error(`Post with id ${id} is not scheduled`);\r\n  }\r\n\r\n  const now = new Date().toISOString();\r\n  const updated: Post = {\r\n    ...post,\r\n    status: \"published\",\r\n    publishedAt: now,\r\n    scheduledFor: undefined,\r\n    updatedAt: now,\r\n  };\r\n\r\n  postsData = postsData.map((p) => (p.id === id ? updated : p));\r\n  return updated;\r\n}\r\n\r\n/**\r\n * Create draft revision from published post\r\n */\r\nexport async function createDraftRevision(postId: string, data: PostFormData): Promise<Post> {\r\n  await new Promise((resolve) => setTimeout(resolve, 200));\r\n\r\n  const original = postsData.find((p) => p.id === postId);\r\n  if (!original) {\r\n    throw new Error(`Post with id ${postId} not found`);\r\n  }\r\n\r\n  const now = new Date().toISOString();\r\n  const draftRevision: Post = {\r\n    ...original,\r\n    ...data,\r\n    id: `post-${Date.now()}`,\r\n    status: \"draft\",\r\n    publishedAt: original.publishedAt, // Preserve original published date\r\n    scheduledFor: undefined,\r\n    createdAt: now,\r\n    updatedAt: now,\r\n  };\r\n\r\n  postsData = [...postsData, draftRevision];\r\n  return draftRevision;\r\n}\r\n\r\n/**\r\n * Update published post immediately\r\n */\r\nexport async function updatePublishedPost(postId: string, data: PostFormData): Promise<Post> {\r\n  await new Promise((resolve) => setTimeout(resolve, 200));\r\n\r\n  const post = postsData.find((p) => p.id === postId);\r\n  if (!post) {\r\n    throw new Error(`Post with id ${postId} not found`);\r\n  }\r\n\r\n  if (post.status !== \"published\") {\r\n    throw new Error(`Post with id ${postId} is not published`);\r\n  }\r\n\r\n  const now = new Date().toISOString();\r\n  const updated: Post = {\r\n    ...post,\r\n    ...data,\r\n    status: \"published\", // Keep published status\r\n    publishedAt: post.publishedAt, // Preserve original published date\r\n    updatedAt: now,\r\n  };\r\n\r\n  postsData = postsData.map((p) => (p.id === postId ? updated : p));\r\n  return updated;\r\n}\r\n\r\n/**\r\n * Get post revisions (mock - returns empty array for Phase 2)\r\n */\r\nexport async function getPostRevisions(postId: string): Promise<PostRevision[]> {\r\n  await new Promise((resolve) => setTimeout(resolve, 50));\r\n  // Phase 2: Return empty array, Phase 3 will implement real revision tracking\r\n  return [];\r\n}\r\n\r\n/**\r\n * Get post activity log\r\n */\r\nexport async function getPostActivity(postId: string): Promise<PostActivityEvent[]> {\r\n  await new Promise((resolve) => setTimeout(resolve, 50));\r\n\r\n  const post = postsData.find((p) => p.id === postId);\r\n  if (!post) {\r\n    return [];\r\n  }\r\n\r\n  // Generate mock activity log\r\n  const activities: PostActivityEvent[] = [];\r\n\r\n  // Created event\r\n  activities.push({\r\n    id: `activity-${postId}-created`,\r\n    type: \"created\",\r\n    title: \"Post created\",\r\n    timestamp: post.createdAt,\r\n    actor: post.author.name,\r\n  });\r\n\r\n  // Published event (if published)\r\n  if (post.publishedAt) {\r\n    activities.push({\r\n      id: `activity-${postId}-published`,\r\n      type: \"published\",\r\n      title: \"Post published\",\r\n      timestamp: post.publishedAt,\r\n      actor: post.author.name,\r\n      payload: {\r\n        publishedAt: post.publishedAt,\r\n      },\r\n    });\r\n  }\r\n\r\n  // Scheduled event (if scheduled)\r\n  if (post.scheduledFor) {\r\n    activities.push({\r\n      id: `activity-${postId}-scheduled`,\r\n      type: \"scheduled\",\r\n      title: \"Post scheduled\",\r\n      timestamp: post.scheduledFor,\r\n      actor: post.author.name,\r\n      payload: {\r\n        scheduledFor: post.scheduledFor,\r\n      },\r\n    });\r\n  }\r\n\r\n  // Archived event (if archived)\r\n  if (post.status === \"archived\") {\r\n    activities.push({\r\n      id: `activity-${postId}-archived`,\r\n      type: \"archived\",\r\n      title: \"Post archived\",\r\n      timestamp: post.updatedAt,\r\n      actor: post.author.name,\r\n      payload: {\r\n        oldStatus: \"published\",\r\n        newStatus: \"archived\",\r\n      },\r\n    });\r\n  }\r\n\r\n  // Edited events (based on updatedAt)\r\n  if (post.updatedAt !== post.createdAt && post.status !== \"archived\") {\r\n    activities.push({\r\n      id: `activity-${postId}-edited`,\r\n      type: \"edited\",\r\n      title: \"Post edited\",\r\n      timestamp: post.updatedAt,\r\n      actor: post.author.name,\r\n    });\r\n  }\r\n\r\n  // Sort by timestamp (newest first)\r\n  return activities.sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASA;;AAEA;;;;;CAKC,GAED,IAAI,YAAoB;OAAI,mJAAS;CAAC;AAK/B,eAAe,UACpB,MAAsB,EACtB,OAAqB;IAErB,qBAAqB;IACrB,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;IAEnD,IAAI,WAAW;WAAI;KAAU;IAE7B,mBAAmB;IACnB,IAAI,QAAQ;QACV,WAAW,SAAS,MAAM,CAAC,CAAC,OAAS,KAAK,MAAM,KAAK;IACvD;IAEA,gBAAgB;IAChB,IAAI,SAAS;QACX,IAAI,QAAQ,MAAM,IAAI,QAAQ,MAAM,CAAC,MAAM,GAAG,GAAG;YAC/C,WAAW,SAAS,MAAM,CAAC,CAAC,OAAS,QAAQ,MAAM,CAAE,QAAQ,CAAC,KAAK,MAAM;QAC3E;QAEA,IAAI,QAAQ,MAAM,IAAI,QAAQ,MAAM,CAAC,MAAM,GAAG,GAAG;YAC/C,WAAW,SAAS,MAAM,CAAC,CAAC,OAAS,QAAQ,MAAM,CAAE,QAAQ,CAAC,KAAK,MAAM;QAC3E;QAEA,IAAI,QAAQ,IAAI,IAAI,QAAQ,IAAI,CAAC,MAAM,GAAG,GAAG;YAC3C,WAAW,SAAS,MAAM,CAAC,CAAC,OAC1B,QAAQ,IAAI,CAAE,IAAI,CAAC,CAAC,MAAQ,KAAK,IAAI,CAAC,QAAQ,CAAC;QAEnD;QAEA,IAAI,QAAQ,MAAM,EAAE;YAClB,MAAM,cAAc,QAAQ,MAAM,CAAC,WAAW;YAC9C,WAAW,SAAS,MAAM,CACxB,CAAC,OACC,KAAK,KAAK,CAAC,WAAW,GAAG,QAAQ,CAAC,gBAClC,KAAK,OAAO,EAAE,cAAc,SAAS,gBACrC,KAAK,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,gBACjC,KAAK,IAAI,CAAC,IAAI,CAAC,CAAC,MAAQ,IAAI,WAAW,GAAG,QAAQ,CAAC;QAEzD;QAEA,IAAI,QAAQ,QAAQ,EAAE;YACpB,WAAW,SAAS,MAAM,CACxB,CAAC,OAAS,KAAK,SAAS,IAAI,QAAQ,QAAQ,IAAK,KAAK,SAAS,IAAI,QAAQ,QAAQ;QAEvF;QAEA,IAAI,QAAQ,MAAM,EAAE;YAClB,WAAW,SAAS,MAAM,CACxB,CAAC,OAAS,KAAK,SAAS,IAAI,QAAQ,MAAM,IAAK,KAAK,SAAS,IAAI,QAAQ,MAAM;QAEnF;IACF;IAEA,OAAO;AACT;AAKO,eAAe,QAAQ,IAAY,EAAE,MAAqB;IAC/D,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;IACnD,OAAO,UAAU,IAAI,CAAC,CAAC,OAAS,KAAK,IAAI,KAAK,QAAQ,KAAK,MAAM,KAAK,WAAW;AACnF;AAKO,eAAe,YAAY,EAAU;IAC1C,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;IACnD,OAAO,UAAU,IAAI,CAAC,CAAC,OAAS,KAAK,EAAE,KAAK,OAAO;AACrD;AAKO,eAAe,aACpB,IAAY,EACZ,MAAqB,EACrB,SAAkB;IAElB,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;IACnD,MAAM,WAAW,UAAU,IAAI,CAC7B,CAAC,OAAS,KAAK,IAAI,KAAK,QAAQ,KAAK,MAAM,KAAK,UAAU,KAAK,EAAE,KAAK;IAExE,OAAO,CAAC;AACV;AAKO,eAAe,UAAU,QAAsB,EAAE,UAAmB;IACzE,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;IAEnD,MAAM,MAAM,IAAI,OAAO,WAAW;IAElC,IAAI,YAAY;QACd,kBAAkB;QAClB,MAAM,WAAW,UAAU,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;QAChD,IAAI,CAAC,UAAU;YACb,MAAM,IAAI,MAAM,CAAC,aAAa,EAAE,WAAW,UAAU,CAAC;QACxD;QAEA,MAAM,UAAgB;YACpB,GAAG,QAAQ;YACX,GAAG,QAAQ;YACX,IAAI;YACJ,WAAW;YACX,gCAAgC;YAChC,WAAW,SAAS,SAAS;YAC7B,QAAQ,SAAS,MAAM;QACzB;QAEA,YAAY,UAAU,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,aAAa,UAAU;QAClE,OAAO;IACT,OAAO;QACL,aAAa;QACb,MAAM,UAAgB;YACpB,GAAG,QAAQ;YACX,IAAI,CAAC,KAAK,EAAE,KAAK,GAAG,IAAI;YACxB,WAAW;YACX,WAAW;YACX,QAAQ;gBACN,IAAI;gBACJ,MAAM;gBACN,OAAO;YACT;QACF;QAEA,YAAY;eAAI;YAAW;SAAQ;QACnC,OAAO;IACT;AACF;AAKO,eAAe,QAAQ,EAAU,EAAE,YAAqB;IAC7D,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;IAEnD,MAAM,OAAO,UAAU,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAC5C,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM,CAAC,aAAa,EAAE,GAAG,UAAU,CAAC;IAChD;IAEA,MAAM,MAAM,IAAI,OAAO,WAAW;IAClC,MAAM,cAAc,gBAAgB;IAEpC,MAAM,UAAgB;QACpB,GAAG,IAAI;QACP,QAAQ,eAAe,cAAc;QACrC;QACA,cAAc,gBAAgB;QAC9B,WAAW;IACb;IAEA,YAAY,UAAU,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,KAAK,UAAU;IAC1D,OAAO;AACT;AAKO,eAAe,UAAU,EAAU;IACxC,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;IAEnD,MAAM,OAAO,UAAU,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAC5C,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM,CAAC,aAAa,EAAE,GAAG,UAAU,CAAC;IAChD;IAEA,MAAM,UAAgB;QACpB,GAAG,IAAI;QACP,QAAQ;QACR,WAAW,IAAI,OAAO,WAAW;IACnC;IAEA,YAAY,UAAU,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,KAAK,UAAU;IAC1D,OAAO;AACT;AAKO,eAAe,cAAc,IAAY,EAAE,MAAqB;IACrE,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;IAEnD,MAAM,WAAW,MAAM,QAAQ,MAAM;IACrC,IAAI,CAAC,UAAU;QACb,MAAM,IAAI,MAAM,CAAC,eAAe,EAAE,KAAK,WAAW,EAAE,OAAO,UAAU,CAAC;IACxE;IAEA,MAAM,MAAM,IAAI,OAAO,WAAW;IAClC,MAAM,UAAU,GAAG,SAAS,IAAI,CAAC,MAAM,EAAE,KAAK,GAAG,IAAI;IAErD,MAAM,aAAmB;QACvB,GAAG,QAAQ;QACX,IAAI,CAAC,KAAK,EAAE,KAAK,GAAG,IAAI;QACxB,MAAM;QACN,OAAO,GAAG,SAAS,KAAK,CAAC,OAAO,CAAC;QACjC,QAAQ;QACR,aAAa;QACb,cAAc;QACd,WAAW;QACX,WAAW;IACb;IAEA,YAAY;WAAI;QAAW;KAAW;IACtC,OAAO;AACT;AAKO,eAAe,WAAW,EAAU;IACzC,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;IAEnD,MAAM,OAAO,UAAU,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAC5C,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM,CAAC,aAAa,EAAE,GAAG,UAAU,CAAC;IAChD;IAEA,YAAY,UAAU,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;AAC/C;AAKO,eAAe,iBAAiB,EAAU,EAAE,MAAkB;IACnE,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;IAEnD,MAAM,OAAO,UAAU,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAC5C,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM,CAAC,aAAa,EAAE,GAAG,UAAU,CAAC;IAChD;IAEA,MAAM,UAAgB;QACpB,GAAG,IAAI;QACP;QACA,WAAW,IAAI,OAAO,WAAW;IACnC;IAEA,YAAY,UAAU,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,KAAK,UAAU;IAC1D,OAAO;AACT;AAKO,eAAe;IACpB,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;IACnD,MAAM,UAAU,UAAU,OAAO,CAAC,CAAC,OAAS,KAAK,IAAI;IACrD,OAAO,MAAM,IAAI,CAAC,IAAI,IAAI,UAAU,IAAI;AAC1C;AAKO,eAAe,YAAY,EAAU;IAC1C,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;IAEnD,MAAM,OAAO,UAAU,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAC5C,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM,CAAC,aAAa,EAAE,GAAG,UAAU,CAAC;IAChD;IAEA,MAAM,UAAgB;QACpB,GAAG,IAAI;QACP,QAAQ;QACR,WAAW,IAAI,OAAO,WAAW;IACnC;IAEA,YAAY,UAAU,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,KAAK,UAAU;IAC1D,OAAO;AACT;AAKO,eAAe,YAAY,EAAU;IAC1C,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;IAEnD,MAAM,OAAO,UAAU,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAC5C,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM,CAAC,aAAa,EAAE,GAAG,UAAU,CAAC;IAChD;IAEA,IAAI,KAAK,MAAM,KAAK,YAAY;QAC9B,MAAM,IAAI,MAAM,CAAC,aAAa,EAAE,GAAG,gBAAgB,CAAC;IACtD;IAEA,MAAM,UAAgB;QACpB,GAAG,IAAI;QACP,QAAQ;QACR,WAAW,IAAI,OAAO,WAAW;IACnC;IAEA,YAAY,UAAU,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,KAAK,UAAU;IAC1D,OAAO;AACT;AAKO,eAAe,eAAe,EAAU,EAAE,YAAoB;IACnE,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;IAEnD,MAAM,OAAO,UAAU,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAC5C,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM,CAAC,aAAa,EAAE,GAAG,UAAU,CAAC;IAChD;IAEA,MAAM,UAAgB;QACpB,GAAG,IAAI;QACP,QAAQ;QACR;QACA,WAAW,IAAI,OAAO,WAAW;IACnC;IAEA,YAAY,UAAU,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,KAAK,UAAU;IAC1D,OAAO;AACT;AAKO,eAAe,eAAe,EAAU;IAC7C,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;IAEnD,MAAM,OAAO,UAAU,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAC5C,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM,CAAC,aAAa,EAAE,GAAG,UAAU,CAAC;IAChD;IAEA,IAAI,KAAK,MAAM,KAAK,aAAa;QAC/B,MAAM,IAAI,MAAM,CAAC,aAAa,EAAE,GAAG,iBAAiB,CAAC;IACvD;IAEA,MAAM,UAAgB;QACpB,GAAG,IAAI;QACP,QAAQ;QACR,cAAc;QACd,WAAW,IAAI,OAAO,WAAW;IACnC;IAEA,YAAY,UAAU,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,KAAK,UAAU;IAC1D,OAAO;AACT;AAKO,eAAe,WAAW,EAAU;IACzC,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;IAEnD,MAAM,OAAO,UAAU,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAC5C,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM,CAAC,aAAa,EAAE,GAAG,UAAU,CAAC;IAChD;IAEA,IAAI,KAAK,MAAM,KAAK,aAAa;QAC/B,MAAM,IAAI,MAAM,CAAC,aAAa,EAAE,GAAG,iBAAiB,CAAC;IACvD;IAEA,MAAM,MAAM,IAAI,OAAO,WAAW;IAClC,MAAM,UAAgB;QACpB,GAAG,IAAI;QACP,QAAQ;QACR,aAAa;QACb,cAAc;QACd,WAAW;IACb;IAEA,YAAY,UAAU,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,KAAK,UAAU;IAC1D,OAAO;AACT;AAKO,eAAe,oBAAoB,MAAc,EAAE,IAAkB;IAC1E,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;IAEnD,MAAM,WAAW,UAAU,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAChD,IAAI,CAAC,UAAU;QACb,MAAM,IAAI,MAAM,CAAC,aAAa,EAAE,OAAO,UAAU,CAAC;IACpD;IAEA,MAAM,MAAM,IAAI,OAAO,WAAW;IAClC,MAAM,gBAAsB;QAC1B,GAAG,QAAQ;QACX,GAAG,IAAI;QACP,IAAI,CAAC,KAAK,EAAE,KAAK,GAAG,IAAI;QACxB,QAAQ;QACR,aAAa,SAAS,WAAW;QACjC,cAAc;QACd,WAAW;QACX,WAAW;IACb;IAEA,YAAY;WAAI;QAAW;KAAc;IACzC,OAAO;AACT;AAKO,eAAe,oBAAoB,MAAc,EAAE,IAAkB;IAC1E,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;IAEnD,MAAM,OAAO,UAAU,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAC5C,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM,CAAC,aAAa,EAAE,OAAO,UAAU,CAAC;IACpD;IAEA,IAAI,KAAK,MAAM,KAAK,aAAa;QAC/B,MAAM,IAAI,MAAM,CAAC,aAAa,EAAE,OAAO,iBAAiB,CAAC;IAC3D;IAEA,MAAM,MAAM,IAAI,OAAO,WAAW;IAClC,MAAM,UAAgB;QACpB,GAAG,IAAI;QACP,GAAG,IAAI;QACP,QAAQ;QACR,aAAa,KAAK,WAAW;QAC7B,WAAW;IACb;IAEA,YAAY,UAAU,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,SAAS,UAAU;IAC9D,OAAO;AACT;AAKO,eAAe,iBAAiB,MAAc;IACnD,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;IACnD,6EAA6E;IAC7E,OAAO,EAAE;AACX;AAKO,eAAe,gBAAgB,MAAc;IAClD,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;IAEnD,MAAM,OAAO,UAAU,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAC5C,IAAI,CAAC,MAAM;QACT,OAAO,EAAE;IACX;IAEA,6BAA6B;IAC7B,MAAM,aAAkC,EAAE;IAE1C,gBAAgB;IAChB,WAAW,IAAI,CAAC;QACd,IAAI,CAAC,SAAS,EAAE,OAAO,QAAQ,CAAC;QAChC,MAAM;QACN,OAAO;QACP,WAAW,KAAK,SAAS;QACzB,OAAO,KAAK,MAAM,CAAC,IAAI;IACzB;IAEA,iCAAiC;IACjC,IAAI,KAAK,WAAW,EAAE;QACpB,WAAW,IAAI,CAAC;YACd,IAAI,CAAC,SAAS,EAAE,OAAO,UAAU,CAAC;YAClC,MAAM;YACN,OAAO;YACP,WAAW,KAAK,WAAW;YAC3B,OAAO,KAAK,MAAM,CAAC,IAAI;YACvB,SAAS;gBACP,aAAa,KAAK,WAAW;YAC/B;QACF;IACF;IAEA,iCAAiC;IACjC,IAAI,KAAK,YAAY,EAAE;QACrB,WAAW,IAAI,CAAC;YACd,IAAI,CAAC,SAAS,EAAE,OAAO,UAAU,CAAC;YAClC,MAAM;YACN,OAAO;YACP,WAAW,KAAK,YAAY;YAC5B,OAAO,KAAK,MAAM,CAAC,IAAI;YACvB,SAAS;gBACP,cAAc,KAAK,YAAY;YACjC;QACF;IACF;IAEA,+BAA+B;IAC/B,IAAI,KAAK,MAAM,KAAK,YAAY;QAC9B,WAAW,IAAI,CAAC;YACd,IAAI,CAAC,SAAS,EAAE,OAAO,SAAS,CAAC;YACjC,MAAM;YACN,OAAO;YACP,WAAW,KAAK,SAAS;YACzB,OAAO,KAAK,MAAM,CAAC,IAAI;YACvB,SAAS;gBACP,WAAW;gBACX,WAAW;YACb;QACF;IACF;IAEA,qCAAqC;IACrC,IAAI,KAAK,SAAS,KAAK,KAAK,SAAS,IAAI,KAAK,MAAM,KAAK,YAAY;QACnE,WAAW,IAAI,CAAC;YACd,IAAI,CAAC,SAAS,EAAE,OAAO,OAAO,CAAC;YAC/B,MAAM;YACN,OAAO;YACP,WAAW,KAAK,SAAS;YACzB,OAAO,KAAK,MAAM,CAAC,IAAI;QACzB;IACF;IAEA,mCAAmC;IACnC,OAAO,WAAW,IAAI,CAAC,CAAC,GAAG,IAAM,IAAI,KAAK,EAAE,SAAS,EAAE,OAAO,KAAK,IAAI,KAAK,EAAE,SAAS,EAAE,OAAO;AAClG"}},
    {"offset": {"line": 860, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/minhmice/Documents/projects/prosfin-web/apps/admin/src/components/content/post-editor/version-panel.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { formatDistanceToNow } from \"date-fns\";\r\nimport { Button } from \"@prosfin/ui\";\r\nimport { RotateCcw, GitCompare, Save } from \"lucide-react\";\r\nimport { ActivityLog } from \"./activity-log\";\r\nimport type { Post, PostActivityEvent } from \"@/types/content\";\r\nimport { getPostActivity } from \"@/lib/data/posts\";\r\n\r\ninterface VersionPanelProps {\r\n  post?: Post;\r\n  formData: any;\r\n  onRestorePublished?: () => void;\r\n}\r\n\r\nexport function VersionPanel({ post, formData, onRestorePublished }: VersionPanelProps) {\r\n  const [activity, setActivity] = React.useState<PostActivityEvent[]>([]);\r\n  const [isLoadingActivity, setIsLoadingActivity] = React.useState(false);\r\n\r\n  React.useEffect(() => {\r\n    if (post?.id) {\r\n      setIsLoadingActivity(true);\r\n      getPostActivity(post.id).then((events) => {\r\n        setActivity(events);\r\n        setIsLoadingActivity(false);\r\n      });\r\n    }\r\n  }, [post?.id]);\r\n\r\n  const viewing = post?.status === \"published\" ? \"Published\" : \"Draft\";\r\n  const lastSaved = formData?.updatedAt || post?.updatedAt;\r\n  const lastPublished = post?.publishedAt;\r\n\r\n  return (\r\n    <div className=\"space-y-6 p-4\">\r\n      {/* Version Info */}\r\n      <div className=\"space-y-3\">\r\n        <h3 className=\"font-semibold text-sm\">Version Info</h3>\r\n        <div className=\"space-y-2 text-sm\">\r\n          <div>\r\n            <span className=\"text-muted-foreground\">Viewing: </span>\r\n            <span className=\"font-medium\">{viewing}</span>\r\n          </div>\r\n          {lastSaved && (\r\n            <div>\r\n              <span className=\"text-muted-foreground\">Last saved: </span>\r\n              <span className=\"font-medium\">\r\n                {formatDistanceToNow(new Date(lastSaved), { addSuffix: true })}\r\n              </span>\r\n            </div>\r\n          )}\r\n          {lastPublished && (\r\n            <div>\r\n              <span className=\"text-muted-foreground\">Last published: </span>\r\n              <span className=\"font-medium\">\r\n                {formatDistanceToNow(new Date(lastPublished), { addSuffix: true })}\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Actions */}\r\n      <div className=\"space-y-2\">\r\n        <h3 className=\"font-semibold text-sm\">Actions</h3>\r\n        <div className=\"space-y-2\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            className=\"w-full justify-start\"\r\n            disabled\r\n            title=\"Coming in Phase 3\"\r\n          >\r\n            <GitCompare className=\"mr-2 size-4\" />\r\n            Compare changes\r\n          </Button>\r\n          {post?.status === \"draft\" && post?.publishedAt && (\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              className=\"w-full justify-start\"\r\n              onClick={onRestorePublished}\r\n            >\r\n              <RotateCcw className=\"mr-2 size-4\" />\r\n              Restore published → draft\r\n            </Button>\r\n          )}\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            className=\"w-full justify-start\"\r\n            disabled\r\n            title=\"Coming in Phase 3\"\r\n          >\r\n            <Save className=\"mr-2 size-4\" />\r\n            Save as new revision\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Activity Log */}\r\n      <div className=\"space-y-3\">\r\n        <h3 className=\"font-semibold text-sm\">Activity Log</h3>\r\n        {isLoadingActivity ? (\r\n          <div className=\"text-center text-muted-foreground text-sm py-4\">Loading...</div>\r\n        ) : (\r\n          <ActivityLog events={activity} />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAEA;AARA;;;;;;;;AAgBO,SAAS,aAAa,EAAE,IAAI,EAAE,QAAQ,EAAE,kBAAkB,EAAqB;IACpF,MAAM,CAAC,UAAU,YAAY,GAAG,gUAAc,CAAsB,EAAE;IACtE,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,gUAAc,CAAC;IAEjE,iUAAe,CAAC;QACd,IAAI,MAAM,IAAI;YACZ,qBAAqB;YACrB,IAAA,+JAAe,EAAC,KAAK,EAAE,EAAE,IAAI,CAAC,CAAC;gBAC7B,YAAY;gBACZ,qBAAqB;YACvB;QACF;IACF,GAAG;QAAC,MAAM;KAAG;IAEb,MAAM,UAAU,MAAM,WAAW,cAAc,cAAc;IAC7D,MAAM,YAAY,UAAU,aAAa,MAAM;IAC/C,MAAM,gBAAgB,MAAM;IAE5B,qBACE,6VAAC;QAAI,WAAU;;0BAEb,6VAAC;gBAAI,WAAU;;kCACb,6VAAC;wBAAG,WAAU;kCAAwB;;;;;;kCACtC,6VAAC;wBAAI,WAAU;;0CACb,6VAAC;;kDACC,6VAAC;wCAAK,WAAU;kDAAwB;;;;;;kDACxC,6VAAC;wCAAK,WAAU;kDAAe;;;;;;;;;;;;4BAEhC,2BACC,6VAAC;;kDACC,6VAAC;wCAAK,WAAU;kDAAwB;;;;;;kDACxC,6VAAC;wCAAK,WAAU;kDACb,IAAA,kOAAmB,EAAC,IAAI,KAAK,YAAY;4CAAE,WAAW;wCAAK;;;;;;;;;;;;4BAIjE,+BACC,6VAAC;;kDACC,6VAAC;wCAAK,WAAU;kDAAwB;;;;;;kDACxC,6VAAC;wCAAK,WAAU;kDACb,IAAA,kOAAmB,EAAC,IAAI,KAAK,gBAAgB;4CAAE,WAAW;wCAAK;;;;;;;;;;;;;;;;;;;;;;;;0BAQ1E,6VAAC;gBAAI,WAAU;;kCACb,6VAAC;wBAAG,WAAU;kCAAwB;;;;;;kCACtC,6VAAC;wBAAI,WAAU;;0CACb,6VAAC,8JAAM;gCACL,SAAQ;gCACR,MAAK;gCACL,WAAU;gCACV,QAAQ;gCACR,OAAM;;kDAEN,6VAAC,oTAAU;wCAAC,WAAU;;;;;;oCAAgB;;;;;;;4BAGvC,MAAM,WAAW,WAAW,MAAM,6BACjC,6VAAC,8JAAM;gCACL,SAAQ;gCACR,MAAK;gCACL,WAAU;gCACV,SAAS;;kDAET,6VAAC,iTAAS;wCAAC,WAAU;;;;;;oCAAgB;;;;;;;0CAIzC,6VAAC,8JAAM;gCACL,SAAQ;gCACR,MAAK;gCACL,WAAU;gCACV,QAAQ;gCACR,OAAM;;kDAEN,6VAAC,8RAAI;wCAAC,WAAU;;;;;;oCAAgB;;;;;;;;;;;;;;;;;;;0BAOtC,6VAAC;gBAAI,WAAU;;kCACb,6VAAC;wBAAG,WAAU;kCAAwB;;;;;;oBACrC,kCACC,6VAAC;wBAAI,WAAU;kCAAiD;;;;;6CAEhE,6VAAC,kMAAW;wBAAC,QAAQ;;;;;;;;;;;;;;;;;;AAK/B"}},
    {"offset": {"line": 1134, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/minhmice/Documents/projects/prosfin-web/apps/admin/src/components/content/post-editor/content-checklist.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { CheckCircle2, XCircle, AlertCircle } from \"lucide-react\";\r\nimport { Badge } from \"@prosfin/ui\";\r\nimport type { PostFormData } from \"@/types/content\";\r\nimport { isSlugUnique } from \"@/lib/data/posts\";\r\n\r\ninterface ChecklistItem {\r\n  id: string;\r\n  label: string;\r\n  status: \"pass\" | \"warning\" | \"fail\";\r\n  message?: string;\r\n}\r\n\r\ninterface ContentChecklistProps {\r\n  formData: PostFormData | null;\r\n  postId?: string;\r\n}\r\n\r\nexport function useContentChecklist(formData: PostFormData | null, postId?: string) {\r\n  const [slugUnique, setSlugUnique] = React.useState<boolean | null>(null);\r\n  const [isCheckingSlug, setIsCheckingSlug] = React.useState(false);\r\n\r\n  React.useEffect(() => {\r\n    if (formData?.slug && formData?.bucket) {\r\n      setIsCheckingSlug(true);\r\n      isSlugUnique(formData.slug, formData.bucket, postId)\r\n        .then((unique) => {\r\n          setSlugUnique(unique);\r\n          setIsCheckingSlug(false);\r\n        })\r\n        .catch(() => {\r\n          setSlugUnique(null);\r\n          setIsCheckingSlug(false);\r\n        });\r\n    } else {\r\n      setSlugUnique(null);\r\n    }\r\n  }, [formData?.slug, formData?.bucket, postId]);\r\n\r\n  if (!formData) {\r\n    return {\r\n      items: [],\r\n      passCount: 0,\r\n      warningCount: 0,\r\n      failCount: 0,\r\n      canPublish: false,\r\n      hasWarnings: false,\r\n    };\r\n  }\r\n\r\n  const items: ChecklistItem[] = [];\r\n\r\n  // Title present\r\n  items.push({\r\n    id: \"title\",\r\n    label: \"Title present\",\r\n    status: formData.title?.trim() ? \"pass\" : \"fail\",\r\n    message: formData.title?.trim() ? undefined : \"Title is required\",\r\n  });\r\n\r\n  // Slug valid + unique\r\n  const slugValid = formData.slug?.trim() && /^[a-z0-9-]+$/.test(formData.slug);\r\n  const slugStatus =\r\n    !formData.slug?.trim()\r\n      ? \"fail\"\r\n      : !slugValid\r\n      ? \"fail\"\r\n      : slugUnique === false\r\n      ? \"fail\"\r\n      : slugUnique === true\r\n      ? \"pass\"\r\n      : isCheckingSlug\r\n      ? \"warning\"\r\n      : \"pass\";\r\n  items.push({\r\n    id: \"slug\",\r\n    label: \"Slug valid + unique\",\r\n    status: slugStatus,\r\n    message:\r\n      !formData.slug?.trim()\r\n        ? \"Slug is required\"\r\n        : !slugValid\r\n        ? \"Slug must contain only lowercase letters, numbers, and hyphens\"\r\n        : slugUnique === false\r\n        ? \"Slug is not unique\"\r\n        : isCheckingSlug\r\n        ? \"Checking...\"\r\n        : undefined,\r\n  });\r\n\r\n  // Excerpt present (warning)\r\n  items.push({\r\n    id: \"excerpt\",\r\n    label: \"Excerpt present\",\r\n    status: formData.excerpt?.trim() ? \"pass\" : \"warning\",\r\n    message: formData.excerpt?.trim() ? undefined : \"Excerpt is recommended\",\r\n  });\r\n\r\n  // Cover present (warning)\r\n  items.push({\r\n    id: \"cover\",\r\n    label: \"Cover present\",\r\n    status: formData.cover?.trim() ? \"pass\" : \"warning\",\r\n    message: formData.cover?.trim() ? undefined : \"Cover image is recommended\",\r\n  });\r\n\r\n  // SEO title length\r\n  const seoTitleLength = formData.seoTitle?.length || 0;\r\n  items.push({\r\n    id: \"seoTitle\",\r\n    label: \"SEO title length\",\r\n    status: seoTitleLength === 0 ? \"warning\" : seoTitleLength > 60 ? \"warning\" : \"pass\",\r\n    message:\r\n      seoTitleLength === 0\r\n        ? \"SEO title is recommended\"\r\n        : seoTitleLength > 60\r\n        ? `SEO title is ${seoTitleLength} characters (recommended: ≤60)`\r\n        : undefined,\r\n  });\r\n\r\n  // SEO description length\r\n  const seoDescLength = formData.seoDescription?.length || 0;\r\n  items.push({\r\n    id: \"seoDescription\",\r\n    label: \"SEO description length\",\r\n    status: seoDescLength === 0 ? \"warning\" : seoDescLength > 160 ? \"warning\" : \"pass\",\r\n    message:\r\n      seoDescLength === 0\r\n        ? \"SEO description is recommended\"\r\n        : seoDescLength > 160\r\n        ? `SEO description is ${seoDescLength} characters (recommended: ≤160)`\r\n        : undefined,\r\n  });\r\n\r\n  const passCount = items.filter((item) => item.status === \"pass\").length;\r\n  const warningCount = items.filter((item) => item.status === \"warning\").length;\r\n  const failCount = items.filter((item) => item.status === \"fail\").length;\r\n\r\n  return {\r\n    items,\r\n    passCount,\r\n    warningCount,\r\n    failCount,\r\n    canPublish: failCount === 0,\r\n    hasWarnings: warningCount > 0,\r\n  };\r\n}\r\n\r\nexport function ContentChecklistDisplay({ formData, postId }: ContentChecklistProps) {\r\n  const checklist = useContentChecklist(formData, postId);\r\n\r\n  if (!formData) {\r\n    return null;\r\n  }\r\n\r\n  const getIcon = (status: \"pass\" | \"warning\" | \"fail\") => {\r\n    switch (status) {\r\n      case \"pass\":\r\n        return <CheckCircle2 className=\"size-4 text-green-600\" />;\r\n      case \"warning\":\r\n        return <AlertCircle className=\"size-4 text-yellow-600\" />;\r\n      case \"fail\":\r\n        return <XCircle className=\"size-4 text-red-600\" />;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h3 className=\"font-semibold text-sm\">Content Checklist</h3>\r\n        <Badge variant=\"secondary\" className=\"text-xs\">\r\n          {checklist.passCount}/{checklist.items.length}\r\n        </Badge>\r\n      </div>\r\n      <div className=\"space-y-2\">\r\n        {checklist.items.map((item) => (\r\n          <div key={item.id} className=\"flex items-start gap-2 text-sm\">\r\n            {getIcon(item.status)}\r\n            <div className=\"flex-1\">\r\n              <div className=\"font-medium\">{item.label}</div>\r\n              {item.message && (\r\n                <div className=\"text-muted-foreground text-xs mt-0.5\">{item.message}</div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      {checklist.failCount > 0 && (\r\n        <div className=\"rounded-md border border-red-200 bg-red-50 p-2 text-red-800 text-xs\">\r\n          {checklist.failCount} issue{checklist.failCount > 1 ? \"s\" : \"\"} must be fixed before publishing\r\n        </div>\r\n      )}\r\n      {checklist.failCount === 0 && checklist.warningCount > 0 && (\r\n        <div className=\"rounded-md border border-yellow-200 bg-yellow-50 p-2 text-yellow-800 text-xs\">\r\n          {checklist.warningCount} warning{checklist.warningCount > 1 ? \"s\" : \"\"} - review before publishing\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1389, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/minhmice/Documents/projects/prosfin-web/apps/admin/src/components/content/post-editor/metadata-panel.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { Input, Label, Textarea, Button, Badge, Separator, Tabs, TabsList, TabsTrigger, TabsContent } from \"@prosfin/ui\";\r\nimport { Calendar } from \"lucide-react\";\r\nimport type { Post, PostFormData, ContentBucket, PostStatus } from \"@/types/content\";\r\nimport { contentBucketSchema, postStatusSchema } from \"@/types/content\";\r\nimport { VersionPanel } from \"./version-panel\";\r\nimport { ContentChecklistDisplay } from \"./content-checklist\";\r\n\r\ninterface MetadataPanelProps {\r\n  post?: Post;\r\n  formData: PostFormData | null;\r\n  onFormDataChange: (data: PostFormData) => void;\r\n  onSchedule?: (data: PostFormData, scheduledFor: string) => Promise<void>;\r\n}\r\n\r\nconst bucketOptions: { value: ContentBucket; label: string }[] = [\r\n  { value: \"insights\", label: \"Insights\" },\r\n  { value: \"resources\", label: \"Resources\" },\r\n  { value: \"knowledge\", label: \"Knowledge\" },\r\n];\r\n\r\nconst statusOptions: { value: PostStatus; label: string }[] = [\r\n  { value: \"draft\", label: \"Draft\" },\r\n  { value: \"published\", label: \"Published\" },\r\n  { value: \"scheduled\", label: \"Scheduled\" },\r\n  { value: \"archived\", label: \"Archived\" },\r\n];\r\n\r\nexport function MetadataPanel({\r\n  post,\r\n  formData,\r\n  onFormDataChange,\r\n  onSchedule,\r\n}: MetadataPanelProps) {\r\n  const [localData, setLocalData] = React.useState<Partial<PostFormData>>(\r\n    post\r\n      ? {\r\n          title: post.title,\r\n          slug: post.slug,\r\n          bucket: post.bucket,\r\n          excerpt: post.excerpt,\r\n          cover: post.cover,\r\n          tags: post.tags,\r\n          content: post.content,\r\n          seoTitle: post.seoTitle,\r\n          seoDescription: post.seoDescription,\r\n          canonical: post.canonical,\r\n          noindex: post.noindex,\r\n          status: post.status,\r\n          scheduledFor: post.scheduledFor,\r\n        }\r\n      : {\r\n          title: \"\",\r\n          slug: \"\",\r\n          bucket: \"insights\",\r\n          excerpt: \"\",\r\n          cover: \"\",\r\n          tags: [],\r\n          content: {\r\n            root: {\r\n              children: [],\r\n              direction: \"ltr\",\r\n              format: \"\",\r\n              indent: 0,\r\n              type: \"root\",\r\n              version: 1,\r\n            },\r\n          },\r\n          status: \"draft\",\r\n        }\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    if (formData) {\r\n      setLocalData(formData);\r\n    }\r\n  }, [formData]);\r\n\r\n  const updateField = <K extends keyof PostFormData>(\r\n    field: K,\r\n    value: PostFormData[K]\r\n  ) => {\r\n    const updated = { ...localData, [field]: value } as PostFormData;\r\n    setLocalData(updated);\r\n    onFormDataChange(updated);\r\n  };\r\n\r\n  const generateSlug = (title: string) => {\r\n    return title\r\n      .toLowerCase()\r\n      .normalize(\"NFD\")\r\n      .replace(/[\\u0300-\\u036f]/g, \"\")\r\n      .replace(/[^a-z0-9]+/g, \"-\")\r\n      .replace(/(^-|-$)/g, \"\");\r\n  };\r\n\r\n  const handleTitleChange = (value: string) => {\r\n    updateField(\"title\", value);\r\n    if (!post || !localData.slug) {\r\n      // Auto-generate slug if new post or slug is empty\r\n      updateField(\"slug\", generateSlug(value));\r\n    }\r\n  };\r\n\r\n  const addTag = (tag: string) => {\r\n    if (tag.trim() && !localData.tags?.includes(tag.trim())) {\r\n      updateField(\"tags\", [...(localData.tags || []), tag.trim()]);\r\n    }\r\n  };\r\n\r\n  const removeTag = (tag: string) => {\r\n    updateField(\"tags\", localData.tags?.filter((t) => t !== tag) || []);\r\n  };\r\n\r\n  const handleRestorePublished = async () => {\r\n    // TODO: Implement restore published → draft\r\n    console.log(\"Restore published to draft\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-full flex-col overflow-hidden\">\r\n      <Tabs defaultValue=\"metadata\" className=\"flex h-full flex-col\">\r\n        <TabsList className=\"mx-4 mt-4\">\r\n          <TabsTrigger value=\"metadata\">Metadata</TabsTrigger>\r\n          <TabsTrigger value=\"versions\">Versions</TabsTrigger>\r\n        </TabsList>\r\n        <TabsContent value=\"metadata\" className=\"flex-1 overflow-y-auto\">\r\n          <div className=\"space-y-6 p-6\">\r\n            {/* Content Checklist */}\r\n            <div className=\"rounded-md border bg-background p-4\">\r\n              <ContentChecklistDisplay formData={formData} postId={post?.id} />\r\n            </div>\r\n            <Separator />\r\n        {/* Basic Info */}\r\n        <div className=\"space-y-4\">\r\n          <h3 className=\"font-semibold\">Basic Information</h3>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"title\">Title *</Label>\r\n            <Input\r\n              id=\"title\"\r\n              value={localData.title || \"\"}\r\n              onChange={(e) => handleTitleChange(e.target.value)}\r\n              placeholder=\"Enter post title\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"slug\">Slug *</Label>\r\n            <Input\r\n              id=\"slug\"\r\n              value={localData.slug || \"\"}\r\n              onChange={(e) => updateField(\"slug\", e.target.value)}\r\n              placeholder=\"post-slug\"\r\n            />\r\n            <p className=\"text-xs text-muted-foreground\">\r\n              URL-friendly version of the title\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"bucket\">Content Bucket</Label>\r\n            <select\r\n              id=\"bucket\"\r\n              value={localData.bucket || \"insights\"}\r\n              onChange={(e) =>\r\n                updateField(\"bucket\", e.target.value as ContentBucket)\r\n              }\r\n              className=\"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring\"\r\n            >\r\n              {bucketOptions.map((opt) => (\r\n                <option key={opt.value} value={opt.value}>\r\n                  {opt.label}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"excerpt\">Excerpt</Label>\r\n            <Textarea\r\n              id=\"excerpt\"\r\n              value={localData.excerpt || \"\"}\r\n              onChange={(e) => updateField(\"excerpt\", e.target.value)}\r\n              placeholder=\"Brief description of the post\"\r\n              rows={3}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"cover\">Cover Image URL</Label>\r\n            <Input\r\n              id=\"cover\"\r\n              value={localData.cover || \"\"}\r\n              onChange={(e) => updateField(\"cover\", e.target.value)}\r\n              placeholder=\"https://example.com/image.jpg\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <Separator />\r\n\r\n        {/* Tags */}\r\n        <div className=\"space-y-4\">\r\n          <h3 className=\"font-semibold\">Tags</h3>\r\n          <div className=\"flex flex-wrap gap-2\">\r\n            {localData.tags?.map((tag) => (\r\n              <Badge\r\n                key={tag}\r\n                variant=\"secondary\"\r\n                className=\"cursor-pointer\"\r\n                onClick={() => removeTag(tag)}\r\n              >\r\n                {tag} ×\r\n              </Badge>\r\n            ))}\r\n          </div>\r\n          <div className=\"flex gap-2\">\r\n            <Input\r\n              placeholder=\"Add tag\"\r\n              onKeyDown={(e) => {\r\n                if (e.key === \"Enter\") {\r\n                  e.preventDefault();\r\n                  addTag(e.currentTarget.value);\r\n                  e.currentTarget.value = \"\";\r\n                }\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <Separator />\r\n\r\n        {/* Status */}\r\n        <div className=\"space-y-4\">\r\n          <h3 className=\"font-semibold\">Status</h3>\r\n          <select\r\n            value={localData.status || \"draft\"}\r\n            onChange={(e) => {\r\n              const newStatus = e.target.value as PostStatus;\r\n              // Edge case: If changing from scheduled to draft, cancel schedule\r\n              if (localData.status === \"scheduled\" && newStatus === \"draft\" && post) {\r\n                // Cancel schedule will be handled by EditorShell\r\n                updateField(\"status\", newStatus);\r\n                updateField(\"scheduledFor\", undefined);\r\n              } else {\r\n                updateField(\"status\", newStatus);\r\n              }\r\n            }}\r\n            className=\"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring\"\r\n          >\r\n            {statusOptions.map((opt) => (\r\n              <option key={opt.value} value={opt.value}>\r\n                {opt.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n\r\n          {localData.status === \"scheduled\" && localData.scheduledFor && (\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"scheduledFor\">Schedule For</Label>\r\n              <Input\r\n                id=\"scheduledFor\"\r\n                type=\"datetime-local\"\r\n                value={\r\n                  localData.scheduledFor\r\n                    ? new Date(localData.scheduledFor)\r\n                        .toISOString()\r\n                        .slice(0, 16)\r\n                    : \"\"\r\n                }\r\n                onChange={(e) =>\r\n                  updateField(\r\n                    \"scheduledFor\",\r\n                    e.target.value ? new Date(e.target.value).toISOString() : undefined\r\n                  )\r\n                }\r\n              />\r\n              <p className=\"text-muted-foreground text-xs\">\r\n                Changes to slug/SEO will be applied when the post is published.\r\n              </p>\r\n            </div>\r\n          )}\r\n          {localData.status === \"scheduled\" && !localData.scheduledFor && (\r\n            <div className=\"rounded-md border border-yellow-200 bg-yellow-50 p-2 text-yellow-800 text-xs\">\r\n              Scheduled but no date set. Please reschedule.\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <Separator />\r\n\r\n        {/* SEO */}\r\n        <div className=\"space-y-4\">\r\n          <h3 className=\"font-semibold\">SEO Settings</h3>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"seoTitle\">SEO Title</Label>\r\n            <Input\r\n              id=\"seoTitle\"\r\n              value={localData.seoTitle || \"\"}\r\n              onChange={(e) => updateField(\"seoTitle\", e.target.value)}\r\n              placeholder=\"Custom title for search engines\"\r\n            />\r\n            <p className=\"text-xs text-muted-foreground\">\r\n              {localData.seoTitle?.length || 0}/60 characters\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"seoDescription\">SEO Description</Label>\r\n            <Textarea\r\n              id=\"seoDescription\"\r\n              value={localData.seoDescription || \"\"}\r\n              onChange={(e) => updateField(\"seoDescription\", e.target.value)}\r\n              placeholder=\"Meta description for search engines\"\r\n              rows={3}\r\n            />\r\n            <p className=\"text-xs text-muted-foreground\">\r\n              {localData.seoDescription?.length || 0}/160 characters\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"canonical\">Canonical URL</Label>\r\n            <Input\r\n              id=\"canonical\"\r\n              value={localData.canonical || \"\"}\r\n              onChange={(e) => updateField(\"canonical\", e.target.value)}\r\n              placeholder=\"https://example.com/canonical-url\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex items-center gap-2\">\r\n            <input\r\n              type=\"checkbox\"\r\n              id=\"noindex\"\r\n              checked={localData.noindex || false}\r\n              onChange={(e) => updateField(\"noindex\", e.target.checked)}\r\n              className=\"size-4 rounded border-input\"\r\n            />\r\n            <Label htmlFor=\"noindex\" className=\"cursor-pointer\">\r\n              Noindex (prevent search engines from indexing)\r\n            </Label>\r\n          </div>\r\n        </div>\r\n          </div>\r\n        </TabsContent>\r\n        <TabsContent value=\"versions\" className=\"flex-1 overflow-y-auto\">\r\n          <VersionPanel\r\n            post={post}\r\n            formData={formData}\r\n            onRestorePublished={handleRestorePublished}\r\n          />\r\n        </TabsContent>\r\n      </Tabs>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2096, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/minhmice/Documents/projects/prosfin-web/apps/admin/src/lib/toast.ts"],"sourcesContent":["/**\r\n * Toast utilities wrapper\r\n * \r\n * Centralized toast notifications using Sonner.\r\n * Provides consistent API for success, error, info, and promise toasts.\r\n */\r\n\r\nimport { toast } from \"sonner\";\r\n\r\nexport const showToast = {\r\n  success: (message: string) => {\r\n    toast.success(message);\r\n  },\r\n  error: (message: string) => {\r\n    toast.error(message);\r\n  },\r\n  info: (message: string) => {\r\n    toast.info(message);\r\n  },\r\n  promise: <T,>(\r\n    promise: Promise<T>,\r\n    messages: { loading: string; success: string; error: string }\r\n  ) => {\r\n    return toast.promise(promise, messages);\r\n  },\r\n};\r\n\r\n"],"names":[],"mappings":"AAAA;;;;;CAKC;;;;AAED;;AAEO,MAAM,YAAY;IACvB,SAAS,CAAC;QACR,iRAAK,CAAC,OAAO,CAAC;IAChB;IACA,OAAO,CAAC;QACN,iRAAK,CAAC,KAAK,CAAC;IACd;IACA,MAAM,CAAC;QACL,iRAAK,CAAC,IAAI,CAAC;IACb;IACA,SAAS,CACP,SACA;QAEA,OAAO,iRAAK,CAAC,OAAO,CAAC,SAAS;IAChC;AACF"}},
    {"offset": {"line": 2125, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/minhmice/Documents/projects/prosfin-web/apps/admin/src/components/content/post-editor/editor-action-bar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { format, formatDistanceToNow } from \"date-fns\";\r\nimport { Button, Separator } from \"@prosfin/ui\";\r\nimport {\r\n  Save,\r\n  Eye,\r\n  Calendar,\r\n  ArrowLeft,\r\n  CheckCircle2,\r\n  Clock,\r\n  Send,\r\n  Archive,\r\n  RotateCcw,\r\n  X,\r\n  Play,\r\n  AlertCircle,\r\n} from \"lucide-react\";\r\nimport Link from \"next/link\";\r\nimport type { Post, PostFormData, PostStatus } from \"@/types/content\";\r\nimport { showToast } from \"@/lib/toast\";\r\nimport { useContentChecklist } from \"./content-checklist\";\r\nimport { Badge } from \"@prosfin/ui\";\r\n\r\ninterface EditorActionBarProps {\r\n  post?: Post;\r\n  formData: PostFormData | null;\r\n  hasUnsavedChanges: boolean;\r\n  isSaving: boolean;\r\n  isSaved: boolean;\r\n  lastSavedAt?: string;\r\n  onSave: () => Promise<void>;\r\n  onPublish?: () => Promise<void>;\r\n  onSchedule?: (scheduledFor: string) => Promise<void>;\r\n  onUnpublish?: () => Promise<void>;\r\n  onArchive?: () => Promise<void>;\r\n  onRestore?: () => Promise<void>;\r\n  onReschedule?: () => void;\r\n  onPublishNow?: () => Promise<void>;\r\n  onCancelSchedule?: () => Promise<void>;\r\n  onUpdatePublished?: () => void;\r\n  onUnsavedChangesChange?: (hasChanges: boolean) => void;\r\n  showChecklist?: boolean;\r\n}\r\n\r\nexport function EditorActionBar({\r\n  post,\r\n  formData,\r\n  hasUnsavedChanges,\r\n  isSaving,\r\n  isSaved,\r\n  lastSavedAt,\r\n  onSave,\r\n  onPublish,\r\n  onSchedule,\r\n  onUnpublish,\r\n  onArchive,\r\n  onRestore,\r\n  onReschedule,\r\n  onPublishNow,\r\n  onCancelSchedule,\r\n  onUpdatePublished,\r\n  onUnsavedChangesChange,\r\n  showChecklist = false,\r\n}: EditorActionBarProps) {\r\n  const router = useRouter();\r\n  const status: PostStatus = post?.status || formData?.status || \"draft\";\r\n  const checklist = useContentChecklist(formData, post?.id);\r\n\r\n  // Track unsaved changes guard\r\n  React.useEffect(() => {\r\n    const handleBeforeUnload = (e: BeforeUnloadEvent) => {\r\n      if (hasUnsavedChanges) {\r\n        e.preventDefault();\r\n        e.returnValue = \"\";\r\n      }\r\n    };\r\n\r\n    window.addEventListener(\"beforeunload\", handleBeforeUnload);\r\n    return () => window.removeEventListener(\"beforeunload\", handleBeforeUnload);\r\n  }, [hasUnsavedChanges]);\r\n\r\n  const handleSave = async () => {\r\n    if (!formData) return;\r\n    await onSave();\r\n    onUnsavedChangesChange?.(false);\r\n  };\r\n\r\n  const handlePreviewDraft = () => {\r\n    if (!formData) return;\r\n    const slug = formData.slug || post?.slug;\r\n    const bucket = formData.bucket || post?.bucket;\r\n    if (!slug || !bucket) {\r\n      showToast.error(\"Slug and bucket are required for preview\");\r\n      return;\r\n    }\r\n    // Phase 2: Hardcode secret, Phase 3 will generate token\r\n    const secret = \"your-secret-token\";\r\n    window.open(`/api/draft?secret=${secret}&slug=${slug}&bucket=${bucket}`, \"_blank\");\r\n  };\r\n\r\n  const handlePreviewPublished = () => {\r\n    if (!post || post.status !== \"published\") return;\r\n    const bucket = post.bucket;\r\n    const slug = post.slug;\r\n    window.open(`/${bucket}/${slug}`, \"_blank\");\r\n  };\r\n\r\n  const handlePublish = async () => {\r\n    if (!formData) return;\r\n    await onPublish?.();\r\n  };\r\n\r\n  const handleSchedule = () => {\r\n    onReschedule?.();\r\n  };\r\n\r\n  const handleUnpublish = async () => {\r\n    if (!confirm(\"Are you sure you want to unpublish this post? It will be set to draft.\")) {\r\n      return;\r\n    }\r\n    await onUnpublish?.();\r\n  };\r\n\r\n  const handleArchive = async () => {\r\n    if (!confirm(\"Are you sure you want to archive this post? It will be hidden from public view.\")) {\r\n      return;\r\n    }\r\n    await onArchive?.();\r\n  };\r\n\r\n  const handleRestore = async () => {\r\n    await onRestore?.();\r\n  };\r\n\r\n  const lastSavedText = React.useMemo(() => {\r\n    if (!lastSavedAt) return null;\r\n    try {\r\n      return formatDistanceToNow(new Date(lastSavedAt), { addSuffix: true });\r\n    } catch {\r\n      return null;\r\n    }\r\n  }, [lastSavedAt]);\r\n\r\n  const scheduledForText = React.useMemo(() => {\r\n    if (status !== \"scheduled\" || !post?.scheduledFor) return null;\r\n    try {\r\n      const scheduledDate = new Date(post.scheduledFor);\r\n      const now = new Date();\r\n      if (scheduledDate <= now) return \"Ready to publish\";\r\n      return `Publishes ${formatDistanceToNow(scheduledDate, { addSuffix: true })}`;\r\n    } catch {\r\n      return null;\r\n    }\r\n  }, [status, post?.scheduledFor]);\r\n\r\n  return (\r\n    <div className=\"border-b bg-background\">\r\n      <div className=\"flex h-14 items-center justify-between px-6\">\r\n        {/* Left: Back + Status */}\r\n        <div className=\"flex items-center gap-4\">\r\n          <Link href=\"/content\">\r\n            <Button variant=\"ghost\" size=\"icon\">\r\n              <ArrowLeft className=\"size-4\" />\r\n            </Button>\r\n          </Link>\r\n          <Separator orientation=\"vertical\" className=\"h-6\" />\r\n          <div className=\"flex items-center gap-2\">\r\n            {isSaved && (\r\n              <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n                <CheckCircle2 className=\"size-4 text-green-600\" />\r\n                <span>Saved</span>\r\n              </div>\r\n            )}\r\n            {hasUnsavedChanges && !isSaved && (\r\n              <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n                <Clock className=\"size-4\" />\r\n                <span>Unsaved changes</span>\r\n              </div>\r\n            )}\r\n            {!hasUnsavedChanges && lastSavedText && (\r\n              <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n                <span>Last saved {lastSavedText}</span>\r\n              </div>\r\n            )}\r\n            {scheduledForText && (\r\n              <div className=\"flex items-center gap-2 text-sm text-blue-600\">\r\n                <Calendar className=\"size-4\" />\r\n                <span>{scheduledForText}</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Right: Actions */}\r\n        <div className=\"flex items-center gap-2\">\r\n          {formData && (\r\n            <div className=\"group relative mr-2\">\r\n              {checklist.failCount > 0 ? (\r\n                <Badge variant=\"destructive\" className=\"cursor-help\">\r\n                  <AlertCircle className=\"mr-1 size-3\" />\r\n                  {checklist.failCount} issue{checklist.failCount > 1 ? \"s\" : \"\"}\r\n                </Badge>\r\n              ) : checklist.warningCount > 0 ? (\r\n                <Badge variant=\"secondary\" className=\"cursor-help\">\r\n                  <AlertCircle className=\"mr-1 size-3\" />\r\n                  {checklist.warningCount} warning{checklist.warningCount > 1 ? \"s\" : \"\"}\r\n                </Badge>\r\n              ) : (\r\n                <Badge variant=\"secondary\" className=\"cursor-help\">\r\n                  <CheckCircle2 className=\"mr-1 size-3\" />\r\n                  All checks pass\r\n                </Badge>\r\n              )}\r\n              {showChecklist && (\r\n                <div className=\"invisible absolute right-0 top-full z-10 mt-2 w-64 rounded-md border bg-popover p-3 text-sm shadow-lg group-hover:visible\">\r\n                  <div className=\"space-y-1\">\r\n                    {checklist.items.map((item) => (\r\n                      <div key={item.id} className=\"flex items-center gap-2\">\r\n                        {item.status === \"pass\" && (\r\n                          <CheckCircle2 className=\"size-3 text-green-600\" />\r\n                        )}\r\n                        {item.status === \"warning\" && (\r\n                          <AlertCircle className=\"size-3 text-yellow-600\" />\r\n                        )}\r\n                        {item.status === \"fail\" && (\r\n                          <AlertCircle className=\"size-3 text-red-600\" />\r\n                        )}\r\n                        <span className={item.status === \"fail\" ? \"font-medium\" : \"\"}>\r\n                          {item.label}\r\n                        </span>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n          {/* Draft Controls */}\r\n          {status === \"draft\" && (\r\n            <>\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={handleSave}\r\n                disabled={isSaving || !hasUnsavedChanges}\r\n              >\r\n                <Save className=\"mr-2 size-4\" />\r\n                {isSaving ? \"Saving...\" : \"Save Draft\"}\r\n              </Button>\r\n              <Button variant=\"outline\" onClick={handlePreviewDraft} disabled={!formData?.slug}>\r\n                <Eye className=\"mr-2 size-4\" />\r\n                Preview Draft\r\n              </Button>\r\n              <Button variant=\"outline\" onClick={handleSchedule}>\r\n                <Calendar className=\"mr-2 size-4\" />\r\n                Schedule\r\n              </Button>\r\n              <Button\r\n                onClick={handlePublish}\r\n                disabled={isSaving || !formData || !checklist.canPublish}\r\n                title={!checklist.canPublish ? \"Fix required issues before publishing\" : undefined}\r\n              >\r\n                <Send className=\"mr-2 size-4\" />\r\n                Publish\r\n              </Button>\r\n            </>\r\n          )}\r\n\r\n          {/* Scheduled Controls */}\r\n          {status === \"scheduled\" && (\r\n            <>\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={handleSave}\r\n                disabled={isSaving || !hasUnsavedChanges}\r\n              >\r\n                <Save className=\"mr-2 size-4\" />\r\n                {isSaving ? \"Saving...\" : \"Save\"}\r\n              </Button>\r\n              <Button variant=\"outline\" onClick={handlePreviewDraft} disabled={!formData?.slug}>\r\n                <Eye className=\"mr-2 size-4\" />\r\n                Preview Draft\r\n              </Button>\r\n              <Button variant=\"outline\" onClick={handleSchedule}>\r\n                <Calendar className=\"mr-2 size-4\" />\r\n                Reschedule\r\n              </Button>\r\n              <Button variant=\"outline\" onClick={onPublishNow}>\r\n                <Play className=\"mr-2 size-4\" />\r\n                Publish Now\r\n              </Button>\r\n              <Button variant=\"outline\" onClick={onCancelSchedule}>\r\n                <X className=\"mr-2 size-4\" />\r\n                Cancel Schedule\r\n              </Button>\r\n            </>\r\n          )}\r\n\r\n          {/* Published Controls */}\r\n          {status === \"published\" && (\r\n            <>\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={handleSave}\r\n                disabled={isSaving || !hasUnsavedChanges}\r\n              >\r\n                <Save className=\"mr-2 size-4\" />\r\n                {isSaving ? \"Saving...\" : \"Save\"}\r\n              </Button>\r\n              <Button variant=\"outline\" onClick={handlePreviewPublished}>\r\n                <Eye className=\"mr-2 size-4\" />\r\n                Preview Published\r\n              </Button>\r\n              <Button variant=\"outline\" onClick={onUpdatePublished}>\r\n                <Send className=\"mr-2 size-4\" />\r\n                Update Published\r\n              </Button>\r\n              <Button variant=\"outline\" onClick={handleUnpublish}>\r\n                Unpublish\r\n              </Button>\r\n              <Button variant=\"outline\" onClick={handleArchive}>\r\n                <Archive className=\"mr-2 size-4\" />\r\n                Archive\r\n              </Button>\r\n            </>\r\n          )}\r\n\r\n          {/* Archived Controls */}\r\n          {status === \"archived\" && (\r\n            <>\r\n              <Button variant=\"outline\" onClick={handlePreviewDraft} disabled={!formData?.slug}>\r\n                <Eye className=\"mr-2 size-4\" />\r\n                Preview Draft\r\n              </Button>\r\n              <Button onClick={handleRestore}>\r\n                <RotateCcw className=\"mr-2 size-4\" />\r\n                Restore\r\n              </Button>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2835, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/minhmice/Documents/projects/prosfin-web/apps/admin/src/components/content/post-editor/publish-dialog.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  Button,\r\n  RadioGroup,\r\n  Label,\r\n} from \"@prosfin/ui\";\r\n\r\ninterface PublishDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  onConfirm: (mode: \"update\" | \"draft\") => void;\r\n}\r\n\r\nexport function PublishDialog({ open, onOpenChange, onConfirm }: PublishDialogProps) {\r\n  const [mode, setMode] = React.useState<\"update\" | \"draft\">(\"update\");\r\n\r\n  const handleConfirm = () => {\r\n    onConfirm(mode);\r\n    onOpenChange(false);\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"sm:max-w-[425px]\">\r\n        <DialogHeader>\r\n          <DialogTitle>Edit Published Post</DialogTitle>\r\n          <DialogDescription>\r\n            Choose how you want to handle changes to this published post.\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n        <div className=\"grid gap-4 py-4\">\r\n          <RadioGroup value={mode} onValueChange={(value) => setMode(value as \"update\" | \"draft\")}>\r\n            <div className=\"flex items-center space-x-2\">\r\n              <input\r\n                type=\"radio\"\r\n                id=\"update\"\r\n                value=\"update\"\r\n                checked={mode === \"update\"}\r\n                onChange={() => setMode(\"update\")}\r\n                className=\"size-4\"\r\n              />\r\n              <Label htmlFor=\"update\" className=\"flex-1 cursor-pointer\">\r\n                <div className=\"font-medium\">Update published immediately</div>\r\n                <div className=\"text-muted-foreground text-sm\">\r\n                  Changes will be live on the published version right away.\r\n                </div>\r\n              </Label>\r\n            </div>\r\n            <div className=\"flex items-center space-x-2\">\r\n              <input\r\n                type=\"radio\"\r\n                id=\"draft\"\r\n                value=\"draft\"\r\n                checked={mode === \"draft\"}\r\n                onChange={() => setMode(\"draft\")}\r\n                className=\"size-4\"\r\n              />\r\n              <Label htmlFor=\"draft\" className=\"flex-1 cursor-pointer\">\r\n                <div className=\"font-medium\">Create draft revision</div>\r\n                <div className=\"text-muted-foreground text-sm\">\r\n                  Create a new draft version. You can review and publish it later.\r\n                </div>\r\n              </Label>\r\n            </div>\r\n          </RadioGroup>\r\n        </div>\r\n        <DialogFooter>\r\n          <Button variant=\"outline\" onClick={() => onOpenChange(false)}>\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={handleConfirm}>Continue</Button>\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAHA;;;;AAqBO,SAAS,cAAc,EAAE,IAAI,EAAE,YAAY,EAAE,SAAS,EAAsB;IACjF,MAAM,CAAC,MAAM,QAAQ,GAAG,gUAAc,CAAqB;IAE3D,MAAM,gBAAgB;QACpB,UAAU;QACV,aAAa;IACf;IAEA,qBACE,6VAAC,8JAAM;QAAC,MAAM;QAAM,cAAc;kBAChC,cAAA,6VAAC,qKAAa;YAAC,WAAU;;8BACvB,6VAAC,oKAAY;;sCACX,6VAAC,mKAAW;sCAAC;;;;;;sCACb,6VAAC,yKAAiB;sCAAC;;;;;;;;;;;;8BAIrB,6VAAC;oBAAI,WAAU;8BACb,cAAA,6VAAC,0KAAU;wBAAC,OAAO;wBAAM,eAAe,CAAC,QAAU,QAAQ;;0CACzD,6VAAC;gCAAI,WAAU;;kDACb,6VAAC;wCACC,MAAK;wCACL,IAAG;wCACH,OAAM;wCACN,SAAS,SAAS;wCAClB,UAAU,IAAM,QAAQ;wCACxB,WAAU;;;;;;kDAEZ,6VAAC,4JAAK;wCAAC,SAAQ;wCAAS,WAAU;;0DAChC,6VAAC;gDAAI,WAAU;0DAAc;;;;;;0DAC7B,6VAAC;gDAAI,WAAU;0DAAgC;;;;;;;;;;;;;;;;;;0CAKnD,6VAAC;gCAAI,WAAU;;kDACb,6VAAC;wCACC,MAAK;wCACL,IAAG;wCACH,OAAM;wCACN,SAAS,SAAS;wCAClB,UAAU,IAAM,QAAQ;wCACxB,WAAU;;;;;;kDAEZ,6VAAC,4JAAK;wCAAC,SAAQ;wCAAQ,WAAU;;0DAC/B,6VAAC;gDAAI,WAAU;0DAAc;;;;;;0DAC7B,6VAAC;gDAAI,WAAU;0DAAgC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8BAOvD,6VAAC,oKAAY;;sCACX,6VAAC,8JAAM;4BAAC,SAAQ;4BAAU,SAAS,IAAM,aAAa;sCAAQ;;;;;;sCAG9D,6VAAC,8JAAM;4BAAC,SAAS;sCAAe;;;;;;;;;;;;;;;;;;;;;;;AAK1C"}},
    {"offset": {"line": 3036, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/minhmice/Documents/projects/prosfin-web/apps/admin/src/components/shared/switch.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { cn } from \"@prosfin/ui\";\r\n\r\ninterface SwitchProps {\r\n  checked?: boolean;\r\n  onCheckedChange?: (checked: boolean) => void;\r\n  id?: string;\r\n  className?: string;\r\n  disabled?: boolean;\r\n}\r\n\r\nexport function Switch({ checked = false, onCheckedChange, id, className, disabled }: SwitchProps) {\r\n  return (\r\n    <button\r\n      type=\"button\"\r\n      role=\"switch\"\r\n      aria-checked={checked}\r\n      id={id}\r\n      disabled={disabled}\r\n      onClick={() => !disabled && onCheckedChange?.(!checked)}\r\n      className={cn(\r\n        \"peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50\",\r\n        checked ? \"bg-primary\" : \"bg-input\",\r\n        className\r\n      )}\r\n    >\r\n      <span\r\n        className={cn(\r\n          \"pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform\",\r\n          checked ? \"translate-x-4\" : \"translate-x-0\"\r\n        )}\r\n      />\r\n    </button>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAGA;AAAA;AAHA;;;AAaO,SAAS,OAAO,EAAE,UAAU,KAAK,EAAE,eAAe,EAAE,EAAE,EAAE,SAAS,EAAE,QAAQ,EAAe;IAC/F,qBACE,6VAAC;QACC,MAAK;QACL,MAAK;QACL,gBAAc;QACd,IAAI;QACJ,UAAU;QACV,SAAS,IAAM,CAAC,YAAY,kBAAkB,CAAC;QAC/C,WAAW,IAAA,oIAAE,EACX,qTACA,UAAU,eAAe,YACzB;kBAGF,cAAA,6VAAC;YACC,WAAW,IAAA,oIAAE,EACX,sGACA,UAAU,kBAAkB;;;;;;;;;;;AAKtC"}},
    {"offset": {"line": 3072, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/minhmice/Documents/projects/prosfin-web/apps/admin/src/components/content/post-editor/schedule-dialog.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { format, addDays, addHours } from \"date-fns\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  Button,\r\n  Label,\r\n} from \"@prosfin/ui\";\r\nimport { Switch } from \"@/components/shared/switch\";\r\nimport { Calendar, Clock } from \"lucide-react\";\r\n\r\ninterface ScheduleDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  onConfirm: (scheduledFor: string | null) => void;\r\n  currentScheduledFor?: string;\r\n}\r\n\r\nexport function ScheduleDialog({\r\n  open,\r\n  onOpenChange,\r\n  onConfirm,\r\n  currentScheduledFor,\r\n}: ScheduleDialogProps) {\r\n  const [publishImmediately, setPublishImmediately] = React.useState(!currentScheduledFor);\r\n  const [date, setDate] = React.useState(() => {\r\n    if (currentScheduledFor) {\r\n      return format(new Date(currentScheduledFor), \"yyyy-MM-dd\");\r\n    }\r\n    return format(addDays(new Date(), 1), \"yyyy-MM-dd\");\r\n  });\r\n  const [time, setTime] = React.useState(() => {\r\n    if (currentScheduledFor) {\r\n      return format(new Date(currentScheduledFor), \"HH:mm\");\r\n    }\r\n    return \"08:00\";\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    if (open && currentScheduledFor) {\r\n      const scheduledDate = new Date(currentScheduledFor);\r\n      setDate(format(scheduledDate, \"yyyy-MM-dd\"));\r\n      setTime(format(scheduledDate, \"HH:mm\"));\r\n      setPublishImmediately(false);\r\n    } else if (open && !currentScheduledFor) {\r\n      setPublishImmediately(true);\r\n    }\r\n  }, [open, currentScheduledFor]);\r\n\r\n  const handleConfirm = () => {\r\n    if (publishImmediately) {\r\n      onConfirm(null);\r\n    } else {\r\n      const scheduledFor = new Date(`${date}T${time}:00`);\r\n      const now = new Date();\r\n      \r\n      if (scheduledFor <= now) {\r\n        alert(\"Cannot schedule in the past. Please select a future date and time.\");\r\n        return;\r\n      }\r\n      \r\n      onConfirm(scheduledFor.toISOString());\r\n    }\r\n    onOpenChange(false);\r\n  };\r\n\r\n  const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"sm:max-w-[425px]\">\r\n        <DialogHeader>\r\n          <DialogTitle>Schedule Publication</DialogTitle>\r\n          <DialogDescription>\r\n            Choose when to publish this post. You can schedule it for later or publish immediately.\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n        <div className=\"grid gap-4 py-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <Label htmlFor=\"publish-immediately\" className=\"cursor-pointer\">\r\n              Publish immediately\r\n            </Label>\r\n            <Switch\r\n              id=\"publish-immediately\"\r\n              checked={publishImmediately}\r\n              onCheckedChange={setPublishImmediately}\r\n            />\r\n          </div>\r\n\r\n          {!publishImmediately && (\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <Label htmlFor=\"schedule-date\" className=\"mb-2 flex items-center gap-2\">\r\n                  <Calendar className=\"size-4\" />\r\n                  Date\r\n                </Label>\r\n                <input\r\n                  id=\"schedule-date\"\r\n                  type=\"date\"\r\n                  value={date}\r\n                  onChange={(e) => setDate(e.target.value)}\r\n                  min={format(new Date(), \"yyyy-MM-dd\")}\r\n                  className=\"w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label htmlFor=\"schedule-time\" className=\"mb-2 flex items-center gap-2\">\r\n                  <Clock className=\"size-4\" />\r\n                  Time\r\n                </Label>\r\n                <input\r\n                  id=\"schedule-time\"\r\n                  type=\"time\"\r\n                  value={time}\r\n                  onChange={(e) => setTime(e.target.value)}\r\n                  className=\"w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\r\n                />\r\n              </div>\r\n              <div className=\"text-muted-foreground text-xs\">\r\n                Timezone: {timezone}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n        <DialogFooter>\r\n          <Button variant=\"outline\" onClick={() => onOpenChange(false)}>\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={handleConfirm}>\r\n            {publishImmediately ? \"Publish Now\" : \"Schedule\"}\r\n          </Button>\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3336, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/minhmice/Documents/projects/prosfin-web/apps/admin/src/components/content/post-editor/editor-shell.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { MetadataPanel } from \"./metadata-panel\";\r\nimport { EditorActionBar } from \"./editor-action-bar\";\r\nimport { PublishDialog } from \"./publish-dialog\";\r\nimport { ScheduleDialog } from \"./schedule-dialog\";\r\nimport type { Post, PostFormData } from \"@/types/content\";\r\nimport {\r\n  saveDraft,\r\n  publish,\r\n  unpublish,\r\n  archivePost,\r\n  restorePost,\r\n  reschedulePost,\r\n  publishNow,\r\n  cancelSchedule,\r\n  createDraftRevision,\r\n  updatePublishedPost,\r\n} from \"@/lib/data/posts\";\r\nimport { showToast } from \"@/lib/toast\";\r\n\r\ninterface EditorShellProps {\r\n  post?: Post;\r\n  onSave: (data: PostFormData) => Promise<void>;\r\n  onPublish?: (data: PostFormData) => Promise<void>;\r\n  onSchedule?: (data: PostFormData, scheduledFor: string) => Promise<void>;\r\n  formData?: PostFormData | null;\r\n  onFormDataChange?: (data: PostFormData) => void;\r\n  children: React.ReactNode; // Editor canvas\r\n}\r\n\r\nexport function EditorShell({\r\n  post,\r\n  onSave: externalOnSave,\r\n  onPublish: externalOnPublish,\r\n  onSchedule: externalOnSchedule,\r\n  formData: externalFormData,\r\n  onFormDataChange: externalOnFormDataChange,\r\n  children,\r\n}: EditorShellProps) {\r\n  const router = useRouter();\r\n  const [isSaving, setIsSaving] = React.useState(false);\r\n  const [isSaved, setIsSaved] = React.useState(false);\r\n  const [hasUnsavedChanges, setHasUnsavedChanges] = React.useState(false);\r\n  const [lastSavedAt, setLastSavedAt] = React.useState<string | undefined>();\r\n  const [internalFormData, setInternalFormData] = React.useState<PostFormData | null>(null);\r\n  const [publishDialogOpen, setPublishDialogOpen] = React.useState(false);\r\n  const [scheduleDialogOpen, setScheduleDialogOpen] = React.useState(false);\r\n\r\n  const formData = externalFormData ?? internalFormData;\r\n  const setFormData = externalOnFormDataChange ?? setInternalFormData;\r\n\r\n  // Auto-save to localStorage and trigger save callback\r\n  React.useEffect(() => {\r\n    if (formData && hasUnsavedChanges && formData.title) {\r\n      const timer = setTimeout(async () => {\r\n        const key = post ? `post-draft-${post.id}` : \"post-draft-new\";\r\n        localStorage.setItem(key, JSON.stringify(formData));\r\n        \r\n        // Auto-save draft (silent, don't show saved indicator)\r\n        try {\r\n          await handleSaveInternal();\r\n        } catch (error) {\r\n          console.error(\"Auto-save failed:\", error);\r\n        }\r\n      }, 3000); // Auto-save after 3 seconds of inactivity\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [formData, hasUnsavedChanges, post]);\r\n\r\n  const handleSaveInternal = async () => {\r\n    if (!formData || !post) return;\r\n    await saveDraft(formData, post.id);\r\n    setLastSavedAt(new Date().toISOString());\r\n    setHasUnsavedChanges(false);\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!formData) return;\r\n\r\n    setIsSaving(true);\r\n    try {\r\n      if (post) {\r\n        await saveDraft(formData, post.id);\r\n        const updated = await import(\"@/lib/data/posts\").then((m) => m.getPostById(post.id));\r\n        if (updated) {\r\n          // Update formData with saved data\r\n          setFormData({\r\n            ...formData,\r\n            status: updated.status,\r\n            scheduledFor: updated.scheduledFor,\r\n          });\r\n        }\r\n      } else {\r\n        const saved = await saveDraft(formData);\r\n        router.push(`/content/${saved.slug}`);\r\n        return;\r\n      }\r\n      setIsSaved(true);\r\n      setLastSavedAt(new Date().toISOString());\r\n      setHasUnsavedChanges(false);\r\n      setTimeout(() => setIsSaved(false), 2000);\r\n      showToast.success(\"Draft saved\");\r\n    } catch (error) {\r\n      console.error(\"Failed to save:\", error);\r\n      showToast.error(\"Failed to save draft\");\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  const handlePublish = async () => {\r\n    if (!formData) return;\r\n\r\n    setIsSaving(true);\r\n    try {\r\n      if (post) {\r\n        await publish(post.id);\r\n      } else {\r\n        const saved = await saveDraft(formData);\r\n        await publish(saved.id);\r\n      }\r\n      showToast.success(\"Post published\");\r\n      router.push(\"/content\");\r\n    } catch (error) {\r\n      console.error(\"Failed to publish:\", error);\r\n      showToast.error(\"Failed to publish post\");\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleSchedule = async (scheduledFor: string | null) => {\r\n    if (!formData) return;\r\n\r\n    setIsSaving(true);\r\n    try {\r\n      if (scheduledFor === null) {\r\n        // Publish immediately\r\n        if (post) {\r\n          await publish(post.id);\r\n        } else {\r\n          const saved = await saveDraft(formData);\r\n          await publish(saved.id);\r\n        }\r\n        showToast.success(\"Post published\");\r\n      } else {\r\n        // Schedule for later\r\n        if (post) {\r\n          await reschedulePost(post.id, scheduledFor);\r\n        } else {\r\n          const saved = await saveDraft(formData);\r\n          await reschedulePost(saved.id, scheduledFor);\r\n        }\r\n        showToast.success(\"Post scheduled\");\r\n      }\r\n      router.push(\"/content\");\r\n    } catch (error) {\r\n      console.error(\"Failed to schedule:\", error);\r\n      showToast.error(\"Failed to schedule post\");\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleUnpublish = async () => {\r\n    if (!post) return;\r\n\r\n    setIsSaving(true);\r\n    try {\r\n      await unpublish(post.id);\r\n      showToast.success(\"Post unpublished\");\r\n      router.push(\"/content\");\r\n    } catch (error) {\r\n      console.error(\"Failed to unpublish:\", error);\r\n      showToast.error(\"Failed to unpublish post\");\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleArchive = async () => {\r\n    if (!post) return;\r\n\r\n    setIsSaving(true);\r\n    try {\r\n      await archivePost(post.id);\r\n      showToast.success(\"Post archived\");\r\n      router.push(\"/content\");\r\n    } catch (error) {\r\n      console.error(\"Failed to archive:\", error);\r\n      showToast.error(\"Failed to archive post\");\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleRestore = async () => {\r\n    if (!post) return;\r\n\r\n    setIsSaving(true);\r\n    try {\r\n      await restorePost(post.id);\r\n      showToast.success(\"Post restored\");\r\n      router.push(\"/content\");\r\n    } catch (error) {\r\n      console.error(\"Failed to restore:\", error);\r\n      showToast.error(\"Failed to restore post\");\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  const handlePublishNow = async () => {\r\n    if (!post) return;\r\n\r\n    setIsSaving(true);\r\n    try {\r\n      await publishNow(post.id);\r\n      showToast.success(\"Post published\");\r\n      router.push(\"/content\");\r\n    } catch (error) {\r\n      console.error(\"Failed to publish now:\", error);\r\n      showToast.error(\"Failed to publish post\");\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleCancelSchedule = async () => {\r\n    if (!post) return;\r\n\r\n    setIsSaving(true);\r\n    try {\r\n      await cancelSchedule(post.id);\r\n      showToast.success(\"Schedule cancelled\");\r\n      router.push(\"/content\");\r\n    } catch (error) {\r\n      console.error(\"Failed to cancel schedule:\", error);\r\n      showToast.error(\"Failed to cancel schedule\");\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleUpdatePublished = async (mode: \"update\" | \"draft\") => {\r\n    if (!formData || !post) return;\r\n\r\n    setIsSaving(true);\r\n    try {\r\n      if (mode === \"update\") {\r\n        await updatePublishedPost(post.id, formData);\r\n        showToast.success(\"Published post updated\");\r\n      } else {\r\n        const draftRevision = await createDraftRevision(post.id, formData);\r\n        showToast.success(\"Draft revision created\");\r\n        router.push(`/content/${draftRevision.slug}`);\r\n        return;\r\n      }\r\n      router.push(\"/content\");\r\n    } catch (error) {\r\n      console.error(\"Failed to update published:\", error);\r\n      showToast.error(\"Failed to update published post\");\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen flex-col\">\r\n      <EditorActionBar\r\n        post={post}\r\n        formData={formData}\r\n        hasUnsavedChanges={hasUnsavedChanges}\r\n        isSaving={isSaving}\r\n        isSaved={isSaved}\r\n        lastSavedAt={lastSavedAt}\r\n        onSave={handleSave}\r\n        onPublish={handlePublish}\r\n        onSchedule={handleSchedule}\r\n        onUnpublish={handleUnpublish}\r\n        onArchive={handleArchive}\r\n        onRestore={handleRestore}\r\n        onReschedule={() => setScheduleDialogOpen(true)}\r\n        onPublishNow={handlePublishNow}\r\n        onCancelSchedule={handleCancelSchedule}\r\n        onUpdatePublished={() => setPublishDialogOpen(true)}\r\n        onUnsavedChangesChange={setHasUnsavedChanges}\r\n      />\r\n\r\n      {/* Main Content */}\r\n      <div className=\"flex flex-1 overflow-hidden\">\r\n        {/* Editor Canvas (Left) */}\r\n        <div className=\"flex-1 overflow-y-auto bg-background\">\r\n          <div className=\"mx-auto max-w-4xl px-6 py-8\">{children}</div>\r\n        </div>\r\n\r\n        {/* Metadata Panel (Right) */}\r\n        <div className=\"w-80 border-l bg-muted/30\">\r\n          <MetadataPanel\r\n            post={post}\r\n            formData={formData}\r\n            onFormDataChange={(data) => {\r\n              // Edge case: If status changed from scheduled to draft, cancel schedule\r\n              if (post?.status === \"scheduled\" && data.status === \"draft\" && post.scheduledFor) {\r\n                cancelSchedule(post.id).catch(console.error);\r\n              }\r\n              setFormData(data);\r\n              setHasUnsavedChanges(true);\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Dialogs */}\r\n      <PublishDialog\r\n        open={publishDialogOpen}\r\n        onOpenChange={setPublishDialogOpen}\r\n        onConfirm={handleUpdatePublished}\r\n      />\r\n      <ScheduleDialog\r\n        open={scheduleDialogOpen}\r\n        onOpenChange={setScheduleDialogOpen}\r\n        onConfirm={handleSchedule}\r\n        currentScheduledFor={post?.scheduledFor}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3672, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/minhmice/Documents/projects/prosfin-web/apps/admin/src/lib/editor/editor-toolbar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { useLexicalComposerContext } from \"@lexical/react/LexicalComposerContext\";\r\nimport {\r\n  $getSelection,\r\n  $isRangeSelection,\r\n  FORMAT_TEXT_COMMAND,\r\n  $createParagraphNode,\r\n  $getRoot,\r\n} from \"lexical\";\r\nimport { $isHeadingNode, $createHeadingNode, $createQuoteNode } from \"@lexical/rich-text\";\r\nimport { $isListNode, INSERT_UNORDERED_LIST_COMMAND, INSERT_ORDERED_LIST_COMMAND } from \"@lexical/list\";\r\nimport { $createLinkNode, TOGGLE_LINK_COMMAND } from \"@lexical/link\";\r\nimport { Button, Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger, Input, Label } from \"@prosfin/ui\";\r\nimport { Bold, Italic, Underline, List, ListOrdered, Quote, Heading1, Heading2, Heading3, Link, Minus } from \"lucide-react\";\r\n\r\nexport function EditorToolbar() {\r\n  const [editor] = useLexicalComposerContext();\r\n  const [isBold, setIsBold] = React.useState(false);\r\n  const [isItalic, setIsItalic] = React.useState(false);\r\n  const [isUnderline, setIsUnderline] = React.useState(false);\r\n\r\n  const updateToolbar = React.useCallback(() => {\r\n    const selection = $getSelection();\r\n    if ($isRangeSelection(selection)) {\r\n      setIsBold(selection.hasFormat(\"bold\"));\r\n      setIsItalic(selection.hasFormat(\"italic\"));\r\n      setIsUnderline(selection.hasFormat(\"underline\"));\r\n    }\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    return editor.registerUpdateListener(({ editorState }) => {\r\n      editorState.read(() => {\r\n        updateToolbar();\r\n      });\r\n    });\r\n  }, [editor, updateToolbar]);\r\n\r\n  const formatHeading = (headingSize: \"h1\" | \"h2\" | \"h3\") => {\r\n    editor.update(() => {\r\n      const selection = $getSelection();\r\n      if ($isRangeSelection(selection)) {\r\n        const headingNode = $createHeadingNode(headingSize);\r\n        selection.insertNodes([headingNode]);\r\n      }\r\n    });\r\n  };\r\n\r\n  const insertDivider = () => {\r\n    editor.update(() => {\r\n      const root = $getRoot();\r\n      const paragraph = $createParagraphNode();\r\n      root.append(paragraph);\r\n      // Create a simple divider using a paragraph with border\r\n      const divider = $createParagraphNode();\r\n      divider.setFormat(\"center\");\r\n      root.append(divider);\r\n    });\r\n  };\r\n\r\n  const [linkDialogOpen, setLinkDialogOpen] = React.useState(false);\r\n  const [linkUrl, setLinkUrl] = React.useState(\"\");\r\n  const [linkText, setLinkText] = React.useState(\"\");\r\n\r\n  const insertLink = () => {\r\n    editor.update(() => {\r\n      const selection = $getSelection();\r\n      if ($isRangeSelection(selection)) {\r\n        if (!selection.isCollapsed()) {\r\n          // If text is selected, make it a link\r\n          const url = linkUrl || \"https://\";\r\n          editor.dispatchCommand(TOGGLE_LINK_COMMAND, url);\r\n        } else {\r\n          // Insert link node with text\r\n          const linkNode = $createLinkNode(linkUrl || \"https://\", { target: \"_blank\" });\r\n          const paragraph = $createParagraphNode();\r\n          if (linkText) {\r\n            // Add text node to paragraph, then add paragraph to link\r\n            // This is simplified - in real implementation would use TextNode\r\n            selection.insertNodes([linkNode]);\r\n          } else {\r\n            selection.insertNodes([linkNode]);\r\n          }\r\n        }\r\n      }\r\n      setLinkDialogOpen(false);\r\n      setLinkUrl(\"\");\r\n      setLinkText(\"\");\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex items-center gap-1 border-b p-2\">\r\n      <Button\r\n        variant=\"ghost\"\r\n        size=\"icon\"\r\n        onClick={() => editor.dispatchCommand(FORMAT_TEXT_COMMAND, \"bold\")}\r\n        className={isBold ? \"bg-muted\" : \"\"}\r\n      >\r\n        <Bold className=\"size-4\" />\r\n      </Button>\r\n      <Button\r\n        variant=\"ghost\"\r\n        size=\"icon\"\r\n        onClick={() => editor.dispatchCommand(FORMAT_TEXT_COMMAND, \"italic\")}\r\n        className={isItalic ? \"bg-muted\" : \"\"}\r\n      >\r\n        <Italic className=\"size-4\" />\r\n      </Button>\r\n      <Button\r\n        variant=\"ghost\"\r\n        size=\"icon\"\r\n        onClick={() => editor.dispatchCommand(FORMAT_TEXT_COMMAND, \"underline\")}\r\n        className={isUnderline ? \"bg-muted\" : \"\"}\r\n      >\r\n        <Underline className=\"size-4\" />\r\n      </Button>\r\n      <div className=\"mx-1 h-6 w-px bg-border\" />\r\n      <Button\r\n        variant=\"ghost\"\r\n        size=\"icon\"\r\n        onClick={() => formatHeading(\"h1\")}\r\n        title=\"Heading 1\"\r\n      >\r\n        <Heading1 className=\"size-4\" />\r\n      </Button>\r\n      <Button\r\n        variant=\"ghost\"\r\n        size=\"icon\"\r\n        onClick={() => formatHeading(\"h2\")}\r\n        title=\"Heading 2\"\r\n      >\r\n        <Heading2 className=\"size-4\" />\r\n      </Button>\r\n      <Button\r\n        variant=\"ghost\"\r\n        size=\"icon\"\r\n        onClick={() => formatHeading(\"h3\")}\r\n        title=\"Heading 3\"\r\n      >\r\n        <Heading3 className=\"size-4\" />\r\n      </Button>\r\n      <div className=\"mx-1 h-6 w-px bg-border\" />\r\n      <Button\r\n        variant=\"ghost\"\r\n        size=\"icon\"\r\n        onClick={() => editor.dispatchCommand(INSERT_UNORDERED_LIST_COMMAND, undefined)}\r\n        title=\"Bullet List\"\r\n      >\r\n        <List className=\"size-4\" />\r\n      </Button>\r\n      <Button\r\n        variant=\"ghost\"\r\n        size=\"icon\"\r\n        onClick={() => editor.dispatchCommand(INSERT_ORDERED_LIST_COMMAND, undefined)}\r\n        title=\"Numbered List\"\r\n      >\r\n        <ListOrdered className=\"size-4\" />\r\n      </Button>\r\n      <Button\r\n        variant=\"ghost\"\r\n        size=\"icon\"\r\n        onClick={() => {\r\n          editor.update(() => {\r\n            const selection = $getSelection();\r\n            if ($isRangeSelection(selection)) {\r\n              const quoteNode = $createQuoteNode();\r\n              selection.insertNodes([quoteNode]);\r\n            }\r\n          });\r\n        }}\r\n        title=\"Quote\"\r\n      >\r\n        <Quote className=\"size-4\" />\r\n      </Button>\r\n      <div className=\"mx-1 h-6 w-px bg-border\" />\r\n      <Dialog open={linkDialogOpen} onOpenChange={setLinkDialogOpen}>\r\n        <DialogTrigger asChild>\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"icon\"\r\n            title=\"Insert Link\"\r\n          >\r\n            <Link className=\"size-4\" />\r\n          </Button>\r\n        </DialogTrigger>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle>Insert Link</DialogTitle>\r\n          </DialogHeader>\r\n          <div className=\"space-y-4 py-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"link-url\">URL</Label>\r\n              <Input\r\n                id=\"link-url\"\r\n                type=\"url\"\r\n                placeholder=\"https://example.com\"\r\n                value={linkUrl}\r\n                onChange={(e) => setLinkUrl(e.target.value)}\r\n              />\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"link-text\">Link Text (optional)</Label>\r\n              <Input\r\n                id=\"link-text\"\r\n                placeholder=\"Link text\"\r\n                value={linkText}\r\n                onChange={(e) => setLinkText(e.target.value)}\r\n              />\r\n            </div>\r\n            <Button onClick={insertLink} className=\"w-full\">\r\n              Insert Link\r\n            </Button>\r\n          </div>\r\n        </DialogContent>\r\n      </Dialog>\r\n      <Button\r\n        variant=\"ghost\"\r\n        size=\"icon\"\r\n        onClick={insertDivider}\r\n        title=\"Divider\"\r\n      >\r\n        <Minus className=\"size-4\" />\r\n      </Button>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAOA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAfA;;;;;;;;;;AAiBO,SAAS;IACd,MAAM,CAAC,OAAO,GAAG,IAAA,wSAAyB;IAC1C,MAAM,CAAC,QAAQ,UAAU,GAAG,gUAAc,CAAC;IAC3C,MAAM,CAAC,UAAU,YAAY,GAAG,gUAAc,CAAC;IAC/C,MAAM,CAAC,aAAa,eAAe,GAAG,gUAAc,CAAC;IAErD,MAAM,gBAAgB,mUAAiB,CAAC;QACtC,MAAM,YAAY,IAAA,gNAAa;QAC/B,IAAI,IAAA,oNAAiB,EAAC,YAAY;YAChC,UAAU,UAAU,SAAS,CAAC;YAC9B,YAAY,UAAU,SAAS,CAAC;YAChC,eAAe,UAAU,SAAS,CAAC;QACrC;IACF,GAAG,EAAE;IAEL,iUAAe,CAAC;QACd,OAAO,OAAO,sBAAsB,CAAC,CAAC,EAAE,WAAW,EAAE;YACnD,YAAY,IAAI,CAAC;gBACf;YACF;QACF;IACF,GAAG;QAAC;QAAQ;KAAc;IAE1B,MAAM,gBAAgB,CAAC;QACrB,OAAO,MAAM,CAAC;YACZ,MAAM,YAAY,IAAA,gNAAa;YAC/B,IAAI,IAAA,oNAAiB,EAAC,YAAY;gBAChC,MAAM,cAAc,IAAA,iQAAkB,EAAC;gBACvC,UAAU,WAAW,CAAC;oBAAC;iBAAY;YACrC;QACF;IACF;IAEA,MAAM,gBAAgB;QACpB,OAAO,MAAM,CAAC;YACZ,MAAM,OAAO,IAAA,2MAAQ;YACrB,MAAM,YAAY,IAAA,uNAAoB;YACtC,KAAK,MAAM,CAAC;YACZ,wDAAwD;YACxD,MAAM,UAAU,IAAA,uNAAoB;YACpC,QAAQ,SAAS,CAAC;YAClB,KAAK,MAAM,CAAC;QACd;IACF;IAEA,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,gUAAc,CAAC;IAC3D,MAAM,CAAC,SAAS,WAAW,GAAG,gUAAc,CAAC;IAC7C,MAAM,CAAC,UAAU,YAAY,GAAG,gUAAc,CAAC;IAE/C,MAAM,aAAa;QACjB,OAAO,MAAM,CAAC;YACZ,MAAM,YAAY,IAAA,gNAAa;YAC/B,IAAI,IAAA,oNAAiB,EAAC,YAAY;gBAChC,IAAI,CAAC,UAAU,WAAW,IAAI;oBAC5B,sCAAsC;oBACtC,MAAM,MAAM,WAAW;oBACvB,OAAO,eAAe,CAAC,8OAAmB,EAAE;gBAC9C,OAAO;oBACL,6BAA6B;oBAC7B,MAAM,WAAW,IAAA,0OAAe,EAAC,WAAW,YAAY;wBAAE,QAAQ;oBAAS;oBAC3E,MAAM,YAAY,IAAA,uNAAoB;oBACtC,IAAI,UAAU;wBACZ,yDAAyD;wBACzD,iEAAiE;wBACjE,UAAU,WAAW,CAAC;4BAAC;yBAAS;oBAClC,OAAO;wBACL,UAAU,WAAW,CAAC;4BAAC;yBAAS;oBAClC;gBACF;YACF;YACA,kBAAkB;YAClB,WAAW;YACX,YAAY;QACd;IACF;IAEA,qBACE,6VAAC;QAAI,WAAU;;0BACb,6VAAC,8JAAM;gBACL,SAAQ;gBACR,MAAK;gBACL,SAAS,IAAM,OAAO,eAAe,CAAC,sNAAmB,EAAE;gBAC3D,WAAW,SAAS,aAAa;0BAEjC,cAAA,6VAAC,8RAAI;oBAAC,WAAU;;;;;;;;;;;0BAElB,6VAAC,8JAAM;gBACL,SAAQ;gBACR,MAAK;gBACL,SAAS,IAAM,OAAO,eAAe,CAAC,sNAAmB,EAAE;gBAC3D,WAAW,WAAW,aAAa;0BAEnC,cAAA,6VAAC,oSAAM;oBAAC,WAAU;;;;;;;;;;;0BAEpB,6VAAC,8JAAM;gBACL,SAAQ;gBACR,MAAK;gBACL,SAAS,IAAM,OAAO,eAAe,CAAC,sNAAmB,EAAE;gBAC3D,WAAW,cAAc,aAAa;0BAEtC,cAAA,6VAAC,6SAAS;oBAAC,WAAU;;;;;;;;;;;0BAEvB,6VAAC;gBAAI,WAAU;;;;;;0BACf,6VAAC,8JAAM;gBACL,SAAQ;gBACR,MAAK;gBACL,SAAS,IAAM,cAAc;gBAC7B,OAAM;0BAEN,cAAA,6VAAC,8SAAQ;oBAAC,WAAU;;;;;;;;;;;0BAEtB,6VAAC,8JAAM;gBACL,SAAQ;gBACR,MAAK;gBACL,SAAS,IAAM,cAAc;gBAC7B,OAAM;0BAEN,cAAA,6VAAC,8SAAQ;oBAAC,WAAU;;;;;;;;;;;0BAEtB,6VAAC,8JAAM;gBACL,SAAQ;gBACR,MAAK;gBACL,SAAS,IAAM,cAAc;gBAC7B,OAAM;0BAEN,cAAA,6VAAC,8SAAQ;oBAAC,WAAU;;;;;;;;;;;0BAEtB,6VAAC;gBAAI,WAAU;;;;;;0BACf,6VAAC,8JAAM;gBACL,SAAQ;gBACR,MAAK;gBACL,SAAS,IAAM,OAAO,eAAe,CAAC,wPAA6B,EAAE;gBACrE,OAAM;0BAEN,cAAA,6VAAC,8RAAI;oBAAC,WAAU;;;;;;;;;;;0BAElB,6VAAC,8JAAM;gBACL,SAAQ;gBACR,MAAK;gBACL,SAAS,IAAM,OAAO,eAAe,CAAC,sPAA2B,EAAE;gBACnE,OAAM;0BAEN,cAAA,6VAAC,uTAAW;oBAAC,WAAU;;;;;;;;;;;0BAEzB,6VAAC,8JAAM;gBACL,SAAQ;gBACR,MAAK;gBACL,SAAS;oBACP,OAAO,MAAM,CAAC;wBACZ,MAAM,YAAY,IAAA,gNAAa;wBAC/B,IAAI,IAAA,oNAAiB,EAAC,YAAY;4BAChC,MAAM,YAAY,IAAA,+PAAgB;4BAClC,UAAU,WAAW,CAAC;gCAAC;6BAAU;wBACnC;oBACF;gBACF;gBACA,OAAM;0BAEN,cAAA,6VAAC,iSAAK;oBAAC,WAAU;;;;;;;;;;;0BAEnB,6VAAC;gBAAI,WAAU;;;;;;0BACf,6VAAC,8JAAM;gBAAC,MAAM;gBAAgB,cAAc;;kCAC1C,6VAAC,qKAAa;wBAAC,OAAO;kCACpB,cAAA,6VAAC,8JAAM;4BACL,SAAQ;4BACR,MAAK;4BACL,OAAM;sCAEN,cAAA,6VAAC,8RAAI;gCAAC,WAAU;;;;;;;;;;;;;;;;kCAGpB,6VAAC,qKAAa;;0CACZ,6VAAC,oKAAY;0CACX,cAAA,6VAAC,mKAAW;8CAAC;;;;;;;;;;;0CAEf,6VAAC;gCAAI,WAAU;;kDACb,6VAAC;wCAAI,WAAU;;0DACb,6VAAC,4JAAK;gDAAC,SAAQ;0DAAW;;;;;;0DAC1B,6VAAC,4JAAK;gDACJ,IAAG;gDACH,MAAK;gDACL,aAAY;gDACZ,OAAO;gDACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;kDAG9C,6VAAC;wCAAI,WAAU;;0DACb,6VAAC,4JAAK;gDAAC,SAAQ;0DAAY;;;;;;0DAC3B,6VAAC,4JAAK;gDACJ,IAAG;gDACH,aAAY;gDACZ,OAAO;gDACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;kDAG/C,6VAAC,8JAAM;wCAAC,SAAS;wCAAY,WAAU;kDAAS;;;;;;;;;;;;;;;;;;;;;;;;0BAMtD,6VAAC,8JAAM;gBACL,SAAQ;gBACR,MAAK;gBACL,SAAS;gBACT,OAAM;0BAEN,cAAA,6VAAC,iSAAK;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAIzB"}},
    {"offset": {"line": 4131, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/minhmice/Documents/projects/prosfin-web/apps/admin/src/lib/editor/lexical-editor.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { LexicalComposer } from \"@lexical/react/LexicalComposer\";\r\nimport { RichTextPlugin } from \"@lexical/react/LexicalRichTextPlugin\";\r\nimport { ContentEditable } from \"@lexical/react/LexicalContentEditable\";\r\nimport { HistoryPlugin } from \"@lexical/react/LexicalHistoryPlugin\";\r\nimport { LinkPlugin } from \"@lexical/react/LexicalLinkPlugin\";\r\nimport { ListPlugin } from \"@lexical/react/LexicalListPlugin\";\r\nimport { useLexicalComposerContext } from \"@lexical/react/LexicalComposerContext\";\r\nimport { HeadingNode, QuoteNode } from \"@lexical/rich-text\";\r\nimport { ListItemNode, ListNode } from \"@lexical/list\";\r\nimport { LinkNode } from \"@lexical/link\";\r\nimport { $getRoot } from \"lexical\";\r\nimport { EditorToolbar } from \"./editor-toolbar\";\r\n\r\n// Re-export from types to ensure consistency\r\nimport type { LexicalEditorState } from \"@/types/content\";\r\nexport type { LexicalEditorState };\r\n\r\n/**\r\n * Base Lexical Editor Component\r\n * \r\n * Provides a rich text editor using Lexical\r\n */\r\n\r\ninterface LexicalEditorProps {\r\n  initialContent?: LexicalEditorState;\r\n  onChange?: (content: LexicalEditorState) => void;\r\n  placeholder?: string;\r\n  className?: string;\r\n}\r\n\r\nconst theme = {\r\n  paragraph: \"mb-2\",\r\n  heading: {\r\n    h1: \"text-4xl font-bold mb-4\",\r\n    h2: \"text-3xl font-bold mb-3\",\r\n    h3: \"text-2xl font-bold mb-2\",\r\n  },\r\n  quote: \"border-l-4 border-gray-300 pl-4 italic my-4\",\r\n  list: {\r\n    nested: {\r\n      listitem: \"ml-4\",\r\n    },\r\n    ol: \"list-decimal ml-6 my-2\",\r\n    ul: \"list-disc ml-6 my-2\",\r\n    listitem: \"my-1\",\r\n  },\r\n  link: \"text-blue-600 underline hover:text-blue-800\",\r\n  text: {\r\n    bold: \"font-bold\",\r\n    italic: \"italic\",\r\n    underline: \"underline\",\r\n  },\r\n};\r\n\r\nconst initialConfig = {\r\n  namespace: \"ProsFinEditor\",\r\n  theme,\r\n  nodes: [HeadingNode, QuoteNode, ListNode, ListItemNode, LinkNode],\r\n  onError: (error: Error) => {\r\n    console.error(\"Lexical error:\", error);\r\n  },\r\n};\r\n\r\nfunction EditorContent({ placeholder }: { placeholder?: string }) {\r\n  const placeholderText = placeholder || \"Start writing...\";\r\n  return (\r\n    <ContentEditable\r\n      className=\"min-h-[600px] outline-none prose prose-lg max-w-none\"\r\n      aria-placeholder={placeholderText}\r\n      placeholder={\r\n        <div className=\"absolute top-0 left-0 text-muted-foreground pointer-events-none\">\r\n          {placeholderText}\r\n        </div>\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nfunction OnChange({\r\n  onChange,\r\n}: {\r\n  onChange?: (content: LexicalEditorState) => void;\r\n}) {\r\n  const [editor] = useLexicalComposerContext();\r\n\r\n  React.useEffect(() => {\r\n    return editor.registerUpdateListener(({ editorState }) => {\r\n      editorState.read(() => {\r\n        const json = editorState.toJSON() as LexicalEditorState;\r\n        onChange?.(json);\r\n      });\r\n    });\r\n  }, [editor, onChange]);\r\n\r\n  return null;\r\n}\r\n\r\nfunction InitialContentPlugin({\r\n  initialContent,\r\n}: {\r\n  initialContent?: LexicalEditorState;\r\n}) {\r\n  const [editor] = useLexicalComposerContext();\r\n  const [hasSetInitial, setHasSetInitial] = React.useState(false);\r\n\r\n  React.useEffect(() => {\r\n    if (initialContent && !hasSetInitial && editor) {\r\n      try {\r\n        // Parse and set editor state from JSON\r\n        const editorState = editor.parseEditorState(initialContent as any);\r\n        editor.setEditorState(editorState);\r\n        setHasSetInitial(true);\r\n      } catch (error) {\r\n        console.error(\"Failed to parse initial content:\", error);\r\n      }\r\n    }\r\n  }, [editor, initialContent, hasSetInitial]);\r\n\r\n  return null;\r\n}\r\n\r\nexport function LexicalEditor({\r\n  initialContent,\r\n  onChange,\r\n  placeholder = \"Start writing...\",\r\n  className,\r\n}: LexicalEditorProps) {\r\n  return (\r\n    <LexicalComposer initialConfig={initialConfig}>\r\n      <div className={`flex flex-col border rounded-lg ${className}`}>\r\n        <EditorToolbar />\r\n        <div className=\"p-4\">\r\n          <RichTextPlugin\r\n            contentEditable={<EditorContent placeholder={placeholder} />}\r\n            placeholder={null}\r\n            ErrorBoundary={({ children }) => <>{children}</>}\r\n          />\r\n          <HistoryPlugin />\r\n          <LinkPlugin />\r\n          <ListPlugin />\r\n          <OnChange onChange={onChange} />\r\n          {initialContent && <InitialContentPlugin initialContent={initialContent} />}\r\n        </div>\r\n      </div>\r\n    </LexicalComposer>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAdA;;;;;;;;;;;;;;AAiCA,MAAM,QAAQ;IACZ,WAAW;IACX,SAAS;QACP,IAAI;QACJ,IAAI;QACJ,IAAI;IACN;IACA,OAAO;IACP,MAAM;QACJ,QAAQ;YACN,UAAU;QACZ;QACA,IAAI;QACJ,IAAI;QACJ,UAAU;IACZ;IACA,MAAM;IACN,MAAM;QACJ,MAAM;QACN,QAAQ;QACR,WAAW;IACb;AACF;AAEA,MAAM,gBAAgB;IACpB,WAAW;IACX;IACA,OAAO;QAAC,0PAAW;QAAE,wPAAS;QAAE,mOAAQ;QAAE,uOAAY;QAAE,mOAAQ;KAAC;IACjE,SAAS,CAAC;QACR,QAAQ,KAAK,CAAC,kBAAkB;IAClC;AACF;AAEA,SAAS,cAAc,EAAE,WAAW,EAA4B;IAC9D,MAAM,kBAAkB,eAAe;IACvC,qBACE,6VAAC,8RAAe;QACd,WAAU;QACV,oBAAkB;QAClB,2BACE,6VAAC;YAAI,WAAU;sBACZ;;;;;;;;;;;AAKX;AAEA,SAAS,SAAS,EAChB,QAAQ,EAGT;IACC,MAAM,CAAC,OAAO,GAAG,IAAA,wSAAyB;IAE1C,iUAAe,CAAC;QACd,OAAO,OAAO,sBAAsB,CAAC,CAAC,EAAE,WAAW,EAAE;YACnD,YAAY,IAAI,CAAC;gBACf,MAAM,OAAO,YAAY,MAAM;gBAC/B,WAAW;YACb;QACF;IACF,GAAG;QAAC;QAAQ;KAAS;IAErB,OAAO;AACT;AAEA,SAAS,qBAAqB,EAC5B,cAAc,EAGf;IACC,MAAM,CAAC,OAAO,GAAG,IAAA,wSAAyB;IAC1C,MAAM,CAAC,eAAe,iBAAiB,GAAG,gUAAc,CAAC;IAEzD,iUAAe,CAAC;QACd,IAAI,kBAAkB,CAAC,iBAAiB,QAAQ;YAC9C,IAAI;gBACF,uCAAuC;gBACvC,MAAM,cAAc,OAAO,gBAAgB,CAAC;gBAC5C,OAAO,cAAc,CAAC;gBACtB,iBAAiB;YACnB,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,oCAAoC;YACpD;QACF;IACF,GAAG;QAAC;QAAQ;QAAgB;KAAc;IAE1C,OAAO;AACT;AAEO,SAAS,cAAc,EAC5B,cAAc,EACd,QAAQ,EACR,cAAc,kBAAkB,EAChC,SAAS,EACU;IACnB,qBACE,6VAAC,uRAAe;QAAC,eAAe;kBAC9B,cAAA,6VAAC;YAAI,WAAW,CAAC,gCAAgC,EAAE,WAAW;;8BAC5D,6VAAC,4KAAa;;;;;8BACd,6VAAC;oBAAI,WAAU;;sCACb,6VAAC,4RAAc;4BACb,+BAAiB,6VAAC;gCAAc,aAAa;;;;;;4BAC7C,aAAa;4BACb,eAAe,CAAC,EAAE,QAAQ,EAAE,iBAAK;8CAAG;;;;;;;sCAEtC,6VAAC,0SAAa;;;;;sCACd,6VAAC,oRAAU;;;;;sCACX,6VAAC,oRAAU;;;;;sCACX,6VAAC;4BAAS,UAAU;;;;;;wBACnB,gCAAkB,6VAAC;4BAAqB,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;AAKnE"}},
    {"offset": {"line": 4336, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/minhmice/Documents/projects/prosfin-web/apps/admin/src/components/content/post-editor/editor-canvas.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { LexicalEditor } from \"@/lib/editor/lexical-editor\";\r\nimport type { LexicalEditorState } from \"@/types/content\";\r\n\r\ninterface EditorCanvasProps {\r\n  content: LexicalEditorState;\r\n  onChange: (content: LexicalEditorState) => void;\r\n}\r\n\r\n/**\r\n * Editor canvas using Lexical\r\n */\r\nexport function EditorCanvas({ content, onChange }: EditorCanvasProps) {\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <LexicalEditor\r\n        initialContent={content}\r\n        onChange={onChange}\r\n        placeholder=\"Start writing your post...\"\r\n        className=\"min-h-[600px]\"\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAGA;AAHA;;;AAcO,SAAS,aAAa,EAAE,OAAO,EAAE,QAAQ,EAAqB;IACnE,qBACE,6VAAC;QAAI,WAAU;kBACb,cAAA,6VAAC,4KAAa;YACZ,gBAAgB;YAChB,UAAU;YACV,aAAY;YACZ,WAAU;;;;;;;;;;;AAIlB"}},
    {"offset": {"line": 4368, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/minhmice/Documents/projects/prosfin-web/apps/admin/src/app/%28app%29/content/%5Bslug%5D/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { use } from \"react\";\r\nimport { EditorShell } from \"@/components/content/post-editor/editor-shell\";\r\nimport { EditorCanvas } from \"@/components/content/post-editor/editor-canvas\";\r\nimport { getPostById, saveDraft, publish } from \"@/lib/data/posts\";\r\nimport type { PostFormData } from \"@/types/content\";\r\n\r\ninterface EditorPageProps {\r\n  params: Promise<{ slug: string }>;\r\n}\r\n\r\nexport default function EditorPage({ params }: EditorPageProps) {\r\n  const { slug } = use(params);\r\n  const [post, setPost] = React.useState<Awaited<ReturnType<typeof getPostById>>>(null);\r\n  const [isLoading, setIsLoading] = React.useState(true);\r\n  const [formData, setFormData] = React.useState<PostFormData | null>(null);\r\n\r\n  React.useEffect(() => {\r\n    if (slug === \"new\") {\r\n      setIsLoading(false);\r\n      setFormData({\r\n        title: \"\",\r\n        slug: \"\",\r\n        bucket: \"insights\",\r\n        excerpt: \"\",\r\n        cover: \"\",\r\n        tags: [],\r\n        content: {\r\n          root: {\r\n            children: [],\r\n            direction: \"ltr\",\r\n            format: \"\",\r\n            indent: 0,\r\n            type: \"root\",\r\n            version: 1,\r\n          },\r\n        },\r\n        status: \"draft\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Find post by slug (we need to search all buckets)\r\n    const loadPost = async () => {\r\n      try {\r\n        const { listPosts } = await import(\"@/lib/data/posts\");\r\n        const allPosts = await listPosts();\r\n        const found = allPosts.find((p) => p.slug === slug);\r\n        if (found) {\r\n          const { getPostById } = await import(\"@/lib/data/posts\");\r\n          const fullPost = await getPostById(found.id);\r\n          setPost(fullPost);\r\n          if (fullPost) {\r\n            setFormData({\r\n              title: fullPost.title,\r\n              slug: fullPost.slug,\r\n              bucket: fullPost.bucket,\r\n              excerpt: fullPost.excerpt,\r\n              cover: fullPost.cover,\r\n              tags: fullPost.tags,\r\n              content: fullPost.content,\r\n              seoTitle: fullPost.seoTitle,\r\n              seoDescription: fullPost.seoDescription,\r\n              canonical: fullPost.canonical,\r\n              noindex: fullPost.noindex,\r\n              status: fullPost.status,\r\n              scheduledFor: fullPost.scheduledFor,\r\n            });\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Failed to load post:\", error);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    loadPost();\r\n  }, [slug]);\r\n\r\n  const handleSave = async (data: PostFormData) => {\r\n    await saveDraft(data, post?.id);\r\n    if (post) {\r\n      const updated = await getPostById(post.id);\r\n      setPost(updated);\r\n    }\r\n  };\r\n\r\n  const handlePublish = async (data: PostFormData) => {\r\n    if (post) {\r\n      await publish(post.id);\r\n    } else {\r\n      const saved = await saveDraft(data);\r\n      await publish(saved.id);\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex h-screen items-center justify-center\">\r\n        <p className=\"text-muted-foreground\">Loading...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!formData) {\r\n    return (\r\n      <div className=\"flex h-screen items-center justify-center\">\r\n        <p className=\"text-muted-foreground\">Post not found</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <EditorShell\r\n      post={post || undefined}\r\n      onSave={handleSave}\r\n      onPublish={handlePublish}\r\n      formData={formData}\r\n      onFormDataChange={setFormData}\r\n    >\r\n      <EditorCanvas\r\n        content={formData.content}\r\n        onChange={(content) => {\r\n          setFormData({ ...formData, content });\r\n        }}\r\n      />\r\n    </EditorShell>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AACA;AANA;;;;;;;AAae,SAAS,WAAW,EAAE,MAAM,EAAmB;IAC5D,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,2TAAG,EAAC;IACrB,MAAM,CAAC,MAAM,QAAQ,GAAG,gUAAc,CAA0C;IAChF,MAAM,CAAC,WAAW,aAAa,GAAG,gUAAc,CAAC;IACjD,MAAM,CAAC,UAAU,YAAY,GAAG,gUAAc,CAAsB;IAEpE,iUAAe,CAAC;QACd,IAAI,SAAS,OAAO;YAClB,aAAa;YACb,YAAY;gBACV,OAAO;gBACP,MAAM;gBACN,QAAQ;gBACR,SAAS;gBACT,OAAO;gBACP,MAAM,EAAE;gBACR,SAAS;oBACP,MAAM;wBACJ,UAAU,EAAE;wBACZ,WAAW;wBACX,QAAQ;wBACR,QAAQ;wBACR,MAAM;wBACN,SAAS;oBACX;gBACF;gBACA,QAAQ;YACV;YACA;QACF;QAEA,oDAAoD;QACpD,MAAM,WAAW;YACf,IAAI;gBACF,MAAM,EAAE,SAAS,EAAE,GAAG;gBACtB,MAAM,WAAW,MAAM;gBACvB,MAAM,QAAQ,SAAS,IAAI,CAAC,CAAC,IAAM,EAAE,IAAI,KAAK;gBAC9C,IAAI,OAAO;oBACT,MAAM,EAAE,WAAW,EAAE,GAAG;oBACxB,MAAM,WAAW,MAAM,YAAY,MAAM,EAAE;oBAC3C,QAAQ;oBACR,IAAI,UAAU;wBACZ,YAAY;4BACV,OAAO,SAAS,KAAK;4BACrB,MAAM,SAAS,IAAI;4BACnB,QAAQ,SAAS,MAAM;4BACvB,SAAS,SAAS,OAAO;4BACzB,OAAO,SAAS,KAAK;4BACrB,MAAM,SAAS,IAAI;4BACnB,SAAS,SAAS,OAAO;4BACzB,UAAU,SAAS,QAAQ;4BAC3B,gBAAgB,SAAS,cAAc;4BACvC,WAAW,SAAS,SAAS;4BAC7B,SAAS,SAAS,OAAO;4BACzB,QAAQ,SAAS,MAAM;4BACvB,cAAc,SAAS,YAAY;wBACrC;oBACF;gBACF;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,wBAAwB;YACxC,SAAU;gBACR,aAAa;YACf;QACF;QAEA;IACF,GAAG;QAAC;KAAK;IAET,MAAM,aAAa,OAAO;QACxB,MAAM,IAAA,yJAAS,EAAC,MAAM,MAAM;QAC5B,IAAI,MAAM;YACR,MAAM,UAAU,MAAM,IAAA,2JAAW,EAAC,KAAK,EAAE;YACzC,QAAQ;QACV;IACF;IAEA,MAAM,gBAAgB,OAAO;QAC3B,IAAI,MAAM;YACR,MAAM,IAAA,uJAAO,EAAC,KAAK,EAAE;QACvB,OAAO;YACL,MAAM,QAAQ,MAAM,IAAA,yJAAS,EAAC;YAC9B,MAAM,IAAA,uJAAO,EAAC,MAAM,EAAE;QACxB;IACF;IAEA,IAAI,WAAW;QACb,qBACE,6VAAC;YAAI,WAAU;sBACb,cAAA,6VAAC;gBAAE,WAAU;0BAAwB;;;;;;;;;;;IAG3C;IAEA,IAAI,CAAC,UAAU;QACb,qBACE,6VAAC;YAAI,WAAU;sBACb,cAAA,6VAAC;gBAAE,WAAU;0BAAwB;;;;;;;;;;;IAG3C;IAEA,qBACE,6VAAC,kMAAW;QACV,MAAM,QAAQ;QACd,QAAQ;QACR,WAAW;QACX,UAAU;QACV,kBAAkB;kBAElB,cAAA,6VAAC,oMAAY;YACX,SAAS,SAAS,OAAO;YACzB,UAAU,CAAC;gBACT,YAAY;oBAAE,GAAG,QAAQ;oBAAE;gBAAQ;YACrC;;;;;;;;;;;AAIR"}}]
}