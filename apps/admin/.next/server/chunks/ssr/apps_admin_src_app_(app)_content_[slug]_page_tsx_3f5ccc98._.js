module.exports=[3221,a=>{"use strict";let b,c;var d=a.i(91870),e=a.i(44981),f=a.i(48276),g=a.i(45054);a.i(56120);var h=a.i(27725),i=a.i(46010),j=a.i(28761);let k=(0,j.default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),l=(0,j.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var m=a.i(10610),n=a.i(12741),o=a.i(6334),p=a.i(18416),q=a.i(51367),r=a.i(37717);let s=[{value:"insights",label:"Insights"},{value:"resources",label:"Resources"},{value:"knowledge",label:"Knowledge"}],t=[{value:"draft",label:"Draft"},{value:"published",label:"Published"},{value:"scheduled",label:"Scheduled"},{value:"archived",label:"Archived"}];function u({post:a,formData:b,onFormDataChange:c,onSchedule:f}){let[g,h]=e.useState(a?{title:a.title,slug:a.slug,bucket:a.bucket,excerpt:a.excerpt,cover:a.cover,tags:a.tags,content:a.content,seoTitle:a.seoTitle,seoDescription:a.seoDescription,canonical:a.canonical,noindex:a.noindex,status:a.status,scheduledFor:a.scheduledFor}:{title:"",slug:"",bucket:"insights",excerpt:"",cover:"",tags:[],content:{root:{children:[],direction:"ltr",format:"",indent:0,type:"root",version:1}},status:"draft"});e.useEffect(()=>{b&&h(b)},[b]);let j=(a,b)=>{let d={...g,[a]:b};h(d),c(d)};return(0,d.jsx)("div",{className:"flex h-full flex-col overflow-y-auto",children:(0,d.jsxs)("div",{className:"space-y-6 p-6",children:[(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("h3",{className:"font-semibold",children:"Basic Information"}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(p.Label,{htmlFor:"title",children:"Title *"}),(0,d.jsx)(o.Input,{id:"title",value:g.title||"",onChange:b=>{var c;j("title",c=b.target.value),a&&g.slug||j("slug",c.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""))},placeholder:"Enter post title"})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(p.Label,{htmlFor:"slug",children:"Slug *"}),(0,d.jsx)(o.Input,{id:"slug",value:g.slug||"",onChange:a=>j("slug",a.target.value),placeholder:"post-slug"}),(0,d.jsx)("p",{className:"text-xs text-muted-foreground",children:"URL-friendly version of the title"})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(p.Label,{htmlFor:"bucket",children:"Content Bucket"}),(0,d.jsx)("select",{id:"bucket",value:g.bucket||"insights",onChange:a=>j("bucket",a.target.value),className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring",children:s.map(a=>(0,d.jsx)("option",{value:a.value,children:a.label},a.value))})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(p.Label,{htmlFor:"excerpt",children:"Excerpt"}),(0,d.jsx)(q.Textarea,{id:"excerpt",value:g.excerpt||"",onChange:a=>j("excerpt",a.target.value),placeholder:"Brief description of the post",rows:3})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(p.Label,{htmlFor:"cover",children:"Cover Image URL"}),(0,d.jsx)(o.Input,{id:"cover",value:g.cover||"",onChange:a=>j("cover",a.target.value),placeholder:"https://example.com/image.jpg"})]})]}),(0,d.jsx)(i.Separator,{}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("h3",{className:"font-semibold",children:"Tags"}),(0,d.jsx)("div",{className:"flex flex-wrap gap-2",children:g.tags?.map(a=>(0,d.jsxs)(r.Badge,{variant:"secondary",className:"cursor-pointer",onClick:()=>{j("tags",g.tags?.filter(b=>b!==a)||[])},children:[a," ×"]},a))}),(0,d.jsx)("div",{className:"flex gap-2",children:(0,d.jsx)(o.Input,{placeholder:"Add tag",onKeyDown:a=>{if("Enter"===a.key){var b;a.preventDefault(),(b=a.currentTarget.value).trim()&&!g.tags?.includes(b.trim())&&j("tags",[...g.tags||[],b.trim()]),a.currentTarget.value=""}}})})]}),(0,d.jsx)(i.Separator,{}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("h3",{className:"font-semibold",children:"Status"}),(0,d.jsx)("select",{value:g.status||"draft",onChange:a=>j("status",a.target.value),className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring",children:t.map(a=>(0,d.jsx)("option",{value:a.value,children:a.label},a.value))}),"scheduled"===g.status&&(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(p.Label,{htmlFor:"scheduledFor",children:"Schedule For"}),(0,d.jsx)(o.Input,{id:"scheduledFor",type:"datetime-local",value:g.scheduledFor?new Date(g.scheduledFor).toISOString().slice(0,16):"",onChange:a=>j("scheduledFor",a.target.value?new Date(a.target.value).toISOString():void 0)})]})]}),(0,d.jsx)(i.Separator,{}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("h3",{className:"font-semibold",children:"SEO Settings"}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(p.Label,{htmlFor:"seoTitle",children:"SEO Title"}),(0,d.jsx)(o.Input,{id:"seoTitle",value:g.seoTitle||"",onChange:a=>j("seoTitle",a.target.value),placeholder:"Custom title for search engines"}),(0,d.jsxs)("p",{className:"text-xs text-muted-foreground",children:[g.seoTitle?.length||0,"/60 characters"]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(p.Label,{htmlFor:"seoDescription",children:"SEO Description"}),(0,d.jsx)(q.Textarea,{id:"seoDescription",value:g.seoDescription||"",onChange:a=>j("seoDescription",a.target.value),placeholder:"Meta description for search engines",rows:3}),(0,d.jsxs)("p",{className:"text-xs text-muted-foreground",children:[g.seoDescription?.length||0,"/160 characters"]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(p.Label,{htmlFor:"canonical",children:"Canonical URL"}),(0,d.jsx)(o.Input,{id:"canonical",value:g.canonical||"",onChange:a=>j("canonical",a.target.value),placeholder:"https://example.com/canonical-url"})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("input",{type:"checkbox",id:"noindex",checked:g.noindex||!1,onChange:a=>j("noindex",a.target.checked),className:"size-4 rounded border-input"}),(0,d.jsx)(p.Label,{htmlFor:"noindex",className:"cursor-pointer",children:"Noindex (prevent search engines from indexing)"})]})]})]})})}function v({post:a,onSave:b,onPublish:c,onSchedule:j,formData:o,onFormDataChange:p,children:q}){let r=(0,g.useRouter)(),[s,t]=e.useState(!1),[v,w]=e.useState(!1),[x,y]=e.useState(!1),[z,A]=e.useState(null),B=o??z,C=p??A;e.useEffect(()=>{let a=a=>{x&&(a.preventDefault(),a.returnValue="")};return window.addEventListener("beforeunload",a),()=>window.removeEventListener("beforeunload",a)},[x]),e.useEffect(()=>{if(B&&x&&B.title){let c=setTimeout(async()=>{let c=a?`post-draft-${a.id}`:"post-draft-new";localStorage.setItem(c,JSON.stringify(B));try{await b(B),y(!1)}catch(a){console.error("Auto-save failed:",a)}},3e3);return()=>clearTimeout(c)}},[B,x,a,b]);let D=async()=>{if(B){t(!0);try{await b(B),w(!0),y(!1),setTimeout(()=>w(!1),2e3)}catch(a){console.error("Failed to save:",a)}finally{t(!1)}}},E=async()=>{if(B){t(!0);try{await c?.(B),r.push("/content")}catch(a){console.error("Failed to publish:",a)}finally{t(!1)}}};return(0,d.jsxs)("div",{className:"flex h-screen flex-col",children:[(0,d.jsx)("div",{className:"border-b bg-background",children:(0,d.jsxs)("div",{className:"flex h-14 items-center justify-between px-6",children:[(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)(f.default,{href:"/content",children:(0,d.jsx)(h.Button,{variant:"ghost",size:"icon",children:(0,d.jsx)(m.ArrowLeft,{className:"size-4"})})}),(0,d.jsx)(i.Separator,{orientation:"vertical",className:"h-6"}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[v&&(0,d.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,d.jsx)(n.CheckCircle2,{className:"size-4 text-green-600"}),(0,d.jsx)("span",{children:"Saved"})]}),x&&!v&&(0,d.jsx)("span",{className:"text-sm text-muted-foreground",children:"Unsaved changes"})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)(h.Button,{variant:"outline",onClick:D,disabled:s||!x,children:[(0,d.jsx)(k,{className:"mr-2 size-4"}),s?"Saving...":"Save Draft"]}),a&&(0,d.jsxs)(h.Button,{variant:"outline",onClick:()=>{if(!B||!a)return;let b=B.slug||a.slug;window.open(`/content/preview/${b}`,"_blank")},children:[(0,d.jsx)(l,{className:"mr-2 size-4"}),"Preview"]}),(0,d.jsx)(h.Button,{onClick:E,disabled:s||!B,children:"Publish"})]})]})}),(0,d.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,d.jsx)("div",{className:"flex-1 overflow-y-auto bg-background",children:(0,d.jsx)("div",{className:"mx-auto max-w-4xl px-6 py-8",children:q})}),(0,d.jsx)("div",{className:"w-80 border-l bg-muted/30",children:(0,d.jsx)(u,{post:a,formData:B,onFormDataChange:a=>{C(a),y(!0)},onSchedule:j})})]})]})}let w=(0,e.createContext)(null);function x(){let a=(0,e.useContext)(w);return null==a&&function(a,...b){let c=new URL("https://lexical.dev/docs/error"),d=new URLSearchParams;for(let a of(d.append("code",8),b))d.append("v",a);throw c.search=d.toString(),Error(`Minified Lexical error #8; visit ${c.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(0),a}function y(a,...b){let c=new URL("https://lexical.dev/docs/error"),d=new URLSearchParams;for(let c of(d.append("code",a),b))d.append("v",c);throw c.search=d.toString(),Error(`Minified Lexical error #${a}; visit ${c.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function z(a,...b){let c=new URL("https://lexical.dev/docs/error"),d=new URLSearchParams;for(let c of(d.append("code",a),b))d.append("v",c);c.search=d.toString(),console.warn(`Minified Lexical warning #${a}; visit ${c.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function A(...a){let b=[];for(let c of a)if(c&&"string"==typeof c)for(let[a]of c.matchAll(/\S+/g))b.push(a);return b}let B="֑-߿יִ-﷽ﹰ-ﻼ",C="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",D=(RegExp("^[^"+C+"]*["+B+"]"),RegExp("^[^"+B+"]*["+C+"]"),{bold:1,capitalize:1024,code:16,highlight:128,italic:2,lowercase:256,strikethrough:4,subscript:32,superscript:64,underline:8,uppercase:512}),E={directionless:1,unmergeable:2},F={center:2,end:6,justify:4,left:1,right:3,start:5},G={2:"center",6:"end",4:"justify",1:"left",3:"right",5:"start"},H={normal:0,segmented:2,token:1},I={0:"normal",2:"segmented",1:"token"},J="$config",K=!1,L=0;function M(a){L=a.timeStamp}function N(a,b,c){let d="BR"===a.nodeName,e=b.__lexicalLineBreak;return e&&(a===e||d&&a.previousSibling===e)||d&&void 0!==dW(a,c)}function O(a,b,c){K=!0;let d=performance.now()-L>100;try{dd(a,()=>{let e=cN()||a.getEditorState().read(()=>{let a=cN();return null!==a?a.clone():null}),f=new Map,g=a.getRootElement(),h=a._editorState,i=a._blockCursorElement,j=!1;for(let c=0;c<b.length;c++){let k=b[c],l=k.type,m=k.target,n=function(a,b,c,d){var e;for(let f=a;f&&(e=f,!0!==e.__lexicalUnmanaged);f=ej(f)){let a=dW(f,b);if(void 0!==a){let b=dU(a,c);if(b)return dk(b)||!eu(f)?void 0:[f,b]}else if(f===d)return[d,d_(c)]}}(m,a,h,g);if(!n)continue;let[o,p]=n;if("characterData"===l)d&&cm(p)&&dL(m)&&function(a,b,c){if(cw(a)){let b=a.anchor.getNode();if(b.is(c)&&a.format!==b.getFormat())return!1}return dL(b)&&c.isAttached()}(e,m,p)&&function(a,b,c){var d;let e=(d=en(c),null),f=null,g=null;null!==e&&e.anchorNode===a&&(f=e.anchorOffset,g=e.focusOffset);let h=a.nodeValue;null!==h&&d5(b,h,f,g,!1)}(m,p,a);else if("childList"===l){j=!0;let b=k.addedNodes;for(let c=0;c<b.length;c++){let d=b[c],e=dV(d),f=d.parentNode;null==f||d===i||null!==e||N(d,f,a)||f.removeChild(d)}let c=k.removedNodes,d=c.length;if(d>0){let b=0;for(let e=0;e<d;e++){let d=c[e];(N(d,m,a)||i===d)&&(m.appendChild(d),b++)}d!==b&&f.set(o,p)}}}if(f.size>0)for(let[b,c]of f)c.reconcileObservedMutation(b,a);let k=c.takeRecords();if(k.length>0){for(let b=0;b<k.length;b++){let c=k[b],d=c.addedNodes,e=c.target;for(let b=0;b<d.length;b++){let c=d[b],f=c.parentNode;null==f||"BR"!==c.nodeName||N(c,e,a)||f.removeChild(c)}}c.takeRecords()}null!==e&&j&&d0(e)})}finally{K=!1}}function P(a){let b=a._observer;null!==b&&O(a,b.takeRecords(),b)}function Q(a){0===L&&en(a).addEventListener("textInput",M,!0),a._observer=new MutationObserver((b,c)=>{O(a,b,c)})}class R{node;knownState;unknownState;sharedNodeState;size;constructor(a,b,c,d=new Map,e){this.node=a,this.sharedNodeState=b,this.unknownState=c,this.knownState=d;const{sharedConfigMap:f}=this.sharedNodeState,g=void 0!==e?e:function(a,b,c){let d=c.size;if(b)for(let e in b){let b=a.get(e);b&&c.has(b)||d++}return d}(f,c,d);this.size=g}getValue(a){let b=this.knownState.get(a);if(void 0!==b)return b;this.sharedNodeState.sharedConfigMap.set(a.key,a);let c=a.defaultValue;if(this.unknownState&&a.key in this.unknownState){let b=this.unknownState[a.key];void 0!==b&&(c=a.parse(b)),this.updateFromKnown(a,c)}return c}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){let a={...this.unknownState},b={};for(let[b,c]of this.knownState)b.isEqual(c,b.defaultValue)?delete a[b.key]:a[b.key]=b.unparse(c);for(let c of this.sharedNodeState.flatKeys)c in a&&(b[c]=a[c],delete a[c]);return T(a)&&(b.$=a),b}getWritable(a){if(this.node===a)return this;let{sharedNodeState:b,unknownState:c}=this,d=new Map(this.knownState);return new R(a,b,function(a,b,c){let d;if(c)for(let[e,f]of Object.entries(c)){let c=a.get(e);c?b.has(c)||b.set(c,c.parse(f)):(d=d||{})[e]=f}return d}(b.sharedConfigMap,d,c),d,this.size)}updateFromKnown(a,b){let c=a.key;this.sharedNodeState.sharedConfigMap.set(c,a);let{knownState:d,unknownState:e}=this;d.has(a)||e&&c in e||(e&&(delete e[c],this.unknownState=T(e)),this.size++),d.set(a,b)}updateFromUnknown(a,b){let c=this.sharedNodeState.sharedConfigMap.get(a);c?this.updateFromKnown(c,c.parse(b)):(this.unknownState=this.unknownState||{},a in this.unknownState||this.size++,this.unknownState[a]=b)}updateFromJSON(a){let{knownState:b}=this;for(let a of b.keys())b.set(a,a.defaultValue);if(this.size=b.size,this.unknownState=void 0,a)for(let[b,c]of Object.entries(a))this.updateFromUnknown(b,c)}}function S(a){return a.__state?a.__state.sharedNodeState:dB(c2(),a.getType()).sharedNodeState}function T(a){if(a)for(let b in a)return a}function U(a,b,c){for(let[d,e]of b.knownState){if(a.has(d.key))continue;a.add(d.key);let b=c?c.getValue(d):d.defaultValue;if(b!==e&&!d.isEqual(b,e))return!0}return!1}function V(a,b,c){let{unknownState:d}=b,e=c?c.unknownState:void 0;if(d){for(let[b,c]of Object.entries(d))if(!a.has(b)&&(a.add(b),c!==(e?e[b]:void 0)))return!0}return!1}function W(a,b){let c=a.__state;return c&&c.node===a?c.getWritable(b):c}function X(a,b){let c=a.__mode,d=a.__format,e=a.__style,f=b.__mode,g=b.__format,h=b.__style,i=a.__state,j=b.__state;return(null===c||c===f)&&(null===d||d===g)&&(null===e||e===h)&&(null===a.__state||i===j||function(a,b){if(a===b)return!0;if(a&&b&&a.size!==b.size)return!1;let c=new Set;return!(a&&U(c,a,b)||b&&U(c,b,a)||a&&V(c,a,b)||b&&V(c,b,a))}(i,j))}function Y(a,b){let c=a.mergeWithSibling(b),d=c2()._normalizedNodes;return d.add(a.__key),d.add(b.__key),c}function Z(a){let b,c,d=a;if(""!==d.__text||!d.isSimpleText()||d.isUnmergeable()){for(;null!==(b=d.getPreviousSibling())&&cm(b)&&b.isSimpleText()&&!b.isUnmergeable();){if(""!==b.__text){X(b,d)&&(d=Y(b,d));break}b.remove()}for(;null!==(c=d.getNextSibling())&&cm(c)&&c.isSimpleText()&&!c.isUnmergeable();){if(""!==c.__text){X(d,c)&&(d=Y(d,c));break}c.remove()}}else d.remove()}function $(a){return _(a.anchor),_(a.focus),a}function _(a){for(;"element"===a.type;){let b,c,d=a.getNode(),e=a.offset;if(e===d.getChildrenSize()?(b=d.getChildAtIndex(e-1),c=!0):(b=d.getChildAtIndex(e),c=!1),cm(b)){a.set(b.__key,c?b.getTextContentSize():0,"text",!0);break}if(!dh(b))break;a.set(b.__key,c?b.getChildrenSize():0,"element",!0)}}let aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak="",al=null,am=null,an="",ao=!1,ap=!1;function aq(a,b){let c=ag.get(a);if(null!==b){let c=aD(a);c.parentNode===b&&b.removeChild(c)}if(ah.has(a)||ab._keyToDOMMap.delete(a),dh(c)){let a=aA(c,ag);ar(a,0,a.length-1,null)}void 0!==c&&ed(aj,ac,ad,c,"destroyed")}function ar(a,b,c,d){let e=b;for(;e<=c;++e){let b=a[e];void 0!==b&&aq(b,d)}}function as(a,b){a.setProperty("text-align",b)}function at(a,b){let c=aa.theme.indent;if("string"==typeof c){let d=a.classList.contains(c);b>0&&!d?a.classList.add(c):b<1&&d&&a.classList.remove(c)}let d=getComputedStyle(a).getPropertyValue("--lexical-indent-base-value")||"40px";a.style.setProperty("padding-inline-start",0===b?"":`calc(${b} * ${d})`)}function au(a,b){let c=a.style;0===b?as(c,""):1===b?as(c,"left"):2===b?as(c,"center"):3===b?as(c,"right"):4===b?as(c,"justify"):5===b?as(c,"start"):6===b&&as(c,"end")}function av(a,b){let c=function(a){let b=a.__dir;if(null!==b)return b;if(dm(a))return null;let c=a.getParentOrThrow();return dm(c)&&null===c.__dir?"auto":null}(b);null!==c?a.dir=c:a.removeAttribute("dir")}function aw(a,b){var c;let d,e=ah.get(a);void 0===e&&y(60);let f=e.createDOM(aa,ab);if(d=(c=ab)._keyToDOMMap,f[`__lexicalKey_${c._key}`]=a,d.set(a,f),cm(e)?f.setAttribute("data-lexical-text","true"):dk(e)&&f.setAttribute("data-lexical-decorator","true"),dh(e)){let a=e.__indent,b=e.__size;av(f,e),0!==a&&at(f,a),0!==b&&ax(aA(e,ah),e,0,b-1,e.getDOMSlot(f));let c=e.__format;0!==c&&au(f,c),e.isInline()||az(null,e,f),eh(e)&&(ak+="\n\n",an+="\n\n")}else{let b=e.getTextContent();if(dk(e)){let b=e.decorate(ab,aa);null!==b&&aB(a,b),f.contentEditable="false"}ak+=b,an+=b}return null!==b&&b.insertChild(f),ed(aj,ac,ad,e,"created"),f}function ax(a,b,c,d,e){let f=ak;ak="";let g=c;for(;g<=d;++g){aw(a[g],e);let b=ah.get(a[g]);null!==b&&cm(b)&&null===al&&(al=b.getFormat(),am=b.getStyle())}eh(b)&&(ak+="\n\n"),e.element.__lexicalTextContent=ak,ak=f+ak}function ay(a,b){if(a){let c=a.__last;if(c){let a=b.get(c);if(a)return b5(a)?"line-break":dk(a)&&a.isInline()?"decorator":null}return"empty"}return null}function az(a,b,c){let d=ay(a,ag),e=ay(b,ah);d!==e&&b.getDOMSlot(c).setManagedLineBreak(e)}function aA(a,b){let c=[],d=a.__first;for(;null!==d;){let a=b.get(d);void 0===a&&y(101),c.push(d),d=a.__next}return c}function aB(a,b){let c=ab._pendingDecorators,d=ab._decorators;if(null===c){if(d[a]===b)return;c=dY(ab)}c[a]=b}function aC(a){let b=a.nextSibling;return null!==b&&b===ab._blockCursorElement&&(b=b.nextSibling),b}function aD(a){let b=ai.get(a);return void 0===b&&y(75,a),b}function aE(a){return{type:a}}let aF=aE("SELECTION_CHANGE_COMMAND"),aG=aE("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),aH=aE("CLICK_COMMAND"),aI=aE("BEFORE_INPUT_COMMAND"),aJ=aE("INPUT_COMMAND"),aK=aE("COMPOSITION_START_COMMAND"),aL=aE("COMPOSITION_END_COMMAND"),aM=aE("DELETE_CHARACTER_COMMAND"),aN=aE("INSERT_LINE_BREAK_COMMAND"),aO=aE("INSERT_PARAGRAPH_COMMAND"),aP=aE("CONTROLLED_TEXT_INSERTION_COMMAND"),aQ=aE("PASTE_COMMAND"),aR=aE("REMOVE_TEXT_COMMAND"),aS=aE("DELETE_WORD_COMMAND"),aT=aE("DELETE_LINE_COMMAND"),aU=aE("FORMAT_TEXT_COMMAND"),aV=aE("UNDO_COMMAND"),aW=aE("REDO_COMMAND"),aX=aE("KEYDOWN_COMMAND"),aY=aE("KEY_ARROW_RIGHT_COMMAND"),aZ=aE("MOVE_TO_END"),a$=aE("KEY_ARROW_LEFT_COMMAND"),a_=aE("MOVE_TO_START"),a0=aE("KEY_ARROW_UP_COMMAND"),a1=aE("KEY_ARROW_DOWN_COMMAND"),a2=aE("KEY_ENTER_COMMAND"),a3=aE("KEY_SPACE_COMMAND"),a4=aE("KEY_BACKSPACE_COMMAND"),a5=aE("KEY_ESCAPE_COMMAND"),a6=aE("KEY_DELETE_COMMAND"),a7=aE("KEY_TAB_COMMAND"),a8=aE("INSERT_TAB_COMMAND"),a9=aE("INDENT_CONTENT_COMMAND"),ba=aE("OUTDENT_CONTENT_COMMAND"),bb=aE("DROP_COMMAND"),bc=aE("FORMAT_ELEMENT_COMMAND"),bd=aE("DRAGSTART_COMMAND"),be=aE("DRAGOVER_COMMAND"),bf=aE("DRAGEND_COMMAND"),bg=aE("COPY_COMMAND"),bh=aE("CUT_COMMAND"),bi=aE("SELECT_ALL_COMMAND"),bj=aE("CLEAR_EDITOR_COMMAND"),bk=aE("CLEAR_HISTORY_COMMAND"),bl=aE("CAN_REDO_COMMAND"),bm=aE("CAN_UNDO_COMMAND"),bn=aE("FOCUS_COMMAND"),bo=aE("BLUR_COMMAND"),bp=aE("KEY_MODIFIER_COMMAND"),bq=Object.freeze({}),br=[["keydown",function(a,b){bs=a.timeStamp,bt=a.key,b.isComposing()||eg(b,aX,a)}],["pointerdown",function(a,b){let c=a.target,d=a.pointerType;ev(c)&&"touch"!==d&&"pen"!==d&&0===a.button&&dd(b,()=>{dk(dX(c))||(bz=!0)})}],["compositionstart",function(a,b){eg(b,aK,a)}],["compositionend",function(a,b){eg(b,aL,a)}],["input",function(a,b){a.stopPropagation(),dd(b,()=>{b.dispatchCommand(aJ,a)},{event:a}),bv=null}],["click",function(a,b){dd(b,()=>{var c;cN(),c=en(b),cO(),eg(b,aH,a)})}],["cut",bq],["copy",bq],["dragstart",bq],["dragover",bq],["dragend",bq],["paste",bq],["focus",bq],["blur",bq],["drop",bq]],bs=0,bt=null,bu=0,bv=null,bw=new WeakMap,bx=new WeakMap,by=!1,bz=!1,bA=!1,bB=!1,bC=!1,bD="",bE=null,bF=[0,"",0,"root",0];function bG(a,b,c,d,e){var f;let g=a.anchor,h=a.focus,i=g.getNode(),j=c2(),k=(f=en(j),null),l=g.key,m=j.getElementByKey(l),n=c.length;return l!==h.key||!cm(i)||(!e||i.isDirty()&&n<2||d2(c))&&g.offset!==h.offset&&!i.isComposing()||dK(i)||i.isDirty()&&n>1||null!==m&&!i.isComposing()&&null!==dN(m)||null!==k&&null!==b&&(!b.collapsed||b.startContainer!==k.anchorNode||b.startOffset!==k.anchorOffset)||i.getFormat()!==a.format||i.getStyle()!==a.style||function(a,b){let c;if(b.isSegmented())return!0;if(!a.isCollapsed())return!1;let d=a.anchor.offset,e=b.getParentOrThrow(),f=dJ(b);return 0===d?!b.canInsertTextBefore()||!e.canInsertTextBefore()&&!b.isComposing()||f||(cm(c=b.getPreviousSibling())||dh(c)&&c.isInline())&&!c.canInsertTextAfter():d===b.getTextContentSize()&&(!b.canInsertTextAfter()||!e.canInsertTextAfter()&&!b.isComposing()||f)}(a,i)}function bH(a,b){return dL(a)&&null!==a.nodeValue&&0!==b&&b!==a.nodeValue.length}function bI(a,b,c){let{anchorNode:d,anchorOffset:e,focusNode:f,focusOffset:g}=a;by&&(by=!1,bH(d,e)&&bH(f,g)&&!bE)||dd(b,()=>{if(!c)return void d0(null);if(!dF(b,d,f))return;let h=cN();if(bE&&cw(h)&&h.isCollapsed()){let a=h.anchor,b=bE.anchor;(a.key===b.key&&a.offset===b.offset+1||1===a.offset&&b.getNode().is(a.getNode().getPreviousSibling()))&&d0(h=bE.clone())}if(bE=null,cw(h)){let c=h.anchor,d=c.getNode();if(h.isCollapsed()){"Range"===a.type&&a.anchorNode===a.focusNode&&(h.dirty=!0);let e=en(b).event,f=e?e.timeStamp:performance.now(),[g,i,j,k,l]=bF,m=d$(),n=!1===b.isComposing()&&""===m.getTextContent();if(f<l+200&&c.offset===j&&c.key===k)bJ(h,g,i);else if("text"===c.type)cm(d)||y(141),bK(h,d);else if("element"===c.type&&!n){dh(d)||y(259);let a=c.getNode();a.isEmpty()?bJ(h,a.getTextFormat(),a.getTextStyle()):bJ(h,0,"")}}else{let a=c.key,b=h.focus.key,d=h.getNodes(),f=d.length,i=h.isBackward(),j=i?g:e,k=i?e:g,l=i?b:a,m=i?a:b,n=2047,o=!1;for(let a=0;a<f;a++){let b=d[a],c=b.getTextContentSize();if(cm(b)&&0!==c&&(0!==a||b.__key!==l||j!==c)&&(a!==f-1||b.__key!==m||0!==k)&&(o=!0,0==(n&=b.getFormat())))break}h.format=o?n:0}}eg(b,aF,void 0)})}function bJ(a,b,c){a.format===b&&a.style===c||(a.format=b,a.style=c,a.dirty=!0)}function bK(a,b){bJ(a,b.getFormat(),b.getStyle())}function bL(a){if(!a.getTargetRanges)return null;let b=a.getTargetRanges();return 0===b.length?null:b[0]}function bM(a){var b;let c=a.inputType,d=bL(a),e=c2(),f=cN();if("deleteContentBackward"===c){if(null===f){let a=cO();if(!cw(a))return!0;d0(a.clone())}if(cw(f)){let c=f.anchor.key===f.focus.key;if(b=a.timeStamp,"MediaLast"===bt&&b<bs+30&&e.isComposing()&&c){if(dS(null),bs=0,setTimeout(()=>{dd(e,()=>{dS(null)})},30),cw(f)){let a=f.anchor.getNode();a.markDirty(),cm(a)||y(142),bK(f,a)}}else{dS(null),a.preventDefault();let b=f.anchor.getNode(),c=b.getTextContent(),d=b.canInsertTextAfter(),g=0===f.anchor.offset&&f.focus.offset===c.length,h=!1;if(h&&f.isCollapsed()&&(h=!dk(ef(f.anchor,!0))),!h){eg(e,aM,!0);cN()}}return!0}}if(!cw(f))return!0;let g=a.data;null!==bv&&en(e),f.dirty&&null===bv||!f.isCollapsed()||dm(f.anchor.getNode())||null===d||f.applyDOMRange(d),bv=null;let h=f.anchor,i=f.focus,j=h.getNode(),k=i.getNode();if("insertText"===c||"insertTranspose"===c){if("\n"===g)a.preventDefault(),eg(e,aN,!1);else if("\n\n"===g)a.preventDefault(),eg(e,aO,void 0);else if(null==g&&a.dataTransfer){let b=a.dataTransfer.getData("text/plain");a.preventDefault(),f.insertRawText(b)}else null!=g&&bG(f,d,g,a.timeStamp,!0)?(a.preventDefault(),eg(e,aP,g)):bv=g;return bu=a.timeStamp,!0}switch(a.preventDefault(),c){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":eg(e,aP,a);break;case"insertFromComposition":dS(null),eg(e,aP,a);break;case"insertLineBreak":dS(null),eg(e,aN,!1);break;case"insertParagraph":dS(null),bA&&1?(bA=!1,eg(e,aN,!1)):eg(e,aO,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":eg(e,aQ,a);break;case"deleteByComposition":(j!==k||dh(j)||dh(k)||!dJ(j)||!dJ(k))&&eg(e,aR,a);break;case"deleteByDrag":case"deleteByCut":eg(e,aR,a);break;case"deleteContent":eg(e,aM,!1);break;case"deleteWordBackward":eg(e,aS,!0);break;case"deleteWordForward":eg(e,aS,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":eg(e,aT,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":eg(e,aT,!1);break;case"formatStrikeThrough":eg(e,aU,"strikethrough");break;case"formatBold":eg(e,aU,"bold");break;case"formatItalic":eg(e,aU,"italic");break;case"formatUnderline":eg(e,aU,"underline");break;case"historyUndo":eg(e,aV,void 0);break;case"historyRedo":eg(e,aW,void 0)}return!0}function bN(a){if(eu(a.target)&&dk(dX(a.target)))return!0;let b=c2(),c=cN(),d=a.data,e=bL(a);if(null!=d&&cw(c)&&bG(c,e,d,a.timeStamp,!1)){var f;return bB&&(bQ(b,d),bB=!1),c.anchor.getNode(),f=en(b),!0}return en(b),bB&&(bQ(b,d||void 0),bB=!1),c_(),P(c2()),!0}function bO(a){let b=c2(),c=cN();if(cw(c)&&!b.isComposing()){let d=c.anchor,e=c.anchor.getNode();dS(d.key),(a.timeStamp<bs+30||"element"===d.type||!c.isCollapsed()||e.getFormat()!==c.format||cm(e)&&e.getStyle()!==c.style)&&eg(b,aP,"​")}return!0}function bP(a){return bQ(c2(),a.data),!0}function bQ(a,b){let c=a._compositionKey;if(dS(null),null!==c&&null!=b){if(""===b){let b=dU(c),d=dN(a.getElementByKey(c));return void(null!==d&&null!==d.nodeValue&&cm(b)&&d5(b,d.nodeValue,null,null,!0))}if("\n"===b[b.length-1]){let b=cN();if(cw(b)){let c=b.focus;return b.anchor.set(c.key,c.offset,c.type),void eg(a,a2,null)}}}en(a)}function bR(a){let b=c2();if(null==a.key)return!0;if(bC&&eb(a))return dd(b,()=>{bQ(b,bD)}),bC=!1,bD="",!0;if(d8(a,"ArrowRight",{shiftKey:"any"}))eg(b,aY,a);else if(d8(a,"ArrowRight",d9))eg(b,aZ,a);else if(d8(a,"ArrowLeft",{shiftKey:"any"}))eg(b,a$,a);else if(d8(a,"ArrowLeft",d9))eg(b,a_,a);else if(d8(a,"ArrowUp",{altKey:"any",shiftKey:"any"}))eg(b,a0,a);else if(d8(a,"ArrowDown",{altKey:"any",shiftKey:"any"}))eg(b,a1,a);else if(d8(a,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0}))bA=!0,eg(b,a2,a);else if(" "===a.key)eg(b,a3,a);else if(0)a.preventDefault(),bA=!0,eg(b,aN,!0);else if(d8(a,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"}))bA=!1,eg(b,a2,a);else if(d8(a,"Backspace",{shiftKey:"any"}))eb(a)?eg(b,a4,a):(a.preventDefault(),eg(b,aM,!0));else if("Escape"===a.key)eg(b,a5,a);else if(d8(a,"Delete",{}))"Delete"!==a.key?(a.preventDefault(),eg(b,aM,!1)):eg(b,a6,a);else if(d8(a,"Backspace",ea))a.preventDefault(),eg(b,aS,!0);else if(d8(a,"Delete",ea))a.preventDefault(),eg(b,aS,!1);else if(0)a.preventDefault(),eg(b,aT,!0);else if(0)a.preventDefault(),eg(b,aT,!1);else if(d8(a,"b",d9))a.preventDefault(),eg(b,aU,"bold");else if(d8(a,"u",d9))a.preventDefault(),eg(b,aU,"underline");else if(d8(a,"i",d9))a.preventDefault(),eg(b,aU,"italic");else if(d8(a,"Tab",{shiftKey:"any"}))eg(b,a7,a);else if(d8(a,"z",d9))a.preventDefault(),eg(b,aV,void 0);else if(d8(a,"y",{ctrlKey:!0})||d8(a,"z",{ctrlKey:!0,shiftKey:!0}))a.preventDefault(),eg(b,aW,void 0);else{let c=b._editorState._selection;null===c||cw(c)?d8(a,"a",d9)&&(a.preventDefault(),eg(b,bi,a)):d8(a,"c",d9)?(a.preventDefault(),eg(b,bg,a)):d8(a,"x",d9)?(a.preventDefault(),eg(b,bh,a)):d8(a,"a",d9)&&(a.preventDefault(),eg(b,bi,a))}return(a.ctrlKey||a.shiftKey||a.altKey||a.metaKey)&&b.dispatchCommand(bp,a),!0}function bS(a){let b=a.__lexicalEventHandles;return void 0===b&&(a.__lexicalEventHandles=b=[]),b}let bT=new Map;function bU(a){let b,c=(b=em(a.target))?b.getSelection():null;if(null===c)return;let d=dH(c.anchorNode);if(null===d)return;bz&&(bz=!1,dd(d,()=>{let b=cO(),e=c.anchorNode;(eu(e)||dL(e))&&d0(cM(b,c,d,a))}));let e=d3(d),f=e[e.length-1],g=f._key,h=bT.get(g),i=h||f;i!==d&&bI(c,i,!1),bI(c,d,!0),d!==f?bT.set(g,d):h&&bT.delete(g)}function bV(a){a._lexicalHandled=!0}function bW(a){return!0===a._lexicalHandled}let bX=()=>{};function bY(a,b,c){c_();let d=a.__key,e=a.getParent();if(null===e)return;let f=function(a){let b=cN();if(!cw(b)||!dh(a))return b;let{anchor:c,focus:d}=b,e=c.getNode(),f=d.getNode();return el(e,a)&&c.set(a.__key,0,"element"),el(f,a)&&d.set(a.__key,0,"element"),b}(a),g=!1;if(cw(f)&&b){let b=f.anchor,c=f.focus;b.key===d&&(cR(b,a,e,a.getPreviousSibling(),a.getNextSibling()),g=!0),c.key===d&&(cR(c,a,e,a.getPreviousSibling(),a.getNextSibling()),g=!0)}else cy(f)&&b&&a.isSelected()&&a.selectPrevious();if(cw(f)&&b&&!g){let b=a.getIndexWithinParent();dQ(a),cP(f,e,b,-1)}else dQ(a);c||eo(e)||e.canBeEmpty()||!e.isEmpty()||bY(e,b),b&&f&&dm(e)&&e.isEmpty()&&e.selectEnd()}let bZ=Symbol.for("ephemeral");function b$(a){return a[bZ]||!1}class b_{__type;__key;__parent;__prev;__next;__state;static getType(){let{ownNodeType:a}=eG(this);return void 0===a&&y(64,this.name),a}static clone(a){y(65,this.name)}$config(){return{}}config(a,b){let c=b.extends||Object.getPrototypeOf(this.constructor);return Object.assign(b,{extends:c,type:a}),{[a]:b}}afterCloneFrom(a){this.__key===a.__key?(this.__parent=a.__parent,this.__next=a.__next,this.__prev=a.__prev,this.__state=a.__state):a.__state&&(this.__state=a.__state.getWritable(this))}static importDOM;constructor(a){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),function(a,b){let c,d=(c=dz,dz=null,c);if(null!=(b=b||d&&d.__key))return a.__key=b;c_(),c0();let e=c2(),f=c1(),g=""+dA++;f._nodeMap.set(g,a),dh(a)?e._dirtyElements.set(g,!0):e._dirtyLeaves.add(g),e._cloneNotNeeded.add(g),e._dirtyType=1,a.__key=g}(this,a)}getType(){return this.__type}isInline(){y(137,this.constructor.name)}isAttached(){let a=this.__key;for(;null!==a;){if("root"===a)return!0;let b=dU(a);if(null===b)break;a=b.__parent}return!1}isSelected(a){let b=a||cN();if(null==b)return!1;let c=b.getNodes().some(a=>a.__key===this.__key);if(cm(this))return c;if(cw(b)&&"element"===b.anchor.type&&"element"===b.focus.type){if(b.isCollapsed())return!1;let a=this.getParent();if(dk(this)&&this.isInline()&&a){let c=b.isBackward()?b.focus:b.anchor;if(a.is(c.getNode())&&c.offset===a.getChildrenSize()&&this.is(a.getLastChild()))return!1}}return c}getKey(){return this.__key}getIndexWithinParent(){let a=this.getParent();if(null===a)return -1;let b=a.getFirstChild(),c=0;for(;null!==b;){if(this.is(b))return c;c++,b=b.getNextSibling()}return -1}getParent(){let a=this.getLatest().__parent;return null===a?null:dU(a)}getParentOrThrow(){let a=this.getParent();return null===a&&y(66,this.__key),a}getTopLevelElement(){let a=this;for(;null!==a;){let b=a.getParent();if(eo(b))return dh(a)||a===this&&dk(a)||y(194),a;a=b}return null}getTopLevelElementOrThrow(){let a=this.getTopLevelElement();return null===a&&y(67,this.__key),a}getParents(){let a=[],b=this.getParent();for(;null!==b;)a.push(b),b=b.getParent();return a}getParentKeys(){let a=[],b=this.getParent();for(;null!==b;)a.push(b.__key),b=b.getParent();return a}getPreviousSibling(){let a=this.getLatest().__prev;return null===a?null:dU(a)}getPreviousSiblings(){let a=[],b=this.getParent();if(null===b)return a;let c=b.getFirstChild();for(;null!==c&&!c.is(this);)a.push(c),c=c.getNextSibling();return a}getNextSibling(){let a=this.getLatest().__next;return null===a?null:dU(a)}getNextSiblings(){let a=[],b=this.getNextSibling();for(;null!==b;)a.push(b),b=b.getNextSibling();return a}getCommonAncestor(a){let b=dh(this)?this:this.getParent(),c=dh(a)?a:a.getParent(),d=b&&c?e6(b,c):null;return d?d.commonAncestor:null}is(a){return null!=a&&this.__key===a.__key}isBefore(a){let b=e6(this,a);return null!==b&&("descendant"===b.type||("branch"===b.type?-1===e4(b):("same"!==b.type&&"ancestor"!==b.type&&y(279),!1)))}isParentOf(a){let b=e6(this,a);return null!==b&&"ancestor"===b.type}getNodesBetween(a){let b=this.isBefore(a),c=[],d=new Set,e=this;for(;null!==e;){let f=e.__key;if(d.has(f)||(d.add(f),c.push(e)),e===a)break;let g=dh(e)?b?e.getFirstChild():e.getLastChild():null;if(null!==g){e=g;continue}let h=b?e.getNextSibling():e.getPreviousSibling();if(null!==h){e=h;continue}let i=e.getParentOrThrow();if(d.has(i.__key)||c.push(i),i===a)break;let j=null,k=i;do{if(null===k&&y(68),j=b?k.getNextSibling():k.getPreviousSibling(),null===(k=k.getParent()))break;null!==j||d.has(k.__key)||c.push(k)}while(null===j)e=j}return b||c.reverse(),c}isDirty(){let a=c2()._dirtyLeaves;return null!==a&&a.has(this.__key)}getLatest(){if(b$(this))return this;let a=dU(this.__key);return null===a&&y(113),a}getWritable(){if(b$(this))return this;c_();let a=c1(),b=c2(),c=a._nodeMap,d=this.__key,e=this.getLatest(),f=b._cloneNotNeeded,g=cN();if(null!==g&&g.setCachedNodes(null),f.has(d))return dR(e),e;let h=eD(e);return f.add(d),dR(h),c.set(d,h),h}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(a,b){y(70)}updateDOM(a,b,c){y(71)}exportDOM(a){return{element:this.createDOM(a._config,a)}}exportJSON(){let a=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...a}}static importJSON(a){y(18,this.name)}updateFromJSON(a){return function(a,b){let c,d,e=a.getWritable(),f=b.$,g=f;for(let a of S(e).flatKeys)a in b&&(void 0!==g&&g!==f||(g={...f}),g[a]=b[a]);return(e.__state||g)&&(d=(c=a.getWritable()).__state?c.__state.getWritable(c):new R(c,S(c)),c.__state=d,d).updateFromJSON(g),e}(this,a)}static transform(){return null}remove(a){bY(this,!0,a)}replace(a,b){c_();let c=cN();null!==c&&(c=c.clone()),eq(this,a);let d=this.getLatest(),e=this.__key,f=a.__key,g=a.getWritable(),h=this.getParentOrThrow().getWritable(),i=h.__size;dQ(g);let j=d.getPreviousSibling(),k=d.getNextSibling(),l=d.__prev,m=d.__next,n=d.__parent;if((bY(d,!1,!0),null===j)?h.__first=f:j.getWritable().__next=f,(g.__prev=l,null===k)?h.__last=f:k.getWritable().__prev=f,g.__next=m,g.__parent=n,h.__size=i,b&&(dh(this)&&dh(g)||y(139),this.getChildren().forEach(a=>{g.append(a)})),cw(c)){d0(c);let a=c.anchor,b=c.focus;a.key===e&&cu(a,g),b.key===e&&cu(b,g)}return dT()===e&&dS(f),g}insertAfter(a,b=!0){c_(),eq(this,a);let c=this.getWritable(),d=a.getWritable(),e=d.getParent(),f=cN(),g=!1,h=!1;if(null!==e){let b=a.getIndexWithinParent();if(dQ(d),cw(f)){let a=e.__key,c=f.anchor,d=f.focus;g="element"===c.type&&c.key===a&&c.offset===b+1,h="element"===d.type&&d.key===a&&d.offset===b+1}}let i=this.getNextSibling(),j=this.getParentOrThrow().getWritable(),k=d.__key,l=c.__next;if(null===i?j.__last=k:i.getWritable().__prev=k,j.__size++,c.__next=k,d.__next=l,d.__prev=c.__key,d.__parent=c.__parent,b&&cw(f)){let a=this.getIndexWithinParent();cP(f,j,a+1);let b=j.__key;g&&f.anchor.set(b,a+2,"element"),h&&f.focus.set(b,a+2,"element")}return a}insertBefore(a,b=!0){c_(),eq(this,a);let c=this.getWritable(),d=a.getWritable(),e=d.__key;dQ(d);let f=this.getPreviousSibling(),g=this.getParentOrThrow().getWritable(),h=c.__prev,i=this.getIndexWithinParent();null===f?g.__first=e:f.getWritable().__next=e,g.__size++,c.__prev=e,d.__prev=h,d.__next=c.__key,d.__parent=c.__parent;let j=cN();return b&&cw(j)&&cP(j,this.getParentOrThrow(),i),a}isParentRequired(){return!1}createParentElementNode(){return du()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(a,b){c_();let c=this.getPreviousSibling(),d=this.getParentOrThrow();if(null===c)return d.select(0,0);if(dh(c))return c.select();if(!cm(c)){let a=c.getIndexWithinParent()+1;return d.select(a,a)}return c.select(a,b)}selectNext(a,b){c_();let c=this.getNextSibling(),d=this.getParentOrThrow();if(null===c)return d.select();if(dh(c))return c.select(0,0);if(!cm(c)){let a=c.getIndexWithinParent();return d.select(a,a)}return c.select(a,b)}markDirty(){this.getWritable()}reconcileObservedMutation(a,b){this.markDirty()}}let b0="historic",b1="history-merge";class b2 extends b_{static getType(){return"linebreak"}static clone(a){return new b2(a.__key)}constructor(a){super(a)}getTextContent(){return"\n"}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:a=>(function(a){let b=a.parentElement;if(null!==b&&ey(b)){let c=b.firstChild;if(c===a||c.nextSibling===a&&b6(c)){let c=b.lastChild;if(c===a||c.previousSibling===a&&b6(c))return!0}}return!1})(a)||function(a){let b=a.parentElement;if(null!==b&&ey(b)){let c=b.firstChild;if(c===a||c.nextSibling===a&&b6(c))return!1;let d=b.lastChild;if(d===a||d.previousSibling===a&&b6(d))return!0}return!1}(a)?null:{conversion:b3,priority:0}}}static importJSON(a){return b4().updateFromJSON(a)}}function b3(a){return{node:b4()}}function b4(){return ep(new b2)}function b5(a){return a instanceof b2}function b6(a){return dL(a)&&/^( |\t|\r?\n)+$/.test(a.textContent||"")}function b7(a,b){return 16&b?"code":128&b?"mark":32&b?"sub":64&b?"sup":null}function b8(a,b){return 1&b?"strong":2&b?"em":"span"}function b9(a,b,c,d,e){let f=d.classList,g=ec(e,"base");void 0!==g&&f.add(...g);let h=!1,i=8&b&&4&b;for(let a in void 0!==(g=ec(e,"underlineStrikethrough"))&&(8&c&&4&c?(h=!0,i||f.add(...g)):i&&f.remove(...g)),D){let d=D[a];if(void 0!==(g=ec(e,a)))if(c&d){if(h&&("underline"===a||"strikethrough"===a)){b&d&&f.remove(...g);continue}(0==(b&d)||i&&"underline"===a||"strikethrough"===a)&&f.add(...g)}else b&d&&f.remove(...g)}}function ca(a,b,c){let d=b.firstChild,e=c.isComposing(),f=a+(e?"​":"");if(null==d)b.textContent=f;else{let a=d.nodeValue;if(a!==f)if(e){let[b,c,e]=function(a,b){let c=a.length,d=b.length,e=0,f=0;for(;e<c&&e<d&&a[e]===b[e];)e++;for(;f+e<c&&f+e<d&&a[c-f-1]===b[d-f-1];)f++;return[e,c-e-f,b.slice(e,d-f)]}(a,f);0!==c&&d.deleteData(b,c),d.insertData(b,e)}else d.nodeValue=f}}function cb(a,b,c,d,e,f){ca(e,a,b);let g=f.theme.text;void 0!==g&&b9(0,0,d,a,g)}function cc(a,b){let c=document.createElement(b);return c.appendChild(a),c}class cd extends b_{__text;__format;__style;__mode;__detail;static getType(){return"text"}static clone(a){return new cd(a.__text,a.__key)}afterCloneFrom(a){super.afterCloneFrom(a),this.__text=a.__text,this.__format=a.__format,this.__style=a.__style,this.__mode=a.__mode,this.__detail=a.__detail}constructor(a="",b){super(b),this.__text=a,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){return I[this.getLatest().__mode]}getStyle(){return this.getLatest().__style}isToken(){return 1===this.getLatest().__mode}isComposing(){return this.__key===dT()}isSegmented(){return 2===this.getLatest().__mode}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(a){let b=D[a];return 0!=(this.getFormat()&b)}isSimpleText(){return"text"===this.__type&&0===this.__mode}getTextContent(){return this.getLatest().__text}getFormatFlags(a,b){return dO(this.getLatest().__format,a,b)}canHaveFormat(){return!0}isInline(){return!0}createDOM(a,b){let c=this.__format,d=b7(0,c),e=b8(0,c),f=null===d?e:d,g=document.createElement(f),h=g;this.hasFormat("code")&&g.setAttribute("spellcheck","false"),null!==d&&(h=document.createElement(e),g.appendChild(h)),cb(h,this,0,c,this.__text,a);let i=this.__style;return""!==i&&(g.style.cssText=i),g}updateDOM(a,b,c){let d=this.__text,e=a.__format,f=this.__format,g=b7(0,e),h=b7(0,f),i=b8(0,e),j=b8(0,f);if((null===g?i:g)!==(null===h?j:h))return!0;if(g===h&&i!==j){let a=b.firstChild;null==a&&y(48);let e=document.createElement(j);return cb(e,this,0,f,d,c),b.replaceChild(e,a),!1}let k=b;null!==h&&null!==g&&null==(k=b.firstChild)&&y(49),ca(d,k,this);let l=c.theme.text;void 0!==l&&e!==f&&b9(0,e,f,k,l);let m=a.__style,n=this.__style;return m!==n&&(b.style.cssText=n),!1}static importDOM(){return{"#text":()=>({conversion:ch,priority:0}),b:()=>({conversion:cf,priority:0}),code:()=>({conversion:ck,priority:0}),em:()=>({conversion:ck,priority:0}),i:()=>({conversion:ck,priority:0}),mark:()=>({conversion:ck,priority:0}),s:()=>({conversion:ck,priority:0}),span:()=>({conversion:ce,priority:0}),strong:()=>({conversion:ck,priority:0}),sub:()=>({conversion:ck,priority:0}),sup:()=>({conversion:ck,priority:0}),u:()=>({conversion:ck,priority:0})}}static importJSON(a){return cl().updateFromJSON(a)}updateFromJSON(a){return super.updateFromJSON(a).setTextContent(a.text).setFormat(a.format).setDetail(a.detail).setMode(a.mode).setStyle(a.style)}exportDOM(a){let{element:b}=super.exportDOM(a);return eu(b)||y(132),b.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?b.style.textTransform="lowercase":this.hasFormat("uppercase")?b.style.textTransform="uppercase":this.hasFormat("capitalize")&&(b.style.textTransform="capitalize"),this.hasFormat("bold")&&(b=cc(b,"b")),this.hasFormat("italic")&&(b=cc(b,"i")),this.hasFormat("strikethrough")&&(b=cc(b,"s")),this.hasFormat("underline")&&(b=cc(b,"u")),{element:b}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(a,b){}setFormat(a){let b=this.getWritable();return b.__format="string"==typeof a?D[a]:a,b}setDetail(a){let b=this.getWritable();return b.__detail="string"==typeof a?E[a]:a,b}setStyle(a){let b=this.getWritable();return b.__style=a,b}toggleFormat(a){let b=dO(this.getFormat(),a,null);return this.setFormat(b)}toggleDirectionless(){let a=this.getWritable();return a.__detail^=1,a}toggleUnmergeable(){let a=this.getWritable();return a.__detail^=2,a}setMode(a){let b=H[a];if(this.__mode===b)return this;let c=this.getWritable();return c.__mode=b,c}setTextContent(a){if(this.__text===a)return this;let b=this.getWritable();return b.__text=a,b}select(a,b){c_();let c=a,d=b,e=cN(),f=this.getTextContent(),g=this.__key;if("string"==typeof f){let a=f.length;void 0===c&&(c=a),void 0===d&&(d=a)}else c=0,d=0;if(!cw(e))return cJ(g,c,g,d,"text","text");{let a=dT();a!==e.anchor.key&&a!==e.focus.key||dS(g),e.setTextNodeRange(this,c,this,d)}return e}selectStart(){return this.select(0,0)}selectEnd(){let a=this.getTextContentSize();return this.select(a,a)}spliceText(a,b,c,d){let e=this.getWritable(),f=e.__text,g=c.length,h=a;h<0&&(h=g+h)<0&&(h=0);let i=cN();if(d&&cw(i)){let b=a+g;i.setTextNodeRange(e,b,e,b)}return e.__text=f.slice(0,h)+c+f.slice(h+b),e}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...a){let b;c_();let c=this.getLatest(),d=c.getTextContent();if(""===d)return[];let e=c.__key,f=dT(),g=d.length;a.sort((a,b)=>a-b),a.push(g);let h=[],i=a.length;for(let b=0,c=0;b<g&&c<=i;c++){let e=a[c];e>b&&(h.push(d.slice(b,e)),b=e)}let j=h.length;if(1===j)return[c];let k=h[0],l=c.getParent(),m=c.getFormat(),n=c.getStyle(),o=c.__detail,p=!1,q=null,r=null,s=cN();if(cw(s)){let[a,b]=s.isBackward()?[s.focus,s.anchor]:[s.anchor,s.focus];"text"===a.type&&a.key===e&&(q=a),"text"===b.type&&b.key===e&&(r=b)}c.isSegmented()?((b=cl(k)).__format=m,b.__style=n,b.__detail=o,b.__state=W(c,b),p=!0):b=c.setTextContent(k);let t=[b];for(let a=1;a<j;a++){let b=cl(h[a]);b.__format=m,b.__style=n,b.__detail=o,b.__state=W(c,b);let d=b.__key;f===e&&dS(d),t.push(b)}let u=q?q.offset:null,v=r?r.offset:null,w=0;for(let a of t){if(!q&&!r)break;let b=w+a.getTextContentSize();if(null!==q&&null!==u&&u<=b&&u>=w&&(q.set(a.getKey(),u-w,"text"),u<b&&(q=null)),null!==r&&null!==v&&v<=b&&v>=w){r.set(a.getKey(),v-w,"text");break}w=b}if(null!==l){let a,b;a=this.getPreviousSibling(),b=this.getNextSibling(),null!==a&&dR(a),null!==b&&dR(b);let c=l.getWritable(),d=this.getIndexWithinParent();p?(c.splice(d,0,t),this.remove()):c.splice(d,1,t),cw(s)&&cP(s,l,d,j-1)}return t}mergeWithSibling(a){let b=a===this.getPreviousSibling();b||a===this.getNextSibling()||y(50);let c=this.__key,d=a.__key,e=this.__text,f=e.length;dT()===d&&dS(c);let g=cN();if(cw(g)){let e=g.anchor,h=g.focus;null!==e&&e.key===d&&cS(e,b,c,a,f),null!==h&&h.key===d&&cS(h,b,c,a,f)}let h=a.__text,i=b?h+e:e+h;this.setTextContent(i);let j=this.getWritable();return a.remove(),j}isTextEntity(){return!1}}function ce(a){return{forChild:cn(a.style),node:null}}function cf(a){let b="normal"===a.style.fontWeight;return{forChild:cn(a.style,b?void 0:"bold"),node:null}}let cg=new WeakMap;function ch(a){null===a.parentElement&&y(129);let b=a.textContent||"";if(null!==function(a){let b,c=a.parentNode,d=[a];for(;null!==c&&void 0===(b=cg.get(c))&&!function(a){if(!eu(a))return!1;if("PRE"===a.nodeName)return!0;let b=a.style.whiteSpace;return"string"==typeof b&&b.startsWith("pre")}(c);)d.push(c),c=c.parentNode;let e=void 0===b?c:b;for(let a=0;a<d.length;a++)cg.set(d[a],e);return e}(a)){let a=b.split(/(\r?\n|\t)/),c=[],d=a.length;for(let b=0;b<d;b++){let d=a[b];"\n"===d||"\r\n"===d?c.push(b4()):"	"===d?c.push(cp()):""!==d&&c.push(cl(d))}return{node:c}}if(""===(b=b.replace(/\r/g,"").replace(/[ \t\n]+/g," ")))return{node:null};if(" "===b[0]){let c=a,d=!0;for(;null!==c&&null!==(c=ci(c,!1));){let a=c.textContent||"";if(a.length>0){/[ \t\n]$/.test(a)&&(b=b.slice(1)),d=!1;break}}d&&(b=b.slice(1))}if(" "===b[b.length-1]){let c=a,d=!0;for(;null!==c&&null!==(c=ci(c,!0));)if((c.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){d=!1;break}d&&(b=b.slice(0,b.length-1))}return""===b?{node:null}:{node:cl(b)}}function ci(a,b){let c=a;for(;;){let a;for(;null===(a=b?c.nextSibling:c.previousSibling);){let a=c.parentElement;if(null===a)return null;c=a}if(eu(c=a)){let a=c.style.display;if(""===a&&!ex(c)||""!==a&&!a.startsWith("inline"))return null}let d=c;for(;null!==(d=b?c.firstChild:c.lastChild);)c=d;if(dL(c))return c;if("BR"===c.nodeName)return null}}let cj={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function ck(a){let b=cj[a.nodeName.toLowerCase()];return void 0===b?{node:null}:{forChild:cn(a.style,b),node:null}}function cl(a=""){return ep(new cd(a))}function cm(a){return a instanceof cd}function cn(a,b){let c=a.fontWeight,d=a.textDecoration.split(" "),e="700"===c||"bold"===c,f=d.includes("line-through"),g="italic"===a.fontStyle,h=d.includes("underline"),i=a.verticalAlign;return a=>(cm(a)&&(e&&!a.hasFormat("bold")&&a.toggleFormat("bold"),f&&!a.hasFormat("strikethrough")&&a.toggleFormat("strikethrough"),g&&!a.hasFormat("italic")&&a.toggleFormat("italic"),h&&!a.hasFormat("underline")&&a.toggleFormat("underline"),"sub"!==i||a.hasFormat("subscript")||a.toggleFormat("subscript"),"super"!==i||a.hasFormat("superscript")||a.toggleFormat("superscript"),b&&!a.hasFormat(b)&&a.toggleFormat(b)),a)}class co extends cd{static getType(){return"tab"}static clone(a){return new co(a.__key)}constructor(a){super("	",a),this.__detail=2}static importDOM(){return null}createDOM(a){let b=super.createDOM(a),c=ec(a.theme,"tab");return void 0!==c&&b.classList.add(...c),b}static importJSON(a){return cp().updateFromJSON(a)}setTextContent(a){return"	"!==a&&""!==a&&z(126),super.setTextContent("	")}spliceText(a,b,c,d){return""===c&&0===b||"	"===c&&1===b||y(286),this}setDetail(a){return 2!==a&&y(127),this}setMode(a){return"normal"!==a&&y(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function cp(){return ep(new co)}function cq(a){return a instanceof co}class cr{key;offset;type;_selection;constructor(a,b,c){this._selection=null,this.key=a,this.offset=b,this.type=c}is(a){return this.key===a.key&&this.offset===a.offset&&this.type===a.type}isBefore(a){return this.key===a.key?this.offset<a.offset:0>e3(fe(e7(this,"next")),fe(e7(a,"next")))}getNode(){let a=dU(this.key);return null===a&&y(20),a}set(a,b,c,d){let e=this._selection,f=this.key;d&&this.key===a&&this.offset===b&&this.type===c||(this.key=a,this.offset=b,this.type=c,c$()||(dT()===f&&dS(a),null!==e&&(e.setCachedNodes(null),e.dirty=!0)))}}function cs(a,b,c){return new cr(a,b,c)}function ct(a,b){let c=b.__key,d=a.offset,e="element";if(cm(b)){e="text";let a=b.getTextContentSize();d>a&&(d=a)}else if(!dh(b)){let a=b.getNextSibling();if(cm(a))c=a.__key,d=0,e="text";else{let a=b.getParent();a&&(c=a.__key,d=b.getIndexWithinParent()+1)}}a.set(c,d,e)}function cu(a,b){if(dh(b)){let c=b.getLastDescendant();dh(c)||cm(c)?ct(a,c):ct(a,b)}else ct(a,b)}class cv{_nodes;_cachedNodes;dirty;constructor(a){this._cachedNodes=null,this._nodes=a,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(a){this._cachedNodes=a}is(a){if(!cy(a))return!1;let b=this._nodes,c=a._nodes;return b.size===c.size&&Array.from(b).every(a=>c.has(a))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(a){this.dirty=!0,this._nodes.add(a),this._cachedNodes=null}delete(a){this.dirty=!0,this._nodes.delete(a),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(a){return this._nodes.has(a)}clone(){return new cv(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(a){}insertText(){}insertNodes(a){let b,c=this.getNodes(),d=c.length,e=c[d-1];if(cm(e))b=e.select();else{let a=e.getIndexWithinParent()+1;b=e.getParentOrThrow().select(a,a)}b.insertNodes(a);for(let a=0;a<d;a++)c[a].remove()}getNodes(){let a=this._cachedNodes;if(null!==a)return a;let b=this._nodes,c=[];for(let a of b){let b=dU(a);null!==b&&c.push(b)}return c$()||(this._cachedNodes=c),c}getTextContent(){let a=this.getNodes(),b="";for(let c=0;c<a.length;c++)b+=a[c].getTextContent();return b}deleteNodes(){let a=this.getNodes();if((cN()||cO())===this&&a[0]){var b;let c,d,e=eV(a[0],"next");b=e1(e,e),e9(d=cw(c=cN())?c:cK(),b),d0(d)}for(let b of a)b.remove()}}function cw(a){return a instanceof cx}class cx{format;style;anchor;focus;_cachedNodes;dirty;constructor(a,b,c,d){this.anchor=a,this.focus=b,a._selection=this,b._selection=this,this._cachedNodes=null,this.format=c,this.style=d,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(a){this._cachedNodes=a}is(a){return!!cw(a)&&this.anchor.is(a.anchor)&&this.focus.is(a.focus)&&this.format===a.format&&this.style===a.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){let a=this._cachedNodes;if(null!==a)return a;let b=function(a){let b=[],[c,d]=a.getTextSlices();c&&b.push(c.caret.origin);let e=new Set,f=new Set;for(let c of a)if(eR(c)){let{origin:a}=c;0===b.length?e.add(a):(f.add(a),b.push(a))}else{let{origin:a}=c;dh(a)&&f.has(a)||b.push(a)}if(d&&b.push(d.caret.origin),eQ(a.focus)&&dh(a.focus.origin)&&null===a.focus.getNodeAtCaret())for(let c=eY(a.focus.origin,"previous");eR(c)&&e.has(c.origin)&&!c.origin.isEmpty()&&c.origin.is(b[b.length-1]);c=eZ(c))e.delete(c.origin),b.pop();for(;b.length>1;){let a=b[b.length-1];if(!dh(a)||f.has(a)||a.isEmpty()||e.has(a))break;b.pop()}if(0===b.length&&a.isCollapsed()){let c=fe(a.anchor),d=fe(a.anchor.getFlipped()),e=a=>eP(a)?a.origin:a.getNodeAtCaret(),f=e(c)||e(d)||(a.anchor.getNodeAtCaret()?c.origin:d.origin);b.push(f)}return b}(fh(fa(this),"next"));return c$()||(this._cachedNodes=b),b}setTextNodeRange(a,b,c,d){this.anchor.set(a.__key,b,"text"),this.focus.set(c.__key,d,"text")}getTextContent(){let a=this.getNodes();if(0===a.length)return"";let b=a[0],c=a[a.length-1],d=this.anchor,e=this.focus,f=d.isBefore(e),[g,h]=cA(this),i="",j=!0;for(let k=0;k<a.length;k++){let l=a[k];if(dh(l)&&!l.isInline())j||(i+="\n"),j=!l.isEmpty();else if(j=!1,cm(l)){let a=l.getTextContent();l===b?l===c?"element"===d.type&&"element"===e.type&&e.offset!==d.offset||(a=g<h?a.slice(g,h):a.slice(h,g)):a=f?a.slice(g):a.slice(h):l===c&&(a=f?a.slice(0,h):a.slice(0,g)),i+=a}else!dk(l)&&!b5(l)||l===c&&this.isCollapsed()||(i+=l.getTextContent())}return i}applyDOMRange(a){let b=c2(),c=b.getEditorState()._selection,d=cH(a.startContainer,a.startOffset,a.endContainer,a.endOffset,b,c);if(null===d)return;let[e,f]=d;this.anchor.set(e.key,e.offset,e.type,!0),this.focus.set(f.key,f.offset,f.type,!0),$(this)}clone(){let a=this.anchor,b=this.focus;return new cx(cs(a.key,a.offset,a.type),cs(b.key,b.offset,b.type),this.format,this.style)}toggleFormat(a){this.format=dO(this.format,a,null),this.dirty=!0}setFormat(a){this.format=a,this.dirty=!0}setStyle(a){this.style=a,this.dirty=!0}hasFormat(a){let b=D[a];return 0!=(this.format&b)}insertRawText(a){let b=a.split(/(\r?\n|\t)/),c=[],d=b.length;for(let a=0;a<d;a++){let d=b[a];"\n"===d||"\r\n"===d?c.push(b4()):"	"===d?c.push(cp()):c.push(cl(d))}this.insertNodes(c)}insertText(a){let b=this.anchor,c=this.focus,d=this.format,e=this.style,f=b,g=c;!this.isCollapsed()&&c.isBefore(b)&&(f=c,g=b),"element"===f.type&&function(a,b,c,d){let e=a.getNode(),f=e.getChildAtIndex(a.offset),g=cl();if(g.setFormat(c),g.setStyle(d),dv(f))f.splice(0,0,[g]);else{let a=dm(e)?du().append(g):g;null===f?e.append(a):f.insertBefore(a)}a.is(b)&&b.set(g.__key,0,"text"),a.set(g.__key,0,"text")}(f,g,d,e),"element"===g.type&&e8(g,fe(e7(g,"next")));let h=f.offset,i=g.offset,j=this.getNodes(),k=j.length,l=j[0];cm(l)||y(26);let m=l.getTextContent().length,n=l.getParentOrThrow(),o=j[k-1];if(1===k&&"element"===g.type&&(i=m,g.set(f.key,i,"text")),this.isCollapsed()&&h===m&&(dK(l)||!l.canInsertTextAfter()||!n.canInsertTextAfter()&&null===l.getNextSibling())){let b=l.getNextSibling();if(cm(b)&&b.canInsertTextBefore()&&!dK(b)||((b=cl()).setFormat(d),b.setStyle(e),n.canInsertTextAfter()?l.insertAfter(b):n.insertAfter(b)),b.select(0,0),l=b,""!==a)return void this.insertText(a)}else if(this.isCollapsed()&&0===h&&(dK(l)||!l.canInsertTextBefore()||!n.canInsertTextBefore()&&null===l.getPreviousSibling())){let b=l.getPreviousSibling();if(cm(b)&&!dK(b)||((b=cl()).setFormat(d),n.canInsertTextBefore()?l.insertBefore(b):n.insertBefore(b)),b.select(),l=b,""!==a)return void this.insertText(a)}else if(l.isSegmented()&&h!==m){let a=cl(l.getTextContent());a.setFormat(d),l.replace(a),l=a}else if(!this.isCollapsed()&&""!==a){let b=o.getParent();if(!n.canInsertTextBefore()||!n.canInsertTextAfter()||dh(b)&&(!b.canInsertTextBefore()||!b.canInsertTextAfter()))return this.insertText(""),cG(this.anchor,this.focus,null),void this.insertText(a)}if(1===k){if(dJ(l)){let b=cl(a);return b.select(),void l.replace(b)}let b=l.getFormat(),c=l.getStyle();if(h!==i||b===d&&c===e){if(cq(l)){let b=cl(a);return b.setFormat(d),b.setStyle(e),b.select(),void l.replace(b)}}else{if(""!==l.getTextContent()){let b=cl(a);if(b.setFormat(d),b.setStyle(e),b.select(),0===h)l.insertBefore(b,!1);else{let[a]=l.splitText(h);a.insertAfter(b,!1)}return void(b.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=a.length))}l.setFormat(d),l.setStyle(e)}let f=i-h;""===(l=l.spliceText(h,f,a,!0)).getTextContent()?l.remove():"text"===this.anchor.type&&(l.isComposing()?this.anchor.offset-=a.length:(this.format=b,this.style=c))}else{let b=new Set([...l.getParentKeys(),...o.getParentKeys()]),c=dh(l)?l:l.getParentOrThrow(),d=dh(o)?o:o.getParentOrThrow(),e=o;if(!c.is(d)&&d.isInline())do e=d,d=d.getParentOrThrow();while(d.isInline())if("text"===g.type&&(0!==i||""===o.getTextContent())||"element"===g.type&&o.getIndexWithinParent()<i)if(cm(o)&&!dJ(o)&&i!==o.getTextContentSize()){if(o.isSegmented()){let a=cl(o.getTextContent());o.replace(a),o=a}dm(g.getNode())||"text"!==g.type||(o=o.spliceText(0,i,"")),b.add(o.__key)}else{let a=o.getParentOrThrow();a.canBeEmpty()||1!==a.getChildrenSize()?o.remove():a.remove()}else b.add(o.__key);let f=d.getChildren(),n=new Set(j),p=c.is(d),q=c.isInline()&&null===l.getNextSibling()?c:l;for(let a=f.length-1;a>=0;a--){let b=f[a];if(b.is(l)||dh(b)&&b.isParentOf(l))break;b.isAttached()&&(!n.has(b)||b.is(e)?p||q.insertAfter(b,!1):b.remove())}if(!p){let a=d,c=null;for(;null!==a;){let d=a.getChildren(),e=d.length;(0===e||d[e-1].is(c))&&(b.delete(a.__key),c=a),a=a.getParent()}}if(dJ(l))if(h===m)l.select();else{let b=cl(a);b.select(),l.replace(b)}else""===(l=l.spliceText(h,m-h,a,!0)).getTextContent()?l.remove():l.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=a.length);for(let a=1;a<k;a++){let c=j[a],d=c.__key;b.has(d)||c.remove()}}}removeText(){let a=cN()===this;e9(this,function(a,b="removeEmptySlices"){let c,d;if(a.isCollapsed())return a;let e="root",f="next",g=b,h=fh(a,f),i=fc(h.anchor,e),j=fc(h.focus.getFlipped(),e),k=new Set,l=[];for(let a of h.iterNodeCarets(e))if(eR(a))k.add(a.origin.getKey());else if(eQ(a)){let{origin:b}=a;dh(b)&&!k.has(b.getKey())||l.push(b)}for(let a of l)a.remove();for(let a of h.getTextSlices()){if(!a)continue;let{origin:b}=a.caret,c=b.getTextContentSize(),d=fb(eV(b,f)),e=b.getMode();if(Math.abs(a.distance)===c&&"removeEmptySlices"===g||"token"===e&&0!==a.distance)d.remove();else if(0!==a.distance){g="removeEmptySlices";let b=a.removeTextSlice(),c=a.caret.origin;if("segmented"===e){let a=b.origin,c=cl(a.getTextContent()).setStyle(a.getStyle()).setFormat(a.getFormat());d.replaceOrInsert(c),b=eW(c,f,b.offset)}c.is(i[0].origin)&&(i[0]=b),c.is(j[0].origin)&&(j[0]=b.getFlipped())}}for(let a of i)if(fd(a)){c=fe(a);break}for(let a of j)if(fd(a)){d=fe(a);break}let m=function(a,b,c){let d;if(!a||!b)return null;let e=a.getParentAtCaret(),f=b.getParentAtCaret();if(!e||!f)return null;let g=e.getParents().reverse();g.push(e);let h=f.getParents().reverse();h.push(f);let i=Math.min(g.length,h.length);for(d=0;d<i&&g[d]===h[d];d++);let j=(a,b)=>{let c;for(let e=d;e<a.length;e++){let d=a[e];if(eo(d))return;!c&&b(d)&&(c=d)}return c},k=j(g,ez),l=k&&j(h,a=>c.has(a.getKey())&&ez(a));return k&&l?[k,l]:null}(c,d,k);if(m){let[a,b]=m;eY(a,"previous").splice(0,b.getChildren()),b.remove()}let n=[c,d,...i,...j].find(fd);if(n){var o;return e1(o=fg(fe(n),a.direction),o)}y(269,JSON.stringify(i.map(a=>a.origin.__key)))}(fa(this))),a&&cN()!==this&&d0(this)}formatText(a,b=null){if(this.isCollapsed())return this.toggleFormat(a),void dS(null);let c=this.getNodes(),d=[];for(let a of c)cm(a)&&d.push(a);let e=b=>{c.forEach(c=>{if(dh(c)){let d=c.getFormatFlags(a,b);c.setTextFormat(d)}})},f=d.length;if(0===f)return this.toggleFormat(a),dS(null),void e(b);let g=this.anchor,h=this.focus,i=this.isBackward(),j=i?h:g,k=i?g:h,l=0,m=d[0],n="element"===j.type?0:j.offset;if("text"===j.type&&n===m.getTextContentSize()&&(l=1,m=d[1],n=0),null==m)return;let o=m.getFormatFlags(a,b);e(o);let p=f-1,q=d[p],r="text"===k.type?k.offset:q.getTextContentSize();if(m.is(q)){if(n===r)return;if(dK(m)||0===n&&r===m.getTextContentSize())m.setFormat(o);else{let a=m.splitText(n,r),b=0===n?a[0]:a[1];b.setFormat(o),"text"===j.type&&j.set(b.__key,0,"text"),"text"===k.type&&k.set(b.__key,r-n,"text")}return void(this.format=o)}0===n||dK(m)||([,m]=m.splitText(n),n=0),m.setFormat(o);let s=q.getFormatFlags(a,o);r>0&&(r===q.getTextContentSize()||dK(q)||([q]=q.splitText(r)),q.setFormat(s));for(let b=l+1;b<p;b++){let c=d[b],e=c.getFormatFlags(a,s);c.setFormat(e)}"text"===j.type&&j.set(m.__key,n,"text"),"text"===k.type&&k.set(q.__key,r,"text"),this.format=o|s}insertNodes(a){var b;if(0===a.length)return;if(this.isCollapsed()||this.removeText(),"root"===this.anchor.key){this.insertParagraph();let b=cN();return cw(b)||y(134),b.insertNodes(a)}let c=(this.isBackward()?this.focus:this.anchor).getNode(),d=eH(c,ez),e=a[a.length-1];if(dh(d)&&"__language"in d){if("__language"in a[0])this.insertText(a[0].getTextContent());else{let b=cT(this);d.splice(b,0,a),e.selectEnd()}return}if(!a.some(a=>(dh(a)||dk(a))&&!a.isInline())){dh(d)||y(211,c.constructor.name,c.getType());let b=cT(this);return d.splice(b,0,a),void e.selectEnd()}let f=function(a){let b=du(),c=null;for(let d=0;d<a.length;d++){let e=a[d],f=b5(e);if(f||dk(e)&&e.isInline()||dh(e)&&e.isInline()||cm(e)||e.isParentRequired()){if(null===c&&(c=e.createParentElementNode(),b.append(c),f))continue;null!==c&&c.append(e)}else b.append(e),c=null}return b}(a),g=f.getLastDescendant(),h=f.getChildren(),i=dh(d)&&d.isEmpty()?null:this.insertParagraph(),j=h[h.length-1],k=h[0];dh(b=k)&&ez(b)&&!b.isEmpty()&&dh(d)&&(!d.isEmpty()||d.canMergeWhenEmpty())&&(dh(d)||y(211,c.constructor.name,c.getType()),d.append(...k.getChildren()),k=h[1]),k&&(null===d&&y(212,c.constructor.name,c.getType()),function(a,b){let c=b.getParentOrThrow().getLastChild(),d=b,e=[b];for(;d!==c;)d.getNextSibling()||y(140),e.push(d=d.getNextSibling());let f=a;for(let a of e)f=f.insertAfter(a)}(d,k));let l=eH(g,ez);i&&dh(l)&&(i.canMergeWhenEmpty()||ez(j))&&(l.append(...i.getChildren()),i.remove()),dh(d)&&d.isEmpty()&&d.remove(),g.selectEnd();let m=dh(d)?d.getLastChild():null;b5(m)&&l!==d&&m.remove()}insertParagraph(){if("root"===this.anchor.key){let a=du();return d$().splice(this.anchor.offset,0,[a]),a.select(),a}let a=cT(this),b=eH(this.anchor.getNode(),ez);dh(b)||y(213);let c=b.getChildAtIndex(a),d=c?[c,...c.getNextSiblings()]:[],e=b.insertNewAfter(this,!1);return e?(e.append(...d),e.selectStart(),e):null}insertLineBreak(a){let b=b4();if(this.insertNodes([b]),a){let a=b.getParentOrThrow(),c=b.getIndexWithinParent();a.select(c,c)}}extract(){let a=[...this.getNodes()],b=a.length,c=a[0],d=a[b-1],[e,f]=cA(this),g=this.isBackward(),[h,i]=g?[this.focus,this.anchor]:[this.anchor,this.focus],[j,k]=g?[f,e]:[e,f];if(0===b)return[];if(1===b){if(cm(c)&&!this.isCollapsed()){let a=c.splitText(j,k),b=0===j?a[0]:a[1];return b?(h.set(b.getKey(),0,"text"),i.set(b.getKey(),b.getTextContentSize(),"text"),[b]):[]}return[c]}if(cm(c)&&(j===c.getTextContentSize()?a.shift():0!==j&&([,c]=c.splitText(j),a[0]=c,h.set(c.getKey(),0,"text"))),cm(d)){let b=d.getTextContent().length;0===k?a.pop():k!==b&&([d]=d.splitText(k),a[a.length-1]=d,i.set(d.getKey(),d.getTextContentSize(),"text"))}return a}modify(a,b,c){var d;(function(a,b,c,d,e="decorators-and-blocks"){if("move"===b&&"character"===d&&!a.isCollapsed()){let[b,d]=c===a.isBackward()?[a.focus,a.anchor]:[a.anchor,a.focus];return d.set(b.key,b.offset,b.type),!0}let f=e7(a.focus,c?"previous":"next"),g="lineboundary"===d,h="move"===b,i=f,j="decorators-and-blocks"===e;if(!ff(i)){for(let a of i){j=!1;let{origin:b}=a;if(!dk(b)||b.isIsolated()||(i=a,!g||!b.isInline()))break}if(j)for(let a of e0(f).iterNodeCarets("extend"===b?"shadowRoot":"root")){if(eR(a))a.origin.isInline()||(i=a);else{if(dh(a.origin))continue;dk(a.origin)&&!a.origin.isInline()&&(i=a)}break}}if(i===f)return!1;if(h&&!g&&dk(i.origin)&&i.origin.isKeyboardSelectable()){let a=cL();return a.add(i.origin.getKey()),d0(a),!0}return i=fe(i),h&&e8(a.anchor,i),e8(a.focus,i),j||!g})(this,a,b,c)||(d=en(c2()))}forwardDeletion(a,b,c){if(!c&&("element"===a.type&&dh(b)&&a.offset===b.getChildrenSize()||"text"===a.type&&a.offset===b.getTextContentSize())){let a=b.getParent(),c=b.getNextSibling()||(null===a?null:a.getNextSibling());if(dh(c)&&c.isShadowRoot())return!0}return!1}deleteCharacter(a){let b=this.isCollapsed();if(this.isCollapsed()){let b=this.anchor,c=b.getNode();if(this.forwardDeletion(b,c,a))return;let d=e0(e7(b,a?"previous":"next"));if(d.getTextSlices().every(a=>null===a||0===a.distance)){let a={type:"initial"};for(let b of d.iterNodeCarets("shadowRoot"))if(eR(b))if(b.origin.isInline());else{if(b.origin.isShadowRoot()){if("merge-block"===a.type)break;if(dh(d.anchor.origin)&&d.anchor.origin.isEmpty()){let a=fe(b);e9(this,e1(a,a)),d.anchor.origin.remove()}return}"merge-next-block"!==a.type&&"merge-block"!==a.type||(a={block:a.block,caret:b,type:"merge-block"})}else{if("merge-block"===a.type)break;if(eQ(b)){if(dh(b.origin)){if(b.origin.isInline()){if(!b.origin.isParentOf(d.anchor.origin))break}else a={block:b.origin,type:"merge-next-block"};continue}if(dk(b.origin)){if(b.origin.isIsolated());else if("merge-next-block"===a.type&&(b.origin.isKeyboardSelectable()||!b.origin.isInline())&&dh(d.anchor.origin)&&d.anchor.origin.isEmpty()){d.anchor.origin.remove();let a=cL();a.add(b.origin.getKey()),d0(a)}else b.origin.remove();return}break}}if("merge-block"===a.type){let{caret:b,block:c}=a;return e9(this,e1(!b.origin.isEmpty()&&c.isEmpty()?fb(eV(c,b.direction)):d.anchor,b)),this.removeText()}}let e=this.focus;if(this.modify("extend",a,"character"),this.isCollapsed()){if(a&&0===b.offset&&cB(this,b.getNode()))return}else{let d="text"===e.type?e.getNode():null;if(c="text"===b.type?b.getNode():null,null!==d&&d.isSegmented()){let b=e.offset,f=d.getTextContentSize();if(d.is(c)||a&&b!==f||!a&&0!==b)return void cD(d,a,b)}else if(null!==c&&c.isSegmented()){let e=b.offset,f=c.getTextContentSize();if(c.is(d)||a&&0!==e||!a&&e!==f)return void cD(c,a,e)}!function(a,b){let c=a.anchor,d=a.focus,e=c.getNode();if(e===d.getNode()&&"text"===c.type&&"text"===d.type){var f;let a=c.offset,g=d.offset,h=a<g,i=h?a:g,j=h?g:a,k=j-1;i===k||d2(f=e.getTextContent().slice(i,j))||cC(f)||(b?d.set(d.key,k,d.type):c.set(c.key,k,c.type))}}(this,a)}}if(this.removeText(),a&&!b&&this.isCollapsed()&&"element"===this.anchor.type&&0===this.anchor.offset){let a=this.anchor.getNode();a.isEmpty()&&dm(a.getParent())&&null===a.getPreviousSibling()&&cB(this,a)}}deleteLine(a){this.isCollapsed()&&this.modify("extend",a,"lineboundary"),this.isCollapsed()?this.deleteCharacter(a):this.removeText()}deleteWord(a){if(this.isCollapsed()){let b=this.anchor,c=b.getNode();if(this.forwardDeletion(b,c,a))return;this.modify("extend",a,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function cy(a){return a instanceof cv}function cz(a){let b=a.offset;if("text"===a.type)return b;let c=a.getNode();return b===c.getChildrenSize()?c.getTextContent().length:0}function cA(a){let b=a.getStartEndPoints();if(null===b)return[0,0];let[c,d]=b;return"element"===c.type&&"element"===d.type&&c.key===d.key&&c.offset===d.offset?[0,0]:[cz(c),cz(d)]}function cB(a,b){for(let c=b;c;c=c.getParent()){if(dh(c)){if(c.collapseAtStart(a))return!0;if(eo(c))break}if(c.getPreviousSibling())break}return!1}let cC=(()=>{try{let a=RegExp("\\p{Emoji}","u"),b=a.test.bind(a);if(b("❤️")&&b("#️⃣")&&b("👍"))return b}catch(a){}return()=>!1})();function cD(a,b,c){let d=a.getTextContent().split(/(?=\s)/g),e=d.length,f=0,g=0;for(let a=0;a<e;a++){let h=a===e-1;if(g=f,f+=d[a].length,b&&f===c||f>c||h){d.splice(a,1),h&&(g=void 0);break}}let h=d.join("").trim();""===h?a.remove():(a.setTextContent(h),a.select(g,g))}function cE(a,b,c,d){let e,f=b;if(eu(a)){let g=!1,h=a.childNodes,i=h.length,j=d._blockCursorElement;f===i&&(g=!0,f=i-1);let k=h[f],l=!1;if(k===j)k=h[f+1],l=!0;else if(null!==j){let c=j.parentNode;a===c&&b>Array.prototype.indexOf.call(c.children,j)&&f--}if(cm(e=d1(k)))f=eX(e,g?"next":"previous");else{let h=d1(a);if(null===h)return null;if(dh(h)){let i,j=d.getElementByKey(h.getKey());null===j&&y(214);let k=h.getDOMSlot(j);[h,f]=k.resolveChildIndex(h,j,a,b),dh(h)||y(215),g&&f>=h.getChildrenSize()&&(f=Math.max(0,h.getChildrenSize()-1));let m=h.getChildAtIndex(f);if(dh(m)&&(i=m.getParent(),null===c||null===i||!i.canBeEmpty()||i!==c.getNode())){let a=g?m.getLastDescendant():m.getFirstDescendant();h=null===a||dh(m=a)?m:m.getParentOrThrow(),f=0}cm(m)?(e=m,h=null,f=eX(m,g?"next":"previous")):m!==h&&g&&!l&&(dh(h)||y(216),f=Math.min(h.getChildrenSize(),f+1))}else{let c=h.getIndexWithinParent();f=0===b&&dk(h)&&d1(a)===h?c:c+1,h=h.getParentOrThrow()}if(dh(h))return cs(h.__key,f,"element")}}else e=d1(a);return cm(e)?cs(e.__key,eX(e,f,"clamp"),"text"):null}function cF(a,b,c){let d=a.offset,e=a.getNode();if(0===d){let d=e.getPreviousSibling(),f=e.getParent();if(b){if((c||!b)&&null===d&&dh(f)&&f.isInline()){let b=f.getPreviousSibling();cm(b)&&a.set(b.__key,b.getTextContent().length,"text")}}else dh(d)&&!c&&d.isInline()?a.set(d.__key,d.getChildrenSize(),"element"):cm(d)&&a.set(d.__key,d.getTextContent().length,"text")}else if(d===e.getTextContent().length){let d=e.getNextSibling(),f=e.getParent();if(b&&dh(d)&&d.isInline())a.set(d.__key,0,"element");else if((c||b)&&null===d&&dh(f)&&f.isInline()&&!f.canInsertTextAfter()){let b=f.getNextSibling();cm(b)&&a.set(b.__key,0,"text")}}}function cG(a,b,c){if("text"===a.type&&"text"===b.type){let d=a.isBefore(b),e=a.is(b);cF(a,d,e),cF(b,!d,e),e&&b.set(a.key,a.offset,a.type);let f=c2();if(f.isComposing()&&f._compositionKey!==a.key&&cw(c)){let d=c.anchor,e=c.focus;a.set(d.key,d.offset,d.type,!0),b.set(e.key,e.offset,e.type,!0)}}}function cH(a,b,c,d,e,f){if(null===a||null===c||!dF(e,a,c))return null;let g=cE(a,b,cw(f)?f.anchor:null,e);if(null===g)return null;let h=cE(c,d,cw(f)?f.focus:null,e);if(null===h)return null;if("element"===g.type&&"element"===h.type){let b=d1(a),d=d1(c);if(dk(b)&&dk(d))return null}return cG(g,h,f),[g,h]}function cI(a){return dh(a)&&!a.isInline()}function cJ(a,b,c,d,e,f){let g=c1(),h=new cx(cs(a,b,e),cs(c,d,f),0,"");return h.dirty=!0,g._selection=h,h}function cK(){return new cx(cs("root",0,"element"),cs("root",0,"element"),0,"")}function cL(){return new cv(new Set)}function cM(a,b,c,d){let e,f,g,h,i=c._window;if(null===i)return null;let j=d||i.event,k=j?j.type:void 0,l="selectionchange"===k,m=!K&&(l||"beforeinput"===k||"compositionstart"===k||"compositionend"===k||"click"===k&&j&&3===j.detail||"drop"===k||void 0===k);if(cw(a)&&!m)return a.clone();if(null===b)return null;if(e=b.anchorNode,f=b.focusNode,g=b.anchorOffset,h=b.focusOffset,(l||void 0===k)&&cw(a)&&!dF(c,e,f))return a.clone();let n=cH(e,g,f,h,c,a);if(null===n)return null;let[o,p]=n;return new cx(o,p,cw(a)?a.format:0,cw(a)?a.style:"")}function cN(){return c1()._selection}function cO(){return c2()._editorState._selection}function cP(a,b,c,d=1){let e=a.anchor,f=a.focus,g=e.getNode(),h=f.getNode();if(!b.is(g)&&!b.is(h))return;let i=b.__key;if(a.isCollapsed()){let b=e.offset;if(c<=b&&d>0||c<b&&d<0){let c=Math.max(0,b+d);e.set(i,c,"element"),f.set(i,c,"element"),cQ(a)}}else{let g=a.isBackward(),h=g?f:e,j=h.getNode(),k=g?e:f,l=k.getNode();if(b.is(j)){let a=h.offset;(c<=a&&d>0||c<a&&d<0)&&h.set(i,Math.max(0,a+d),"element")}if(b.is(l)){let a=k.offset;(c<=a&&d>0||c<a&&d<0)&&k.set(i,Math.max(0,a+d),"element")}}cQ(a)}function cQ(a){let b=a.anchor,c=b.offset,d=a.focus,e=d.offset,f=b.getNode(),g=d.getNode();if(a.isCollapsed()){if(!dh(f))return;let a=f.getChildrenSize(),e=c>=a,g=e?f.getChildAtIndex(a-1):f.getChildAtIndex(c);if(cm(g)){let a=0;e&&(a=g.getTextContentSize()),b.set(g.__key,a,"text"),d.set(g.__key,a,"text")}return}if(dh(f)){let a=f.getChildrenSize(),d=c>=a,e=d?f.getChildAtIndex(a-1):f.getChildAtIndex(c);if(cm(e)){let a=0;d&&(a=e.getTextContentSize()),b.set(e.__key,a,"text")}}if(dh(g)){let a=g.getChildrenSize(),b=e>=a,c=b?g.getChildAtIndex(a-1):g.getChildAtIndex(e);if(cm(c)){let a=0;b&&(a=c.getTextContentSize()),d.set(c.__key,a,"text")}}}function cR(a,b,c,d,e){let f=null,g=0,h=null;null!==d?(f=d.__key,cm(d)?(g=d.getTextContentSize(),h="text"):dh(d)&&(g=d.getChildrenSize(),h="element")):null!==e&&(f=e.__key,cm(e)?h="text":dh(e)&&(h="element")),null!==f&&null!==h?a.set(f,g,h):(-1===(g=b.getIndexWithinParent())&&(g=c.getChildrenSize()),a.set(c.__key,g,"element"))}function cS(a,b,c,d,e){"text"===a.type?a.set(c,a.offset+(b?0:e),"text"):a.offset>d.getIndexWithinParent()&&a.set(a.key,a.offset-1,"element")}function cT(a){let b=a;a.isCollapsed()||b.removeText();let c=cN();cw(c)&&(b=c),cw(b)||y(161);let d=b.anchor,e=d.getNode(),f=d.offset;for(;!ez(e);){let a=e;if([e,f]=function(a,b){let c=a.getParent();if(!c){let a=du();return d$().append(a),a.select(),[d$(),0]}if(cm(a)){let d=a.splitText(b);if(0===d.length)return[c,a.getIndexWithinParent()];let e=+(0!==b);return[c,d[0].getIndexWithinParent()+e]}if(!dh(a)||0===b)return[c,a.getIndexWithinParent()];let d=a.getChildAtIndex(b);if(d){let c=new cx(cs(a.__key,b,"element"),cs(a.__key,b,"element"),0,""),e=a.insertNewAfter(c);e&&e.append(d,...d.getNextSiblings())}return[c,a.getIndexWithinParent()+1]}(e,f),a.is(e))break}return f}let cU=null,cV=null,cW=!1,cX=!1,cY=0,cZ={characterData:!0,childList:!0,subtree:!0};function c$(){return cW||null!==cU&&cU._readOnly}function c_(){cW&&y(13)}function c0(){cY>99&&y(14)}function c1(){return null===cU&&y(195,c3()),cU}function c2(){return null===cV&&y(196,c3()),cV}function c3(){let a=new Set,b=dy.version,c=` Detected on the page: 0 compatible editor(s) with version ${b}`;return a.size&&(c+=` and incompatible editors with versions ${Array.from(a).join(", ")}`),c}function c4(a,b,c){let d=b.__type,e=dB(a,d),f=c.get(d);void 0===f&&(f=Array.from(e.transforms),c.set(d,f));let g=f.length;for(let a=0;a<g&&(f[a](b),b.isAttached());a++);}function c5(a,b){return void 0!==a&&a.__key!==b&&a.isAttached()}function c6(a,b){if(!b)return;let c=a._updateTags,d=b;for(let a of(Array.isArray(b)||(d=[b]),d))c.add(a)}function c7(a,b){let c=a.type,d=b.get(c);void 0===d&&y(17,c);let e=d.klass;a.type!==e.getType()&&y(18,e.name);let f=e.importJSON(a),g=a.children;if(dh(f)&&Array.isArray(g))for(let a=0;a<g.length;a++){let c=c7(g[a],b);f.append(c)}return f}function c8(a,b,c){let d=cU,e=cW,f=cV;cU=b,cW=!0,cV=a;try{return c()}finally{cU=d,cW=e,cV=f}}function c9(a,b){var c;let d,e,f=a._pendingEditorState,g=a._rootElement,h=a._headless||null===g;if(null===f)return;let i=a._editorState,j=i._selection,k=f._selection,l=0!==a._dirtyType,m=cU,n=cW,o=cV,p=a._updating,q=a._observer,r=null;if(a._pendingEditorState=null,a._editorState=f,!h&&l&&null!==q){cV=a,cU=f,cW=!1,a._updating=!0;try{let b,c=a._dirtyType,d=a._dirtyElements,e=a._dirtyLeaves;q.disconnect(),ak="",an="",ao=2===c,ab=a,aa=a._config,ac=a._nodes,ad=ab._listeners.mutation,ae=d,af=e,ag=i._nodeMap,ah=f._nodeMap,ap=f._readOnly,ai=new Map(a._keyToDOMMap),aj=b=new Map,function a(b,c){let d=ag.get(b),e=ah.get(b);void 0!==d&&void 0!==e||y(61);let f=ao||af.has(b)||ae.has(b),g=ei(ab,b);if(d===e&&!f){if(dh(d)){let a=g.__lexicalTextContent;void 0!==a&&(ak+=a,an+=a)}else{let a=d.getTextContent();an+=a,ak+=a}return g}if(d!==e&&f&&ed(aj,ac,ad,e,"updated"),e.updateDOM(d,g,aa)){let a=aw(b,null);return null===c&&y(62),c.replaceChild(a,g),aq(b,null),a}if(dh(d)&&dh(e)){let b=e.__indent;(ao||b!==d.__indent)&&at(g,b);let c=e.__format;if((ao||c!==d.__format)&&au(g,c),f&&(function(b,c,d){al=null,am=null,function(b,c,d){let e=ak,f=b.__size,g=c.__size;ak="";let h=d.element;if(1===f&&1===g){let d=b.__first,e=c.__first;if(d===e)a(d,h);else{let a=aD(d),b=aw(e,null);try{h.replaceChild(b,a)}catch(c){if("object"==typeof c&&null!=c)throw Error(`${c.toString()} Parent: ${h.tagName}, new child: {tag: ${b.tagName} key: ${e}}, old child: {tag: ${a.tagName}, key: ${d}}.`);throw c}aq(d,null)}let f=ah.get(e);cm(f)&&null===al&&(al=f.getFormat(),am=f.getStyle())}else{let e=aA(b,ag),i=aA(c,ah);if(e.length!==f&&y(227),i.length!==g&&y(228),0===f)0!==g&&ax(i,c,0,g-1,d);else if(0===g){if(0!==f){let a=null==d.after&&null==d.before&&null==d.element.__lexicalLineBreak;ar(e,0,f-1,a?null:h),a&&(h.textContent="")}}else!function(b,c,d,e,f,g){let h=e-1,i=f-1,j,k,l=g.getFirstChild(),m=0,n=0;for(;m<=h&&n<=i;){let b=c[m],e=d[n];if(b===e)l=aC(a(e,g.element)),m++,n++;else{void 0===j&&(j=new Set(c)),void 0===k&&(k=new Set(d));let f=k.has(b),h=j.has(e);if(f)if(h){let b=ei(ab,e);b===l?l=aC(a(e,g.element)):(g.withBefore(l).insertChild(b),a(e,g.element)),m++,n++}else aw(e,g.withBefore(l)),n++;else l=aC(aD(b)),aq(b,g.element),m++}let f=ah.get(e);null!==f&&cm(f)&&null===al&&(al=f.getFormat(),am=f.getStyle())}let o=m>h,p=n>i;if(o&&!p){let a=d[i+1],c=void 0===a?null:ab.getElementByKey(a);ax(d,b,n,i,g.withBefore(c))}else p&&!o&&ar(c,m,h,g.element)}(c,e,i,f,g,d)}eh(c)&&(ak+="\n\n"),h.__lexicalTextContent=ak,ak=e+ak}(b,c,c.getDOMSlot(d)),null==al||al===c.__textFormat||ap||c.setTextFormat(al),null==am||am===c.__textStyle||ap||c.setTextStyle(am)}(d,e,g),dm(e)||e.isInline()||az(d,e,g)),eh(e)&&(ak+="\n\n",an+="\n\n"),(ao||e.__dir!==d.__dir)&&(av(g,e),dm(e)&&!ao))for(let a of e.getChildren())dh(a)&&av(ei(ab,a.getKey()),a)}else{let a=e.getTextContent();if(dk(e)){let a=e.decorate(ab,aa);null!==a&&aB(b,a)}ak+=a,an+=a}if(!ap&&dm(e)&&e.__cachedText!==an){let a=e.getWritable();a.__cachedText=an,e=a}return g}("root",null),ab=void 0,ac=void 0,ae=void 0,af=void 0,ag=void 0,ah=void 0,aa=void 0,ai=void 0,aj=void 0,r=b}catch(b){if(b instanceof Error&&a._onError(b),cX)throw b;return dw(a,null,g,f),Q(a),a._dirtyType=2,cX=!0,c9(a,i),void(cX=!1)}finally{q.observe(g,cZ),a._updating=p,cU=m,cW=n,cV=o}}f._readOnly||(f._readOnly=!0);let s=a._dirtyLeaves,t=a._dirtyElements,u=a._normalizedNodes,v=a._updateTags,w=a._deferred;l&&(a._dirtyType=0,a._cloneNotNeeded.clear(),a._dirtyLeaves=new Set,a._dirtyElements=new Map,a._normalizedNodes=new Set,a._updateTags=new Set),function(a,b){let c,d=a._decorators,e=a._pendingDecorators||d,f=b._nodeMap;for(c in e)f.has(c)||(e===d&&(e=dY(a)),delete e[c])}(a,f);let x=(h||(c=en(a)),null);if(a._editable&&null!==x&&(l||null===k||k.dirty||!k.is(j))&&null!==g&&!v.has("skip-dom-selection")){cV=a,cU=f;try{if(null!==q&&q.disconnect(),l||null===k||k.dirty){let b=a._blockCursorElement;null!==b&&es(b,a,g),function(a,b,c,d,e,f,g){let h=d.anchorNode,i=d.focusNode,j=d.anchorOffset,k=d.focusOffset,l=document.activeElement;if(e.has("collaboration")&&l!==f||null!==l&&dE(l))return;if(!cw(b))return null!==a&&dF(c,h,i)&&d.removeAllRanges();let m=b.anchor,n=b.focus,o=m.key,p=n.key,q=ei(c,o),r=ei(c,p),s=m.offset,t=n.offset,u=b.format,v=b.style,w=b.isCollapsed(),x=q,y=r,z=!1;if("text"===m.type){x=dN(q);let a=m.getNode();z=a.getFormat()!==u||a.getStyle()!==v}else cw(a)&&"text"===a.anchor.type&&(z=!0);if("text"===n.type&&(y=dN(r)),null!==x&&null!==y&&(w&&(null===a||z||cw(a)&&(a.format!==u||a.style!==v))&&(bF=[u,v,s,o,performance.now()]),j!==s||k!==t||h!==x||i!==y||"Range"===d.type&&w||(null!==l&&f.contains(l)||e.has("skip-selection-focus")||f.focus({preventScroll:!0}),"element"===m.type))){if(function(a,b,c,d,e){try{a.setBaseAndExtent(b,c,d,e)}catch(a){}}(d,x,s,y,t),!e.has("skip-scroll-into-view")&&b.isCollapsed()&&null!==f&&f===document.activeElement){let a=cw(b)&&"element"===b.anchor.type?x.childNodes[s]||null:d.rangeCount>0?d.getRangeAt(0):null;if(null!==a){let b;if(a instanceof Text){let c=document.createRange();c.selectNode(a),b=c.getBoundingClientRect()}else b=a.getBoundingClientRect();!function(a,b,c){let d=ek(c),e=em(d);if(null===d||null===e)return;let{top:f,bottom:g}=b,h=0,i=0,j=c;for(;null!==j;){let b=j===d.body;if(b)h=0,i=en(a).innerHeight;else{let a=j.getBoundingClientRect();h=a.top,i=a.bottom}let c=0;if(f<h?c=-(h-f):g>i&&(c=g-i),0!==c)if(b)e.scrollBy(0,c);else{let a=j.scrollTop;j.scrollTop+=c;let b=j.scrollTop-a;f-=b,g-=b}if(b)break;j=ej(j)}}(c,b,f)}}by=!0}}(j,k,a,x,v,g)}!function(a,b,c){let d=a._blockCursorElement;if(cw(c)&&c.isCollapsed()&&"element"===c.anchor.type&&b.contains(document.activeElement)){let e=c.anchor,f=e.getNode(),g=e.offset,h=!1,i=null;if(g===f.getChildrenSize())er(f.getChildAtIndex(g-1))&&(h=!0);else{let b=f.getChildAtIndex(g);if(null!==b&&er(b)){let c=b.getPreviousSibling();(null===c||er(c))&&(h=!0,i=a.getElementByKey(b.__key))}}if(h){let c,e,g,h=a.getElementByKey(f.__key);return null===d&&(c=a._config.theme,(e=document.createElement("div")).contentEditable="false",e.setAttribute("data-lexical-cursor","true"),g=c.blockCursor,void 0!==g&&("string"==typeof g&&(g=c.blockCursor=A(g)),void 0!==g&&e.classList.add(...g)),a._blockCursorElement=d=e),b.style.caretColor="transparent",null===i?h.appendChild(d):h.insertBefore(d,i)}}null!==d&&es(d,a,b)}(a,g,k)}finally{null!==q&&q.observe(g,cZ),cV=o,cU=m}}null!==r&&function(a,b,c,d,e){let f=Array.from(a._listeners.mutation),g=f.length;for(let a=0;a<g;a++){let[g,h]=f[a];for(let a of h){let f=b.get(a);void 0!==f&&g(f,{dirtyLeaves:d,prevEditorState:e,updateTags:c})}}}(a,r,v,s,i),cw(k)||null===k||null!==j&&j.is(k)||a.dispatchCommand(aF,void 0);let z=a._pendingDecorators;null!==z&&(a._decorators=z,a._pendingDecorators=null,da("decorator",a,!0,z)),d=dZ(b||i),d!==(e=dZ(f))&&da("textcontent",a,!0,e),da("update",a,!0,{dirtyElements:t,dirtyLeaves:s,editorState:f,mutatedNodes:r,normalizedNodes:u,prevEditorState:b||i,tags:v}),function(a,b){if(a._deferred=[],0!==b.length){let c=a._updating;a._updating=!0;try{for(let a=0;a<b.length;a++)b[a]()}finally{a._updating=c}}}(a,w),function(a){let b=a._updates;if(0!==b.length){let c=b.shift();if(c){let[b,d]=c;dc(a,b,d)}}}(a)}function da(a,b,c,...d){let e=b._updating;b._updating=c;try{let c=Array.from(b._listeners[a]);for(let a=0;a<c.length;a++)c[a].apply(null,d)}finally{b._updating=e}}function db(a,b){let c=a._updates,d=b||!1;for(;0!==c.length;){let b=c.shift();if(b){let c,[e,f]=b,g=a._pendingEditorState;void 0!==f&&(c=f.onUpdate,f.skipTransforms&&(d=!0),f.discrete&&(null===g&&y(191),g._flushSync=!0),c&&a._deferred.push(c),c6(a,f.tag)),null==g?dc(a,e,f):e()}}return d}function dc(a,b,c){let d=a._updateTags,e,f=!1,g=!1;void 0!==c&&(e=c.onUpdate,c6(a,c.tag),f=c.skipTransforms||!1,g=c.discrete||!1),e&&a._deferred.push(e);let h=a._editorState,i=a._pendingEditorState,j=!1;(null===i||i._readOnly)&&(i=a._pendingEditorState=dn(i||h),j=!0),i._flushSync=g;let k=cU,l=cW,m=cV,n=a._updating;cU=i,cW=!1,a._updating=!0,cV=a;let o=a._headless||null===a.getRootElement();dz=null;try{var p,q;let d,e;j&&(o?null!==h._selection&&(i._selection=h._selection.clone()):i._selection=(p=c&&c.event||null,d=a.getEditorState()._selection,q=en(a),e=null,cw(d)||null==d?cM(d,e,a,p):d.clone()));let g=a._compositionKey;b(),f=db(a,f),function(a,b){let c=b.getEditorState()._selection,d=a._selection;if(cw(d)){let a,b=d.anchor,e=d.focus;if("text"===b.type&&(a=b.getNode()).selectionTransform(c,d),"text"===e.type){let b=e.getNode();a!==b&&b.selectionTransform(c,d)}}}(i,a),0!==a._dirtyType&&(f?function(a,b){let c=b._dirtyLeaves,d=a._nodeMap;for(let a of c){let b=d.get(a);cm(b)&&b.isAttached()&&b.isSimpleText()&&!b.isUnmergeable()&&Z(b)}}(i,a):function(a,b){let c=b._dirtyLeaves,d=b._dirtyElements,e=a._nodeMap,f=dT(),g=new Map,h=c,i=h.size,j=d,k=j.size;for(;i>0||k>0;){if(i>0){for(let a of(b._dirtyLeaves=new Set,h)){let d=e.get(a);cm(d)&&d.isAttached()&&d.isSimpleText()&&!d.isUnmergeable()&&Z(d),void 0!==d&&c5(d,f)&&c4(b,d,g),c.add(a)}if((i=(h=b._dirtyLeaves).size)>0){cY++;continue}}for(let a of(b._dirtyLeaves=new Set,b._dirtyElements=new Map,j.delete("root")&&j.set("root",!0),j)){let c=a[0],h=a[1];if(d.set(c,h),!h)continue;let i=e.get(c);void 0!==i&&c5(i,f)&&c4(b,i,g)}i=(h=b._dirtyLeaves).size,k=(j=b._dirtyElements).size,cY++}b._dirtyLeaves=c,b._dirtyElements=d}(i,a),db(a),function(a,b,c,d){let e=a._nodeMap,f=b._nodeMap,g=[];for(let[a]of d){let b=f.get(a);void 0!==b&&(b.isAttached()||(dh(b)&&function a(b,c,d,e,f,g){let h=b.getFirstChild();for(;null!==h;){let b=h.__key;h.__parent===c&&(dh(h)&&a(h,b,d,e,f,g),d.has(b)||g.delete(b),f.push(b)),h=h.getNextSibling()}}(b,a,e,f,g,d),e.has(a)||d.delete(a),g.push(a)))}for(let a of g)f.delete(a);for(let a of c){let b=f.get(a);void 0===b||b.isAttached()||(e.has(a)||c.delete(a),f.delete(a))}}(h,i,a._dirtyLeaves,a._dirtyElements)),g!==a._compositionKey&&(i._flushSync=!0);let k=i._selection;if(cw(k)){let a=i._nodeMap,b=k.anchor.key,c=k.focus.key;void 0!==a.get(b)&&void 0!==a.get(c)||y(19)}else cy(k)&&0===k._nodes.size&&(i._selection=null)}catch(b){return b instanceof Error&&a._onError(b),a._pendingEditorState=h,a._dirtyType=2,a._cloneNotNeeded.clear(),a._dirtyLeaves=new Set,a._dirtyElements.clear(),void c9(a)}finally{cU=k,cW=l,cV=m,a._updating=n,cY=0}0!==a._dirtyType||a._deferred.length>0||function(a,b){let c=b.getEditorState()._selection,d=a._selection;if(null!==d){if(d.dirty||!d.is(c))return!0}else if(null!==c)return!0;return!1}(i,a)?i._flushSync?(i._flushSync=!1,c9(a)):j&&dD(()=>{c9(a)}):(i._flushSync=!1,j&&(d.clear(),a._deferred=[],a._pendingEditorState=null))}function dd(a,b,c){cV===a&&void 0===c?b():dc(a,b,c)}class de{element;before;after;constructor(a,b,c){this.element=a,this.before=b||null,this.after=c||null}withBefore(a){return new de(this.element,a,this.after)}withAfter(a){return new de(this.element,this.before,a)}withElement(a){return this.element===a?this:new de(a,this.before,this.after)}insertChild(a){let b=this.before||this.getManagedLineBreak();return null!==b&&b.parentElement!==this.element&&y(222),this.element.insertBefore(a,b),this}removeChild(a){return a.parentElement!==this.element&&y(223),this.element.removeChild(a),this}replaceChild(a,b){return b.parentElement!==this.element&&y(224),this.element.replaceChild(a,b),this}getFirstChild(){let a=this.after?this.after.nextSibling:this.element.firstChild;return a===this.before||a===this.getManagedLineBreak()?null:a}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(a){null===a?this.removeManagedLineBreak():this.insertManagedLineBreak("decorator"===a&&!1)}removeManagedLineBreak(){let a=this.getManagedLineBreak();if(a){let b=this.element,c="IMG"===a.nodeName?a.nextSibling:null;c&&b.removeChild(c),b.removeChild(a),b.__lexicalLineBreak=void 0}}insertManagedLineBreak(a){let b=this.getManagedLineBreak();if(b){if(a===("IMG"===b.nodeName))return;this.removeManagedLineBreak()}let c=this.element,d=this.before,e=document.createElement("br");if(c.insertBefore(e,d),a){let a=document.createElement("img");a.setAttribute("data-lexical-linebreak","true"),a.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",a.alt="",c.insertBefore(a,e),c.__lexicalLineBreak=a}else c.__lexicalLineBreak=e}getFirstChildOffset(){let a=0;for(let b=this.after;null!==b;b=b.previousSibling)a++;return a}resolveChildIndex(a,b,c,d){if(c===this.element){let b=this.getFirstChildOffset();return[a,Math.min(b+a.getChildrenSize(),Math.max(b,d))]}let e=df(b,c);e.push(d);let f=df(b,this.element),g=a.getIndexWithinParent();for(let a=0;a<f.length;a++){let b=e[a],c=f[a];if(void 0===b||b<c)break;if(b>c){g+=1;break}}return[a.getParentOrThrow(),g]}}function df(a,b){let c=[],d=b;for(;d!==a&&null!==d;d=d.parentNode){let a=0;for(let b=d.previousSibling;null!==b;b=b.previousSibling)a++;c.push(a)}return d!==a&&y(225),c.reverse()}class dg extends b_{__first;__last;__size;__format;__style;__indent;__dir;__textFormat;__textStyle;constructor(a){super(a),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(a){super.afterCloneFrom(a),this.__key===a.__key&&(this.__first=a.__first,this.__last=a.__last,this.__size=a.__size),this.__indent=a.__indent,this.__format=a.__format,this.__style=a.__style,this.__dir=a.__dir,this.__textFormat=a.__textFormat,this.__textStyle=a.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){return G[this.getFormat()]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){let a=[],b=this.getFirstChild();for(;null!==b;)a.push(b),b=b.getNextSibling();return a}getChildrenKeys(){let a=[],b=this.getFirstChild();for(;null!==b;)a.push(b.__key),b=b.getNextSibling();return a}getChildrenSize(){return this.getLatest().__size}isEmpty(){return 0===this.getChildrenSize()}isDirty(){let a=c2()._dirtyElements;return null!==a&&a.has(this.__key)}isLastChild(){let a=this.getLatest(),b=this.getParentOrThrow().getLastChild();return null!==b&&b.is(a)}getAllTextNodes(){let a=[],b=this.getFirstChild();for(;null!==b;){if(cm(b)&&a.push(b),dh(b)){let c=b.getAllTextNodes();a.push(...c)}b=b.getNextSibling()}return a}getFirstDescendant(){let a=this.getFirstChild();for(;dh(a);){let b=a.getFirstChild();if(null===b)break;a=b}return a}getLastDescendant(){let a=this.getLastChild();for(;dh(a);){let b=a.getLastChild();if(null===b)break;a=b}return a}getDescendantByIndex(a){let b=this.getChildren(),c=b.length;if(a>=c){let a=b[c-1];return dh(a)&&a.getLastDescendant()||a||null}let d=b[a];return dh(d)&&d.getFirstDescendant()||d||null}getFirstChild(){let a=this.getLatest().__first;return null===a?null:dU(a)}getFirstChildOrThrow(){let a=this.getFirstChild();return null===a&&y(45,this.__key),a}getLastChild(){let a=this.getLatest().__last;return null===a?null:dU(a)}getLastChildOrThrow(){let a=this.getLastChild();return null===a&&y(96,this.__key),a}getChildAtIndex(a){let b,c,d=this.getChildrenSize();if(a<d/2){for(b=this.getFirstChild(),c=0;null!==b&&c<=a;){if(c===a)return b;b=b.getNextSibling(),c++}return null}for(b=this.getLastChild(),c=d-1;null!==b&&c>=a;){if(c===a)return b;b=b.getPreviousSibling(),c--}return null}getTextContent(){let a="",b=this.getChildren(),c=b.length;for(let d=0;d<c;d++){let e=b[d];a+=e.getTextContent(),dh(e)&&d!==c-1&&!e.isInline()&&(a+="\n\n")}return a}getTextContentSize(){let a=0,b=this.getChildren(),c=b.length;for(let d=0;d<c;d++){let e=b[d];a+=e.getTextContentSize(),dh(e)&&d!==c-1&&!e.isInline()&&(a+=2)}return a}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(a){if(""!==a){let b=F[a];return 0!=(this.getFormat()&b)}return!1}hasTextFormat(a){let b=D[a];return 0!=(this.getTextFormat()&b)}getFormatFlags(a,b){return dO(this.getLatest().__textFormat,a,b)}getTextStyle(){return this.getLatest().__textStyle}select(a,b){c_();let c=cN(),d=a,e=b,f=this.getChildrenSize();if(!this.canBeEmpty()){if(0===a&&0===b){let a=this.getFirstChild();if(cm(a)||dh(a))return a.select(0,0)}else if((void 0===a||a===f)&&(void 0===b||b===f)){let a=this.getLastChild();if(cm(a)||dh(a))return a.select()}}void 0===d&&(d=f),void 0===e&&(e=f);let g=this.__key;return cw(c)?(c.anchor.set(g,d,"element"),c.focus.set(g,e,"element"),c.dirty=!0,c):cJ(g,d,g,e,"element","element")}selectStart(){let a=this.getFirstDescendant();return a?a.selectStart():this.select()}selectEnd(){let a=this.getLastDescendant();return a?a.selectEnd():this.select()}clear(){let a=this.getWritable();return this.getChildren().forEach(a=>a.remove()),a}append(...a){return this.splice(this.getChildrenSize(),0,a)}setDirection(a){let b=this.getWritable();return b.__dir=a,b}setFormat(a){return this.getWritable().__format=""!==a?F[a]:0,this}setStyle(a){return this.getWritable().__style=a||"",this}setTextFormat(a){let b=this.getWritable();return b.__textFormat=a,b}setTextStyle(a){let b=this.getWritable();return b.__textStyle=a,b}setIndent(a){return this.getWritable().__indent=a,this}splice(a,b,c){b$(this)&&y(324,this.__key,this.__type);let d=this.getChildrenSize(),e=this.getWritable();a+b<=d||y(226,String(a),String(b),String(d));let f=e.__key,g=[],h=[],i=this.getChildAtIndex(a+b),j=null,k=d-b+c.length;if(0!==a)if(a===d)j=this.getLastChild();else{let b=this.getChildAtIndex(a);null!==b&&(j=b.getPreviousSibling())}if(b>0){let a=null===j?this.getFirstChild():j.getNextSibling();for(let c=0;c<b;c++){null===a&&y(100);let b=a.getNextSibling(),c=a.__key;dQ(a.getWritable()),h.push(c),a=b}}let l=j;for(let a of c){null!==l&&a.is(l)&&(j=l=l.getPreviousSibling());let b=a.getWritable();b.__parent===f&&k--,dQ(b);let c=a.__key;if(null===l)e.__first=c,b.__prev=null;else{let a=l.getWritable();a.__next=c,b.__prev=a.__key}a.__key===f&&y(76),b.__parent=f,g.push(c),l=a}if(a+b===d)null!==l&&(l.getWritable().__next=null,e.__last=l.__key);else if(null!==i){let a=i.getWritable();if(null!==l){let b=l.getWritable();a.__prev=l.__key,b.__next=i.__key}else a.__prev=null}if(e.__size=k,h.length){let a=cN();if(cw(a)){let b=new Set(h),c=new Set(g),{anchor:d,focus:e}=a;di(d,b,c)&&cR(d,d.getNode(),this,j,i),di(e,b,c)&&cR(e,e.getNode(),this,j,i),0!==k||this.canBeEmpty()||eo(this)||this.remove()}}return e}getDOMSlot(a){return new de(a)}exportDOM(a){let{element:b}=super.exportDOM(a);if(eu(b)){let a=this.getIndent();a>0&&(b.style.paddingInlineStart=40*a+"px");let c=this.getDirection();c&&(b.dir=c)}return{element:b}}exportJSON(){let a={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},b=this.getTextFormat(),c=this.getTextStyle();return 0===b&&""===c||eo(this)||this.getChildren().some(cm)||(0!==b&&(a.textFormat=b),""!==c&&(a.textStyle=c)),a}updateFromJSON(a){return super.updateFromJSON(a).setFormat(a.format).setIndent(a.indent).setDirection(a.direction).setTextFormat(a.textFormat||0).setTextStyle(a.textStyle||"")}insertNewAfter(a,b){return null}canIndent(){return!0}collapseAtStart(a){return!1}excludeFromCopy(a){return!1}canReplaceWith(a){return!0}canInsertAfter(a){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(a){return!1}extractWithChild(a,b,c){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(a,b){let c=this.getDOMSlot(a),d=c.getFirstChild();for(let a=this.getFirstChild();a;a=a.getNextSibling()){let e=b.getElementByKey(a.getKey());null!==e&&(null==d?(c.insertChild(e),d=e):d!==e&&c.replaceChild(e,d),d=d.nextSibling)}}}function dh(a){return a instanceof dg}function di(a,b,c){let d=a.getNode();for(;d;){let a=d.__key;if(b.has(a)&&!c.has(a))return!0;d=d.getParent()}return!1}class dj extends b_{decorate(a,b){return null}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function dk(a){return a instanceof dj}class dl extends dg{__cachedText;static getType(){return"root"}static clone(){return new dl}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){y(51)}getTextContent(){let a=this.__cachedText;return(c$()||0===c2()._dirtyType)&&null!==a?a:super.getTextContent()}remove(){y(52)}replace(a){y(53)}insertBefore(a){y(54)}insertAfter(a){y(55)}updateDOM(a,b){return!1}splice(a,b,c){for(let a of c)dh(a)||dk(a)||y(282);return super.splice(a,b,c)}static importJSON(a){return d$().updateFromJSON(a)}collapseAtStart(){return!0}}function dm(a){return a instanceof dl}function dn(a){return new dq(new Map(a._nodeMap))}function dp(){return new dq(new Map([["root",new dl]]))}class dq{_nodeMap;_selection;_flushSync;_readOnly;constructor(a,b){this._nodeMap=a,this._selection=b||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return 1===this._nodeMap.size&&null===this._selection}read(a,b){return c8(b&&b.editor||null,this,a)}clone(a){let b=new dq(this._nodeMap,void 0===a?this._selection:a);return b._readOnly=!0,b}toJSON(){return c8(null,this,()=>({root:function a(b){let c=b.exportJSON(),d=b.constructor;if(c.type!==d.getType()&&y(130,d.name),dh(b)){let e=c.children;Array.isArray(e)||y(59,d.name);let f=b.getChildren();for(let b=0;b<f.length;b++){let c=a(f[b]);e.push(c)}}return c}(d$())}))}}class dr extends dg{static getType(){return"artificial"}createDOM(a){return document.createElement("div")}}class ds extends dg{static getType(){return"paragraph"}static clone(a){return new ds(a.__key)}createDOM(a){let b=document.createElement("p"),c=ec(a.theme,"paragraph");return void 0!==c&&b.classList.add(...c),b}updateDOM(a,b,c){return!1}static importDOM(){return{p:a=>({conversion:dt,priority:0})}}exportDOM(a){let{element:b}=super.exportDOM(a);if(eu(b)){this.isEmpty()&&b.append(document.createElement("br"));let a=this.getFormatType();a&&(b.style.textAlign=a)}return{element:b}}static importJSON(a){return du().updateFromJSON(a)}exportJSON(){let a=super.exportJSON();if(void 0===a.textFormat||void 0===a.textStyle){let b=this.getChildren().find(cm);b?(a.textFormat=b.getFormat(),a.textStyle=b.getStyle()):(a.textFormat=this.getTextFormat(),a.textStyle=this.getTextStyle())}return a}insertNewAfter(a,b){let c=du();c.setTextFormat(a.format),c.setTextStyle(a.style);let d=this.getDirection();return c.setDirection(d),c.setFormat(this.getFormatType()),c.setStyle(this.getStyle()),this.insertAfter(c,b),c}collapseAtStart(){let a=this.getChildren();if(0===a.length||cm(a[0])&&""===a[0].getTextContent().trim()){if(null!==this.getNextSibling())return this.selectNext(),this.remove(),!0;if(null!==this.getPreviousSibling())return this.selectPrevious(),this.remove(),!0}return!1}}function dt(a){let b=du();return a.style&&(b.setFormat(a.style.textAlign),eE(a,b)),{node:b}}function du(){return ep(new ds)}function dv(a){return a instanceof ds}function dw(a,b,c,d){let e=a._keyToDOMMap;e.clear(),a._editorState=dp(),a._pendingEditorState=d,a._compositionKey=null,a._dirtyType=0,a._cloneNotNeeded.clear(),a._dirtyLeaves=new Set,a._dirtyElements.clear(),a._normalizedNodes=new Set,a._updateTags=new Set,a._updates=[],a._blockCursorElement=null;let f=a._observer;null!==f&&(f.disconnect(),a._observer=null),null!==b&&(b.textContent=""),null!==c&&(c.textContent="",e.set("root",c))}function dx(a){var b,c;let d,e,f,g,h=a||{},i=cV,j=h.theme||{},k=void 0===a?i:h.parentEditor||null,l=h.disableEvents||!1,m=dp(),n=h.namespace||(null!==k?k._config.namespace:d4()),o=h.editorState,p=[dl,cd,b2,co,ds,dr,...h.nodes||[]],{onError:q,html:r}=h,s=void 0===h.editable||h.editable;if(void 0===a&&null!==i)d=i._nodes;else{d=new Map;for(let a=0;a<p.length;a++){let b=p[a],c=null,e=null;if("function"!=typeof b){let a=b;b=a.replace,c=a.with,e=a.withKlass||null}eG(b);let f=b.getType(),g=function(a){let b=new Set,c=new Set,d=a;for(;d;){let{ownNodeConfig:a}=eG(d),e=d.transform;if(!c.has(e)){c.add(e);let a=d.transform();a&&b.add(a)}if(a){let c=a.$transform;c&&b.add(c),d=a.extends}else{let a=Object.getPrototypeOf(d);d=a.prototype instanceof b_&&a!==b_?a:void 0}}return b}(b);d.set(f,{exportDOM:r&&r.export?r.export.get(b):void 0,klass:b,replace:c,replaceWithKlass:e,sharedNodeState:function(a){let b=new Map,c=new Set;for(let d="function"==typeof a?a:a.replace;d.prototype&&void 0!==d.prototype.getType;d=Object.getPrototypeOf(d)){let{ownNodeConfig:a}=eG(d);if(a&&a.stateConfigs)for(let d of a.stateConfigs){let a;"stateConfig"in d?(a=d.stateConfig,d.flat&&c.add(a.key)):a=d,b.set(a.key,a)}}return{flatKeys:c,sharedConfigMap:b}}(p[a]),transforms:g})}}let t=new dy(m,k,d,{disableEvents:l,namespace:n,theme:j},q||console.error,(b=d,c=r?r.import:void 0,e=new Map,f=new Set,g=a=>{Object.keys(a).forEach(b=>{let c=e.get(b);void 0===c&&(c=[],e.set(b,c)),c.push(a[b])})},b.forEach(a=>{let b=a.klass.importDOM;if(null==b||f.has(b))return;f.add(b);let c=b.call(a.klass);null!==c&&g(c)}),c&&g(c),e),s,a);return void 0!==o&&(t._pendingEditorState=o,t._dirtyType=2),t.registerCommand(aI,bM,0),t.registerCommand(aJ,bN,0),t.registerCommand(aK,bO,0),t.registerCommand(aL,bP,0),t.registerCommand(aX,bR,0),t}class dy{static version;_headless;_parentEditor;_rootElement;_editorState;_pendingEditorState;_compositionKey;_deferred;_keyToDOMMap;_updates;_updating;_listeners;_commands;_nodes;_decorators;_pendingDecorators;_config;_dirtyType;_cloneNotNeeded;_dirtyLeaves;_dirtyElements;_normalizedNodes;_updateTags;_observer;_key;_onError;_htmlConversions;_window;_editable;_blockCursorElement;_createEditorArgs;constructor(a,b,c,d,e,f,g,h){this._createEditorArgs=h,this._parentEditor=b,this._rootElement=null,this._editorState=a,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=d,this._nodes=c,this._decorators={},this._pendingDecorators=null,this._dirtyType=0,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=d4(),this._onError=e,this._htmlConversions=f,this._editable=g,this._headless=null!==b&&b._headless,this._window=null,this._blockCursorElement=null}isComposing(){return null!=this._compositionKey}registerUpdateListener(a){let b=this._listeners.update;return b.add(a),()=>{b.delete(a)}}registerEditableListener(a){let b=this._listeners.editable;return b.add(a),()=>{b.delete(a)}}registerDecoratorListener(a){let b=this._listeners.decorator;return b.add(a),()=>{b.delete(a)}}registerTextContentListener(a){let b=this._listeners.textcontent;return b.add(a),()=>{b.delete(a)}}registerRootListener(a){let b=this._listeners.root;return a(this._rootElement,null),b.add(a),()=>{a(null,this._rootElement),b.delete(a)}}registerCommand(a,b,c){void 0===c&&y(35);let d=this._commands;d.has(a)||d.set(a,[new Set,new Set,new Set,new Set,new Set]);let e=d.get(a);void 0===e&&y(36,String(a));let f=e[c];return f.add(b),()=>{f.delete(b),e.every(a=>0===a.size)&&d.delete(a)}}registerMutationListener(a,b,c){let d=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(a)).klass,e=this._listeners.mutation,f=e.get(b);void 0===f&&(f=new Set,e.set(b,f)),f.add(d);let g=c&&c.skipInitialization;return void 0!==g&&g||this.initializeMutationListener(b,d),()=>{f.delete(d),0===f.size&&e.delete(b)}}getRegisteredNode(a){let b=this._nodes.get(a.getType());return void 0===b&&y(37,a.name),b}resolveRegisteredNodeAfterReplacements(a){for(;a.replaceWithKlass;)a=this.getRegisteredNode(a.replaceWithKlass);return a}initializeMutationListener(a,b){let c=this._editorState,d=eC(c).get(b.getType());if(!d)return;let e=new Map;for(let a of d.keys())e.set(a,"created");e.size>0&&a(e,{dirtyLeaves:new Set,prevEditorState:c,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(a,b){let c=this.getRegisteredNode(a);return c.transforms.add(b),c}registerNodeTransform(a,b){let c=this.registerNodeTransformToKlass(a,b),d=[c],e=c.replaceWithKlass;if(null!=e){let a=this.registerNodeTransformToKlass(e,b);d.push(a)}return function(a,b){let c=eC(a.getEditorState()),d=[];for(let a of b){let b=c.get(a);b&&d.push(b)}0!==d.length&&a.update(()=>{for(let a of d)for(let b of a.keys()){let a=dU(b);a&&a.markDirty()}},null===a._pendingEditorState?{tag:b1}:void 0)}(this,d.map(a=>a.klass.getType())),()=>{d.forEach(a=>a.transforms.delete(b))}}hasNode(a){return this._nodes.has(a.getType())}hasNodes(a){return a.every(this.hasNode.bind(this))}dispatchCommand(a,b){return eg(this,a,b)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(a){let b=this._rootElement;if(a!==b){let c=ec(this._config.theme,"root"),d=this._pendingEditorState||this._editorState;if(this._rootElement=a,dw(this,b,a,d),null!==b&&(this._config.disableEvents||function(a){let b=bw.get(a);if(void 0===b)return bX();let c=bx.get(b);if(void 0===c)return bX();let d=c-1;d>=0||y(164),bw.delete(a),bx.set(b,d),0===d&&b.removeEventListener("selectionchange",bU);let e=dI(a);dG(e)?(!function(a){if(null!==a._parentEditor){let b=d3(a),c=b[b.length-1]._key;bT.get(c)===a&&bT.delete(c)}else bT.delete(a._key)}(e),a.__lexicalEditor=null):e&&y(198);let f=bS(a);for(let a=0;a<f.length;a++)f[a]();a.__lexicalEventHandles=[]}(b),null!=c&&b.classList.remove(...c)),null!==a){let b=em(a),d=a.style;d.userSelect="text",d.whiteSpace="pre-wrap",d.wordBreak="break-word",a.setAttribute("data-lexical-editor","true"),this._window=b,this._dirtyType=2,Q(this),this._updateTags.add(b1),c9(this),this._config.disableEvents||function(a,b){let c=a.ownerDocument;bw.set(a,c);let d=bx.get(c)??0;d<1&&c.addEventListener("selectionchange",bU),bx.set(c,d+1),a.__lexicalEditor=b;let e=bS(a);for(let c=0;c<br.length;c++){let[d,f]=br[c],g="function"==typeof f?a=>{bW(a)||(bV(a),(b.isEditable()||"click"===d)&&f(a,b))}:a=>{if(bW(a))return;bV(a);let c=b.isEditable();switch(d){case"cut":return c&&eg(b,bh,a);case"copy":return eg(b,bg,a);case"paste":return c&&eg(b,aQ,a);case"dragstart":return c&&eg(b,bd,a);case"dragover":return c&&eg(b,be,a);case"dragend":return c&&eg(b,bf,a);case"focus":return c&&eg(b,bn,a);case"blur":return c&&eg(b,bo,a);case"drop":return c&&eg(b,bb,a)}};a.addEventListener(d,g),e.push(()=>{a.removeEventListener(d,g)})}}(a,this),null!=c&&a.classList.add(...c)}else this._window=null,this._updateTags.add(b1),c9(this);da("root",this,!1,a,b)}}getElementByKey(a){return this._keyToDOMMap.get(a)||null}getEditorState(){return this._editorState}setEditorState(a,b){a.isEmpty()&&y(38);let c=a;c._readOnly&&((c=dn(a))._selection=a._selection?a._selection.clone():null),P(this);let d=this._pendingEditorState,e=this._updateTags,f=void 0!==b?b.tag:null;null===d||d.isEmpty()||(null!=f&&e.add(f),c9(this)),this._pendingEditorState=c,this._dirtyType=2,this._dirtyElements.set("root",!1),this._compositionKey=null,null!=f&&e.add(f),this._updating||c9(this)}parseEditorState(a,b){return function(a,b,c){let d=dp(),e=cU,f=cW,g=cV,h=b._dirtyElements,i=b._dirtyLeaves,j=b._cloneNotNeeded,k=b._dirtyType;b._dirtyElements=new Map,b._dirtyLeaves=new Set,b._cloneNotNeeded=new Set,b._dirtyType=0,cU=d,cW=!1,cV=b,dz=null;try{let e=b._nodes;c7(a.root,e),c&&c(),d._readOnly=!0}catch(a){a instanceof Error&&b._onError(a)}finally{b._dirtyElements=h,b._dirtyLeaves=i,b._cloneNotNeeded=j,b._dirtyType=k,cU=e,cW=f,cV=g}return d}("string"==typeof a?JSON.parse(a):a,this,b)}read(a){return c9(this),this.getEditorState().read(a,{editor:this})}update(a,b){this._updating?this._updates.push([a,b]):dc(this,a,b)}focus(a,b={}){let c=this._rootElement;null!==c&&(c.setAttribute("autocapitalize","off"),dd(this,()=>{var d,e;let f=cN(),g=d$();null!==f?f.dirty||d0(f.clone()):0!==g.getChildrenSize()&&("rootStart"===b.defaultSelection?g.selectStart():g.selectEnd()),d="focus",c_(),c2()._updateTags.add(d),e=()=>{c.removeAttribute("autocapitalize"),a&&a()},c_(),c2()._deferred.push(e)}),null===this._pendingEditorState&&c.removeAttribute("autocapitalize"))}blur(){var a;let b=this._rootElement;null!==b&&b.blur();let c=(a=this._window,null);null!==c&&c.removeAllRanges()}isEditable(){return this._editable}setEditable(a){this._editable!==a&&(this._editable=a,da("editable",this,!0,a))}toJSON(){return{editorState:this._editorState.toJSON()}}}dy.version="0.39.0+prod.esm";let dz=null,dA=1;function dB(a,b){let c=dC(a,b);return void 0===c&&y(30,b),c}function dC(a,b){return a._nodes.get(b)}let dD="function"==typeof queueMicrotask?queueMicrotask:a=>{Promise.resolve().then(a)};function dE(a){let b=document.activeElement;if(!eu(b))return!1;let c=b.nodeName;return dk(dX(a))&&("INPUT"===c||"TEXTAREA"===c||"true"===b.contentEditable&&null==dI(b))}function dF(a,b,c){let d=a.getRootElement();try{return null!==d&&d.contains(b)&&d.contains(c)&&null!==b&&!dE(b)&&dH(b)===a}catch(a){return!1}}function dG(a){return a instanceof dy}function dH(a){let b=a;for(;null!=b;){let a=dI(b);if(dG(a))return a;b=ej(b)}return null}function dI(a){return a?a.__lexicalEditor:null}function dJ(a){return cq(a)||a.isToken()}function dK(a){return dJ(a)||a.isSegmented()}function dL(a){return ev(a)&&3===a.nodeType}function dM(a){return ev(a)&&9===a.nodeType}function dN(a){let b=a;for(;null!=b;){if(dL(b))return b;b=b.firstChild}return null}function dO(a,b,c){let d=D[b];if(null!==c&&(a&d)==(c&d))return a;let e=a^d;return"subscript"===b?e&=~D.superscript:"superscript"===b?e&=~D.subscript:"lowercase"===b?(e&=~D.uppercase,e&=~D.capitalize):"uppercase"===b?(e&=~D.lowercase,e&=~D.capitalize):"capitalize"===b&&(e&=~D.lowercase,e&=~D.uppercase),e}function dP(a){return cm(a)||b5(a)||dk(a)}function dQ(a){let b=a.getParent();if(null!==b){let c=a.getWritable(),d=b.getWritable(),e=a.getPreviousSibling(),f=a.getNextSibling(),g=null!==f?f.__key:null,h=null!==e?e.__key:null,i=null!==e?e.getWritable():null,j=null!==f?f.getWritable():null;null===e&&(d.__first=g),null===f&&(d.__last=h),null!==i&&(i.__next=g),null!==j&&(j.__prev=h),c.__prev=null,c.__next=null,c.__parent=null,d.__size--}}function dR(a){c0(),b$(a)&&y(323,a.__key,a.__type);let b=a.getLatest(),c=b.__parent,d=c1(),e=c2(),f=d._nodeMap,g=e._dirtyElements;null!==c&&function(a,b,c){let d=a;for(;null!==d;){if(c.has(d))return;let a=b.get(d);if(void 0===a)break;c.set(d,!1),d=a.__parent}}(c,f,g);let h=b.__key;e._dirtyType=1,dh(a)?g.set(h,!0):e._dirtyLeaves.add(h)}function dS(a){c_();let b=c2(),c=b._compositionKey;if(a!==c){if(b._compositionKey=a,null!==c){let a=dU(c);null!==a&&a.getWritable()}if(null!==a){let b=dU(a);null!==b&&b.getWritable()}}}function dT(){return c$()?null:c2()._compositionKey}function dU(a,b){let c=(b||c1())._nodeMap.get(a);return void 0===c?null:c}function dV(a,b){let c=dW(a,c2());return void 0!==c?dU(c,b):null}function dW(a,b){return a[`__lexicalKey_${b._key}`]}function dX(a,b){let c=a;for(;null!=c;){let a=dV(c,b);if(null!==a)return a;c=ej(c)}return null}function dY(a){let b=Object.assign({},a._decorators);return a._pendingDecorators=b,b}function dZ(a){return a.read(()=>d$().getTextContent())}function d$(){return d_(c1())}function d_(a){return a._nodeMap.get("root")}function d0(a){c_();let b=c1();null!==a&&(a.dirty=!0,a.setCachedNodes(null)),b._selection=a}function d1(a){let b=c2(),c=function(a,b){let c=a;for(;null!=c;){let a=dW(c,b);if(void 0!==a)return a;c=ej(c)}return null}(a,b);return null===c?a===b.getRootElement()?dU("root"):null:dU(c)}function d2(a){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(a)}function d3(a){let b=[],c=a;for(;null!==c;)b.push(c),c=c._parentEditor;return b}function d4(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function d5(a,b,c,d,e){let f=a;if(f.isAttached()&&(e||!f.isDirty())){let g=f.isComposing(),h=b;(g||e)&&"​"===b[b.length-1]&&(h=b.slice(0,-1));let i=f.getTextContent();if(e||h!==i){if(""===h){dS(null),1;{let a=c2();setTimeout(()=>{a.update(()=>{f.isAttached()&&f.remove()})},20)}return}let b=f.getParent(),e=cO(),i=f.getTextContentSize(),j=dT(),k=f.getKey();if(f.isToken()||null!==j&&k===j&&!g||cw(e)&&(null!==b&&!b.canInsertTextBefore()&&0===e.anchor.offset||e.anchor.key===a.__key&&0===e.anchor.offset&&!f.canInsertTextBefore()&&!g||e.focus.key===a.__key&&e.focus.offset===i&&!f.canInsertTextAfter()&&!g))return void f.markDirty();let l=cN();if(!cw(l)||null===c||null===d)return void d6(f,h,l);if(l.setTextNodeRange(f,c,f,d),f.isSegmented()){let a=cl(f.getTextContent());f.replace(a),f=a}d6(f,h,l)}}}function d6(a,b,c){if(a.setTextContent(b),cw(c)){let b=a.getKey();for(let d of["anchor","focus"]){let e=c[d];"text"===e.type&&e.key===b&&(e.offset=eX(a,e.offset,"clamp"))}}}function d7(a,b,c){let d=b[c]||!1;return"any"===d||d===a[c]}function d8(a,b,c){return d7(a,c,"altKey")&&d7(a,c,"ctrlKey")&&d7(a,c,"shiftKey")&&d7(a,c,"metaKey")&&a.key.toLowerCase()===b.toLowerCase()}let d9={ctrlKey:!0,metaKey:!1},ea={altKey:!1,ctrlKey:!0};function eb(a){return"Backspace"===a.key}function ec(a,b){void 0===a.__lexicalClassNameCache&&(a.__lexicalClassNameCache={});let c=a.__lexicalClassNameCache,d=c[b];if(void 0!==d)return d;let e=a[b];if("string"==typeof e){let a=A(e);return c[b]=a,a}return e}function ed(a,b,c,d,e){if(0===c.size)return;let f=d.__type,g=d.__key,h=b.get(f);void 0===h&&y(33,f);let i=h.klass,j=a.get(i);void 0===j&&(j=new Map,a.set(i,j));let k=j.get(g),l="destroyed"===k&&"created"===e;(void 0===k||l)&&j.set(g,l?"updated":e)}function ee(a,b,c){let d=a.getParent(),e=c,f=a;return null!==d&&(b&&0===c?(e=f.getIndexWithinParent(),f=d):b||c!==f.getChildrenSize()||(e=f.getIndexWithinParent()+1,f=d)),f.getChildAtIndex(b?e-1:e)}function ef(a,b){let c=a.offset;if("element"===a.type)return ee(a.getNode(),b,c);{let d=a.getNode();if(b&&0===c||!b&&c===d.getTextContentSize()){let a=b?d.getPreviousSibling():d.getNextSibling();return null===a?ee(d.getParentOrThrow(),b,d.getIndexWithinParent()+ +!b):a}}return null}function eg(a,b,c){return function(a,b,c){let d=d3(a);for(let e=4;e>=0;e--)for(let f=0;f<d.length;f++){let g=d[f],h=g._commands.get(b);if(void 0!==h){let b=h[e];if(void 0!==b){let d=Array.from(b),e=d.length,f=!1;if(dd(g,()=>{for(let b=0;b<e;b++)if(d[b](c,a))return void(f=!0)}),f)return f}}}return!1}(a,b,c)}function eh(a){return!dm(a)&&!a.isLastChild()&&!a.isInline()}function ei(a,b){let c=a._keyToDOMMap.get(b);return void 0===c&&y(75,b),c}function ej(a){let b=a.assignedSlot||a.parentElement;return ew(b)?b.host:b}function ek(a){return dM(a)?a:eu(a)?a.ownerDocument:null}function el(a,b){let c=a.getParent();for(;null!==c;){if(c.is(b))return!0;c=c.getParent()}return!1}function em(a){let b=ek(a);return b?b.defaultView:null}function en(a){let b=a._window;return null===b&&y(78),b}function eo(a){return dm(a)||dh(a)&&a.isShadowRoot()}function ep(a){let b=c2(),c=a.getType(),d=dC(b,c);void 0===d&&y(200,a.constructor.name,c);let{replace:e,replaceWithKlass:f}=d;if(null!==e){let b=e(a),d=b.constructor;return null!==f?b instanceof f||y(201,f.name,f.getType(),d.name,d.getType(),a.constructor.name,c):b instanceof a.constructor&&d!==a.constructor||y(202,d.name,d.getType(),a.constructor.name,c),b.__key===a.__key&&y(203,a.constructor.name,c,d.name,d.getType()),b}return a}function eq(a,b){!dm(a.getParent())||dh(b)||dk(b)||y(99)}function er(a){return(dk(a)||dh(a)&&!a.canBeEmpty())&&!a.isInline()}function es(a,b,c){c.style.removeProperty("caret-color"),b._blockCursorElement=null;let d=a.parentElement;null!==d&&d.removeChild(a)}function et(a){return eu(a)&&"A"===a.tagName}function eu(a){return ev(a)&&1===a.nodeType}function ev(a){return"object"==typeof a&&null!==a&&"nodeType"in a&&"number"==typeof a.nodeType}function ew(a){return ev(a)&&11===a.nodeType}function ex(a){let b=RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return null!==a.nodeName.match(b)}function ey(a){let b=RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return null!==a.nodeName.match(b)}function ez(a){if(dk(a)&&!a.isInline())return!0;if(!dh(a)||eo(a))return!1;let b=a.getFirstChild(),c=null===b||b5(b)||cm(b)||b.isInline();return!a.isInline()&&!1!==a.canBeEmpty()&&c}let eA=new WeakMap,eB=new Map;function eC(a){if(!a._readOnly&&a.isEmpty())return eB;a._readOnly||y(192);let b=eA.get(a);return b||(b=function(a){let b=new Map;for(let[c,d]of a._nodeMap){let a=d.__type,e=b.get(a);e||(e=new Map,b.set(a,e)),e.set(c,d)}return b}(a),eA.set(a,b)),b}function eD(a){let b=a.constructor.clone(a);return b.afterCloneFrom(a),b}function eE(a,b){let c=Math.round((parseInt(a.style.paddingInlineStart,10)||0)/40);b.setIndent(c)}function eF(a,b){return Object.prototype.hasOwnProperty.call(a,b)&&a[b]!==b_[b]}function eG(a){let b=J in a.prototype?a.prototype[J]():void 0,c=function(a){if(!(a===b_||a.prototype instanceof b_)){let b="<unknown>",c="<unknown>";try{b=a.getType()}catch(a){}try{dy.version&&(c=JSON.parse(dy.version))}catch(a){}y(290,a.name,b,c)}return a===dj||a===dg||a===b_}(a),d=!c&&eF(a,"getType")?a.getType():void 0,e,f=d;if(b)if(d)e=b[d];else for(let[a,c]of Object.entries(b))f=a,e=c;if(!c&&f&&(eF(a,"getType")||(a.getType=()=>f),eF(a,"clone")||(a.clone=b=>(dz=b,new a)),eF(a,"importJSON")||(a.importJSON=e&&e.$importJSON||(b=>(new a).updateFromJSON(b))),!eF(a,"importDOM")&&e)){let{importDOM:b}=e;b&&(a.importDOM=()=>b)}return{ownNodeConfig:e,ownNodeType:f}}let eH=(a,b)=>{let c=a;for(;null!=c&&!dm(c);){if(b(c))return c;c=c.getParent()}return null},eI={next:"previous",previous:"next"};class eJ{origin;constructor(a){this.origin=a}[Symbol.iterator](){return e2({hasNext:eQ,initial:this.getAdjacentCaret(),map:a=>a,step:a=>a.getAdjacentCaret()})}getAdjacentCaret(){return eV(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return eV(this.origin,this.direction)}remove(){let a=this.getNodeAtCaret();return a&&a.remove(),this}replaceOrInsert(a,b){let c=this.getNodeAtCaret();return a.is(this.origin)||a.is(c)||(null===c?this.insert(a):c.replace(a,b)),this}splice(a,b,c="next"){let d=c===this.direction?b:Array.from(b).reverse(),e=this,f=this.getParentAtCaret(),g=new Map;for(let b=e.getAdjacentCaret();null!==b&&g.size<a;b=b.getAdjacentCaret()){let a=b.origin.getWritable();g.set(a.getKey(),a)}for(let a of d){if(g.size>0){let b=e.getNodeAtCaret();if(b)if(g.delete(b.getKey()),g.delete(a.getKey()),b.is(a)||e.origin.is(a));else{let c=a.getParent();c&&c.is(f)&&a.remove(),b.replace(a)}else null===b&&y(263,Array.from(g).join(" "))}else e.insert(a);e=eV(a,this.direction)}for(let a of g.values())a.remove();return this}}class eK extends eJ{type="child";getLatest(){let a=this.origin.getLatest();return a===this.origin?this:eY(a,this.direction)}getParentCaret(a="root"){return eV(eM(this.getParentAtCaret(),a),this.direction)}getFlipped(){let a=eI[this.direction];return eV(this.getNodeAtCaret(),a)||eY(this.origin,a)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(a){return a instanceof eK&&this.direction===a.direction&&this.origin.is(a.origin)}isSamePointCaret(a){return this.isSameNodeCaret(a)}}let eL={root:dm,shadowRoot:eo};function eM(a,b="root"){return eL[b](a)?null:a}class eN extends eJ{type="sibling";getLatest(){let a=this.origin.getLatest();return a===this.origin?this:eV(a,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return dh(this.origin)?eY(this.origin,this.direction):null}getParentCaret(a="root"){return eV(eM(this.getParentAtCaret(),a),this.direction)}getFlipped(){let a=eI[this.direction];return eV(this.getNodeAtCaret(),a)||eY(this.origin.getParentOrThrow(),a)}isSamePointCaret(a){return a instanceof eN&&this.direction===a.direction&&this.origin.is(a.origin)}isSameNodeCaret(a){return(a instanceof eN||a instanceof eO)&&this.direction===a.direction&&this.origin.is(a.origin)}}class eO extends eJ{type="text";offset;constructor(a,b){super(a),this.offset=b}getLatest(){let a=this.origin.getLatest();return a===this.origin?this:eW(a,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(a="root"){return eV(eM(this.getParentAtCaret(),a),this.direction)}getFlipped(){return eW(this.origin,eI[this.direction],this.offset)}isSamePointCaret(a){return a instanceof eO&&this.direction===a.direction&&this.origin.is(a.origin)&&this.offset===a.offset}isSameNodeCaret(a){return(a instanceof eN||a instanceof eO)&&this.direction===a.direction&&this.origin.is(a.origin)}getSiblingCaret(){return eV(this.origin,this.direction)}}function eP(a){return a instanceof eO}function eQ(a){return a instanceof eN}function eR(a){return a instanceof eK}let eS={next:class extends eO{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(a){return this.origin.insertAfter(a),this}},previous:class extends eO{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(a){return this.origin.insertBefore(a),this}}},eT={next:class extends eN{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(a){return this.origin.insertAfter(a),this}},previous:class extends eN{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(a){return this.origin.insertBefore(a),this}}},eU={next:class extends eK{direction="next";getNodeAtCaret(){return this.origin.getFirstChild()}insert(a){return this.origin.splice(0,0,[a]),this}},previous:class extends eK{direction="previous";getNodeAtCaret(){return this.origin.getLastChild()}insert(a){return this.origin.splice(this.origin.getChildrenSize(),0,[a]),this}}};function eV(a,b){return a?new eT[b](a):null}function eW(a,b,c){return a?new eS[b](a,eX(a,c)):null}function eX(a,b,c="error"){let d=a.getTextContentSize(),e="next"===b?d:"previous"===b?0:b;return(e<0||e>d)&&("clamp"!==c&&z(284,String(b),String(d),a.getKey()),e=e<0?0:d),e}function eY(a,b){return dh(a)?new eU[b](a):null}function eZ(a){var b;return a&&((b=a.getAdjacentCaret())&&b.getChildCaret()||b)}class e${type="node-caret-range";direction;anchor;focus;constructor(a,b,c){this.anchor=a,this.focus=b,this.direction=c}getLatest(){let a=this.anchor.getLatest(),b=this.focus.getLatest();return a===this.anchor&&b===this.focus?this:new e$(a,b,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){let a=a=>{let b=this[a].getLatest();return eP(b)?function(a,b){let{direction:c,origin:d}=a;return new e_(a,eX(d,"focus"===b?eI[c]:c)-a.offset)}(b,a):null},b=a("anchor"),c=a("focus");if(b&&c){let{caret:a}=b,{caret:d}=c;if(a.isSameNodeCaret(d))return[new e_(a,d.offset-a.offset),null]}return[b,c]}iterNodeCarets(a="root"){let b=eP(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),c=this.focus.getLatest(),d=eP(c),e=b=>b.isSameNodeCaret(c)?null:eZ(b)||b.getParentCaret(a);return e2({hasNext:a=>null!==a&&!(d&&c.isSameNodeCaret(a)),initial:b.isSameNodeCaret(c)?null:e(b),map:a=>a,step:e})}[Symbol.iterator](){return this.iterNodeCarets("root")}}class e_{type="slice";caret;distance;constructor(a,b){this.caret=a,this.distance=b}getSliceIndices(){let{distance:a,caret:{offset:b}}=this,c=b+a;return c<b?[c,b]:[b,c]}getTextContent(){let[a,b]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(a,b)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){let{caret:{origin:a,direction:b}}=this,[c,d]=this.getSliceIndices(),e=a.getTextContent();return eW(a.setTextContent(e.slice(0,c)+e.slice(d)),b,c)}}function e0(a){return e1(a,eV(d$(),a.direction))}function e1(a,b){return a.direction!==b.direction&&y(265),new e$(a,b,a.direction)}function e2(a){let{initial:b,hasNext:c,step:d,map:e}=a,f=b;return{[Symbol.iterator](){return this},next(){if(!c(f))return{done:!0,value:void 0};let a={done:!1,value:e(f)};return f=d(f),a}}}function e3(a,b){let c=e6(a.origin,b.origin);switch(null===c&&y(275,a.origin.getKey(),b.origin.getKey()),c.type){case"same":{let c="text"===a.type,d="text"===b.type;return c&&d?Math.sign(a.offset-b.offset):a.type===b.type?0:c?-1:d?1:"child"===a.type?-1:1}case"ancestor":return"child"===a.type?-1:1;case"descendant":return"child"===b.type?1:-1;case"branch":return e4(c)}}function e4(a){let{a:b,b:c}=a,d=b.__key,e=c.__key,f=b,g=c;for(;f&&g;f=f.getNextSibling(),g=g.getNextSibling()){if(f.__key===e)return -1;if(g.__key===d)return 1}return null===f?1:-1}function e5(a){return dh(a)?[a.getLatest(),null]:[a.getParent(),a.getLatest()]}function e6(a,b){if(a.is(b))return{commonAncestor:a,type:"same"};let c=new Map;for(let[b,d]=e5(a);b;d=b,b=b.getParent())c.set(b,d);for(let[d,e]=e5(b);d;e=d,d=d.getParent()){let f=c.get(d);if(void 0!==f)return null===f?(d.is(a)||y(276),{commonAncestor:d,type:"ancestor"}):null===e?(d.is(b)||y(277),{commonAncestor:d,type:"descendant"}):((dh(f)||f.is(a))&&(dh(e)||e.is(b))&&d.is(f.getParent())&&d.is(e.getParent())||y(278),{a:f,b:e,commonAncestor:d,type:"branch"})}return null}function e7(a,b){var c;let d,{type:e,key:f,offset:g}=a,h=(null===(d=dU(c=a.key))&&y(63,c),d);return"text"===e?(cm(h)||y(266,h.getType(),f),eW(h,b,g)):(dh(h)||y(267,h.getType(),f),function(a,b,c){let d=eY(a,"next");for(let a=0;a<b;a++){let a=d.getAdjacentCaret();if(null===a)break;d=a}return fg(d,c)}(h,a.offset,b))}function e8(a,b){let{origin:c,direction:d}=b,e="next"===d;eP(b)?a.set(c.getKey(),b.offset,"text"):eQ(b)?cm(c)?a.set(c.getKey(),eX(c,d),"text"):a.set(c.getParentOrThrow().getKey(),c.getIndexWithinParent()+ +!!e,"element"):(eR(b)&&dh(c)||y(268),a.set(c.getKey(),e?0:c.getChildrenSize(),"element"))}function e9(a,b){e8(a.anchor,b.anchor),e8(a.focus,b.focus)}function fa(a){let{anchor:b,focus:c}=a,d=e7(b,"next"),e=e7(c,"next"),f=0>=e3(d,e)?"next":"previous";return e1(fg(d,f),fg(e,f))}function fb(a){let{direction:b,origin:c}=a,d=eV(c,eI[b]).getNodeAtCaret();return d?eV(d,b):eY(c.getParentOrThrow(),b)}function fc(a,b="root"){let c=[a];for(let d=eR(a)?a.getParentCaret(b):a.getSiblingCaret();null!==d;d=d.getParentCaret(b))c.push(fb(d));return c}function fd(a){return!!a&&a.origin.isAttached()}function fe(a){let b=function(a){let b=a;for(;eR(b);){let a=eZ(b);if(!eR(a))break;b=a}return b}(a.getLatest()),{direction:c}=b;if(cm(b.origin))return eP(b)?b:eW(b.origin,c,c);let d=b.getAdjacentCaret();return eQ(d)&&cm(d.origin)?eW(d.origin,c,eI[c]):b}function ff(a){return eP(a)&&a.offset!==eX(a.origin,a.direction)}function fg(a,b){return a.direction===b?a:a.getFlipped()}function fh(a,b){return a.direction===b?a:e1(fg(a.focus,b),fg(a.anchor,b))}function fi(a,b){if(!b||a===b)return a;for(let c in b)if(a[c]!==b[c])return{...a,...b};return a}let fj=e.useEffect,fk={tag:b1};function fl({initialConfig:a,children:b}){let c=(0,e.useMemo)(()=>{let{theme:b,namespace:c,nodes:d,onError:e,editorState:f,html:g}=a,h={getTheme:function(){return null!=b?b:null}},i=dx({editable:a.editable,html:g,namespace:c,nodes:d,onError:a=>e(a,i),theme:b});return function(a,b){if(null!==b){if(void 0===b)a.update(()=>{let a=d$();if(a.isEmpty()){let b=du();a.append(b),null!==cN()&&b.select()}},fk);else if(null!==b)switch(typeof b){case"string":{let c=a.parseEditorState(b);a.setEditorState(c,fk);break}case"object":a.setEditorState(b,fk);break;case"function":a.update(()=>{d$().isEmpty()&&b(a)},fk)}}}(i,f),[i,h]},[]);return fj(()=>{let b=a.editable,[d]=c;d.setEditable(void 0===b||b)},[]),(0,d.jsx)(w.Provider,{value:c,children:b})}let fm=e.useEffect;function fn(a){return{initialValueFn:()=>a.isEditable(),subscribe:b=>a.registerEditableListener(b)}}let fo=new Map;function fp(a){let b={};if(!a)return b;for(let c of a.split(";"))if(""!==c){let[a,d]=c.split(/:([^]+)/);a&&d&&(b[a.trim()]=d.trim())}return b}function fq(a){let b=fo.get(a);return void 0===b&&(b=fp(a),fo.set(a,b)),b}function fr(a){let b=c2().getElementByKey(a.getKey());if(null===b)return null;let c=b.ownerDocument.defaultView;return null===c?null:c.getComputedStyle(b)}function fs(a){return fr(dm(a)?a:a.getParentOrThrow())}function ft(a){let b=fs(a);return null!==b&&"rtl"===b.direction}function fu(a,b,c="self"){let d=a.getStartEndPoints();if(b.isSelected(a)&&!dK(b)&&null!==d){let[f,g]=d,h=a.isBackward(),i=f.getNode(),j=g.getNode(),k=b.is(i),l=b.is(j);if(k||l){var e;let[d,f]=cA(a),g=i.is(j),k=b.is(h?j:i),l=b.is(h?i:j),m,n=0;g?(n=d>f?f:d,m=d>f?d:f):k?(n=h?f:d,m=void 0):l&&(n=0,m=h?d:f);let o=b.__text.slice(n,m);o!==b.__text&&("clone"===c&&((e=eD(b))[bZ]=!0,b=e),b.__text=o)}}return b}function fv(a){let b=fw(a);return null!==b&&"vertical-rl"===b.writingMode}function fw(a){let b=a.anchor.getNode();return dh(b)?fr(b):fs(b)}function fx(a,b){let c=fv(a)?!b:b;fy(a)&&(c=!c);let d=e7(a.focus,c?"previous":"next");if(ff(d))return!1;for(let a of e0(d)){if(eR(a))return!a.origin.isInline();if(!dh(a.origin)){if(dk(a.origin))return!0;break}}return!1}function fy(a){let b=fw(a);return null!==b&&"rtl"===b.direction}function fz(a,b,c){let d,e=fy(a);d=fv(a)||e?!c:c,a.modify(b?"extend":"move",d,"character")}function fA(...a){let b=[];for(let c of a)if(c&&"string"==typeof c)for(let[a]of c.matchAll(/\S+/g))b.push(a);return b}function fB(...a){return()=>{for(let b=a.length-1;b>=0;b--)a[b]();a.length=0}}function fC(a,...b){let c=fA(...b);c.length>0&&a.classList.add(...c)}function fD(a,...b){let c=fA(...b);c.length>0&&a.classList.remove(...c)}function fE(a,b){return null!==a&&Object.getPrototypeOf(a).constructor.name===b.name}let fF=!1,fG=Symbol.for("preact-signals");function fH(){if(fJ>1)return void fJ--;let a,b=!1;for(;void 0!==c;){let d=c;for(c=void 0,fK++;void 0!==d;){let c=d.o;if(d.o=void 0,d.f&=-3,!(8&d.f)&&fO(d))try{d.c()}catch(c){b||(a=c,b=!0)}d=c}}if(fK=0,fJ--,b)throw a}function fI(a){let c=b;b=void 0;try{return a()}finally{b=c}}let fJ=0,fK=0,fL=0;function fM(a){if(void 0===b)return;let c=a.n;return void 0===c||c.t!==b?(c={i:0,S:a,p:b.s,n:void 0,t:b,e:void 0,x:void 0,r:c},void 0!==b.s&&(b.s.n=c),b.s=c,a.n=c,32&b.f&&a.S(c),c):-1===c.i?(c.i=0,void 0!==c.n&&(c.n.p=c.p,void 0!==c.p&&(c.p.n=c.n),c.p=b.s,c.n=void 0,b.s.n=c,b.s=c),c):void 0}function fN(a,b){this.v=a,this.i=0,this.n=void 0,this.t=void 0,this.W=null==b?void 0:b.watched,this.Z=null==b?void 0:b.unwatched,this.name=null==b?void 0:b.name}function fO(a){for(let b=a.s;void 0!==b;b=b.n)if(b.S.i!==b.i||!b.S.h()||b.S.i!==b.i)return!0;return!1}function fP(a){for(let b=a.s;void 0!==b;b=b.n){let c=b.S.n;if(void 0!==c&&(b.r=c),b.S.n=b,b.i=-1,void 0===b.n){a.s=b;break}}}function fQ(a){let b,c=a.s;for(;void 0!==c;){let a=c.p;-1===c.i?(c.S.U(c),void 0!==a&&(a.n=c.n),void 0!==c.n&&(c.n.p=a)):b=c,c.S.n=c.r,void 0!==c.r&&(c.r=void 0),c=a}a.s=b}function fR(a,b){fN.call(this,void 0),this.x=a,this.s=void 0,this.g=fL-1,this.f=4,this.W=null==b?void 0:b.watched,this.Z=null==b?void 0:b.unwatched,this.name=null==b?void 0:b.name}function fS(a){let c=a.u;if(a.u=void 0,"function"==typeof c){fJ++;let d=b;b=void 0;try{c()}catch(b){throw a.f&=-2,a.f|=8,fT(a),b}finally{b=d,fH()}}}function fT(a){for(let b=a.s;void 0!==b;b=b.n)b.S.U(b);a.x=void 0,a.s=void 0,fS(a)}function fU(a){if(b!==this)throw Error("Out-of-order effect");fQ(this),b=a,this.f&=-2,8&this.f&&fT(this),fH()}function fV(a,b){this.x=a,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=null==b?void 0:b.name}function fW(a,b){let c=new fV(a,b);try{c.c()}catch(a){throw c.d(),a}let d=c.d.bind(c);return d[Symbol.dispose]=d,d}function fX(a,b={}){let c={};for(let d in a){let e=b[d],f=new fN(void 0===e?a[d]:e,void 0);c[d]=f}return c}fN.prototype.brand=fG,fN.prototype.h=function(){return!0},fN.prototype.S=function(a){let b=this.t;b!==a&&void 0===a.e&&(a.x=b,this.t=a,void 0!==b?b.e=a:fI(()=>{var a;null==(a=this.W)||a.call(this)}))},fN.prototype.U=function(a){if(void 0!==this.t){let b=a.e,c=a.x;void 0!==b&&(b.x=c,a.e=void 0),void 0!==c&&(c.e=b,a.x=void 0),a===this.t&&(this.t=c,void 0===c&&fI(()=>{var a;null==(a=this.Z)||a.call(this)}))}},fN.prototype.subscribe=function(a){return fW(()=>{let c=this.value,d=b;b=void 0;try{a(c)}finally{b=d}},{name:"sub"})},fN.prototype.valueOf=function(){return this.value},fN.prototype.toString=function(){return this.value+""},fN.prototype.toJSON=function(){return this.value},fN.prototype.peek=function(){let a=b;b=void 0;try{return this.value}finally{b=a}},Object.defineProperty(fN.prototype,"value",{get(){let a=fM(this);return void 0!==a&&(a.i=this.i),this.v},set(a){if(a!==this.v){if(fK>100)throw Error("Cycle detected");this.v=a,this.i++,fL++,fJ++;try{for(let a=this.t;void 0!==a;a=a.x)a.t.N()}finally{fH()}}}}),fR.prototype=new fN,fR.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if(32==(36&this.f)||(this.f&=-5,this.g===fL))return!0;if(this.g=fL,this.f|=1,this.i>0&&!fO(this))return this.f&=-2,!0;let a=b;try{fP(this),b=this;let a=this.x();(16&this.f||this.v!==a||0===this.i)&&(this.v=a,this.f&=-17,this.i++)}catch(a){this.v=a,this.f|=16,this.i++}return b=a,fQ(this),this.f&=-2,!0},fR.prototype.S=function(a){if(void 0===this.t){this.f|=36;for(let a=this.s;void 0!==a;a=a.n)a.S.S(a)}fN.prototype.S.call(this,a)},fR.prototype.U=function(a){if(void 0!==this.t&&(fN.prototype.U.call(this,a),void 0===this.t)){this.f&=-33;for(let a=this.s;void 0!==a;a=a.n)a.S.U(a)}},fR.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(let a=this.t;void 0!==a;a=a.x)a.t.N()}},Object.defineProperty(fR.prototype,"value",{get(){if(1&this.f)throw Error("Cycle detected");let a=fM(this);if(this.h(),void 0!==a&&(a.i=this.i),16&this.f)throw this.v;return this.v}}),fV.prototype.c=function(){let a=this.S();try{if(8&this.f||void 0===this.x)return;let a=this.x();"function"==typeof a&&(this.u=a)}finally{a()}},fV.prototype.S=function(){if(1&this.f)throw Error("Cycle detected");this.f|=1,this.f&=-9,fS(this),fP(this),fJ++;let a=b;return b=this,fU.bind(this,a)},fV.prototype.N=function(){2&this.f||(this.f|=2,this.o=c,c=this)},fV.prototype.d=function(){this.f|=8,1&this.f||fT(this)},fV.prototype.dispose=function(){this.d()},(a,b,c)=>fX(b);function fY(a,...b){let c=new URL("https://lexical.dev/docs/error"),d=new URLSearchParams;for(let c of(d.append("code",a),b))d.append("v",c);throw c.search=d.toString(),Error(`Minified Lexical error #${a}; visit ${c.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let fZ=new Set;class f${builder;configs;_dependency;_peerNameSet;extension;state;_signal;constructor(a,b){this.builder=a,this.extension=b,this.configs=new Set,this.state={id:0}}mergeConfigs(){let a=this.extension.config||{},b=this.extension.mergeConfig?this.extension.mergeConfig.bind(this.extension):fi;for(let c of this.configs)a=b(a,c);return a}init(a){let b,c=this.state;2===c.id||fY(306,String(c.id));let d={getDependency:this.getInitDependency.bind(this),getDirectDependentNames:this.getDirectDependentNames.bind(this),getPeer:this.getInitPeer.bind(this),getPeerNameSet:this.getPeerNameSet.bind(this)},e={...d,getDependency:this.getDependency.bind(this),getInitResult:this.getInitResult.bind(this),getPeer:this.getPeer.bind(this)},f=Object.assign(c,{config:this.mergeConfigs(),id:3,registerState:d});this.state=f,this.extension.init&&(b=this.extension.init(a,f.config,d)),this.state=Object.assign(f,{id:4,initResult:b,registerState:e})}build(a){let b,c=this.state;4!==c.id&&fY(307,String(c.id),String(5)),this.extension.build&&(b=this.extension.build(a,c.config,c.registerState));let d={...c.registerState,getOutput:()=>b,getSignal:this.getSignal.bind(this)};this.state=Object.assign(c,{id:5,output:b,registerState:d})}register(a,b){this._signal=b;let c=this.state;5!==c.id&&fY(308,String(c.id),String(5));let d=this.extension.register&&this.extension.register(a,c.config,c.registerState);return this.state=Object.assign(c,{id:6}),()=>{let a=this.state;7!==a.id&&fY(309,String(c.id),String(7)),this.state=Object.assign(a,{id:5}),d&&d()}}afterRegistration(a){let b,c=this.state;return 6!==c.id&&fY(310,String(c.id),String(6)),this.extension.afterRegistration&&(b=this.extension.afterRegistration(a,c.config,c.registerState)),this.state=Object.assign(c,{id:7}),b}getSignal(){return void 0===this._signal&&fY(311),this._signal}getInitResult(){void 0===this.extension.init&&fY(312,this.extension.name);let a=this.state;return a.id>=4||fY(313,String(a.id),String(4)),a.initResult}getInitPeer(a){let b=this.builder.extensionNameMap.get(a);return b?b.getExtensionInitDependency():void 0}getExtensionInitDependency(){let a=this.state;return a.id>=3||fY(314,String(a.id),String(3)),{config:a.config}}getPeer(a){let b=this.builder.extensionNameMap.get(a);return b?b.getExtensionDependency():void 0}getInitDependency(a){let b=this.builder.getExtensionRep(a);return void 0===b&&fY(315,this.extension.name,a.name),b.getExtensionInitDependency()}getDependency(a){let b=this.builder.getExtensionRep(a);return void 0===b&&fY(315,this.extension.name,a.name),b.getExtensionDependency()}getState(){let a=this.state;return a.id>=7||fY(316,String(a.id),String(7)),a}getDirectDependentNames(){return this.builder.incomingEdges.get(this.extension.name)||fZ}getPeerNameSet(){let a=this._peerNameSet;return a||(a=new Set((this.extension.peerDependencies||[]).map(([a])=>a)),this._peerNameSet=a),a}getExtensionDependency(){if(!this._dependency){let a=this.state;a.id>=5||fY(317,this.extension.name),this._dependency={config:a.config,init:a.initResult,output:a.output}}return this._dependency}}let f_={tag:b1};function f0(){let a=d$();a.isEmpty()&&a.append(du())}let f1={config:{setOptions:f_,updateOptions:f_},init:({$initialEditorState:a=f0})=>({$initialEditorState:a,initialized:!1}),afterRegistration(a,{updateOptions:b,setOptions:c},d){let e=d.getInitResult();if(!e.initialized){e.initialized=!0;let{$initialEditorState:d}=e;if(d instanceof dq)a.setEditorState(d,c);else if("function"==typeof d)a.update(()=>{d(a)},b);else if(d&&("string"==typeof d||"object"==typeof d)){let b=a.parseEditorState(d);a.setEditorState(b,c)}}return()=>{}},name:"@lexical/extension/InitialState",nodes:[dl,cd,b2,co,ds]},f2=Symbol.for("@lexical/extension/LexicalBuilder");function f3(){}function f4(a){throw a}function f5(a){return Array.isArray(a)?a:[a]}let f6="0.39.0+prod.esm";class f7{roots;extensionNameMap;outgoingConfigEdges;incomingEdges;conflicts;_sortedExtensionReps;PACKAGE_VERSION;constructor(a){for(const b of(this.outgoingConfigEdges=new Map,this.incomingEdges=new Map,this.extensionNameMap=new Map,this.conflicts=new Map,this.PACKAGE_VERSION=f6,this.roots=a,a))this.addExtension(b)}static fromExtensions(a){let b=[f5(f1)];for(let c of a)b.push(f5(c));return new f7(b)}static maybeFromEditor(a){let b=a[f2];return b&&(b.PACKAGE_VERSION!==f6&&fY(292,b.PACKAGE_VERSION,f6),b instanceof f7||fY(293)),b}static fromEditor(a){let b=f7.maybeFromEditor(a);return void 0===b&&fY(294),b}constructEditor(){let{$initialEditorState:a,onError:b,...c}=this.buildCreateEditorArgs(),d=Object.assign(dx({...c,...b?{onError:a=>{b(a,d)}}:{}}),{[f2]:this});for(let a of this.sortedExtensionReps())a.build(d);return d}buildEditor(){let a=f3;function b(){try{a()}finally{a=f3}}let c=Object.assign(this.constructEditor(),{dispose:b,[Symbol.dispose]:b});return a=fB(this.registerEditor(c),()=>c.setRootElement(null)),c}hasExtensionByName(a){return this.extensionNameMap.has(a)}getExtensionRep(a){let b=this.extensionNameMap.get(a.name);if(b)return b.extension!==a&&fY(295,a.name),b}addEdge(a,b,c){let d=this.outgoingConfigEdges.get(a);d?d.set(b,c):this.outgoingConfigEdges.set(a,new Map([[b,c]]));let e=this.incomingEdges.get(b);e?e.add(a):this.incomingEdges.set(b,new Set([a]))}addExtension(a){void 0!==this._sortedExtensionReps&&fY(296);let[b]=f5(a);"string"!=typeof b.name&&fY(297,typeof b.name);let c=this.extensionNameMap.get(b.name);if(void 0!==c&&c.extension!==b&&fY(298,b.name),!c){c=new f$(this,b),this.extensionNameMap.set(b.name,c);let a=this.conflicts.get(b.name);for(let c of("string"==typeof a&&fY(299,b.name,a),b.conflictsWith||[]))this.extensionNameMap.has(c)&&fY(299,b.name,c),this.conflicts.set(c,b.name);for(let a of b.dependencies||[]){let c=f5(a);this.addEdge(b.name,c[0].name,c.slice(1)),this.addExtension(c)}for(let[a,c]of b.peerDependencies||[])this.addEdge(b.name,a,c?[c]:[])}}sortedExtensionReps(){if(this._sortedExtensionReps)return this._sortedExtensionReps;let a=[],b=(c,d)=>{var e,f;let g=c.state;if(2===g.id)return;let h=c.extension.name;0===g.id||fY(300,h,d||"[unknown]"),0===(e=g).id||fY(304,String(e.id),String(0)),c.state=g=Object.assign(e,{id:1});let i=this.outgoingConfigEdges.get(h);if(i)for(let a of i.keys()){let c=this.extensionNameMap.get(a);c&&b(c,h)}1===(f=g).id||fY(305,String(f.id),String(1)),c.state=g=Object.assign(f,{id:2}),a.push(c)};for(let a of this.extensionNameMap.values())0===a.state.id&&b(a);for(let b of a)for(let[a,c]of this.outgoingConfigEdges.get(b.extension.name)||[])if(c.length>0){let b=this.extensionNameMap.get(a);if(b)for(let a of c)b.configs.add(a)}for(let[a,...b]of this.roots)if(b.length>0){let c=this.extensionNameMap.get(a.name);for(let d of(void 0===c&&fY(301,a.name),b))c.configs.add(d)}return this._sortedExtensionReps=a,this._sortedExtensionReps}registerEditor(a){let b=this.sortedExtensionReps(),c=new AbortController,d=[()=>c.abort()],e=c.signal;for(let c of b){let b=c.register(a,e);b&&d.push(b)}for(let c of b){let b=c.afterRegistration(a);b&&d.push(b)}return fB(...d)}buildCreateEditorArgs(){let a={},b=new Set,c=new Map,d=new Map,e={},f={},g=this.sortedExtensionReps();for(let h of g){let{extension:g}=h;if(void 0!==g.onError&&(a.onError=g.onError),void 0!==g.disableEvents&&(a.disableEvents=g.disableEvents),void 0!==g.parentEditor&&(a.parentEditor=g.parentEditor),void 0!==g.editable&&(a.editable=g.editable),void 0!==g.namespace&&(a.namespace=g.namespace),void 0!==g.$initialEditorState&&(a.$initialEditorState=g.$initialEditorState),g.nodes){for(let a of("function"==typeof g.nodes?g.nodes():g.nodes)||[]){if("function"!=typeof a){let b=c.get(a.replace);b&&fY(302,g.name,a.replace.name,b.extension.name),c.set(a.replace,h)}b.add(a)}}if(g.html){if(g.html.export)for(let[a,b]of g.html.export.entries())d.set(a,b);g.html.import&&Object.assign(e,g.html.import)}g.theme&&function a(b,c){if(b&&c&&!Array.isArray(c)&&"object"==typeof b&&"object"==typeof c){for(let d in c)b[d]=a(b[d],c[d]);return b}return c}(f,g.theme)}Object.keys(f).length>0&&(a.theme=f),b.size&&(a.nodes=[...b]);let h=Object.keys(e).length>0,i=d.size>0;for(let b of((h||i)&&(a.html={},h&&(a.html.import=e),i&&(a.html.export=d)),g))b.init(a);return a.onError||(a.onError=f4),a}}aE("INSERT_HORIZONTAL_RULE_COMMAND");var f8=a.i(12875);function f9(a){return()=>(function(a){if(!function(a,b=!0){if(a)return!1;let c=d$().getTextContent();return b&&(c=c.trim()),""===c}(a,!1))return!1;let b=d$().getChildren(),c=b.length;if(c>1)return!1;for(let a=0;a<c;a++){let c=b[a];if(dk(c))return!1;if(dh(c)){if(!dv(c)||0!==c.__indent)return!1;let b=c.getChildren(),d=b.length;for(let c=0;c<d;c++)if(!cm(b[a]))return!1}}return!0})(a)}function ga(a){let b=window.location.origin,c=c=>{if(c.origin!==b)return;let d=a.getRootElement();if(document.activeElement!==d)return;let e=c.data;if("string"==typeof e){let b;try{b=JSON.parse(e)}catch(a){return}if(b&&"nuanria_messaging"===b.protocol&&"request"===b.type){let d=b.payload;if(d&&"makeChanges"===d.functionId){let b=d.args;if(b){let[d,e,f,g,h]=b;a.update(()=>{let a=cN();if(cw(a)){let b=a.anchor,i=b.getNode(),j=0,k=0;if(cm(i)&&d>=0&&e>=0&&(j=d,k=d+e,a.setTextNodeRange(i,j,i,k)),j===k&&""===f||(a.insertRawText(f),i=b.getNode()),cm(i)){j=g,k=g+h;let b=i.getTextContentSize();j=j>b?b:j,k=k>b?b:k,a.setTextNodeRange(i,j,i,k)}c.stopImmediatePropagation()}})}}}}};return window.addEventListener("message",c,!0),()=>{window.removeEventListener("message",c,!0)}}let gb=new Set(["STYLE","SCRIPT"]);function gc(a,...b){let c=new URL("https://lexical.dev/docs/error"),d=new URLSearchParams;for(let c of(d.append("code",a),b))d.append("v",c);throw c.search=d.toString(),Error(`Minified Lexical error #${a}; visit ${c.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function gd(a,b,c){let d=a.getData("application/x-lexical-editor");if(d)try{let a=JSON.parse(d);if(a.namespace===c._config.namespace&&Array.isArray(a.nodes))return ge(c,function(a){let b=[];for(let c=0;c<a.length;c++){let d=c7(a[c],c2()._nodes);cm(d)&&function(a){let b=a.getStyle(),c=fp(b);fo.set(b,c)}(d),b.push(d)}return b}(a.nodes),b)}catch(a){console.error(a)}let e=a.getData("text/html"),f=a.getData("text/plain");if(e&&f!==e)try{let a=(new DOMParser).parseFromString(window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("lexical",{createHTML:a=>a}).createHTML(e):e,"text/html");return ge(c,function(a,b){let c=dM(b)?b.body.childNodes:b.childNodes,d=[],e=[];for(let b of c)if(!gb.has(b.nodeName)){let c=function a(b,c,d,e,f=new Map,g){let h=[];if(gb.has(b.nodeName))return h;let i=null,j=function(a,b){let{nodeName:c}=a,d=b._htmlConversions.get(c.toLowerCase()),e=null;if(void 0!==d)for(let b of d){let c=b(a);null!==c&&(null===e||(e.priority||0)<=(c.priority||0))&&(e=c)}return null!==e?e.conversion:null}(b,c),k=j?j(b):null,l=null;if(null!==k){l=k.after;let a=k.node;if(null!==(i=Array.isArray(a)?a[a.length-1]:a)){for(let[,a]of f)if(!(i=a(i,g)))break;i&&h.push(...Array.isArray(a)?a:[i])}null!=k.forChild&&f.set(b.nodeName,k.forChild)}let m=b.childNodes,n=[],o=(null==i||!eo(i))&&(null!=i&&cI(i)||e);for(let b=0;b<m.length;b++)n.push(...a(m[b],c,d,o,new Map(f),i));return null!=l&&(n=l(n)),ey(b)&&(n=function(a,b,c){let d=a.style.textAlign,e=[],f=[];for(let a=0;a<b.length;a++){let g=b[a];if(cI(g))d&&!g.getFormat()&&g.setFormat(d),e.push(g);else if(f.push(g),a===b.length-1||a<b.length-1&&cI(b[a+1])){let a=c();a.setFormat(d),a.append(...f),e.push(a),f=[]}}return e}(b,n,o?()=>{let a=new dr;return d.push(a),a}:du)),null==i?n.length>0?h=h.concat(n):ey(b)&&null!=b.nextSibling&&null!=b.previousSibling&&ex(b.nextSibling)&&ex(b.previousSibling)&&(h=h.concat(b4())):dh(i)&&i.append(...n),h}(b,a,e,!1);null!==c&&(d=d.concat(c))}return function(a){for(let b of a)b.getNextSibling()instanceof dr&&b.insertAfter(b4());for(let b of a){for(let a of b.getChildren())b.insertBefore(a);b.remove()}}(e),d}(c,a),b)}catch(a){console.error(a)}let g=f||a.getData("text/uri-list");if(null!=g)if(cw(b)){let a=g.split(/(\r?\n|\t)/);""===a[a.length-1]&&a.pop();for(let b=0;b<a.length;b++){let c=cN();if(cw(c)){let d=a[b];"\n"===d||"\r\n"===d?c.insertParagraph():"	"===d?c.insertNodes([cp()]):c.insertText(d)}}}else b.insertRawText(g)}function ge(a,b,c){a.dispatchCommand(aG,{nodes:b,selection:c})||(c.insertNodes(b),function(a){if(cw(a)&&a.isCollapsed()){let b=a.anchor,c=null,d=e7(b,"previous");if(d)if(eP(d))c=d.origin;else for(let a of e1(d,eY(d$(),"next").getFlipped())){if(cm(a.origin)){c=a.origin;break}if(dh(a.origin)&&!a.origin.isInline())break}if(c&&cm(c)){let b=c.getFormat(),d=c.getStyle();a.format===b&&a.style===d||(a.format=b,a.style=d,a.dirty=!0)}}}(c))}let gf=null;async function gg(a,b,c){if(null!==gf)return!1;if(null!==b)return new Promise((d,e)=>{a.update(()=>{d(gh(a,b,c))})});let d=a.getRootElement(),e=a._window||window,f=e.document,g=null;if(null===d||null===g)return!1;let h=f.createElement("span");h.style.cssText="position: fixed; top: -1000px;",h.append(f.createTextNode("#")),d.append(h);let i=new Range;return i.setStart(h,0),i.setEnd(h,1),g.removeAllRanges(),g.addRange(i),new Promise((b,d)=>{let g=a.registerCommand(bg,d=>(fE(d,ClipboardEvent)&&(g(),null!==gf&&(e.clearTimeout(gf),gf=null),b(gh(a,d,c))),!0),4);gf=e.setTimeout(()=>{g(),gf=null,b(!1)},50),f.execCommand("copy"),h.remove()})}function gh(a,b,c){if(void 0===c){let b=(a._window,null),d=cN();if(!d||d.isCollapsed()||!b)return!1;let e=b.anchorNode,f=b.focusNode;if(null!==e&&null!==f&&!dF(a,e,f))return!1;c=function(a=cN()){let b={"text/plain":a?a.getTextContent():""};if(a){let c=c2();for(let[d,e]of gi){let f=e(c,a);null!==f&&(b[d]=f)}}return b}(d)}b.preventDefault();let d=b.clipboardData;return null!==d&&(function(a,b){for(let[c]of gi)void 0===b[c]&&a.setData(c,"");for(let c in b){let d=b[c];void 0!==d&&a.setData(c,d)}}(d,c),!0)}let gi=[["text/html",function(b,c=cN()){return null==c&&gc(166),cw(c)&&c.isCollapsed()||0===c.getNodes().length?"":function(b,c){if("undefined"==typeof document||void 0===a.g.window)throw Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");let d=document.createElement("div"),e=d$().getChildren();for(let a=0;a<e.length;a++)!function a(b,c,d,e=null){let f=null===e||c.isSelected(e),g=dh(c)&&c.excludeFromCopy("html"),h=c;null!==e&&cm(c)&&(h=fu(e,c,"clone"));let i=dh(h)?h.getChildren():[],j=dC(b,h.getType()),{element:k,after:l}=j&&void 0!==j.exportDOM?j.exportDOM(b,h):h.exportDOM(b);if(!k)return!1;let m=document.createDocumentFragment();for(let d=0;d<i.length;d++){let g=i[d],h=a(b,g,m,e);!f&&dh(c)&&h&&c.extractWithChild(g,e,"html")&&(f=!0)}if(f&&!g){if((eu(k)||ew(k))&&k.append(m),d.append(k),l){let a=l.call(h,k);a&&(ew(k)?k.replaceChildren(a):k.replaceWith(a))}}else d.append(m);return f}(b,e[a],d,c);return d.innerHTML}(b,c)}],["application/x-lexical-editor",function(a,b=cN()){return null==b&&gc(166),cw(b)&&b.isCollapsed()||0===b.getNodes().length?null:JSON.stringify(function(a,b){let c=[],d=d$().getChildren();for(let e=0;e<d.length;e++)!function a(b,c,d,e=[]){var f;let g,h,i=null===c||d.isSelected(c),j=dh(d)&&d.excludeFromCopy("html"),k=d;null!==c&&cm(k)&&(k=fu(c,k,"clone"));let l=dh(k)?k.getChildren():[],m=(g=(f=k).exportJSON(),h=f.constructor,g.type!==h.getType()&&gc(58,h.name),dh(f)&&(Array.isArray(g.children)||gc(59,h.name)),g);cm(k)&&0===k.getTextContentSize()&&(i=!1);for(let e=0;e<l.length;e++){let f=l[e],g=a(b,c,f,m.children);!i&&dh(d)&&g&&d.extractWithChild(f,c,"clone")&&(i=!0)}if(i&&!j)e.push(m);else if(Array.isArray(m.children))for(let a=0;a<m.children.length;a++){let b=m.children[a];e.push(b)}return i}(a,b,d[e],c);return{namespace:a._config.namespace,nodes:c}}(a,b))}]];function gj(a,b){if(void 0!==document.caretRangeFromPoint){let c=document.caretRangeFromPoint(a,b);return null===c?null:{node:c.startContainer,offset:c.startOffset}}if("undefined"!==document.caretPositionFromPoint){let c=document.caretPositionFromPoint(a,b);return null===c?null:{node:c.offsetNode,offset:c.offset}}return null}let gk=aE("DRAG_DROP_PASTE_FILE");class gl extends dg{static getType(){return"quote"}static clone(a){return new gl(a.__key)}createDOM(a){let b=document.createElement("blockquote");return fC(b,a.theme.quote),b}updateDOM(a,b){return!1}static importDOM(){return{blockquote:a=>({conversion:gq,priority:0})}}exportDOM(a){let{element:b}=super.exportDOM(a);if(eu(b)){this.isEmpty()&&b.append(document.createElement("br"));let a=this.getFormatType();a&&(b.style.textAlign=a);let c=this.getDirection();c&&(b.dir=c)}return{element:b}}static importJSON(a){return gm().updateFromJSON(a)}insertNewAfter(a,b){let c=du(),d=this.getDirection();return c.setDirection(d),this.insertAfter(c,b),c}collapseAtStart(){let a=du();return this.getChildren().forEach(b=>a.append(b)),this.replace(a),!0}canMergeWhenEmpty(){return!0}}function gm(){return ep(new gl)}class gn extends dg{__tag;static getType(){return"heading"}static clone(a){return new gn(a.__tag,a.__key)}constructor(a,b){super(b),this.__tag=a}getTag(){return this.__tag}setTag(a){let b=this.getWritable();return this.__tag=a,b}createDOM(a){let b=this.__tag,c=document.createElement(b),d=a.theme.heading;return void 0!==d&&fC(c,d[b]),c}updateDOM(a,b,c){return a.__tag!==this.__tag}static importDOM(){return{h1:a=>({conversion:gp,priority:0}),h2:a=>({conversion:gp,priority:0}),h3:a=>({conversion:gp,priority:0}),h4:a=>({conversion:gp,priority:0}),h5:a=>({conversion:gp,priority:0}),h6:a=>({conversion:gp,priority:0}),p:a=>{let b=a.firstChild;return null!==b&&go(b)?{conversion:()=>({node:null}),priority:3}:null},span:a=>go(a)?{conversion:a=>({node:gr("h1")}),priority:3}:null}}exportDOM(a){let{element:b}=super.exportDOM(a);if(eu(b)){this.isEmpty()&&b.append(document.createElement("br"));let a=this.getFormatType();a&&(b.style.textAlign=a);let c=this.getDirection();c&&(b.dir=c)}return{element:b}}static importJSON(a){return gr(a.tag).updateFromJSON(a)}updateFromJSON(a){return super.updateFromJSON(a).setTag(a.tag)}exportJSON(){return{...super.exportJSON(),tag:this.getTag()}}insertNewAfter(a,b=!0){let c=a?a.anchor.offset:0,d=this.getLastDescendant(),e=d&&(!a||a.anchor.key!==d.getKey()||c!==d.getTextContentSize())&&a?gr(this.getTag()):du(),f=this.getDirection();if(e.setDirection(f),this.insertAfter(e,b),0===c&&!this.isEmpty()&&a){let a=du();a.select(),this.replace(a,!0)}return e}collapseAtStart(){let a=this.isEmpty()?du():gr(this.getTag());return this.getChildren().forEach(b=>a.append(b)),this.replace(a),!0}extractWithChild(){return!0}}function go(a){return"span"===a.nodeName.toLowerCase()&&"26pt"===a.style.fontSize}function gp(a){let b=a.nodeName.toLowerCase(),c=null;return"h1"!==b&&"h2"!==b&&"h3"!==b&&"h4"!==b&&"h5"!==b&&"h6"!==b||(c=gr(b),null!==a.style&&(eE(a,c),c.setFormat(a.style.textAlign))),{node:c}}function gq(a){let b=gm();return null!==a.style&&(b.setFormat(a.style.textAlign),eE(a,b)),{node:b}}function gr(a="h1"){return ep(new gn(a))}function gs(a){let b=null;if(fE(a,DragEvent)?b=a.dataTransfer:fE(a,ClipboardEvent)&&(b=a.clipboardData),null===b)return[!1,[],!1];let c=b.types,d=c.includes("Files"),e=c.includes("text/html")||c.includes("text/plain");return[d,Array.from(b.files),e]}function gt(a){let b=cN();if(!cw(b))return!1;let c=new Set,d=b.getNodes();for(let b=0;b<d.length;b++){let e=d[b],f=e.getKey();if(c.has(f))continue;let g=eH(e,a=>dh(a)&&!a.isInline());if(null===g)continue;let h=g.getKey();g.canIndent()&&!c.has(h)&&(c.add(h),a(g))}return c.size>0}function gu(a){for(let b of["lowercase","uppercase","capitalize"])a.hasFormat(b)&&a.toggleFormat(b)}let gv=e.useEffect;function gw({editor:a,ErrorBoundary:b}){return function(a,b){let[c,f]=(0,e.useState)(()=>a.getDecorators());return gv(()=>a.registerDecoratorListener(a=>{(0,f8.flushSync)(()=>{f(a)})}),[a]),(0,e.useEffect)(()=>{f(a.getDecorators())},[a]),(0,e.useMemo)(()=>{let f=[],g=Object.keys(c);for(let h=0;h<g.length;h++){let i=g[h],j=(0,d.jsx)(b,{onError:b=>a._onError(b),children:(0,d.jsx)(e.Suspense,{fallback:null,children:c[i]})}),k=a.getElementByKey(i);null!==k&&f.push((0,f8.createPortal)(j,k,i))}return f},[b,c,a])}(a,b)}function gx({editor:a,ErrorBoundary:b}){return!function(a){let b=f7.maybeFromEditor(a);if(b&&b.hasExtensionByName("@lexical/react/ReactProvider")){for(let a of["@lexical/plain-text","@lexical/rich-text"])b.hasExtensionByName(a)&&function(a,...b){let c=new URL("https://lexical.dev/docs/error"),d=new URLSearchParams;for(let a of(d.append("code",320),b))d.append("v",a);throw c.search=d.toString(),Error(`Minified Lexical error #320; visit ${c.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(0,a);return!0}return!1}(a)?(0,d.jsx)(gw,{editor:a,ErrorBoundary:b}):null}function gy(a){return a.getEditorState().read(f9(a.isComposing()))}function gz({contentEditable:a,placeholder:b=null,ErrorBoundary:c}){var e;let[f]=x();return gv(()=>{var a;return fB(fB((a=e).registerCommand(aH,a=>{let b=cN();return!!cy(b)&&(b.clear(),!0)},0),a.registerCommand(aM,a=>{let b=cN();return cw(b)?(b.deleteCharacter(a),!0):!!cy(b)&&(b.deleteNodes(),!0)},0),a.registerCommand(aS,a=>{let b=cN();return!!cw(b)&&(b.deleteWord(a),!0)},0),a.registerCommand(aT,a=>{let b=cN();return!!cw(b)&&(b.deleteLine(a),!0)},0),a.registerCommand(aP,b=>{let c=cN();if("string"==typeof b)null!==c&&c.insertText(b);else{if(null===c)return!1;let d=b.dataTransfer;if(null!=d)gd(d,c,a);else if(cw(c)){let a=b.data;return a&&c.insertText(a),!0}}return!0},0),a.registerCommand(aR,()=>{let a=cN();return!!cw(a)&&(a.removeText(),!0)},0),a.registerCommand(aU,a=>{let b=cN();return!!cw(b)&&(b.formatText(a),!0)},0),a.registerCommand(bc,a=>{let b=cN();if(!cw(b)&&!cy(b))return!1;for(let c of b.getNodes()){let b=eH(c,a=>dh(a)&&!a.isInline());null!==b&&b.setFormat(a)}return!0},0),a.registerCommand(aN,a=>{let b=cN();return!!cw(b)&&(b.insertLineBreak(a),!0)},0),a.registerCommand(aO,()=>{let a=cN();return!!cw(a)&&(a.insertParagraph(),!0)},0),a.registerCommand(a8,()=>{var a;let b;return a=[cp()],null===(b=cN()||cO())&&(b=d$().selectEnd()),b.insertNodes(a),!0},0),a.registerCommand(a9,()=>gt(a=>{let b=a.getIndent();a.setIndent(b+1)}),0),a.registerCommand(ba,()=>gt(a=>{let b=a.getIndent();b>0&&a.setIndent(Math.max(0,b-1))}),0),a.registerCommand(a0,a=>{let b=cN();if(cy(b)){let c=b.getNodes();if(c.length>0)return a.preventDefault(),c[0].selectPrevious(),!0}else if(cw(b)){let c=ef(b.focus,!0);if(!a.shiftKey&&dk(c)&&!c.isIsolated()&&!c.isInline())return c.selectPrevious(),a.preventDefault(),!0}return!1},0),a.registerCommand(a1,a=>{let b=cN();if(cy(b)){let c=b.getNodes();if(c.length>0)return a.preventDefault(),c[0].selectNext(0,0),!0}else if(cw(b)){let c;if("root"===(c=b.focus).key&&c.offset===d$().getChildrenSize())return a.preventDefault(),!0;let d=ef(b.focus,!1);if(!a.shiftKey&&dk(d)&&!d.isIsolated()&&!d.isInline())return d.selectNext(),a.preventDefault(),!0}return!1},0),a.registerCommand(a$,a=>{let b=cN();if(cy(b)){let c=b.getNodes();if(c.length>0)return a.preventDefault(),ft(c[0])?c[0].selectNext(0,0):c[0].selectPrevious(),!0}if(!cw(b))return!1;if(fx(b,!0)){let c=a.shiftKey;return a.preventDefault(),fz(b,c,!0),!0}return!1},0),a.registerCommand(aY,a=>{let b=cN();if(cy(b)){let c=b.getNodes();if(c.length>0)return a.preventDefault(),ft(c[0])?c[0].selectPrevious():c[0].selectNext(0,0),!0}if(!cw(b))return!1;let c=a.shiftKey;return!!fx(b,!1)&&(a.preventDefault(),fz(b,c,!1),!0)},0),a.registerCommand(a4,b=>{if(dk(dX(b.target)))return!1;let c=cN();if(cw(c)){if(function(a){var b;let c;if(!a.isCollapsed())return!1;let{anchor:d}=a;if(0!==d.offset)return!1;let e=d.getNode();if(dm(e))return!1;let f=(c=eH(b=e,a=>dh(a)&&!a.isInline()),dh(c)||function(a,...b){let c=new URL("https://lexical.dev/docs/error"),d=new URLSearchParams;for(let a of(d.append("code",4),b))d.append("v",a);throw c.search=d.toString(),Error(`Minified Lexical error #4; visit ${c.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(0,b.__key),c);return f.getIndent()>0&&(f.is(e)||e.is(f.getFirstDescendant()))}(c))return b.preventDefault(),a.dispatchCommand(ba,void 0)}else if(!cy(c))return!1;return b.preventDefault(),a.dispatchCommand(aM,!0)},0),a.registerCommand(a6,b=>{if(dk(dX(b.target)))return!1;let c=cN();return!(!cw(c)&&!cy(c))&&(b.preventDefault(),a.dispatchCommand(aM,!1))},0),a.registerCommand(a2,b=>{let c=cN();return!!cw(c)&&((gu(c),null!==b&&(b.preventDefault(),b.shiftKey))?a.dispatchCommand(aN,!1):a.dispatchCommand(aO,void 0))},0),a.registerCommand(a5,()=>!!cw(cN())&&(a.blur(),!0),0),a.registerCommand(bb,b=>{let[,c]=gs(b);if(c.length>0){let d=gj(b.clientX,b.clientY);if(null!==d){let{offset:b,node:e}=d,f=dX(e);if(null!==f){let a=cK();if(cm(f))a.anchor.set(f.getKey(),b,"text"),a.focus.set(f.getKey(),b,"text");else{let b=f.getParentOrThrow().getKey(),c=f.getIndexWithinParent()+1;a.anchor.set(b,c,"element"),a.focus.set(b,c,"element")}d0($(a))}a.dispatchCommand(gk,c)}return b.preventDefault(),!0}return!!cw(cN())},0),a.registerCommand(bd,a=>{let[b]=gs(a),c=cN();return!(b&&!cw(c))},0),a.registerCommand(be,a=>{let[b]=gs(a),c=cN();if(b&&!cw(c))return!1;let d=gj(a.clientX,a.clientY);return null!==d&&dk(dX(d.node))&&a.preventDefault(),!0},0),a.registerCommand(bi,()=>((function(a){let b=d$();if(cw(void 0)){let a=(void 0).anchor,b=(void 0).focus,c=a.getNode().getTopLevelElementOrThrow().getParentOrThrow();return a.set(c.getKey(),0,"element"),b.set(c.getKey(),c.getChildrenSize(),"element"),$(void 0)}d0($(b.select(0,b.getChildrenSize())))})(),!0),0),a.registerCommand(bg,b=>(gg(a,fE(b,ClipboardEvent)?b:null),!0),0),a.registerCommand(bh,b=>((async function(a,b){await gg(b,fE(a,ClipboardEvent)?a:null),b.update(()=>{let a=cN();cw(a)?a.removeText():cy(a)&&a.getNodes().forEach(a=>a.remove())})})(b,a),!0),0),a.registerCommand(aQ,b=>{let[,c,d]=gs(b);return c.length>0&&!d?(a.dispatchCommand(gk,c),!0):!(ev(b.target)&&dE(b.target))&&null!==cN()&&(b.preventDefault(),a.update(()=>{let c=cN(),d=fE(b,InputEvent)||fE(b,KeyboardEvent)?null:b.clipboardData;null!=d&&null!==c&&gd(d,c,a)},{tag:"paste"}),!0)},0),a.registerCommand(a3,a=>{let b=cN();return cw(b)&&gu(b),!1},0),a.registerCommand(a7,a=>{let b=cN();return cw(b)&&gu(b),!1},0)),ga(e))},[e=f]),(0,d.jsxs)(d.Fragment,{children:[a,(0,d.jsx)(gA,{content:b}),(0,d.jsx)(gx,{editor:f,ErrorBoundary:c})]})}function gA({content:a}){let[b]=x(),c=function(a){let[b,c]=(0,e.useState)(()=>gy(a));return gv(()=>{function b(){c(gy(a))}return b(),fB(a.registerUpdateListener(()=>{b()}),a.registerEditableListener(()=>{b()}))},[a]),b}(b),d=function(a){let[b]=x(),c=(0,e.useMemo)(()=>a(b),[b,a]),[d,f]=(0,e.useState)(()=>c.initialValueFn()),g=(0,e.useRef)(d);return fm(()=>{let{initialValueFn:a,subscribe:b}=c,d=a();return g.current!==d&&(g.current=d,f(d)),b(a=>{g.current=a,f(a)})},[c,a]),d}(fn);return c?"function"==typeof a?a(d):a:null}let gB=e.useEffect,gC=(0,e.forwardRef)(function({editor:a,ariaActiveDescendant:b,ariaAutoComplete:c,ariaControls:f,ariaDescribedBy:g,ariaErrorMessage:h,ariaExpanded:i,ariaInvalid:j,ariaLabel:k,ariaLabelledBy:l,ariaMultiline:m,ariaOwns:n,ariaRequired:o,autoCapitalize:p,className:q,id:r,role:s="textbox",spellCheck:t=!0,style:u,tabIndex:v,"data-testid":w,...x},y){let[z,A]=(0,e.useState)(a.isEditable()),B=(0,e.useCallback)(b=>{b&&b.ownerDocument&&b.ownerDocument.defaultView?a.setRootElement(b):a.setRootElement(null)},[a]),C=(0,e.useMemo)(()=>(function(...a){return b=>{for(let c of a)"function"==typeof c?c(b):null!=c&&(c.current=b)}})(y,B),[B,y]);return gB(()=>(A(a.isEditable()),a.registerEditableListener(a=>{A(a)})),[a]),(0,d.jsx)("div",{"aria-activedescendant":z?b:void 0,"aria-autocomplete":z?c:"none","aria-controls":z?f:void 0,"aria-describedby":g,...null!=h?{"aria-errormessage":h}:{},"aria-expanded":z&&"combobox"===s?!!i:void 0,...null!=j?{"aria-invalid":j}:{},"aria-label":k,"aria-labelledby":l,"aria-multiline":m,"aria-owns":z?n:void 0,"aria-readonly":!z||void 0,"aria-required":o,autoCapitalize:p,className:q,contentEditable:z,"data-testid":w,id:r,ref:C,role:s,spellCheck:t,style:u,tabIndex:v,...x})});function gD(a){return a.getEditorState().read(f9(a.isComposing()))}let gE=(0,e.forwardRef)(function(a,b){let{placeholder:c,...e}=a,[f]=x();return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(gC,{editor:f,...e,ref:b}),null!=c&&(0,d.jsx)(gF,{editor:f,content:c})]})});function gF({content:a,editor:b}){let c=function(a){let[b,c]=(0,e.useState)(()=>gD(a));return gB(()=>{function b(){c(gD(a))}return b(),fB(a.registerUpdateListener(()=>{b()}),a.registerEditableListener(()=>{b()}))},[a]),b}(b),[f,g]=(0,e.useState)(b.isEditable());if((0,e.useLayoutEffect)(()=>(g(b.isEditable()),b.registerEditableListener(a=>{g(a)})),[b]),!c)return null;let h=null;return"function"==typeof a?h=a(f):null!==a&&(h=a),null===h?null:(0,d.jsx)("div",{"aria-hidden":!0,children:h})}function gG(a){a.undoStack=[],a.redoStack=[],a.current=null}function gH(a,b,c){let d,e,f=(d=Date.now(),e=0,(b,f,g,h,i,j)=>{let k=Date.now();if(j.has(b0))return e=0,d=k,2;let l=function(a,b,c,d,e){if(null===a||0===c.size&&0===d.size&&!e)return 0;let f=b._selection,g=a._selection;if(e)return 1;if(!(cw(f)&&cw(g)&&g.isCollapsed()&&f.isCollapsed()))return 0;let h=function(a,b,c){let d=a._nodeMap,e=[];for(let a of b){let b=d.get(a);void 0!==b&&e.push(b)}for(let[a,b]of c){if(!b)continue;let c=d.get(a);void 0===c||dm(c)||e.push(c)}return e}(b,c,d);if(0===h.length)return 0;if(h.length>1){let c=b._nodeMap,d=c.get(f.anchor.key),e=c.get(g.anchor.key);return d&&e&&!a._nodeMap.has(d.__key)&&cm(d)&&1===d.__text.length&&1===f.anchor.offset?2:0}let i=h[0],j=a._nodeMap.get(i.__key);if(!cm(j)||!cm(i)||j.__mode!==i.__mode)return 0;let k=j.__text,l=i.__text;if(k===l)return 0;let m=f.anchor,n=g.anchor;if(m.key!==n.key||"text"!==m.type)return 0;let o=m.offset,p=n.offset,q=l.length-k.length;return 1===q&&p===o-1?2:-1===q&&p===o+1?3:4*(-1===q&&p===o)}(b,f,h,i,a.isComposing()),m=(()=>{var m;let n,o,p,q,r=null===g||g.editor===a,s=j.has("history-push");if(!s&&r&&j.has(b1))return 0;if(null===b)return 1;let t=f._selection;if(!(h.size>0||i.size>0))return 2*(null===t);let u="number"==typeof c?c:c.peek();return!1===s&&0!==l&&l===e&&k<d+u&&r?0:1!==h.size||(m=Array.from(h)[0],n=b._nodeMap.get(m),o=f._nodeMap.get(m),p=b._selection,q=f._selection,cw(p)&&cw(q)&&"element"===p.anchor.type&&"element"===p.focus.type&&"text"===q.anchor.type&&"text"===q.focus.type||!cm(n)||!cm(o)||n.__parent!==o.__parent||JSON.stringify(b.read(()=>n.exportJSON()))!==JSON.stringify(f.read(()=>o.exportJSON())))?1:0})();return d=k,e=l,m});return fB(a.registerCommand(aV,()=>((function(a,b){let c=b.redoStack,d=b.undoStack;if(0!==d.length){let e=b.current,f=d.pop();null!==e&&(c.push(e),a.dispatchCommand(bl,!0)),0===d.length&&a.dispatchCommand(bm,!1),b.current=f||null,f&&f.editor.setEditorState(f.editorState,{tag:b0})}})(a,b),!0),0),a.registerCommand(aW,()=>((function(a,b){let c=b.redoStack,d=b.undoStack;if(0!==c.length){let e=b.current;null!==e&&(d.push(e),a.dispatchCommand(bm,!0));let f=c.pop();0===c.length&&a.dispatchCommand(bl,!1),b.current=f||null,f&&f.editor.setEditorState(f.editorState,{tag:b0})}})(a,b),!0),0),a.registerCommand(bj,()=>(gG(b),!1),0),a.registerCommand(bk,()=>(gG(b),a.dispatchCommand(bl,!1),a.dispatchCommand(bm,!1),!0),0),a.registerUpdateListener(({editorState:c,prevEditorState:d,dirtyLeaves:e,dirtyElements:g,tags:h})=>{let i=b.current,j=b.redoStack,k=b.undoStack,l=null===i?null:i.editorState;if(null!==i&&c===l)return;let m=f(d,c,i,e,g,h);if(1===m)0!==j.length&&(b.redoStack=[],a.dispatchCommand(bl,!1)),null!==i&&(k.push({...i}),a.dispatchCommand(bm,!0));else if(2===m)return;b.current={editor:a,editorState:c}}))}function gI(){return{current:null,redoStack:[],undoStack:[]}}function gJ({delay:a,externalHistoryState:b}){let[c]=x();return function(a,b,c=1e3){let d=(0,e.useMemo)(()=>b||gI(),[b]);(0,e.useEffect)(()=>gH(a,d,c),[c,a,d])}(c,b,a),null}let gK=new Set(["http:","https:","mailto:","sms:","tel:"]);class gL extends dg{__url;__target;__rel;__title;static getType(){return"link"}static clone(a){return new gL(a.__url,{rel:a.__rel,target:a.__target,title:a.__title},a.__key)}constructor(a="",b={},c){super(c);const{target:d=null,rel:e=null,title:f=null}=b;this.__url=a,this.__target=d,this.__rel=e,this.__title=f}createDOM(a){let b=document.createElement("a");return this.updateLinkDOM(null,b,a),fC(b,a.theme.link),b}updateLinkDOM(a,b,c){if(et(b))for(let c of(a&&a.__url===this.__url||(b.href=this.sanitizeUrl(this.__url)),["target","rel","title"])){let d=`__${c}`,e=this[d];a&&a[d]===e||(e?b[c]=e:b.removeAttribute(c))}}updateDOM(a,b,c){return this.updateLinkDOM(a,b,c),!1}static importDOM(){return{a:a=>({conversion:gM,priority:1})}}static importJSON(a){return gN().updateFromJSON(a)}updateFromJSON(a){return super.updateFromJSON(a).setURL(a.url).setRel(a.rel||null).setTarget(a.target||null).setTitle(a.title||null)}sanitizeUrl(a){a=gW(a);try{let b=new URL(gW(a));if(!gK.has(b.protocol))return"about:blank"}catch(a){}return a}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()}}getURL(){return this.getLatest().__url}setURL(a){let b=this.getWritable();return b.__url=a,b}getTarget(){return this.getLatest().__target}setTarget(a){let b=this.getWritable();return b.__target=a,b}getRel(){return this.getLatest().__rel}setRel(a){let b=this.getWritable();return b.__rel=a,b}getTitle(){return this.getLatest().__title}setTitle(a){let b=this.getWritable();return b.__title=a,b}insertNewAfter(a,b=!0){let c=gN(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(c,b),c}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(a,b,c){if(!cw(b))return!1;let d=b.anchor.getNode(),e=b.focus.getNode();return this.isParentOf(d)&&this.isParentOf(e)&&b.getTextContent().length>0}isEmailURI(){return this.__url.startsWith("mailto:")}isWebSiteURI(){return this.__url.startsWith("https://")||this.__url.startsWith("http://")}}function gM(a){let b=null;if(et(a)){let c=a.textContent;(null!==c&&""!==c||a.children.length>0)&&(b=gN(a.getAttribute("href")||"",{rel:a.getAttribute("rel"),target:a.getAttribute("target"),title:a.getAttribute("title")}))}return{node:b}}function gN(a="",b){return ep(new gL(a,b))}function gO(a){return a instanceof gL}class gP extends gL{__isUnlinked;constructor(a="",b={},c){super(a,b,c),this.__isUnlinked=void 0!==b.isUnlinked&&null!==b.isUnlinked&&b.isUnlinked}static getType(){return"autolink"}static clone(a){return new gP(a.__url,{isUnlinked:a.__isUnlinked,rel:a.__rel,target:a.__target,title:a.__title},a.__key)}getIsUnlinked(){return this.__isUnlinked}setIsUnlinked(a){let b=this.getWritable();return b.__isUnlinked=a,b}createDOM(a){return this.__isUnlinked?document.createElement("span"):super.createDOM(a)}updateDOM(a,b,c){return super.updateDOM(a,b,c)||a.__isUnlinked!==this.__isUnlinked}static importJSON(a){return gQ().updateFromJSON(a)}updateFromJSON(a){return super.updateFromJSON(a).setIsUnlinked(a.isUnlinked||!1)}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),isUnlinked:this.__isUnlinked}}insertNewAfter(a,b=!0){let c=this.getParentOrThrow().insertNewAfter(a,b);if(dh(c)){let a=gQ(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,target:this.__target,title:this.__title});return c.append(a),a}return null}}function gQ(a="",b){return ep(new gP(a,b))}function gR(a){return a instanceof gP}let gS=aE("TOGGLE_LINK_COMMAND");function gT(a,b){if("element"===a.type){let c=a.getNode();return dh(c)||function(a,...b){let c=new URL("https://lexical.dev/docs/error"),d=new URLSearchParams;for(let a of(d.append("code",252),b))d.append("v",a);throw c.search=d.toString(),Error(`Minified Lexical error #252; visit ${c.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(0),c.getChildren()[a.offset+b]||null}return null}function gU(a,b={}){let c;if(a&&"object"==typeof a){let{url:d,...e}=a;c=d,b={...e,...b}}else c=a;let{target:d,title:e}=b,f=void 0===b.rel?"noreferrer":b.rel,g=cN();if(null===g||!cw(g)&&!cy(g))return;if(cy(g)){let a=g.getNodes();if(0===a.length)return;return void a.forEach(a=>{if(null===c){let b=eH(a,a=>!gR(a)&&gO(a));b&&(b.insertBefore(a),0===b.getChildren().length&&b.remove())}else{let b=eH(a,a=>!gR(a)&&gO(a));if(b)b.setURL(c),void 0!==d&&b.setTarget(d),void 0!==f&&b.setRel(f);else{let b=gN(c,{rel:f,target:d});a.insertBefore(b),b.append(a)}}})}let h=g.extract();if(null===c){let a=new Set;return void h.forEach(b=>{let c=b.getParent();if(gO(c)&&!gR(c)){let b=c.getKey();if(a.has(b))return;!function(a,b){let c=new Set(b.filter(b=>a.isParentOf(b)).map(a=>a.getKey())),d=a.getChildren(),e=d.filter(a=>c.has(a.getKey()));if(e.length===d.length)return d.forEach(b=>a.insertBefore(b)),a.remove();let f=d.findIndex(a=>c.has(a.getKey())),g=d.findLastIndex(a=>c.has(a.getKey())),h=g===d.length-1;if(0===f)e.forEach(b=>a.insertBefore(b));else if(h)for(let b=e.length-1;b>=0;b--)a.insertAfter(e[b]);else{for(let b=e.length-1;b>=0;b--)a.insertAfter(e[b]);let b=d.slice(g+1);if(b.length>0){let c=gN(a.getURL(),{rel:a.getRel(),target:a.getTarget(),title:a.getTitle()});e[e.length-1].insertAfter(c),b.forEach(a=>c.append(a))}}}(c,h),a.add(b)}})}let i=new Set,j=a=>{i.has(a.getKey())||(i.add(a.getKey()),a.setURL(c),void 0!==d&&a.setTarget(d),void 0!==f&&a.setRel(f),void 0!==e&&a.setTitle(e))};if(1===h.length){let a=eH(h[0],gO);if(null!==a)return j(a)}!function(a){let b=cN();if(!cw(b))return a();let c=$(b),d=c.isBackward(),e=gT(c.anchor,d?-1:0),f=gT(c.focus,d?0:-1);if(a(),e||f){let a=cN();if(cw(a)){let b=a.clone();if(e){let a=e.getParent();a&&b.anchor.set(a.getKey(),e.getIndexWithinParent()+ +!!d,"element")}if(f){let a=f.getParent();a&&b.focus.set(a.getKey(),f.getIndexWithinParent()+ +!d,"element")}d0($(b))}}}(()=>{let a=null;for(let b of h){if(!b.isAttached())continue;let g=eH(b,gO);if(g){j(g);continue}if(dh(b)){if(!b.isInline())continue;if(gO(b)){if(!(gR(b)||null!==a&&a.getParentOrThrow().isParentOf(b))){j(b),a=b;continue}for(let a of b.getChildren())b.insertBefore(a);b.remove();continue}}let h=b.getPreviousSibling();gO(h)&&h.is(a)?h.append(b):(a=gN(c,{rel:f,target:d,title:e}),b.insertAfter(a),a.append(b))}})}let gV=/^\+?[0-9\s()-]{5,}$/;function gW(a){return a.match(/^[a-z][a-z0-9+.-]*:/i)||a.match(/^[/#.]/)?a:a.includes("@")?`mailto:${a}`:gV.test(a)?`tel:${a}`:`https://${a}`}function gX(a,b){return fB(fW(()=>a.registerCommand(gS,a=>{let c=b.validateUrl.peek(),d=b.attributes.peek();if(null===a)return gU(null),!0;if("string"==typeof a)return!(void 0!==c&&!c(a))&&(gU(a,d),!0);{let{url:b,target:c,rel:e,title:f}=a;return gU(b,{...d,rel:e,target:c,title:f}),!0}},1)),fW(()=>{let c=b.validateUrl.value;if(!c)return;let d=b.attributes.value;return a.registerCommand(aQ,b=>{let e=cN();if(!cw(e)||e.isCollapsed()||!fE(b,ClipboardEvent)||null===b.clipboardData)return!1;let f=b.clipboardData.getData("text");return!!c(f)&&!e.getNodes().some(a=>dh(a))&&(a.dispatchCommand(gS,{...d,url:f}),b.preventDefault(),!0)},1)}))}function gY({validateUrl:a,attributes:b}){let[c]=x();return(0,e.useEffect)(()=>{if(!c.hasNodes([gL]))throw Error("LinkPlugin: LinkNode not registered on editor")}),(0,e.useEffect)(()=>gX(c,fX({attributes:b,validateUrl:a})),[c,a,b]),null}function gZ(a,...b){let c=new URL("https://lexical.dev/docs/error"),d=new URLSearchParams;for(let c of(d.append("code",a),b))d.append("v",c);throw c.search=d.toString(),Error(`Minified Lexical error #${a}; visit ${c.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function g$(a){let b=1,c=a.getParent();for(;null!=c;){if(hd(c)){let a=c.getParent();if(hk(a)){b++,c=a.getParent();continue}gZ(40)}break}return b}function g_(a){let b=a.getParent();hk(b)||gZ(40);let c=b;for(;null!==c;)hk(c=c.getParent())&&(b=c);return b}function g0(a){return hd(a)&&hk(a.getFirstChild())}function g1(a){return hc().append(a)}function g2(a,b){return hd(a)&&(0===b.length||1===b.length&&a.is(b[0])&&0===a.getChildrenSize())}function g3(a){let b=cN();if(null!==b){let c=b.getNodes();if(cw(b)){let d=b.getStartEndPoints();null===d&&gZ(143);let[e]=d,f=e.getNode(),g=f.getParent();if(eo(f)){let a=f.getFirstChild();if(a)c=a.selectStart().getNodes();else{let a=du();f.append(a),c=a.select().getNodes()}}else if(g2(f,c)){let b=hj(a);if(eo(g)){f.replace(b);let a=hc();dh(f)&&(a.setFormat(f.getFormatType()),a.setIndent(f.getIndent())),b.append(a)}else if(hd(f)){let a=f.getParentOrThrow();g4(b,a.getChildren()),a.replace(b)}return}}let d=new Set;for(let b=0;b<c.length;b++){let e=c[b];if(dh(e)&&e.isEmpty()&&!hd(e)&&!d.has(e.getKey())){g5(e,a);continue}let f=dP(e)?e.getParent():hd(e)&&e.isEmpty()?e:null;for(;null!=f;){let b=f.getKey();if(hk(f)){if(!d.has(b)){let c=hj(a);g4(c,f.getChildren()),f.replace(c),d.add(b)}break}{let c=f.getParent();if(eo(c)&&!d.has(b)){d.add(b),g5(f,a);break}f=c}}}}}function g4(a,b){a.splice(a.getChildrenSize(),0,b)}function g5(a,b){let c;if(hk(a))return a;let d=a.getPreviousSibling(),e=a.getNextSibling(),f=hc();if(g4(f,a.getChildren()),hk(d)&&b===d.getListType())d.append(f),hk(e)&&b===e.getListType()&&(g4(d,e.getChildren()),e.remove()),c=d;else if(hk(e)&&b===e.getListType())e.getFirstChildOrThrow().insertBefore(f),c=e;else{let d=hj(b);d.append(f),a.replace(d),c=d}return f.setFormat(a.getFormatType()),f.setIndent(a.getIndent()),a.remove(),c}function g6(a,b){let c=a.getLastChild(),d=b.getFirstChild();c&&d&&g0(c)&&g0(d)&&(g6(c.getFirstChild(),d.getFirstChild()),d.remove());let e=b.getChildren();e.length>0&&a.append(...e),b.remove()}function g7(a){let b="check"!==a.getListType(),c=a.getStart();for(let d of a.getChildren())hd(d)&&(d.getValue()!==c&&d.setValue(c),b&&null!=d.getLatest().__checked&&d.setChecked(void 0),hk(d.getFirstChild())||c++)}function g8(...a){let b=[];for(let c of a)if(c&&"string"==typeof c)for(let[a]of c.matchAll(/\S+/g))b.push(a);return b}class g9 extends dg{__value;__checked;$config(){return this.config("listitem",{$transform:a=>{if(null==a.__checked)return;let b=a.getParent();hk(b)&&"check"!==b.getListType()&&null!=a.getChecked()&&a.setChecked(void 0)},extends:dg,importDOM:{li:()=>({conversion:ha,priority:0})}})}constructor(a=1,b,c){super(c),this.__value=void 0===a?1:a,this.__checked=b}afterCloneFrom(a){super.afterCloneFrom(a),this.__value=a.__value,this.__checked=a.__checked}createDOM(a){let b=document.createElement("li");return this.updateListItemDOM(null,b,a),b}updateListItemDOM(a,b,c){let d;!hk(d=this.getParent())||"check"!==d.getListType()||hk(this.getFirstChild())?(b.removeAttribute("role"),b.removeAttribute("tabIndex"),b.removeAttribute("aria-checked")):(b.setAttribute("role","checkbox"),b.setAttribute("tabIndex","-1"),a&&this.__checked===a.__checked||b.setAttribute("aria-checked",this.getChecked()?"true":"false")),b.value=this.__value,function(a,b,c){let d,e=[],f=[],g=b.list,h=g?g.listitem:void 0;if(g&&g.nested&&(d=g.nested.listitem),void 0!==h&&e.push(...g8(h)),g){let a=c.getParent(),b=hk(a)&&"check"===a.getListType(),d=c.getChecked();b&&!d||f.push(g.listitemUnchecked),b&&d||f.push(g.listitemChecked),b&&e.push(d?g.listitemChecked:g.listitemUnchecked)}if(void 0!==d){let a=g8(d);c.getChildren().some(a=>hk(a))?e.push(...a):f.push(...a)}f.length>0&&fD(a,...f),e.length>0&&fC(a,...e)}(b,c.theme,this);let e=a?a.__style:"",f=this.__style;e!==f&&(""===f?b.removeAttribute("style"):b.style.cssText=f),function(a,b,c){let d=fq(b.__textStyle);for(let b in d)a.style.setProperty(`--listitem-marker-${b}`,d[b]);if(c)for(let b in fq(c.__textStyle))b in d||a.style.removeProperty(`--listitem-marker-${b}`)}(b,this,a)}updateDOM(a,b,c){return this.updateListItemDOM(a,b,c),!1}updateFromJSON(a){return super.updateFromJSON(a).setValue(a.value).setChecked(a.checked)}exportDOM(a){let b=this.createDOM(a._config),c=this.getFormatType();c&&(b.style.textAlign=c);let d=this.getDirection();return d&&(b.dir=d),{element:b}}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),value:this.getValue()}}append(...a){for(let b=0;b<a.length;b++){let c=a[b];if(dh(c)&&this.canMergeWith(c)){let a=c.getChildren();this.append(...a),c.remove()}else super.append(c)}return this}replace(a,b){if(hd(a))return super.replace(a);this.setIndent(0);let c=this.getParentOrThrow();if(!hk(c))return a;if(c.__first===this.getKey())c.insertBefore(a);else if(c.__last===this.getKey())c.insertAfter(a);else{let b=hj(c.getListType()),d=this.getNextSibling();for(;d;){let a=d;d=d.getNextSibling(),b.append(a)}c.insertAfter(a),a.insertAfter(b)}return b&&(dh(a)||gZ(139),this.getChildren().forEach(b=>{a.append(b)})),this.remove(),0===c.getChildrenSize()&&c.remove(),a}insertAfter(a,b=!0){let c=this.getParentOrThrow();if(hk(c)||gZ(39),hd(a))return super.insertAfter(a,b);let d=this.getNextSiblings();if(c.insertAfter(a,b),0!==d.length){let e=hj(c.getListType());d.forEach(a=>e.append(a)),a.insertAfter(e,b)}return a}remove(a){let b=this.getPreviousSibling(),c=this.getNextSibling();super.remove(a),b&&c&&g0(b)&&g0(c)&&(g6(b.getFirstChild(),c.getFirstChild()),c.remove())}insertNewAfter(a,b=!0){let c=hc().updateFromJSON(this.exportJSON()).setChecked(!this.getChecked()&&void 0);return this.insertAfter(c,b),c}collapseAtStart(a){let b=du();this.getChildren().forEach(a=>b.append(a));let c=this.getParentOrThrow(),d=c.getParentOrThrow(),e=hd(d);if(1===c.getChildrenSize())if(e)c.remove(),d.select();else{c.insertBefore(b),c.remove();let d=a.anchor,e=a.focus,f=b.getKey();"element"===d.type&&d.getNode().is(this)&&d.set(f,d.offset,"element"),"element"===e.type&&e.getNode().is(this)&&e.set(f,e.offset,"element")}else c.insertBefore(b),this.remove();return!0}getValue(){return this.getLatest().__value}setValue(a){let b=this.getWritable();return b.__value=a,b}getChecked(){let a,b=this.getLatest(),c=this.getParent();return hk(c)&&(a=c.getListType()),"check"===a?!!b.__checked:void 0}setChecked(a){let b=this.getWritable();return b.__checked=a,b}toggleChecked(){let a=this.getWritable();return a.setChecked(!a.__checked)}getIndent(){let a=this.getParent();if(null===a||!this.isAttached())return this.getLatest().__indent;let b=a.getParentOrThrow(),c=0;for(;hd(b);)b=b.getParentOrThrow().getParentOrThrow(),c++;return c}setIndent(a){"number"!=typeof a&&gZ(117),(a=Math.floor(a))>=0||gZ(199);let b=this.getIndent();for(;b!==a;)b<a?(function(a){let b=new Set;if(g0(a)||b.has(a.getKey()))return;let c=a.getParent(),d=a.getNextSibling(),e=a.getPreviousSibling();if(g0(d)&&g0(e)){let c=e.getFirstChild();if(hk(c)){c.append(a);let e=d.getFirstChild();hk(e)&&(g4(c,e.getChildren()),d.remove(),b.add(d.getKey()))}}else if(g0(d)){let b=d.getFirstChild();if(hk(b)){let c=b.getFirstChild();null!==c&&c.insertBefore(a)}}else if(g0(e)){let b=e.getFirstChild();hk(b)&&b.append(a)}else if(hk(c)){let b=hc().setTextFormat(a.getTextFormat()).setTextStyle(a.getTextStyle()),f=hj(c.getListType()).setTextFormat(c.getTextFormat()).setTextStyle(c.getTextStyle());b.append(f),f.append(a),e?e.insertAfter(b):d?d.insertBefore(b):c.append(b)}}(this),b++):(function(a){if(g0(a))return;let b=a.getParent(),c=b?b.getParent():void 0;if(hk(c?c.getParent():void 0)&&hd(c)&&hk(b)){let d=b?b.getFirstChild():void 0,e=b?b.getLastChild():void 0;if(a.is(d))c.insertBefore(a),b.isEmpty()&&c.remove();else if(a.is(e))c.insertAfter(a),b.isEmpty()&&c.remove();else{let d=b.getListType(),e=hc(),f=hj(d);e.append(f),a.getPreviousSiblings().forEach(a=>f.append(a));let g=hc(),h=hj(d);g.append(h),g4(h,a.getNextSiblings()),c.insertBefore(e),c.insertAfter(g),c.replace(a)}}}(this),b--);return this}canInsertAfter(a){return hd(a)}canReplaceWith(a){return hd(a)}canMergeWith(a){return hd(a)||dv(a)}extractWithChild(a,b){if(!cw(b))return!1;let c=b.anchor.getNode(),d=b.focus.getNode();return this.isParentOf(c)&&this.isParentOf(d)&&this.getTextContent().length===b.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return hj("bullet")}canMergeWhenEmpty(){return!0}}function ha(a){if(a.classList.contains("task-list-item")){for(let b of a.children)if("INPUT"===b.tagName)return hb(b)}if(a.classList.contains("joplin-checkbox")){for(let b of a.children)if(b.classList.contains("checkbox-wrapper")&&b.children.length>0&&"INPUT"===b.children[0].tagName)return hb(b.children[0])}let b=a.getAttribute("aria-checked");return{node:hc("true"===b||"false"!==b&&void 0)}}function hb(a){return"checkbox"!==a.getAttribute("type")?{node:null}:{node:hc(a.hasAttribute("checked"))}}function hc(a){return ep(new g9(void 0,a))}function hd(a){return a instanceof g9}class he extends dg{__tag;__start;__listType;$config(){return this.config("list",{$transform:a=>{let b;hk(b=a.getNextSibling())&&a.getListType()===b.getListType()&&g6(a,b),g7(a)},extends:dg,importDOM:{ol:()=>({conversion:hh,priority:0}),ul:()=>({conversion:hh,priority:0})}})}constructor(a="number",b=1,c){super(c);const d=hi[a]||a;this.__listType=d,this.__tag="number"===d?"ol":"ul",this.__start=b}afterCloneFrom(a){super.afterCloneFrom(a),this.__listType=a.__listType,this.__tag=a.__tag,this.__start=a.__start}getTag(){return this.getLatest().__tag}setListType(a){let b=this.getWritable();return b.__listType=a,b.__tag="number"===a?"ol":"ul",b}getListType(){return this.getLatest().__listType}getStart(){return this.getLatest().__start}setStart(a){let b=this.getWritable();return b.__start=a,b}createDOM(a,b){let c=this.__tag,d=document.createElement(c);return 1!==this.__start&&d.setAttribute("start",String(this.__start)),d.__lexicalListType=this.__listType,hf(d,a.theme,this),d}updateDOM(a,b,c){return a.__tag!==this.__tag||a.__listType!==this.__listType||(hf(b,c.theme,this),!1)}updateFromJSON(a){return super.updateFromJSON(a).setListType(a.listType).setStart(a.start)}exportDOM(a){let b=this.createDOM(a._config,a);return eu(b)&&(1!==this.__start&&b.setAttribute("start",String(this.__start)),"check"===this.__listType&&b.setAttribute("__lexicalListType","check")),{element:b}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag()}}canBeEmpty(){return!1}canIndent(){return!1}splice(a,b,c){let d=c;for(let a=0;a<c.length;a++){let b=c[a];hd(b)||(d===c&&(d=[...c]),d[a]=hc().append(!dh(b)||hk(b)||b.isInline()?b:cl(b.getTextContent())))}return super.splice(a,b,d)}extractWithChild(a){return hd(a)}}function hf(a,b,c){let d=[],e=[],f=b.list;if(void 0!==f){let a,b=f[`${c.__tag}Depth`]||[],g=g$(c)-1,h=g%b.length,i=b[h],j=f[c.__tag],k=f.nested,l=f.checklist;if(void 0!==k&&k.list&&(a=k.list),void 0!==j&&d.push(j),void 0!==l&&"check"===c.__listType&&d.push(l),void 0!==i){d.push(...g8(i));for(let a=0;a<b.length;a++)a!==h&&e.push(c.__tag+a)}if(void 0!==a){let b=g8(a);g>1?d.push(...b):e.push(...b)}}e.length>0&&fD(a,...e),d.length>0&&fC(a,...d)}function hg(a){let b=[];for(let c=0;c<a.length;c++){let d=a[c];if(hd(d)){b.push(d);let a=d.getChildren();a.length>1&&a.forEach(a=>{hk(a)&&b.push(g1(a))})}else b.push(g1(d))}return b}function hh(a){let b=a.nodeName.toLowerCase(),c=null;return"ol"===b?c=hj("number",a.start):"ul"===b&&(c=!function(a){if("check"===a.getAttribute("__lexicallisttype")||a.classList.contains("contains-task-list")||"1"===a.getAttribute("data-is-checklist"))return!0;for(let b of a.childNodes)if(eu(b)&&b.hasAttribute("aria-checked"))return!0;return!1}(a)?hj("bullet"):hj("check")),{after:hg,node:c}}let hi={ol:"number",ul:"bullet"};function hj(a="number",b=1){return ep(new he(a,b))}function hk(a){return a instanceof he}aE("INSERT_CHECK_LIST_COMMAND");let hl=aE("UPDATE_LIST_START_COMMAND"),hm=aE("INSERT_UNORDERED_LIST_COMMAND"),hn=aE("INSERT_ORDERED_LIST_COMMAND"),ho=aE("REMOVE_LIST_COMMAND");function hp({hasStrictIndent:a=!1}){let[b]=x();return(0,e.useEffect)(()=>{if(!b.hasNodes([he,g9]))throw Error("ListPlugin: ListNode and/or ListItemNode not registered on editor")},[b]),(0,e.useEffect)(()=>{if(a){var c;let a;return c=b,a=a=>{let b=a.getParent();if(hk(a.getFirstChild())||!hk(b))return;let c=eH(a,a=>hd(a)&&hk(a.getParent())&&hd(a.getPreviousSibling()));if(null===c&&a.getIndent()>0)a.setIndent(0);else if(hd(c)){let d=c.getPreviousSibling();if(hd(d)){let c=(function(a){let b=a,c=b.getFirstChild();for(;hk(c);){let a=c.getLastChild();if(!hd(a))break;c=(b=a).getFirstChild()}return b})(d).getParent();if(hk(c)){let d=g$(c);d+1<g$(b)&&a.setIndent(d)}}}},c.registerNodeTransform(he,b=>{let c=[b];for(;c.length>0;){let b=c.shift();if(hk(b)){for(let d of b.getChildren())if(hd(d)){a(d);let b=d.getFirstChild();hk(b)&&c.push(b)}}}})}},[b,a]),(0,e.useEffect)(()=>{var a;return fB((a=b).registerCommand(hn,()=>(g3("number"),!0),1),a.registerCommand(hl,a=>{let{listNodeKey:b,newStart:c}=a,d=dU(b);return!!hk(d)&&("number"===d.getListType()&&(d.setStart(c),g7(d)),!0)},1),a.registerCommand(hm,()=>(g3("bullet"),!0),1),a.registerCommand(ho,()=>((function(){let a=cN();if(cw(a)){let b=new Set,c=a.getNodes(),d=a.anchor.getNode();if(g2(d,c))b.add(g_(d));else for(let a=0;a<c.length;a++){let d=c[a];if(dP(d)){let a=function(a,b){let c=a;for(;null!=c;){if(c instanceof b)return c;c=c.getParent()}return null}(d,g9);null!=a&&b.add(g_(a))}}for(let c of b){let b=c;for(let d of function a(b){let c=[],d=b.getChildren().filter(hd);for(let b=0;b<d.length;b++){let e=d[b],f=e.getFirstChild();hk(f)?c=c.concat(a(f)):c.push(e)}return c}(c)){let c=du().setTextStyle(a.style).setTextFormat(a.format);g4(c,d.getChildren()),b.insertAfter(c),b=c,d.__key===a.anchor.key&&e8(a.anchor,fe(eY(c,"next"))),d.__key===a.focus.key&&e8(a.focus,fe(eY(c,"next"))),d.remove()}c.remove()}}})(),!0),1),a.registerCommand(aO,()=>(function(){let a,b=cN();if(!cw(b)||!b.isCollapsed())return!1;let c=b.anchor.getNode();if(!hd(c)||0!==c.getChildrenSize())return!1;let d=g_(c),e=c.getParent();hk(e)||gZ(40);let f=e.getParent();if(eo(f))a=du(),d.insertAfter(a);else{if(!hd(f))return!1;a=hc(),f.insertAfter(a)}a.setTextStyle(b.style).setTextFormat(b.format).select();let g=c.getNextSiblings();if(g.length>0){let b=hj(e.getListType());if(hd(a)){let c=hc();c.append(b),a.insertAfter(c)}else a.insertAfter(b);b.append(...g)}return function(a){let b=a;for(;null==b.getNextSibling()&&null==b.getPreviousSibling();){let a=b.getParent();if(null==a||!hd(a)&&!hk(a))break;b=a}b.remove()}(c),!0})(),1),a.registerNodeTransform(g9,a=>{let b=a.getFirstChild();if(b){if(cm(b)){let c=b.getStyle(),d=b.getFormat();a.getTextStyle()!==c&&a.setTextStyle(c),a.getTextFormat()!==d&&a.setTextFormat(d)}}else{let b=cN();cw(b)&&(b.style!==a.getTextStyle()||b.format!==a.getTextFormat())&&b.isCollapsed()&&a.is(b.anchor.getNode())&&a.setTextStyle(b.style).setTextFormat(b.format)}}),a.registerNodeTransform(cd,a=>{let b=a.getParent();if(hd(b)&&a.is(b.getFirstChild())){let c=a.getStyle(),d=a.getFormat();c===b.getTextStyle()&&d===b.getTextFormat()||b.setTextStyle(c).setTextFormat(d)}}))},[b]),null}var hq=a.i(86945);let hr=(0,j.default)("bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]),hs=(0,j.default)("italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]),ht=(0,j.default)("underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]),hu=(0,j.default)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]),hv=(0,j.default)("list-ordered",[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]]),hw=(0,j.default)("quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]),hx=(0,j.default)("heading-1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]),hy=(0,j.default)("heading-2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]),hz=(0,j.default)("heading-3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);var hA=a.i(24259);let hB=(0,j.default)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);function hC(){let[a]=x(),[b,c]=e.useState(!1),[f,g]=e.useState(!1),[i,j]=e.useState(!1),k=e.useCallback(()=>{let a=cN();cw(a)&&(c(a.hasFormat("bold")),g(a.hasFormat("italic")),j(a.hasFormat("underline")))},[]);e.useEffect(()=>a.registerUpdateListener(({editorState:a})=>{a.read(()=>{k()})}),[a,k]);let l=b=>{a.update(()=>{let a=cN();if(cw(a)){let c=gr(b);a.insertNodes([c])}})},[m,n]=e.useState(!1),[q,r]=e.useState(""),[s,t]=e.useState("");return(0,d.jsxs)("div",{className:"flex items-center gap-1 border-b p-2",children:[(0,d.jsx)(h.Button,{variant:"ghost",size:"icon",onClick:()=>a.dispatchCommand(aU,"bold"),className:b?"bg-muted":"",children:(0,d.jsx)(hr,{className:"size-4"})}),(0,d.jsx)(h.Button,{variant:"ghost",size:"icon",onClick:()=>a.dispatchCommand(aU,"italic"),className:f?"bg-muted":"",children:(0,d.jsx)(hs,{className:"size-4"})}),(0,d.jsx)(h.Button,{variant:"ghost",size:"icon",onClick:()=>a.dispatchCommand(aU,"underline"),className:i?"bg-muted":"",children:(0,d.jsx)(ht,{className:"size-4"})}),(0,d.jsx)("div",{className:"mx-1 h-6 w-px bg-border"}),(0,d.jsx)(h.Button,{variant:"ghost",size:"icon",onClick:()=>l("h1"),title:"Heading 1",children:(0,d.jsx)(hx,{className:"size-4"})}),(0,d.jsx)(h.Button,{variant:"ghost",size:"icon",onClick:()=>l("h2"),title:"Heading 2",children:(0,d.jsx)(hy,{className:"size-4"})}),(0,d.jsx)(h.Button,{variant:"ghost",size:"icon",onClick:()=>l("h3"),title:"Heading 3",children:(0,d.jsx)(hz,{className:"size-4"})}),(0,d.jsx)("div",{className:"mx-1 h-6 w-px bg-border"}),(0,d.jsx)(h.Button,{variant:"ghost",size:"icon",onClick:()=>a.dispatchCommand(hm,void 0),title:"Bullet List",children:(0,d.jsx)(hu,{className:"size-4"})}),(0,d.jsx)(h.Button,{variant:"ghost",size:"icon",onClick:()=>a.dispatchCommand(hn,void 0),title:"Numbered List",children:(0,d.jsx)(hv,{className:"size-4"})}),(0,d.jsx)(h.Button,{variant:"ghost",size:"icon",onClick:()=>{a.update(()=>{let a=cN();if(cw(a)){let b=gm();a.insertNodes([b])}})},title:"Quote",children:(0,d.jsx)(hw,{className:"size-4"})}),(0,d.jsx)("div",{className:"mx-1 h-6 w-px bg-border"}),(0,d.jsxs)(hq.Dialog,{open:m,onOpenChange:n,children:[(0,d.jsx)(hq.DialogTrigger,{asChild:!0,children:(0,d.jsx)(h.Button,{variant:"ghost",size:"icon",title:"Insert Link",children:(0,d.jsx)(hA.Link,{className:"size-4"})})}),(0,d.jsxs)(hq.DialogContent,{children:[(0,d.jsx)(hq.DialogHeader,{children:(0,d.jsx)(hq.DialogTitle,{children:"Insert Link"})}),(0,d.jsxs)("div",{className:"space-y-4 py-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(p.Label,{htmlFor:"link-url",children:"URL"}),(0,d.jsx)(o.Input,{id:"link-url",type:"url",placeholder:"https://example.com",value:q,onChange:a=>r(a.target.value)})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(p.Label,{htmlFor:"link-text",children:"Link Text (optional)"}),(0,d.jsx)(o.Input,{id:"link-text",placeholder:"Link text",value:s,onChange:a=>t(a.target.value)})]}),(0,d.jsx)(h.Button,{onClick:()=>{a.update(()=>{let b=cN();if(cw(b))if(b.isCollapsed()){let a=gN(q||"https://",{target:"_blank"});du(),b.insertNodes([a])}else{let b=q||"https://";a.dispatchCommand(gS,b)}n(!1),r(""),t("")})},className:"w-full",children:"Insert Link"})]})]})]}),(0,d.jsx)(h.Button,{variant:"ghost",size:"icon",onClick:()=>{a.update(()=>{let a=d$(),b=du();a.append(b);let c=du();c.setFormat("center"),a.append(c)})},title:"Divider",children:(0,d.jsx)(hB,{className:"size-4"})})]})}let hD={namespace:"ProsFinEditor",theme:{paragraph:"mb-2",heading:{h1:"text-4xl font-bold mb-4",h2:"text-3xl font-bold mb-3",h3:"text-2xl font-bold mb-2"},quote:"border-l-4 border-gray-300 pl-4 italic my-4",list:{nested:{listitem:"ml-4"},ol:"list-decimal ml-6 my-2",ul:"list-disc ml-6 my-2",listitem:"my-1"},link:"text-blue-600 underline hover:text-blue-800",text:{bold:"font-bold",italic:"italic",underline:"underline"}},nodes:[gn,gl,he,g9,gL],onError:a=>{console.error("Lexical error:",a)}};function hE({placeholder:a}){let b=a||"Start writing...";return(0,d.jsx)(gE,{className:"min-h-[600px] outline-none prose prose-lg max-w-none","aria-placeholder":b,placeholder:(0,d.jsx)("div",{className:"absolute top-0 left-0 text-muted-foreground pointer-events-none",children:b})})}function hF({onChange:a}){let[b]=x();return e.useEffect(()=>b.registerUpdateListener(({editorState:b})=>{b.read(()=>{let c=b.toJSON();a?.(c)})}),[b,a]),null}function hG({initialContent:a}){let[b]=x(),[c,d]=e.useState(!1);return e.useEffect(()=>{if(a&&!c&&b)try{let c=b.parseEditorState(a);b.setEditorState(c),d(!0)}catch(a){console.error("Failed to parse initial content:",a)}},[b,a,c]),null}function hH({initialContent:a,onChange:b,placeholder:c="Start writing...",className:e}){return(0,d.jsx)(fl,{initialConfig:hD,children:(0,d.jsxs)("div",{className:`flex flex-col border rounded-lg ${e}`,children:[(0,d.jsx)(hC,{}),(0,d.jsxs)("div",{className:"p-4",children:[(0,d.jsx)(gz,{contentEditable:(0,d.jsx)(hE,{placeholder:c}),placeholder:null,ErrorBoundary:({children:a})=>(0,d.jsx)(d.Fragment,{children:a})}),(0,d.jsx)(gJ,{}),(0,d.jsx)(gY,{}),(0,d.jsx)(hp,{}),(0,d.jsx)(hF,{onChange:b}),a&&(0,d.jsx)(hG,{initialContent:a})]})]})})}function hI({content:a,onChange:b}){return(0,d.jsx)("div",{className:"space-y-4",children:(0,d.jsx)(hH,{initialContent:a,onChange:b,placeholder:"Start writing your post...",className:"min-h-[600px]"})})}var hJ=a.i(42133);function hK({params:b}){let{slug:c}=(0,e.use)(b),[f,g]=e.useState(null),[h,i]=e.useState(!0),[j,k]=e.useState(null);e.useEffect(()=>{if("new"===c){i(!1),k({title:"",slug:"",bucket:"insights",excerpt:"",cover:"",tags:[],content:{root:{children:[],direction:"ltr",format:"",indent:0,type:"root",version:1}},status:"draft"});return}(async()=>{try{let{listPosts:b}=await a.A(80439),d=(await b()).find(a=>a.slug===c);if(d){let{getPostById:b}=await a.A(80439),c=await b(d.id);g(c),c&&k({title:c.title,slug:c.slug,bucket:c.bucket,excerpt:c.excerpt,cover:c.cover,tags:c.tags,content:c.content,seoTitle:c.seoTitle,seoDescription:c.seoDescription,canonical:c.canonical,noindex:c.noindex,status:c.status,scheduledFor:c.scheduledFor})}}catch(a){console.error("Failed to load post:",a)}finally{i(!1)}})()},[c]);let l=async a=>{await (0,hJ.saveDraft)(a,f?.id),f&&g(await (0,hJ.getPostById)(f.id))},m=async a=>{if(f)await (0,hJ.publish)(f.id);else{let b=await (0,hJ.saveDraft)(a);await (0,hJ.publish)(b.id)}};return h?(0,d.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,d.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})}):j?(0,d.jsx)(v,{post:f||void 0,onSave:l,onPublish:m,formData:j,onFormDataChange:k,children:(0,d.jsx)(hI,{content:j.content,onChange:a=>{k({...j,content:a})}})}):(0,d.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,d.jsx)("p",{className:"text-muted-foreground",children:"Post not found"})})}a.s(["default",()=>hK],3221)}];

//# sourceMappingURL=apps_admin_src_app_%28app%29_content_%5Bslug%5D_page_tsx_3f5ccc98._.js.map