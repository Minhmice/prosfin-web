{"version":3,"sources":["../../../../../../apps/admin/src/components/clients/client-detail-drawer.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { Sheet, SheetContent, SheetHeader, SheetTitle, Tabs, TabsList, TabsTrigger, TabsContent, Badge, Button } from \"@prosfin/ui\";\r\nimport { X, User } from \"lucide-react\";\r\nimport { format } from \"date-fns\";\r\nimport type { Client } from \"@/types/admin\";\r\nimport { ActivityTimeline } from \"@/components/leads/activity-timeline\";\r\nimport { NotesSection } from \"@/components/leads/notes-section\";\r\n\r\ninterface ClientDetailDrawerProps {\r\n  client: Client | null;\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n}\r\n\r\nconst statusColors: Record<Client[\"status\"], string> = {\r\n  active: \"bg-green-100 text-green-800\",\r\n  inactive: \"bg-gray-100 text-gray-800\",\r\n  onboarding: \"bg-yellow-100 text-yellow-800\",\r\n};\r\n\r\nexport function ClientDetailDrawer({ client, open, onOpenChange }: ClientDetailDrawerProps) {\r\n  const router = useRouter();\r\n\r\n  const handleClose = React.useCallback(() => {\r\n    router.push(\"/clients\");\r\n    onOpenChange(false);\r\n  }, [router, onOpenChange]);\r\n\r\n  React.useEffect(() => {\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === \"Escape\" && open) {\r\n        handleClose();\r\n      }\r\n    };\r\n    document.addEventListener(\"keydown\", handleEscape);\r\n    return () => document.removeEventListener(\"keydown\", handleEscape);\r\n  }, [open, handleClose]);\r\n\r\n  if (!client) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Sheet open={open} onOpenChange={handleClose}>\r\n      <SheetContent className=\"w-full sm:max-w-2xl overflow-y-auto\">\r\n        <SheetHeader className=\"sticky top-0 bg-background z-10 pb-4 border-b\">\r\n          <div className=\"flex items-start justify-between\">\r\n            <div className=\"flex-1\">\r\n              <SheetTitle className=\"text-lg font-semibold mb-2\">\r\n                {client.companyName}\r\n              </SheetTitle>\r\n              <div className=\"flex items-center gap-2 flex-wrap\">\r\n                <Badge className={statusColors[client.status]}>\r\n                  {client.status}\r\n                </Badge>\r\n                {client.owner && (\r\n                  <Badge variant=\"outline\" className=\"flex items-center gap-1\">\r\n                    <User className=\"size-3\" />\r\n                    {client.owner}\r\n                  </Badge>\r\n                )}\r\n              </div>\r\n            </div>\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              onClick={handleClose}\r\n              className=\"h-8 w-8\"\r\n            >\r\n              <X className=\"size-4\" />\r\n            </Button>\r\n          </div>\r\n        </SheetHeader>\r\n\r\n        <div className=\"mt-6\">\r\n          <Tabs defaultValue=\"overview\" className=\"w-full\">\r\n            <TabsList className=\"grid w-full grid-cols-4\">\r\n              <TabsTrigger value=\"overview\">Overview</TabsTrigger>\r\n              <TabsTrigger value=\"activity\">Activity</TabsTrigger>\r\n              <TabsTrigger value=\"notes\">Notes</TabsTrigger>\r\n              <TabsTrigger value=\"leads\">Linked Leads</TabsTrigger>\r\n            </TabsList>\r\n\r\n            <TabsContent value=\"overview\" className=\"mt-4\">\r\n              <div className=\"space-y-6\">\r\n                <div>\r\n                  <h3 className=\"text-sm font-medium text-muted-foreground mb-3\">Contact Information</h3>\r\n                  <div className=\"space-y-3\">\r\n                    <div>\r\n                      <label className=\"text-xs text-muted-foreground\">Company Name</label>\r\n                      <p className=\"text-sm font-medium\">{client.companyName}</p>\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"text-xs text-muted-foreground\">Primary Contact</label>\r\n                      <p className=\"text-sm font-medium\">{client.contactName}</p>\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"text-xs text-muted-foreground\">Email</label>\r\n                      <p className=\"text-sm font-medium\">{client.email}</p>\r\n                    </div>\r\n                    {client.phone && (\r\n                      <div>\r\n                        <label className=\"text-xs text-muted-foreground\">Phone</label>\r\n                        <p className=\"text-sm font-medium\">{client.phone}</p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                <div>\r\n                  <h3 className=\"text-sm font-medium text-muted-foreground mb-3\">Dates</h3>\r\n                  <div className=\"space-y-2\">\r\n                    <div>\r\n                      <label className=\"text-xs text-muted-foreground\">Created</label>\r\n                      <p className=\"text-sm font-medium\">\r\n                        {format(new Date(client.createdAt), \"MMM dd, yyyy HH:mm\")}\r\n                      </p>\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"text-xs text-muted-foreground\">Last Updated</label>\r\n                      <p className=\"text-sm font-medium\">\r\n                        {format(new Date(client.updatedAt), \"MMM dd, yyyy HH:mm\")}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </TabsContent>\r\n\r\n            <TabsContent value=\"activity\" className=\"mt-4\">\r\n              {client.timeline && client.timeline.length > 0 ? (\r\n                <ActivityTimeline events={client.timeline} />\r\n              ) : (\r\n                <div className=\"text-center py-8 text-muted-foreground\">\r\n                  <p className=\"text-sm\">No activity yet</p>\r\n                </div>\r\n              )}\r\n            </TabsContent>\r\n\r\n            <TabsContent value=\"notes\" className=\"mt-4\">\r\n              <NotesSection lead={null as any} />\r\n            </TabsContent>\r\n\r\n            <TabsContent value=\"leads\" className=\"mt-4\">\r\n              {client.linkedLeads && client.linkedLeads.length > 0 ? (\r\n                <div className=\"space-y-2\">\r\n                  <p className=\"text-sm text-muted-foreground\">\r\n                    {client.linkedLeads.length} linked lead(s)\r\n                  </p>\r\n                  {client.linkedLeads.map((leadId) => (\r\n                    <Button\r\n                      key={leadId}\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      onClick={() => router.push(`/leads/${leadId}`)}\r\n                      className=\"w-full justify-start\"\r\n                    >\r\n                      View Lead: {leadId}\r\n                    </Button>\r\n                  ))}\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-center py-8 text-muted-foreground\">\r\n                  <p className=\"text-sm\">No linked leads</p>\r\n                </div>\r\n              )}\r\n            </TabsContent>\r\n          </Tabs>\r\n        </div>\r\n      </SheetContent>\r\n    </Sheet>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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"}