module.exports=[24433,a=>{"use strict";var b=a.i(69825);function c(a,c){let n,o,p=c?.additionalDigits??2,q=function(a){let b,c={},g=a.split(d);if(g.length>2)return c;if(/:/.test(g[0])?b=g[0]:(c.date=g[0],b=g[1],e.test(c.date)&&(c.date=a.split(e)[0],b=a.substr(c.date.length,a.length))),b){let a=f.exec(b);a?(c.time=b.replace(a[1],""),c.timezone=a[1]):c.time=b}return c}(a);if(q.date){let a=function(a,b){let c=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+b)+"})|(\\d{2}|[+-]\\d{"+(2+b)+"})$)"),d=a.match(c);if(!d)return{year:NaN,restDateString:""};let e=d[1]?parseInt(d[1]):null,f=d[2]?parseInt(d[2]):null;return{year:null===f?e:100*f,restDateString:a.slice((d[1]||d[2]).length)}}(q.date,p);n=function(a,b){var c,d,e,f,h,i,k,n,o,p;if(null===b)return new Date(NaN);let q=a.match(g);if(!q)return new Date(NaN);let r=!!q[4],s=j(q[1]),t=j(q[2])-1,u=j(q[3]),v=j(q[4]),w=j(q[5])-1;if(r){let a,g;return(c=v,d=w,c>=1&&c<=53&&d>=0&&d<=6)?(e=b,f=v,h=w,(a=new Date(0)).setUTCFullYear(e,0,4),g=a.getUTCDay()||7,a.setUTCDate(a.getUTCDate()+((f-1)*7+h+1-g)),a):new Date(NaN)}{let a=new Date(0);return(i=b,k=t,n=u,k>=0&&k<=11&&n>=1&&n<=(l[k]||(m(i)?29:28))&&(o=b,(p=s)>=1&&p<=(m(o)?366:365)))?(a.setUTCFullYear(b,t,Math.max(s,u)),a):new Date(NaN)}}(a.restDateString,a.year)}if(!n||isNaN(n.getTime()))return new Date(NaN);let r=n.getTime(),s=0;if(q.time&&isNaN(s=function(a){var c,d,e;let f=a.match(h);if(!f)return NaN;let g=k(f[1]),i=k(f[2]),j=k(f[3]);return(c=g,d=i,e=j,24===c?0===d&&0===e:e>=0&&e<60&&d>=0&&d<60&&c>=0&&c<25)?g*b.millisecondsInHour+i*b.millisecondsInMinute+1e3*j:NaN}(q.time)))return new Date(NaN);if(q.timezone){if(isNaN(o=function(a){var c;if("Z"===a)return 0;let d=a.match(i);if(!d)return 0;let e="+"===d[1]?-1:1,f=parseInt(d[2]),g=d[3]&&parseInt(d[3])||0;return(c=g)>=0&&c<=59?e*(f*b.millisecondsInHour+g*b.millisecondsInMinute):NaN}(q.timezone)))return new Date(NaN)}else{let a=new Date(r+s),b=new Date(0);return b.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),b.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),b}return new Date(r+s+o)}let d=/[T ]/,e=/[Z ]/i,f=/([Z+-].*)$/,g=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,h=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,i=/^([+-])(\d{2})(?::?(\d{2}))?$/;function j(a){return a?parseInt(a):1}function k(a){return a&&parseFloat(a.replace(",","."))||0}let l=[31,null,31,30,31,30,31,31,30,31,30,31];function m(a){return a%400==0||a%4==0&&a%100!=0}a.s(["parseISO",()=>c])},33548,a=>{"use strict";let b=(0,a.i(28761).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);a.s(["ArrowRight",()=>b],33548)},12741,a=>{"use strict";let b=(0,a.i(28761).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);a.s(["CheckCircle2",()=>b],12741)},24259,a=>{"use strict";let b=(0,a.i(28761).default)("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);a.s(["Link",()=>b],24259)},27976,a=>{"use strict";var b=a.i(7945);a.s(["X",()=>b.default])},69708,a=>{"use strict";var b=a.i(49377);a.s(["showToast",0,{success:a=>{b.toast.success(a)},error:a=>{b.toast.error(a)},info:a=>{b.toast.info(a)},promise:(a,c)=>b.toast.promise(a,c)}])},48016,72962,a=>{"use strict";var b=a.i(42093),c=a.i(85455),d=a.i(64964),e=a.i(24433);a.i(56120);var f=a.i(37717),g=a.i(12741),h=a.i(28761);let i=(0,h.default)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]);var j=a.i(56545),k=a.i(33548),l=a.i(24259),m=a.i(79333);let n={submitted:m.FileText,verified:g.CheckCircle2,qualified:g.CheckCircle2,meeting:g.CheckCircle2,converted:g.CheckCircle2,note:i,contacted:i,status_changed:k.ArrowRight,note_added:i,owner_changed:j.User,converted_to_client:k.ArrowRight,campaign_linked:l.Link},o={submitted:"text-blue-600",verified:"text-green-600",qualified:"text-green-600",meeting:"text-purple-600",converted:"text-gray-600",note:"text-gray-600",contacted:"text-yellow-600",status_changed:"text-blue-600",note_added:"text-gray-600",owner_changed:"text-orange-600",converted_to_client:"text-green-600",campaign_linked:"text-blue-600"};function p(a){return a.description?a.description:"note_added"===a.type&&a.payload?.noteText?a.payload.noteText:null}function q({events:a}){if(0===a.length)return(0,b.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:(0,b.jsx)("p",{className:"text-sm",children:"No activity yet"})});let g=c.useMemo(()=>{let b={};return a.forEach(a=>{let c=(0,e.parseISO)(a.timestamp),f=(0,d.format)(c,"yyyy-MM-dd");b[f]||(b[f]=[]),b[f].push(a)}),Object.entries(b).sort((a,b)=>b[0].localeCompare(a[0])).map(([a,b])=>({day:(0,e.parseISO)(a),events:b.sort((a,b)=>(0,e.parseISO)(b.timestamp).getTime()-(0,e.parseISO)(a.timestamp).getTime())}))},[a]);return(0,b.jsx)("div",{className:"space-y-6",children:g.map(({day:a,events:c})=>(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"sticky top-0 bg-background z-10 py-2 mb-4",children:(0,b.jsx)("h4",{className:"text-sm font-semibold text-muted-foreground",children:(0,d.format)(a,"EEEE, MMMM dd, yyyy")})}),(0,b.jsx)("div",{className:"space-y-4",children:c.map(a=>{let g=n[a.type]||m.FileText,h=o[a.type]||"text-gray-600";return(0,b.jsxs)("div",{className:"relative flex gap-4",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("div",{className:`rounded-full p-2 bg-muted ${h}`,children:(0,b.jsx)(g,{className:"size-4"})}),a!==c[c.length-1]&&(0,b.jsx)("div",{className:"w-px h-full bg-border mt-2"})]}),(0,b.jsx)("div",{className:"flex-1 pb-4",children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:function(a){if("status_changed"===a.type&&a.payload){let{oldStatus:b,newStatus:c}=a.payload;if(b&&c)return`Status changed from ${b} to ${c}`}if("owner_changed"===a.type&&a.payload){let{oldOwner:b,newOwner:c}=a.payload;if(void 0!==b||void 0!==c)return`Owner changed${b?` from ${b}`:""}${c?` to ${c}`:" (unassigned)"}`}return"converted_to_client"===a.type&&a.payload?.clientId?`Converted to client (${a.payload.clientId})`:a.title}(a)}),p(a)&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:p(a)}),a.payload&&(0,b.jsxs)("div",{className:"mt-2 space-y-1",children:[a.payload.oldStatus&&a.payload.newStatus&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(f.Badge,{variant:"outline",className:"text-xs",children:a.payload.oldStatus}),(0,b.jsx)(k.ArrowRight,{className:"size-3 text-muted-foreground"}),(0,b.jsx)(f.Badge,{variant:"outline",className:"text-xs",children:a.payload.newStatus})]}),void 0!==a.payload.oldOwner&&void 0!==a.payload.newOwner&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,b.jsx)("span",{children:a.payload.oldOwner||"Unassigned"}),(0,b.jsx)(k.ArrowRight,{className:"size-3"}),(0,b.jsx)("span",{children:a.payload.newOwner||"Unassigned"})]})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,d.format)((0,e.parseISO)(a.timestamp),"HH:mm")}),a.actor&&(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["by ",a.actor]})]})]})})]},a.id)})})]},(0,d.format)(a,"yyyy-MM-dd")))})}a.s(["ActivityTimeline",()=>q],48016);var r=a.i(27725),s=a.i(51367);let t=(0,h.default)("pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]),u=(0,h.default)("pin-off",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89",key:"znwnzq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11",key:"c9qhm2"}]]);var v=a.i(69708);let w=[{label:"Đã liên hệ",text:"Đã liên hệ với khách hàng."},{label:"Chờ phản hồi",text:"Đang chờ phản hồi từ khách hàng."},{label:"Đặt lịch",text:"Đã đặt lịch hẹn với khách hàng."}];function x({lead:a,onNoteAdded:e}){let[g,h]=c.useState(""),[j,k]=c.useState(new Set),l=c.useMemo(()=>(a.timeline||[]).filter(a=>"note"===a.type||"note_added"===a.type),[a.timeline]),m=c.useMemo(()=>[...l].sort((a,b)=>{let c=j.has(a.id),d=j.has(b.id);return c&&!d?-1:!c&&d?1:new Date(b.timestamp).getTime()-new Date(a.timestamp).getTime()}),[l,j]);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Add Note"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(s.Textarea,{placeholder:"Add a note...",value:g,onChange:a=>h(a.target.value),rows:4,className:"resize-none"}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"Quick templates:"}),w.map(a=>(0,b.jsx)(r.Button,{variant:"outline",size:"sm",onClick:()=>{h(a.text)},className:"h-7 text-xs",children:a.label},a.label))]}),(0,b.jsx)(r.Button,{onClick:()=>{g.trim()?(e?.(g),h(""),v.showToast.success("Note added")):v.showToast.error("Note cannot be empty")},size:"sm",children:"Add Note"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:["Notes (",l.length,")"]}),0===m.length?(0,b.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,b.jsx)(i,{className:"mx-auto size-8 mb-2 opacity-50"}),(0,b.jsx)("p",{className:"text-sm",children:"No notes yet"})]}):(0,b.jsx)("div",{className:"space-y-3",children:m.map(a=>{let c=j.has(a.id),e=a.payload?.noteText||a.description||a.title;return(0,b.jsx)("div",{className:`rounded-lg border p-3 ${c?"bg-muted/50 border-primary":""}`,children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,b.jsxs)("div",{className:"flex-1",children:[c&&(0,b.jsxs)(f.Badge,{variant:"outline",className:"mb-2 text-xs",children:[(0,b.jsx)(t,{className:"mr-1 size-3"}),"Pinned"]}),(0,b.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:(0,d.format)(new Date(a.timestamp),"MMM dd, yyyy HH:mm")}),a.actor&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"•"}),(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:["by ",a.actor]})]})]})]}),(0,b.jsx)(r.Button,{variant:"ghost",size:"icon",onClick:()=>{var b;return b=a.id,void k(a=>{let c=new Set(a);return c.has(b)?c.delete(b):c.add(b),c})},className:"h-7 w-7 shrink-0",title:c?"Unpin note":"Pin note",children:c?(0,b.jsx)(t,{className:"size-4 text-primary"}):(0,b.jsx)(u,{className:"size-4"})})]})},a.id)})})]})]})}a.s(["NotesSection",()=>x],72962)}];

//# sourceMappingURL=_d6ba1404._.js.map